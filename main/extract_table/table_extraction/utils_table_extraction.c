/* Generated by Cython 0.29 */

#define PY_SSIZE_T_CLEAN
#include "Python.h"
#ifndef Py_PYTHON_H
    #error Python headers needed to compile C extensions, please install development version of Python.
#elif PY_VERSION_HEX < 0x02060000 || (0x03000000 <= PY_VERSION_HEX && PY_VERSION_HEX < 0x03030000)
    #error Cython requires Python 2.6+ or Python 3.3+.
#else
#define CYTHON_ABI "0_29"
#define CYTHON_HEX_VERSION 0x001D00F0
#define CYTHON_FUTURE_DIVISION 0
#include <stddef.h>
#ifndef offsetof
  #define offsetof(type, member) ( (size_t) & ((type*)0) -> member )
#endif
#if !defined(WIN32) && !defined(MS_WINDOWS)
  #ifndef __stdcall
    #define __stdcall
  #endif
  #ifndef __cdecl
    #define __cdecl
  #endif
  #ifndef __fastcall
    #define __fastcall
  #endif
#endif
#ifndef DL_IMPORT
  #define DL_IMPORT(t) t
#endif
#ifndef DL_EXPORT
  #define DL_EXPORT(t) t
#endif
#define __PYX_COMMA ,
#ifndef HAVE_LONG_LONG
  #if PY_VERSION_HEX >= 0x02070000
    #define HAVE_LONG_LONG
  #endif
#endif
#ifndef PY_LONG_LONG
  #define PY_LONG_LONG LONG_LONG
#endif
#ifndef Py_HUGE_VAL
  #define Py_HUGE_VAL HUGE_VAL
#endif
#ifdef PYPY_VERSION
  #define CYTHON_COMPILING_IN_PYPY 1
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #undef CYTHON_USE_TYPE_SLOTS
  #define CYTHON_USE_TYPE_SLOTS 0
  #undef CYTHON_USE_PYTYPE_LOOKUP
  #define CYTHON_USE_PYTYPE_LOOKUP 0
  #if PY_VERSION_HEX < 0x03050000
    #undef CYTHON_USE_ASYNC_SLOTS
    #define CYTHON_USE_ASYNC_SLOTS 0
  #elif !defined(CYTHON_USE_ASYNC_SLOTS)
    #define CYTHON_USE_ASYNC_SLOTS 1
  #endif
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #undef CYTHON_USE_UNICODE_INTERNALS
  #define CYTHON_USE_UNICODE_INTERNALS 0
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #undef CYTHON_AVOID_BORROWED_REFS
  #define CYTHON_AVOID_BORROWED_REFS 1
  #undef CYTHON_ASSUME_SAFE_MACROS
  #define CYTHON_ASSUME_SAFE_MACROS 0
  #undef CYTHON_UNPACK_METHODS
  #define CYTHON_UNPACK_METHODS 0
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
  #undef CYTHON_PEP489_MULTI_PHASE_INIT
  #define CYTHON_PEP489_MULTI_PHASE_INIT 0
  #undef CYTHON_USE_TP_FINALIZE
  #define CYTHON_USE_TP_FINALIZE 0
  #undef CYTHON_USE_DICT_VERSIONS
  #define CYTHON_USE_DICT_VERSIONS 0
  #undef CYTHON_USE_EXC_INFO_STACK
  #define CYTHON_USE_EXC_INFO_STACK 0
#elif defined(PYSTON_VERSION)
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 1
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #undef CYTHON_USE_PYTYPE_LOOKUP
  #define CYTHON_USE_PYTYPE_LOOKUP 0
  #undef CYTHON_USE_ASYNC_SLOTS
  #define CYTHON_USE_ASYNC_SLOTS 0
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
  #undef CYTHON_PEP489_MULTI_PHASE_INIT
  #define CYTHON_PEP489_MULTI_PHASE_INIT 0
  #undef CYTHON_USE_TP_FINALIZE
  #define CYTHON_USE_TP_FINALIZE 0
  #undef CYTHON_USE_DICT_VERSIONS
  #define CYTHON_USE_DICT_VERSIONS 0
  #undef CYTHON_USE_EXC_INFO_STACK
  #define CYTHON_USE_EXC_INFO_STACK 0
#else
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 1
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #if PY_VERSION_HEX < 0x02070000
    #undef CYTHON_USE_PYTYPE_LOOKUP
    #define CYTHON_USE_PYTYPE_LOOKUP 0
  #elif !defined(CYTHON_USE_PYTYPE_LOOKUP)
    #define CYTHON_USE_PYTYPE_LOOKUP 1
  #endif
  #if PY_MAJOR_VERSION < 3
    #undef CYTHON_USE_ASYNC_SLOTS
    #define CYTHON_USE_ASYNC_SLOTS 0
  #elif !defined(CYTHON_USE_ASYNC_SLOTS)
    #define CYTHON_USE_ASYNC_SLOTS 1
  #endif
  #if PY_VERSION_HEX < 0x02070000
    #undef CYTHON_USE_PYLONG_INTERNALS
    #define CYTHON_USE_PYLONG_INTERNALS 0
  #elif !defined(CYTHON_USE_PYLONG_INTERNALS)
    #define CYTHON_USE_PYLONG_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_PYLIST_INTERNALS
    #define CYTHON_USE_PYLIST_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #if PY_VERSION_HEX < 0x030300F0
    #undef CYTHON_USE_UNICODE_WRITER
    #define CYTHON_USE_UNICODE_WRITER 0
  #elif !defined(CYTHON_USE_UNICODE_WRITER)
    #define CYTHON_USE_UNICODE_WRITER 1
  #endif
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #ifndef CYTHON_FAST_THREAD_STATE
    #define CYTHON_FAST_THREAD_STATE 1
  #endif
  #ifndef CYTHON_FAST_PYCALL
    #define CYTHON_FAST_PYCALL 1
  #endif
  #ifndef CYTHON_PEP489_MULTI_PHASE_INIT
    #define CYTHON_PEP489_MULTI_PHASE_INIT (PY_VERSION_HEX >= 0x03050000)
  #endif
  #ifndef CYTHON_USE_TP_FINALIZE
    #define CYTHON_USE_TP_FINALIZE (PY_VERSION_HEX >= 0x030400a1)
  #endif
  #ifndef CYTHON_USE_DICT_VERSIONS
    #define CYTHON_USE_DICT_VERSIONS (PY_VERSION_HEX >= 0x030600B1)
  #endif
  #ifndef CYTHON_USE_EXC_INFO_STACK
    #define CYTHON_USE_EXC_INFO_STACK (PY_VERSION_HEX >= 0x030700A3)
  #endif
#endif
#if !defined(CYTHON_FAST_PYCCALL)
#define CYTHON_FAST_PYCCALL  (CYTHON_FAST_PYCALL && PY_VERSION_HEX >= 0x030600B1)
#endif
#if CYTHON_USE_PYLONG_INTERNALS
  #include "longintrepr.h"
  #undef SHIFT
  #undef BASE
  #undef MASK
#endif
#ifndef __has_attribute
  #define __has_attribute(x) 0
#endif
#ifndef __has_cpp_attribute
  #define __has_cpp_attribute(x) 0
#endif
#ifndef CYTHON_RESTRICT
  #if defined(__GNUC__)
    #define CYTHON_RESTRICT __restrict__
  #elif defined(_MSC_VER) && _MSC_VER >= 1400
    #define CYTHON_RESTRICT __restrict
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_RESTRICT restrict
  #else
    #define CYTHON_RESTRICT
  #endif
#endif
#ifndef CYTHON_UNUSED
# if defined(__GNUC__)
#   if !(defined(__cplusplus)) || (__GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 4))
#     define CYTHON_UNUSED __attribute__ ((__unused__))
#   else
#     define CYTHON_UNUSED
#   endif
# elif defined(__ICC) || (defined(__INTEL_COMPILER) && !defined(_MSC_VER))
#   define CYTHON_UNUSED __attribute__ ((__unused__))
# else
#   define CYTHON_UNUSED
# endif
#endif
#ifndef CYTHON_MAYBE_UNUSED_VAR
#  if defined(__cplusplus)
     template<class T> void CYTHON_MAYBE_UNUSED_VAR( const T& ) { }
#  else
#    define CYTHON_MAYBE_UNUSED_VAR(x) (void)(x)
#  endif
#endif
#ifndef CYTHON_NCP_UNUSED
# if CYTHON_COMPILING_IN_CPYTHON
#  define CYTHON_NCP_UNUSED
# else
#  define CYTHON_NCP_UNUSED CYTHON_UNUSED
# endif
#endif
#define __Pyx_void_to_None(void_result) ((void)(void_result), Py_INCREF(Py_None), Py_None)
#ifdef _MSC_VER
    #ifndef _MSC_STDINT_H_
        #if _MSC_VER < 1300
           typedef unsigned char     uint8_t;
           typedef unsigned int      uint32_t;
        #else
           typedef unsigned __int8   uint8_t;
           typedef unsigned __int32  uint32_t;
        #endif
    #endif
#else
   #include <stdint.h>
#endif
#ifndef CYTHON_FALLTHROUGH
  #if defined(__cplusplus) && __cplusplus >= 201103L
    #if __has_cpp_attribute(fallthrough)
      #define CYTHON_FALLTHROUGH [[fallthrough]]
    #elif __has_cpp_attribute(clang::fallthrough)
      #define CYTHON_FALLTHROUGH [[clang::fallthrough]]
    #elif __has_cpp_attribute(gnu::fallthrough)
      #define CYTHON_FALLTHROUGH [[gnu::fallthrough]]
    #endif
  #endif
  #ifndef CYTHON_FALLTHROUGH
    #if __has_attribute(fallthrough)
      #define CYTHON_FALLTHROUGH __attribute__((fallthrough))
    #else
      #define CYTHON_FALLTHROUGH
    #endif
  #endif
  #if defined(__clang__ ) && defined(__apple_build_version__)
    #if __apple_build_version__ < 7000000
      #undef  CYTHON_FALLTHROUGH
      #define CYTHON_FALLTHROUGH
    #endif
  #endif
#endif

#ifndef CYTHON_INLINE
  #if defined(__clang__)
    #define CYTHON_INLINE __inline__ __attribute__ ((__unused__))
  #elif defined(__GNUC__)
    #define CYTHON_INLINE __inline__
  #elif defined(_MSC_VER)
    #define CYTHON_INLINE __inline
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_INLINE inline
  #else
    #define CYTHON_INLINE
  #endif
#endif

#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x02070600 && !defined(Py_OptimizeFlag)
  #define Py_OptimizeFlag 0
#endif
#define __PYX_BUILD_PY_SSIZE_T "n"
#define CYTHON_FORMAT_SSIZE_T "z"
#if PY_MAJOR_VERSION < 3
  #define __Pyx_BUILTIN_MODULE_NAME "__builtin__"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a+k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyClass_Type
#else
  #define __Pyx_BUILTIN_MODULE_NAME "builtins"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyType_Type
#endif
#ifndef Py_TPFLAGS_CHECKTYPES
  #define Py_TPFLAGS_CHECKTYPES 0
#endif
#ifndef Py_TPFLAGS_HAVE_INDEX
  #define Py_TPFLAGS_HAVE_INDEX 0
#endif
#ifndef Py_TPFLAGS_HAVE_NEWBUFFER
  #define Py_TPFLAGS_HAVE_NEWBUFFER 0
#endif
#ifndef Py_TPFLAGS_HAVE_FINALIZE
  #define Py_TPFLAGS_HAVE_FINALIZE 0
#endif
#ifndef METH_STACKLESS
  #define METH_STACKLESS 0
#endif
#if PY_VERSION_HEX <= 0x030700A3 || !defined(METH_FASTCALL)
  #ifndef METH_FASTCALL
     #define METH_FASTCALL 0x80
  #endif
  typedef PyObject *(*__Pyx_PyCFunctionFast) (PyObject *self, PyObject *const *args, Py_ssize_t nargs);
  typedef PyObject *(*__Pyx_PyCFunctionFastWithKeywords) (PyObject *self, PyObject *const *args,
                                                          Py_ssize_t nargs, PyObject *kwnames);
#else
  #define __Pyx_PyCFunctionFast _PyCFunctionFast
  #define __Pyx_PyCFunctionFastWithKeywords _PyCFunctionFastWithKeywords
#endif
#if CYTHON_FAST_PYCCALL
#define __Pyx_PyFastCFunction_Check(func)\
    ((PyCFunction_Check(func) && (METH_FASTCALL == (PyCFunction_GET_FLAGS(func) & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS | METH_STACKLESS)))))
#else
#define __Pyx_PyFastCFunction_Check(func) 0
#endif
#if CYTHON_USE_DICT_VERSIONS
#define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
    (version_var) = __PYX_GET_DICT_VERSION(dict);\
    (cache_var) = (value);
#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP) {\
        static PY_UINT64_T __pyx_dict_version = 0;\
        static PyObject *__pyx_dict_cached_value = NULL;\
        if (likely(__PYX_GET_DICT_VERSION(DICT) == __pyx_dict_version)) {\
            (VAR) = __pyx_dict_cached_value;\
        } else {\
            (VAR) = __pyx_dict_cached_value = (LOOKUP);\
            __pyx_dict_version = __PYX_GET_DICT_VERSION(DICT);\
        }\
    }
#else
#define __PYX_GET_DICT_VERSION(dict)  (0)
#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)
#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP)  (VAR) = (LOOKUP);
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Malloc)
  #define PyObject_Malloc(s)   PyMem_Malloc(s)
  #define PyObject_Free(p)     PyMem_Free(p)
  #define PyObject_Realloc(p)  PyMem_Realloc(p)
#endif
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX < 0x030400A1
  #define PyMem_RawMalloc(n)           PyMem_Malloc(n)
  #define PyMem_RawRealloc(p, n)       PyMem_Realloc(p, n)
  #define PyMem_RawFree(p)             PyMem_Free(p)
#endif
#if CYTHON_COMPILING_IN_PYSTON
  #define __Pyx_PyCode_HasFreeVars(co)  PyCode_HasFreeVars(co)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno) PyFrame_SetLineNumber(frame, lineno)
#else
  #define __Pyx_PyCode_HasFreeVars(co)  (PyCode_GetNumFree(co) > 0)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno)  (frame)->f_lineno = (lineno)
#endif
#if !CYTHON_FAST_THREAD_STATE || PY_VERSION_HEX < 0x02070000
  #define __Pyx_PyThreadState_Current PyThreadState_GET()
#elif PY_VERSION_HEX >= 0x03060000
  #define __Pyx_PyThreadState_Current _PyThreadState_UncheckedGet()
#elif PY_VERSION_HEX >= 0x03000000
  #define __Pyx_PyThreadState_Current PyThreadState_GET()
#else
  #define __Pyx_PyThreadState_Current _PyThreadState_Current
#endif
#if PY_VERSION_HEX < 0x030700A2 && !defined(PyThread_tss_create) && !defined(Py_tss_NEEDS_INIT)
#include "pythread.h"
#define Py_tss_NEEDS_INIT 0
typedef int Py_tss_t;
static CYTHON_INLINE int PyThread_tss_create(Py_tss_t *key) {
  *key = PyThread_create_key();
  return 0; // PyThread_create_key reports success always
}
static CYTHON_INLINE Py_tss_t * PyThread_tss_alloc(void) {
  Py_tss_t *key = (Py_tss_t *)PyObject_Malloc(sizeof(Py_tss_t));
  *key = Py_tss_NEEDS_INIT;
  return key;
}
static CYTHON_INLINE void PyThread_tss_free(Py_tss_t *key) {
  PyObject_Free(key);
}
static CYTHON_INLINE int PyThread_tss_is_created(Py_tss_t *key) {
  return *key != Py_tss_NEEDS_INIT;
}
static CYTHON_INLINE void PyThread_tss_delete(Py_tss_t *key) {
  PyThread_delete_key(*key);
  *key = Py_tss_NEEDS_INIT;
}
static CYTHON_INLINE int PyThread_tss_set(Py_tss_t *key, void *value) {
  return PyThread_set_key_value(*key, value);
}
static CYTHON_INLINE void * PyThread_tss_get(Py_tss_t *key) {
  return PyThread_get_key_value(*key);
}
#endif // TSS (Thread Specific Storage) API
#if CYTHON_COMPILING_IN_CPYTHON || defined(_PyDict_NewPresized)
#define __Pyx_PyDict_NewPresized(n)  ((n <= 8) ? PyDict_New() : _PyDict_NewPresized(n))
#else
#define __Pyx_PyDict_NewPresized(n)  PyDict_New()
#endif
#if PY_MAJOR_VERSION >= 3 || CYTHON_FUTURE_DIVISION
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_TrueDivide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceTrueDivide(x,y)
#else
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_Divide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceDivide(x,y)
#endif
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1 && CYTHON_USE_UNICODE_INTERNALS
#define __Pyx_PyDict_GetItemStr(dict, name)  _PyDict_GetItem_KnownHash(dict, name, ((PyASCIIObject *) name)->hash)
#else
#define __Pyx_PyDict_GetItemStr(dict, name)  PyDict_GetItem(dict, name)
#endif
#if PY_VERSION_HEX > 0x03030000 && defined(PyUnicode_KIND)
  #define CYTHON_PEP393_ENABLED 1
  #define __Pyx_PyUnicode_READY(op)       (likely(PyUnicode_IS_READY(op)) ?\
                                              0 : _PyUnicode_Ready((PyObject *)(op)))
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_LENGTH(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) PyUnicode_READ_CHAR(u, i)
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   PyUnicode_MAX_CHAR_VALUE(u)
  #define __Pyx_PyUnicode_KIND(u)         PyUnicode_KIND(u)
  #define __Pyx_PyUnicode_DATA(u)         PyUnicode_DATA(u)
  #define __Pyx_PyUnicode_READ(k, d, i)   PyUnicode_READ(k, d, i)
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  PyUnicode_WRITE(k, d, i, ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != (likely(PyUnicode_IS_READY(u)) ? PyUnicode_GET_LENGTH(u) : PyUnicode_GET_SIZE(u)))
#else
  #define CYTHON_PEP393_ENABLED 0
  #define PyUnicode_1BYTE_KIND  1
  #define PyUnicode_2BYTE_KIND  2
  #define PyUnicode_4BYTE_KIND  4
  #define __Pyx_PyUnicode_READY(op)       (0)
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_SIZE(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) ((Py_UCS4)(PyUnicode_AS_UNICODE(u)[i]))
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   ((sizeof(Py_UNICODE) == 2) ? 65535 : 1114111)
  #define __Pyx_PyUnicode_KIND(u)         (sizeof(Py_UNICODE))
  #define __Pyx_PyUnicode_DATA(u)         ((void*)PyUnicode_AS_UNICODE(u))
  #define __Pyx_PyUnicode_READ(k, d, i)   ((void)(k), (Py_UCS4)(((Py_UNICODE*)d)[i]))
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  (((void)(k)), ((Py_UNICODE*)d)[i] = ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != PyUnicode_GET_SIZE(u))
#endif
#if CYTHON_COMPILING_IN_PYPY
  #define __Pyx_PyUnicode_Concat(a, b)      PyNumber_Add(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  PyNumber_Add(a, b)
#else
  #define __Pyx_PyUnicode_Concat(a, b)      PyUnicode_Concat(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  ((unlikely((a) == Py_None) || unlikely((b) == Py_None)) ?\
      PyNumber_Add(a, b) : __Pyx_PyUnicode_Concat(a, b))
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyUnicode_Contains)
  #define PyUnicode_Contains(u, s)  PySequence_Contains(u, s)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyByteArray_Check)
  #define PyByteArray_Check(obj)  PyObject_TypeCheck(obj, &PyByteArray_Type)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Format)
  #define PyObject_Format(obj, fmt)  PyObject_CallMethod(obj, "__format__", "O", fmt)
#endif
#define __Pyx_PyString_FormatSafe(a, b)   ((unlikely((a) == Py_None || (PyString_Check(b) && !PyString_CheckExact(b)))) ? PyNumber_Remainder(a, b) : __Pyx_PyString_Format(a, b))
#define __Pyx_PyUnicode_FormatSafe(a, b)  ((unlikely((a) == Py_None || (PyUnicode_Check(b) && !PyUnicode_CheckExact(b)))) ? PyNumber_Remainder(a, b) : PyUnicode_Format(a, b))
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyString_Format(a, b)  PyUnicode_Format(a, b)
#else
  #define __Pyx_PyString_Format(a, b)  PyString_Format(a, b)
#endif
#if PY_MAJOR_VERSION < 3 && !defined(PyObject_ASCII)
  #define PyObject_ASCII(o)            PyObject_Repr(o)
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBaseString_Type            PyUnicode_Type
  #define PyStringObject               PyUnicodeObject
  #define PyString_Type                PyUnicode_Type
  #define PyString_Check               PyUnicode_Check
  #define PyString_CheckExact          PyUnicode_CheckExact
  #define PyObject_Unicode             PyObject_Str
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyBaseString_Check(obj) PyUnicode_Check(obj)
  #define __Pyx_PyBaseString_CheckExact(obj) PyUnicode_CheckExact(obj)
#else
  #define __Pyx_PyBaseString_Check(obj) (PyString_Check(obj) || PyUnicode_Check(obj))
  #define __Pyx_PyBaseString_CheckExact(obj) (PyString_CheckExact(obj) || PyUnicode_CheckExact(obj))
#endif
#ifndef PySet_CheckExact
  #define PySet_CheckExact(obj)        (Py_TYPE(obj) == &PySet_Type)
#endif
#if CYTHON_ASSUME_SAFE_MACROS
  #define __Pyx_PySequence_SIZE(seq)  Py_SIZE(seq)
#else
  #define __Pyx_PySequence_SIZE(seq)  PySequence_Size(seq)
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyIntObject                  PyLongObject
  #define PyInt_Type                   PyLong_Type
  #define PyInt_Check(op)              PyLong_Check(op)
  #define PyInt_CheckExact(op)         PyLong_CheckExact(op)
  #define PyInt_FromString             PyLong_FromString
  #define PyInt_FromUnicode            PyLong_FromUnicode
  #define PyInt_FromLong               PyLong_FromLong
  #define PyInt_FromSize_t             PyLong_FromSize_t
  #define PyInt_FromSsize_t            PyLong_FromSsize_t
  #define PyInt_AsLong                 PyLong_AsLong
  #define PyInt_AS_LONG                PyLong_AS_LONG
  #define PyInt_AsSsize_t              PyLong_AsSsize_t
  #define PyInt_AsUnsignedLongMask     PyLong_AsUnsignedLongMask
  #define PyInt_AsUnsignedLongLongMask PyLong_AsUnsignedLongLongMask
  #define PyNumber_Int                 PyNumber_Long
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBoolObject                 PyLongObject
#endif
#if PY_MAJOR_VERSION >= 3 && CYTHON_COMPILING_IN_PYPY
  #ifndef PyUnicode_InternFromString
    #define PyUnicode_InternFromString(s) PyUnicode_FromString(s)
  #endif
#endif
#if PY_VERSION_HEX < 0x030200A4
  typedef long Py_hash_t;
  #define __Pyx_PyInt_FromHash_t PyInt_FromLong
  #define __Pyx_PyInt_AsHash_t   PyInt_AsLong
#else
  #define __Pyx_PyInt_FromHash_t PyInt_FromSsize_t
  #define __Pyx_PyInt_AsHash_t   PyInt_AsSsize_t
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyMethod_New(func, self, klass) ((self) ? PyMethod_New(func, self) : (Py_INCREF(func), func))
#else
  #define __Pyx_PyMethod_New(func, self, klass) PyMethod_New(func, self, klass)
#endif
#if CYTHON_USE_ASYNC_SLOTS
  #if PY_VERSION_HEX >= 0x030500B1
    #define __Pyx_PyAsyncMethodsStruct PyAsyncMethods
    #define __Pyx_PyType_AsAsync(obj) (Py_TYPE(obj)->tp_as_async)
  #else
    #define __Pyx_PyType_AsAsync(obj) ((__Pyx_PyAsyncMethodsStruct*) (Py_TYPE(obj)->tp_reserved))
  #endif
#else
  #define __Pyx_PyType_AsAsync(obj) NULL
#endif
#ifndef __Pyx_PyAsyncMethodsStruct
    typedef struct {
        unaryfunc am_await;
        unaryfunc am_aiter;
        unaryfunc am_anext;
    } __Pyx_PyAsyncMethodsStruct;
#endif

#if defined(WIN32) || defined(MS_WINDOWS)
  #define _USE_MATH_DEFINES
#endif
#include <math.h>
#ifdef NAN
#define __PYX_NAN() ((float) NAN)
#else
static CYTHON_INLINE float __PYX_NAN() {
  float value;
  memset(&value, 0xFF, sizeof(value));
  return value;
}
#endif
#if defined(__CYGWIN__) && defined(_LDBL_EQ_DBL)
#define __Pyx_truncl trunc
#else
#define __Pyx_truncl truncl
#endif


#define __PYX_ERR(f_index, lineno, Ln_error) \
{ \
  __pyx_filename = __pyx_f[f_index]; __pyx_lineno = lineno; __pyx_clineno = __LINE__; goto Ln_error; \
}

#ifndef __PYX_EXTERN_C
  #ifdef __cplusplus
    #define __PYX_EXTERN_C extern "C"
  #else
    #define __PYX_EXTERN_C extern
  #endif
#endif

#define __PYX_HAVE__table_extraction__utils_table_extraction
#define __PYX_HAVE_API__table_extraction__utils_table_extraction
/* Early includes */
#ifdef _OPENMP
#include <omp.h>
#endif /* _OPENMP */

#if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
#define CYTHON_WITHOUT_ASSERTIONS
#endif

typedef struct {PyObject **p; const char *s; const Py_ssize_t n; const char* encoding;
                const char is_unicode; const char is_str; const char intern; } __Pyx_StringTabEntry;

#define __PYX_DEFAULT_STRING_ENCODING_IS_ASCII 0
#define __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT 0
#define __PYX_DEFAULT_STRING_ENCODING ""
#define __Pyx_PyObject_FromString __Pyx_PyBytes_FromString
#define __Pyx_PyObject_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#define __Pyx_uchar_cast(c) ((unsigned char)c)
#define __Pyx_long_cast(x) ((long)x)
#define __Pyx_fits_Py_ssize_t(v, type, is_signed)  (\
    (sizeof(type) < sizeof(Py_ssize_t))  ||\
    (sizeof(type) > sizeof(Py_ssize_t) &&\
          likely(v < (type)PY_SSIZE_T_MAX ||\
                 v == (type)PY_SSIZE_T_MAX)  &&\
          (!is_signed || likely(v > (type)PY_SSIZE_T_MIN ||\
                                v == (type)PY_SSIZE_T_MIN)))  ||\
    (sizeof(type) == sizeof(Py_ssize_t) &&\
          (is_signed || likely(v < (type)PY_SSIZE_T_MAX ||\
                               v == (type)PY_SSIZE_T_MAX)))  )
static CYTHON_INLINE int __Pyx_is_valid_index(Py_ssize_t i, Py_ssize_t limit) {
    return (size_t) i < (size_t) limit;
}
#if defined (__cplusplus) && __cplusplus >= 201103L
    #include <cstdlib>
    #define __Pyx_sst_abs(value) std::abs(value)
#elif SIZEOF_INT >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) abs(value)
#elif SIZEOF_LONG >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) labs(value)
#elif defined (_MSC_VER)
    #define __Pyx_sst_abs(value) ((Py_ssize_t)_abs64(value))
#elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define __Pyx_sst_abs(value) llabs(value)
#elif defined (__GNUC__)
    #define __Pyx_sst_abs(value) __builtin_llabs(value)
#else
    #define __Pyx_sst_abs(value) ((value<0) ? -value : value)
#endif
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject*);
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject*, Py_ssize_t* length);
#define __Pyx_PyByteArray_FromString(s) PyByteArray_FromStringAndSize((const char*)s, strlen((const char*)s))
#define __Pyx_PyByteArray_FromStringAndSize(s, l) PyByteArray_FromStringAndSize((const char*)s, l)
#define __Pyx_PyBytes_FromString        PyBytes_FromString
#define __Pyx_PyBytes_FromStringAndSize PyBytes_FromStringAndSize
static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char*);
#if PY_MAJOR_VERSION < 3
    #define __Pyx_PyStr_FromString        __Pyx_PyBytes_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#else
    #define __Pyx_PyStr_FromString        __Pyx_PyUnicode_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyUnicode_FromStringAndSize
#endif
#define __Pyx_PyBytes_AsWritableString(s)     ((char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsWritableSString(s)    ((signed char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsWritableUString(s)    ((unsigned char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsString(s)     ((const char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsSString(s)    ((const signed char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsUString(s)    ((const unsigned char*) PyBytes_AS_STRING(s))
#define __Pyx_PyObject_AsWritableString(s)    ((char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableSString(s)    ((signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableUString(s)    ((unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsSString(s)    ((const signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsUString(s)    ((const unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_FromCString(s)  __Pyx_PyObject_FromString((const char*)s)
#define __Pyx_PyBytes_FromCString(s)   __Pyx_PyBytes_FromString((const char*)s)
#define __Pyx_PyByteArray_FromCString(s)   __Pyx_PyByteArray_FromString((const char*)s)
#define __Pyx_PyStr_FromCString(s)     __Pyx_PyStr_FromString((const char*)s)
#define __Pyx_PyUnicode_FromCString(s) __Pyx_PyUnicode_FromString((const char*)s)
static CYTHON_INLINE size_t __Pyx_Py_UNICODE_strlen(const Py_UNICODE *u) {
    const Py_UNICODE *u_end = u;
    while (*u_end++) ;
    return (size_t)(u_end - u - 1);
}
#define __Pyx_PyUnicode_FromUnicode(u)       PyUnicode_FromUnicode(u, __Pyx_Py_UNICODE_strlen(u))
#define __Pyx_PyUnicode_FromUnicodeAndLength PyUnicode_FromUnicode
#define __Pyx_PyUnicode_AsUnicode            PyUnicode_AsUnicode
#define __Pyx_NewRef(obj) (Py_INCREF(obj), obj)
#define __Pyx_Owned_Py_None(b) __Pyx_NewRef(Py_None)
static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b);
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject*);
static CYTHON_INLINE int __Pyx_PyObject_IsTrueAndDecref(PyObject*);
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x);
#define __Pyx_PySequence_Tuple(obj)\
    (likely(PyTuple_CheckExact(obj)) ? __Pyx_NewRef(obj) : PySequence_Tuple(obj))
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject*);
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t);
#if CYTHON_ASSUME_SAFE_MACROS
#define __pyx_PyFloat_AsDouble(x) (PyFloat_CheckExact(x) ? PyFloat_AS_DOUBLE(x) : PyFloat_AsDouble(x))
#else
#define __pyx_PyFloat_AsDouble(x) PyFloat_AsDouble(x)
#endif
#define __pyx_PyFloat_AsFloat(x) ((float) __pyx_PyFloat_AsDouble(x))
#if PY_MAJOR_VERSION >= 3
#define __Pyx_PyNumber_Int(x) (PyLong_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Long(x))
#else
#define __Pyx_PyNumber_Int(x) (PyInt_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Int(x))
#endif
#define __Pyx_PyNumber_Float(x) (PyFloat_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Float(x))
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
static int __Pyx_sys_getdefaultencoding_not_ascii;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    PyObject* ascii_chars_u = NULL;
    PyObject* ascii_chars_b = NULL;
    const char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    if (strcmp(default_encoding_c, "ascii") == 0) {
        __Pyx_sys_getdefaultencoding_not_ascii = 0;
    } else {
        char ascii_chars[128];
        int c;
        for (c = 0; c < 128; c++) {
            ascii_chars[c] = c;
        }
        __Pyx_sys_getdefaultencoding_not_ascii = 1;
        ascii_chars_u = PyUnicode_DecodeASCII(ascii_chars, 128, NULL);
        if (!ascii_chars_u) goto bad;
        ascii_chars_b = PyUnicode_AsEncodedString(ascii_chars_u, default_encoding_c, NULL);
        if (!ascii_chars_b || !PyBytes_Check(ascii_chars_b) || memcmp(ascii_chars, PyBytes_AS_STRING(ascii_chars_b), 128) != 0) {
            PyErr_Format(
                PyExc_ValueError,
                "This module compiled with c_string_encoding=ascii, but default encoding '%.200s' is not a superset of ascii.",
                default_encoding_c);
            goto bad;
        }
        Py_DECREF(ascii_chars_u);
        Py_DECREF(ascii_chars_b);
    }
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    Py_XDECREF(ascii_chars_u);
    Py_XDECREF(ascii_chars_b);
    return -1;
}
#endif
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT && PY_MAJOR_VERSION >= 3
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_DecodeUTF8(c_str, size, NULL)
#else
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_Decode(c_str, size, __PYX_DEFAULT_STRING_ENCODING, NULL)
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
static char* __PYX_DEFAULT_STRING_ENCODING;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) (const char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    __PYX_DEFAULT_STRING_ENCODING = (char*) malloc(strlen(default_encoding_c) + 1);
    if (!__PYX_DEFAULT_STRING_ENCODING) goto bad;
    strcpy(__PYX_DEFAULT_STRING_ENCODING, default_encoding_c);
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    return -1;
}
#endif
#endif


/* Test for GCC > 2.95 */
#if defined(__GNUC__)     && (__GNUC__ > 2 || (__GNUC__ == 2 && (__GNUC_MINOR__ > 95)))
  #define likely(x)   __builtin_expect(!!(x), 1)
  #define unlikely(x) __builtin_expect(!!(x), 0)
#else /* !__GNUC__ or GCC < 2.95 */
  #define likely(x)   (x)
  #define unlikely(x) (x)
#endif /* __GNUC__ */
static CYTHON_INLINE void __Pyx_pretend_to_initialize(void* ptr) { (void)ptr; }

static PyObject *__pyx_m = NULL;
static PyObject *__pyx_d;
static PyObject *__pyx_b;
static PyObject *__pyx_cython_runtime = NULL;
static PyObject *__pyx_empty_tuple;
static PyObject *__pyx_empty_bytes;
static PyObject *__pyx_empty_unicode;
static int __pyx_lineno;
static int __pyx_clineno = 0;
static const char * __pyx_cfilenm= __FILE__;
static const char *__pyx_filename;


static const char *__pyx_f[] = {
  "table_extraction/utils_table_extraction.pyx",
};

/*--- Type declarations ---*/
struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects;
struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect;

/* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */
struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects {
  PyObject_HEAD
  PyObject *__pyx_v_threshold;
};


/* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */
struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect {
  PyObject_HEAD
  PyObject *__pyx_v_threshold;
};


/* --- Runtime support code (head) --- */
/* Refnanny.proto */
#ifndef CYTHON_REFNANNY
  #define CYTHON_REFNANNY 0
#endif
#if CYTHON_REFNANNY
  typedef struct {
    void (*INCREF)(void*, PyObject*, int);
    void (*DECREF)(void*, PyObject*, int);
    void (*GOTREF)(void*, PyObject*, int);
    void (*GIVEREF)(void*, PyObject*, int);
    void* (*SetupContext)(const char*, int, const char*);
    void (*FinishContext)(void**);
  } __Pyx_RefNannyAPIStruct;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNanny = NULL;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname);
  #define __Pyx_RefNannyDeclarations void *__pyx_refnanny = NULL;
#ifdef WITH_THREAD
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          if (acquire_gil) {\
              PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
              PyGILState_Release(__pyx_gilstate_save);\
          } else {\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
          }
#else
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__)
#endif
  #define __Pyx_RefNannyFinishContext()\
          __Pyx_RefNanny->FinishContext(&__pyx_refnanny)
  #define __Pyx_INCREF(r)  __Pyx_RefNanny->INCREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_DECREF(r)  __Pyx_RefNanny->DECREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GOTREF(r)  __Pyx_RefNanny->GOTREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GIVEREF(r) __Pyx_RefNanny->GIVEREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_XINCREF(r)  do { if((r) != NULL) {__Pyx_INCREF(r); }} while(0)
  #define __Pyx_XDECREF(r)  do { if((r) != NULL) {__Pyx_DECREF(r); }} while(0)
  #define __Pyx_XGOTREF(r)  do { if((r) != NULL) {__Pyx_GOTREF(r); }} while(0)
  #define __Pyx_XGIVEREF(r) do { if((r) != NULL) {__Pyx_GIVEREF(r);}} while(0)
#else
  #define __Pyx_RefNannyDeclarations
  #define __Pyx_RefNannySetupContext(name, acquire_gil)
  #define __Pyx_RefNannyFinishContext()
  #define __Pyx_INCREF(r) Py_INCREF(r)
  #define __Pyx_DECREF(r) Py_DECREF(r)
  #define __Pyx_GOTREF(r)
  #define __Pyx_GIVEREF(r)
  #define __Pyx_XINCREF(r) Py_XINCREF(r)
  #define __Pyx_XDECREF(r) Py_XDECREF(r)
  #define __Pyx_XGOTREF(r)
  #define __Pyx_XGIVEREF(r)
#endif
#define __Pyx_XDECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_XDECREF(tmp);\
    } while (0)
#define __Pyx_DECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_DECREF(tmp);\
    } while (0)
#define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
#define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)

/* PyObjectGetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
#else
#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
#endif

/* GetBuiltinName.proto */
static PyObject *__Pyx_GetBuiltinName(PyObject *name);

/* SliceObject.proto */
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(
        PyObject* obj, Py_ssize_t cstart, Py_ssize_t cstop,
        PyObject** py_start, PyObject** py_stop, PyObject** py_slice,
        int has_cstart, int has_cstop, int wraparound);

/* RaiseTooManyValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);

/* RaiseNeedMoreValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);

/* IterFinish.proto */
static CYTHON_INLINE int __Pyx_IterFinish(void);

/* UnpackItemEndCheck.proto */
static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);

/* RaiseDoubleKeywords.proto */
static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);

/* ParseKeywords.proto */
static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject **argnames[],\
    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,\
    const char* function_name);

/* RaiseArgTupleInvalid.proto */
static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);

/* GetItemInt.proto */
#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
                                                     int is_list, int wraparound, int boundscheck);

/* GetModuleGlobalName.proto */
#if CYTHON_USE_DICT_VERSIONS
#define __Pyx_GetModuleGlobalName(var, name)  {\
    static PY_UINT64_T __pyx_dict_version = 0;\
    static PyObject *__pyx_dict_cached_value = NULL;\
    (var) = (likely(__pyx_dict_version == __PYX_GET_DICT_VERSION(__pyx_d))) ?\
        (likely(__pyx_dict_cached_value) ? __Pyx_NewRef(__pyx_dict_cached_value) : __Pyx_GetBuiltinName(name)) :\
        __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
}
#define __Pyx_GetModuleGlobalNameUncached(var, name)  {\
    PY_UINT64_T __pyx_dict_version;\
    PyObject *__pyx_dict_cached_value;\
    (var) = __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
}
static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
#else
#define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
#define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
#endif

/* PyFunctionFastCall.proto */
#if CYTHON_FAST_PYCALL
#define __Pyx_PyFunction_FastCall(func, args, nargs)\
    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs);
#else
#define __Pyx_PyFunction_FastCallDict(func, args, nargs, kwargs) _PyFunction_FastCallDict(func, args, nargs, kwargs)
#endif
#define __Pyx_BUILD_ASSERT_EXPR(cond)\
    (sizeof(char [1 - 2*!(cond)]) - 1)
#ifndef Py_MEMBER_SIZE
#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
#endif
  static size_t __pyx_pyframe_localsplus_offset = 0;
  #include "frameobject.h"
  #define __Pxy_PyFrame_Initialize_Offsets()\
    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
     (void)(__pyx_pyframe_localsplus_offset = PyFrame_Type.tp_basicsize - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
  #define __Pyx_PyFrame_GetLocalsplus(frame)\
    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
#endif

/* PyCFunctionFastCall.proto */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject *__Pyx_PyCFunction_FastCall(PyObject *func, PyObject **args, Py_ssize_t nargs);
#else
#define __Pyx_PyCFunction_FastCall(func, args, nargs)  (assert(0), NULL)
#endif

/* PyObjectCall.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
#else
#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
#endif

/* PyObjectCallMethO.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
#endif

/* PyObjectCallNoArg.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func);
#else
#define __Pyx_PyObject_CallNoArg(func) __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL)
#endif

/* PyObjectCallOneArg.proto */
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);

/* ListCompAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len)) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
#endif

/* PyObjectCall2Args.proto */
static CYTHON_UNUSED PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);

/* PyObjectSetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
#else
#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
#endif

/* FetchCommonType.proto */
static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);

/* CythonFunction.proto */
#define __Pyx_CyFunction_USED 1
#define __Pyx_CYFUNCTION_STATICMETHOD  0x01
#define __Pyx_CYFUNCTION_CLASSMETHOD   0x02
#define __Pyx_CYFUNCTION_CCLASS        0x04
#define __Pyx_CyFunction_GetClosure(f)\
    (((__pyx_CyFunctionObject *) (f))->func_closure)
#define __Pyx_CyFunction_GetClassObj(f)\
    (((__pyx_CyFunctionObject *) (f))->func_classobj)
#define __Pyx_CyFunction_Defaults(type, f)\
    ((type *)(((__pyx_CyFunctionObject *) (f))->defaults))
#define __Pyx_CyFunction_SetDefaultsGetter(f, g)\
    ((__pyx_CyFunctionObject *) (f))->defaults_getter = (g)
typedef struct {
    PyCFunctionObject func;
#if PY_VERSION_HEX < 0x030500A0
    PyObject *func_weakreflist;
#endif
    PyObject *func_dict;
    PyObject *func_name;
    PyObject *func_qualname;
    PyObject *func_doc;
    PyObject *func_globals;
    PyObject *func_code;
    PyObject *func_closure;
    PyObject *func_classobj;
    void *defaults;
    int defaults_pyobjects;
    int flags;
    PyObject *defaults_tuple;
    PyObject *defaults_kwdict;
    PyObject *(*defaults_getter)(PyObject *);
    PyObject *func_annotations;
} __pyx_CyFunctionObject;
static PyTypeObject *__pyx_CyFunctionType = 0;
#define __Pyx_CyFunction_Check(obj)  (__Pyx_TypeCheck(obj, __pyx_CyFunctionType))
#define __Pyx_CyFunction_NewEx(ml, flags, qualname, self, module, globals, code)\
    __Pyx_CyFunction_New(__pyx_CyFunctionType, ml, flags, qualname, self, module, globals, code)
static PyObject *__Pyx_CyFunction_New(PyTypeObject *, PyMethodDef *ml,
                                      int flags, PyObject* qualname,
                                      PyObject *self,
                                      PyObject *module, PyObject *globals,
                                      PyObject* code);
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *m,
                                                         size_t size,
                                                         int pyobjects);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *m,
                                                            PyObject *tuple);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *m,
                                                             PyObject *dict);
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *m,
                                                              PyObject *dict);
static int __pyx_CyFunction_init(void);

/* PyIntCompare.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_EqObjC(PyObject *op1, PyObject *op2, long intval, long inplace);

/* IncludeStringH.proto */
#include <string.h>

/* BytesEquals.proto */
static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals);

/* UnicodeEquals.proto */
static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals);

/* StrEquals.proto */
#if PY_MAJOR_VERSION >= 3
#define __Pyx_PyString_Equals __Pyx_PyUnicode_Equals
#else
#define __Pyx_PyString_Equals __Pyx_PyBytes_Equals
#endif

/* py_abs.proto */
#if CYTHON_USE_PYLONG_INTERNALS
static PyObject *__Pyx_PyLong_AbsNeg(PyObject *num);
#define __Pyx_PyNumber_Absolute(x)\
    ((likely(PyLong_CheckExact(x))) ?\
         (likely(Py_SIZE(x) >= 0) ? (Py_INCREF(x), (x)) : __Pyx_PyLong_AbsNeg(x)) :\
         PyNumber_Absolute(x))
#else
#define __Pyx_PyNumber_Absolute(x)  PyNumber_Absolute(x)
#endif

/* ObjectGetItem.proto */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key);
#else
#define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
#endif

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_AddObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceAdd(op1, op2) : PyNumber_Add(op1, op2))
#endif

/* ListAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
#endif

/* PySequenceContains.proto */
static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
    int result = PySequence_Contains(seq, item);
    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
}

/* Import.proto */
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);

/* ImportFrom.proto */
static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_SubtractObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceSubtract(op1, op2) : PyNumber_Subtract(op1, op2))
#endif

/* None.proto */
static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname);

/* RaiseNoneIterError.proto */
static CYTHON_INLINE void __Pyx_RaiseNoneNotIterableError(void);

/* DictGetItem.proto */
#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
#define __Pyx_PyObject_Dict_GetItem(obj, name)\
    (likely(PyDict_CheckExact(obj)) ?\
     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
#else
#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
#endif

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_FloorDivideObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_FloorDivideObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceFloorDivide(op1, op2) : PyNumber_FloorDivide(op1, op2))
#endif

/* UnpackUnboundCMethod.proto */
typedef struct {
    PyObject *type;
    PyObject **method_name;
    PyCFunction func;
    PyObject *method;
    int flag;
} __Pyx_CachedCFunction;

/* CallUnboundCMethod1.proto */
static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
#else
#define __Pyx_CallUnboundCMethod1(cfunc, self, arg)  __Pyx__CallUnboundCMethod1(cfunc, self, arg)
#endif

/* PyObjectGetMethod.proto */
static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);

/* PyObjectCallMethod1.proto */
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);

/* append.proto */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);

/* StringJoin.proto */
#if PY_MAJOR_VERSION < 3
#define __Pyx_PyString_Join __Pyx_PyBytes_Join
#define __Pyx_PyBaseString_Join(s, v) (PyUnicode_CheckExact(s) ? PyUnicode_Join(s, v) : __Pyx_PyBytes_Join(s, v))
#else
#define __Pyx_PyString_Join PyUnicode_Join
#define __Pyx_PyBaseString_Join PyUnicode_Join
#endif
#if CYTHON_COMPILING_IN_CPYTHON
    #if PY_MAJOR_VERSION < 3
    #define __Pyx_PyBytes_Join _PyString_Join
    #else
    #define __Pyx_PyBytes_Join _PyBytes_Join
    #endif
#else
static CYTHON_INLINE PyObject* __Pyx_PyBytes_Join(PyObject* sep, PyObject* values);
#endif

/* None.proto */
static CYTHON_INLINE Py_ssize_t __Pyx_div_Py_ssize_t(Py_ssize_t, Py_ssize_t);

/* PyObject_GenericGetAttrNoDict.proto */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static CYTHON_INLINE PyObject* __Pyx_PyObject_GenericGetAttrNoDict(PyObject* obj, PyObject* attr_name);
#else
#define __Pyx_PyObject_GenericGetAttrNoDict PyObject_GenericGetAttr
#endif

/* CalculateMetaclass.proto */
static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases);

/* SetNameInClass.proto */
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
#define __Pyx_SetNameInClass(ns, name, value)\
    (likely(PyDict_CheckExact(ns)) ? _PyDict_SetItem_KnownHash(ns, name, value, ((PyASCIIObject *) name)->hash) : PyObject_SetItem(ns, name, value))
#elif CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_SetNameInClass(ns, name, value)\
    (likely(PyDict_CheckExact(ns)) ? PyDict_SetItem(ns, name, value) : PyObject_SetItem(ns, name, value))
#else
#define __Pyx_SetNameInClass(ns, name, value)  PyObject_SetItem(ns, name, value)
#endif

/* Py3ClassCreate.proto */
static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name, PyObject *qualname,
                                           PyObject *mkw, PyObject *modname, PyObject *doc);
static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases, PyObject *dict,
                                      PyObject *mkw, int calculate_metaclass, int allow_py2_metaclass);

/* PyThreadStateGet.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyThreadState_declare  PyThreadState *__pyx_tstate;
#define __Pyx_PyThreadState_assign  __pyx_tstate = __Pyx_PyThreadState_Current;
#define __Pyx_PyErr_Occurred()  __pyx_tstate->curexc_type
#else
#define __Pyx_PyThreadState_declare
#define __Pyx_PyThreadState_assign
#define __Pyx_PyErr_Occurred()  PyErr_Occurred()
#endif

/* PyErrFetchRestore.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyErr_Clear() __Pyx_ErrRestore(NULL, NULL, NULL)
#define __Pyx_ErrRestoreWithState(type, value, tb)  __Pyx_ErrRestoreInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)    __Pyx_ErrFetchInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  __Pyx_ErrRestoreInState(__pyx_tstate, type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)    __Pyx_ErrFetchInState(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_PyErr_SetNone(exc) (Py_INCREF(exc), __Pyx_ErrRestore((exc), NULL, NULL))
#else
#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
#endif
#else
#define __Pyx_PyErr_Clear() PyErr_Clear()
#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
#define __Pyx_ErrRestoreWithState(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
#define __Pyx_ErrRestoreInState(tstate, type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetchInState(tstate, type, value, tb)  PyErr_Fetch(type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
#endif

/* CLineInTraceback.proto */
#ifdef CYTHON_CLINE_IN_TRACEBACK
#define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
#else
static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
#endif

/* CodeObjectCache.proto */
typedef struct {
    PyCodeObject* code_object;
    int code_line;
} __Pyx_CodeObjectCacheEntry;
struct __Pyx_CodeObjectCache {
    int count;
    int max_count;
    __Pyx_CodeObjectCacheEntry* entries;
};
static struct __Pyx_CodeObjectCache __pyx_code_cache = {0,0,NULL};
static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line);
static PyCodeObject *__pyx_find_code_object(int code_line);
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);

/* AddTraceback.proto */
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);

/* CIntFromPy.proto */
static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);

/* CIntFromPy.proto */
static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);

/* FastTypeChecks.proto */
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_TypeCheck(obj, type) __Pyx_IsSubtype(Py_TYPE(obj), (PyTypeObject *)type)
static CYTHON_INLINE int __Pyx_IsSubtype(PyTypeObject *a, PyTypeObject *b);
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches(PyObject *err, PyObject *type);
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches2(PyObject *err, PyObject *type1, PyObject *type2);
#else
#define __Pyx_TypeCheck(obj, type) PyObject_TypeCheck(obj, (PyTypeObject *)type)
#define __Pyx_PyErr_GivenExceptionMatches(err, type) PyErr_GivenExceptionMatches(err, type)
#define __Pyx_PyErr_GivenExceptionMatches2(err, type1, type2) (PyErr_GivenExceptionMatches(err, type1) || PyErr_GivenExceptionMatches(err, type2))
#endif
#define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)

/* CheckBinaryVersion.proto */
static int __Pyx_check_binary_version(void);

/* InitStrings.proto */
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);


/* Module declarations from 'table_extraction.utils_table_extraction' */
static PyTypeObject *__pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects = 0;
static PyTypeObject *__pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect = 0;
#define __Pyx_MODULE_NAME "table_extraction.utils_table_extraction"
extern int __pyx_module_is_main_table_extraction__utils_table_extraction;
int __pyx_module_is_main_table_extraction__utils_table_extraction = 0;

/* Implementation of 'table_extraction.utils_table_extraction' */
static PyObject *__pyx_builtin_object;
static PyObject *__pyx_builtin_staticmethod;
static PyObject *__pyx_builtin_enumerate;
static PyObject *__pyx_builtin_sorted;
static PyObject *__pyx_builtin_max;
static PyObject *__pyx_builtin_min;
static PyObject *__pyx_builtin_range;
static const char __pyx_k_a[] = "a";
static const char __pyx_k_b[] = "b";
static const char __pyx_k_c[] = "c";
static const char __pyx_k_d[] = "d";
static const char __pyx_k_h[] = "h";
static const char __pyx_k_i[] = "i";
static const char __pyx_k_j[] = "j";
static const char __pyx_k_r[] = "r";
static const char __pyx_k_v[] = "v";
static const char __pyx_k_w[] = "w";
static const char __pyx_k_x[] = "x";
static const char __pyx_k_y[] = "y";
static const char __pyx_k_c1[] = "c1";
static const char __pyx_k_c2[] = "c2";
static const char __pyx_k_cb[] = "cb";
static const char __pyx_k_d1[] = "d1";
static const char __pyx_k_d2[] = "d2";
static const char __pyx_k_dx[] = "dx";
static const char __pyx_k_dy[] = "dy";
static const char __pyx_k_np[] = "np";
static const char __pyx_k_re[] = "re";
static const char __pyx_k_x0[] = "x0";
static const char __pyx_k_x1[] = "x1";
static const char __pyx_k_x2[] = "x2";
static const char __pyx_k_y0[] = "y0";
static const char __pyx_k_y1[] = "y1";
static const char __pyx_k_y2[] = "y2";
static const char __pyx_k__21[] = "";
static const char __pyx_k__22[] = " ";
static const char __pyx_k_a_h[] = "a_h";
static const char __pyx_k_a_w[] = "a_w";
static const char __pyx_k_a_x[] = "a_x";
static const char __pyx_k_a_y[] = "a_y";
static const char __pyx_k_adj[] = "adj";
static const char __pyx_k_b_h[] = "b_h";
static const char __pyx_k_b_w[] = "b_w";
static const char __pyx_k_b_x[] = "b_x";
static const char __pyx_k_b_y[] = "b_y";
static const char __pyx_k_box[] = "box";
static const char __pyx_k_cnt[] = "cnt";
static const char __pyx_k_cv2[] = "cv2";
static const char __pyx_k_d11[] = "d11";
static const char __pyx_k_d12[] = "d12";
static const char __pyx_k_d21[] = "d21";
static const char __pyx_k_d22[] = "d22";
static const char __pyx_k_det[] = "det";
static const char __pyx_k_div[] = "div";
static const char __pyx_k_doc[] = "__doc__";
static const char __pyx_k_end[] = "end";
static const char __pyx_k_idx[] = "idx";
static const char __pyx_k_key[] = "key";
static const char __pyx_k_max[] = "max";
static const char __pyx_k_min[] = "min";
static const char __pyx_k_pad[] = "pad";
static const char __pyx_k_pop[] = "pop";
static const char __pyx_k_res[] = "res";
static const char __pyx_k_sum[] = "sum";
static const char __pyx_k_top[] = "top";
static const char __pyx_k_Line[] = "Line";
static const char __pyx_k__178[] = "_";
static const char __pyx_k_area[] = "area";
static const char __pyx_k_cols[] = "cols";
static const char __pyx_k_copy[] = "copy";
static const char __pyx_k_join[] = "join";
static const char __pyx_k_left[] = "left";
static const char __pyx_k_line[] = "line";
static const char __pyx_k_main[] = "__main__";
static const char __pyx_k_math[] = "math";
static const char __pyx_k_name[] = "__name__";
static const char __pyx_k_rect[] = "rect";
static const char __pyx_k_rows[] = "rows";
static const char __pyx_k_size[] = "size";
static const char __pyx_k_sort[] = "sort";
static const char __pyx_k_sqrt[] = "sqrt";
static const char __pyx_k_test[] = "__test__";
static const char __pyx_k_text[] = "text";
static const char __pyx_k_type[] = "type";
static const char __pyx_k_Debug[] = "Debug";
static const char __pyx_k_Utils[] = "Utils";
static const char __pyx_k_a_box[] = "a_box";
static const char __pyx_k_array[] = "array";
static const char __pyx_k_ave_h[] = "ave_h";
static const char __pyx_k_ave_w[] = "ave_w";
static const char __pyx_k_b_box[] = "b_box";
static const char __pyx_k_block[] = "block";
static const char __pyx_k_box_h[] = "box_h";
static const char __pyx_k_box_w[] = "box_w";
static const char __pyx_k_box_x[] = "box_x";
static const char __pyx_k_box_y[] = "box_y";
static const char __pyx_k_boxes[] = "boxes";
static const char __pyx_k_color[] = "color";
static const char __pyx_k_count[] = "count";
static const char __pyx_k_end_x[] = "end_x";
static const char __pyx_k_end_y[] = "end_y";
static const char __pyx_k_group[] = "group";
static const char __pyx_k_image[] = "image";
static const char __pyx_k_line1[] = "line1";
static const char __pyx_k_line2[] = "line2";
static const char __pyx_k_lines[] = "lines";
static const char __pyx_k_numpy[] = "numpy";
static const char __pyx_k_point[] = "point";
static const char __pyx_k_range[] = "range";
static const char __pyx_k_rects[] = "rects";
static const char __pyx_k_regex[] = "regex";
static const char __pyx_k_right[] = "right";
static const char __pyx_k_shape[] = "shape";
static const char __pyx_k_start[] = "start";
static const char __pyx_k_table[] = "table";
static const char __pyx_k_times[] = "times";
static const char __pyx_k_uint8[] = "uint8";
static const char __pyx_k_width[] = "width";
static const char __pyx_k_xdiff[] = "xdiff";
static const char __pyx_k_ydiff[] = "ydiff";
static const char __pyx_k_zeros[] = "zeros";
static const char __pyx_k_FILLED[] = "FILLED";
static const char __pyx_k_THRESH[] = "THRESH";
static const char __pyx_k_a_line[] = "a_line";
static const char __pyx_k_a_rect[] = "a_rect";
static const char __pyx_k_append[] = "append";
static const char __pyx_k_b_line[] = "b_line";
static const char __pyx_k_b_rect[] = "b_rect";
static const char __pyx_k_blocks[] = "blocks";
static const char __pyx_k_bottom[] = "bottom";
static const char __pyx_k_center[] = "center";
static const char __pyx_k_expand[] = "expand";
static const char __pyx_k_groups[] = "groups";
static const char __pyx_k_h_line[] = "h_line";
static const char __pyx_k_height[] = "height";
static const char __pyx_k_import[] = "__import__";
static const char __pyx_k_insert[] = "insert";
static const char __pyx_k_length[] = "length";
static const char __pyx_k_module[] = "__module__";
static const char __pyx_k_object[] = "object";
static const char __pyx_k_over_f[] = "over_f";
static const char __pyx_k_points[] = "points";
static const char __pyx_k_rect_h[] = "rect_h";
static const char __pyx_k_rect_w[] = "rect_w";
static const char __pyx_k_remove[] = "remove";
static const char __pyx_k_resize[] = "resize";
static const char __pyx_k_sorted[] = "sorted";
static const char __pyx_k_square[] = "square";
static const char __pyx_k_thresh[] = "thresh";
static const char __pyx_k_v_line[] = "v_line";
static const char __pyx_k_a_point[] = "a_point";
static const char __pyx_k_b_point[] = "b_point";
static const char __pyx_k_dst_box[] = "dst_box";
static const char __pyx_k_f_under[] = "f_under";
static const char __pyx_k_float32[] = "float32";
static const char __pyx_k_h_image[] = "h_image";
static const char __pyx_k_h_lines[] = "h_lines";
static const char __pyx_k_new_box[] = "new_box";
static const char __pyx_k_percent[] = "percent";
static const char __pyx_k_prepare[] = "__prepare__";
static const char __pyx_k_putText[] = "putText";
static const char __pyx_k_replace[] = "replace";
static const char __pyx_k_reverse[] = "reverse";
static const char __pyx_k_src_box[] = "src_box";
static const char __pyx_k_start_x[] = "start_x";
static const char __pyx_k_start_y[] = "start_y";
static const char __pyx_k_tmp_col[] = "tmp_col";
static const char __pyx_k_tmp_row[] = "tmp_row";
static const char __pyx_k_v_lines[] = "v_lines";
static const char __pyx_k_w_image[] = "w_image";
static const char __pyx_k_a_rect_h[] = "a_rect_h";
static const char __pyx_k_a_rect_w[] = "a_rect_w";
static const char __pyx_k_a_rect_x[] = "a_rect_x";
static const char __pyx_k_a_rect_y[] = "a_rect_y";
static const char __pyx_k_ave_area[] = "ave_area";
static const char __pyx_k_b_rect_h[] = "b_rect_h";
static const char __pyx_k_b_rect_w[] = "b_rect_w";
static const char __pyx_k_b_rect_x[] = "b_rect_x";
static const char __pyx_k_b_rect_y[] = "b_rect_y";
static const char __pyx_k_constant[] = "constant";
static const char __pyx_k_contours[] = "contours";
static const char __pyx_k_distance[] = "distance";
static const char __pyx_k_dot_rect[] = "dot_rect";
static const char __pyx_k_draw_box[] = "draw_box";
static const char __pyx_k_dst_rect[] = "dst_rect";
static const char __pyx_k_dst_text[] = "dst_text";
static const char __pyx_k_end_line[] = "end_line";
static const char __pyx_k_fill_box[] = "fill_box";
static const char __pyx_k_is_noise[] = "is_noise";
static const char __pyx_k_min_rect[] = "min_rect";
static const char __pyx_k_position[] = "position";
static const char __pyx_k_qualname[] = "__qualname__";
static const char __pyx_k_src_rect[] = "src_rect";
static const char __pyx_k_src_text[] = "src_text";
static const char __pyx_k_tail_box[] = "tail_box";
static const char __pyx_k_temp_box[] = "temp_box";
static const char __pyx_k_text_box[] = "text_box";
static const char __pyx_k_tmp_area[] = "tmp_area";
static const char __pyx_k_vertical[] = "vertical";
static const char __pyx_k_RETR_TREE[] = "RETR_TREE";
static const char __pyx_k_a_rect_x1[] = "a_rect_x1";
static const char __pyx_k_a_rect_x2[] = "a_rect_x2";
static const char __pyx_k_a_rect_y1[] = "a_rect_y1";
static const char __pyx_k_a_rect_y2[] = "a_rect_y2";
static const char __pyx_k_alignment[] = "alignment";
static const char __pyx_k_all_rects[] = "all_rects";
static const char __pyx_k_b_rect_x1[] = "b_rect_x1";
static const char __pyx_k_b_rect_x2[] = "b_rect_x2";
static const char __pyx_k_b_rect_y1[] = "b_rect_y1";
static const char __pyx_k_b_rect_y2[] = "b_rect_y2";
static const char __pyx_k_back_line[] = "back_line";
static const char __pyx_k_box_lines[] = "box_lines";
static const char __pyx_k_crnn_char[] = "crnn_char";
static const char __pyx_k_direction[] = "direction";
static const char __pyx_k_dot_rects[] = "dot_rects";
static const char __pyx_k_draw_line[] = "draw_line";
static const char __pyx_k_end_point[] = "end_point";
static const char __pyx_k_enumerate[] = "enumerate";
static const char __pyx_k_f_between[] = "f_between";
static const char __pyx_k_fullmatch[] = "fullmatch";
static const char __pyx_k_itertools[] = "itertools";
static const char __pyx_k_line_list[] = "line_list";
static const char __pyx_k_line_pair[] = "line_pair";
static const char __pyx_k_line_rect[] = "line_rect";
static const char __pyx_k_max_white[] = "max_white";
static const char __pyx_k_metaclass[] = "__metaclass__";
static const char __pyx_k_part_area[] = "part_area";
static const char __pyx_k_real_line[] = "real_line";
static const char __pyx_k_rect_line[] = "rect_line";
static const char __pyx_k_rect_list[] = "rect_list";
static const char __pyx_k_rect_pair[] = "rect_pair";
static const char __pyx_k_rectangle[] = "rectangle";
static const char __pyx_k_ret_rects[] = "ret_rects";
static const char __pyx_k_same_line[] = "same_line";
static const char __pyx_k_same_rect[] = "same_rect";
static const char __pyx_k_span_list[] = "span_list";
static const char __pyx_k_text_list[] = "text_list";
static const char __pyx_k_thickness[] = "thickness";
static const char __pyx_k_threshold[] = "threshold";
static const char __pyx_k_top_lines[] = "top_lines";
static const char __pyx_k_top_point[] = "top_point";
static const char __pyx_k_underline[] = "underline";
static const char __pyx_k_alignments[] = "alignments";
static const char __pyx_k_area_white[] = "area_white";
static const char __pyx_k_block_text[] = "block_text";
static const char __pyx_k_count_down[] = "count_down";
static const char __pyx_k_crnn_chars[] = "crnn_chars";
static const char __pyx_k_draw_boxes[] = "draw_boxes";
static const char __pyx_k_draw_group[] = "draw_group";
static const char __pyx_k_draw_lines[] = "draw_lines";
static const char __pyx_k_draw_table[] = "draw_table";
static const char __pyx_k_fill_boxes[] = "fill_boxes";
static const char __pyx_k_fill_rects[] = "fill_rects";
static const char __pyx_k_front_line[] = "front_line";
static const char __pyx_k_horizontal[] = "horizontal";
static const char __pyx_k_image_size[] = "image_size";
static const char __pyx_k_inside_box[] = "inside_box";
static const char __pyx_k_left_lines[] = "left_lines";
static const char __pyx_k_left_point[] = "left_point";
static const char __pyx_k_line_color[] = "line_color";
static const char __pyx_k_line_end_x[] = "line_end_x";
static const char __pyx_k_line_end_y[] = "line_end_y";
static const char __pyx_k_line_pairs[] = "line_pairs";
static const char __pyx_k_line_rects[] = "line_rects";
static const char __pyx_k_lines_temp[] = "lines_temp";
static const char __pyx_k_max_h_rect[] = "max_h_rect";
static const char __pyx_k_max_sort_f[] = "max_sort_f";
static const char __pyx_k_max_w_rect[] = "max_w_rect";
static const char __pyx_k_min_h_rect[] = "min_h_rect";
static const char __pyx_k_min_w_rect[] = "min_w_rect";
static const char __pyx_k_other_line[] = "other_line";
static const char __pyx_k_over_lines[] = "over_lines";
static const char __pyx_k_rect_end_x[] = "rect_end_x";
static const char __pyx_k_rect_end_y[] = "rect_end_y";
static const char __pyx_k_ret_blocks[] = "ret_blocks";
static const char __pyx_k_sort_lines[] = "sort_lines";
static const char __pyx_k_split_line[] = "split_line";
static const char __pyx_k_start_line[] = "start_line";
static const char __pyx_k_text_block[] = "text_block";
static const char __pyx_k_text_boxes[] = "text_boxes";
static const char __pyx_k_top_border[] = "top_border";
static const char __pyx_k_underlines[] = "underlines";
static const char __pyx_k_width_line[] = "width_line";
static const char __pyx_k_x_position[] = "x_position";
static const char __pyx_k_y_position[] = "y_position";
static const char __pyx_k_THRESH_SIZE[] = "THRESH_SIZE";
static const char __pyx_k_a_line_rect[] = "a_line_rect";
static const char __pyx_k_a_rect_area[] = "a_rect_area";
static const char __pyx_k_added_boxes[] = "added_boxes";
static const char __pyx_k_b_line_rect[] = "b_line_rect";
static const char __pyx_k_b_rect_area[] = "b_rect_area";
static const char __pyx_k_blank_image[] = "blank_image";
static const char __pyx_k_block_texts[] = "block_texts";
static const char __pyx_k_center_line[] = "center_line";
static const char __pyx_k_center_text[] = "center_text";
static const char __pyx_k_draw_groups[] = "draw_groups";
static const char __pyx_k_expand_rect[] = "expand_rect";
static const char __pyx_k_expand_size[] = "expand_size";
static const char __pyx_k_h_end_point[] = "h_end_point";
static const char __pyx_k_h_line_temp[] = "h_line_temp";
static const char __pyx_k_height_line[] = "height_line";
static const char __pyx_k_image_shape[] = "image_shape";
static const char __pyx_k_invalid_dot[] = "invalid_dot";
static const char __pyx_k_left_border[] = "left_border";
static const char __pyx_k_lower_lines[] = "lower_lines";
static const char __pyx_k_merge_chars[] = "merge_chars";
static const char __pyx_k_merge_lines[] = "merge_lines";
static const char __pyx_k_orientation[] = "orientation";
static const char __pyx_k_reduce_line[] = "reduce_line";
static const char __pyx_k_right_lines[] = "right_lines";
static const char __pyx_k_right_point[] = "right_point";
static const char __pyx_k_same_h_rect[] = "same_h_rect";
static const char __pyx_k_same_v_rect[] = "same_v_rect";
static const char __pyx_k_shrink_line[] = "shrink_line";
static const char __pyx_k_shrink_size[] = "shrink_size";
static const char __pyx_k_split_lines[] = "split_lines";
static const char __pyx_k_start_point[] = "start_point";
static const char __pyx_k_text_blocks[] = "text_blocks";
static const char __pyx_k_threshold_h[] = "threshold_h";
static const char __pyx_k_threshold_v[] = "threshold_v";
static const char __pyx_k_upper_lines[] = "upper_lines";
static const char __pyx_k_v_end_point[] = "v_end_point";
static const char __pyx_k_width_ratio[] = "width_ratio";
static const char __pyx_k_OVERLAP_SIZE[] = "OVERLAP_SIZE";
static const char __pyx_k_PADDING_SIZE[] = "PADDING_SIZE";
static const char __pyx_k_align_center[] = "align_center";
static const char __pyx_k_binary_image[] = "binary_image";
static const char __pyx_k_border_color[] = "border_color";
static const char __pyx_k_bottom_lines[] = "bottom_lines";
static const char __pyx_k_bottom_point[] = "bottom_point";
static const char __pyx_k_boundingRect[] = "boundingRect";
static const char __pyx_k_combinations[] = "combinations";
static const char __pyx_k_content_rect[] = "content_rect";
static const char __pyx_k_expand_image[] = "expand_image";
static const char __pyx_k_extend_boxes[] = "extend_boxes";
static const char __pyx_k_extend_lines[] = "extend_lines";
static const char __pyx_k_findContours[] = "findContours";
static const char __pyx_k_h_line_pairs[] = "h_line_pairs";
static const char __pyx_k_h_lines_temp[] = "h_lines_temp";
static const char __pyx_k_header_regex[] = "header_regex";
static const char __pyx_k_height_ratio[] = "height_ratio";
static const char __pyx_k_inside_lines[] = "inside_lines";
static const char __pyx_k_invalid_dots[] = "invalid_dots";
static const char __pyx_k_invalid_line[] = "invalid_line";
static const char __pyx_k_is_fill_area[] = "is_fill_area";
static const char __pyx_k_is_intersect[] = "is_intersect";
static const char __pyx_k_line_checked[] = "line_checked";
static const char __pyx_k_line_start_x[] = "line_start_x";
static const char __pyx_k_line_start_y[] = "line_start_y";
static const char __pyx_k_min_distance[] = "min_distance";
static const char __pyx_k_noise_blocks[] = "noise_blocks";
static const char __pyx_k_overlap_area[] = "overlap_area";
static const char __pyx_k_padding_size[] = "padding_size";
static const char __pyx_k_rect_in_list[] = "rect_in_list";
static const char __pyx_k_rect_start_x[] = "rect_start_x";
static const char __pyx_k_rect_start_y[] = "rect_start_y";
static const char __pyx_k_refill_rects[] = "refill_rects";
static const char __pyx_k_resize_image[] = "resize_image";
static const char __pyx_k_return_lines[] = "return_lines";
static const char __pyx_k_return_rects[] = "return_rects";
static const char __pyx_k_right_border[] = "right_border";
static const char __pyx_k_searched_ids[] = "searched_ids";
static const char __pyx_k_single_lines[] = "single_lines";
static const char __pyx_k_staticmethod[] = "staticmethod";
static const char __pyx_k_v_line_pairs[] = "v_line_pairs";
static const char __pyx_k_virtual_line[] = "virtual_line";
static const char __pyx_k_white_pixels[] = "white_pixels";
static const char __pyx_k_RETR_EXTERNAL[] = "RETR_EXTERNAL";
static const char __pyx_k_bottom_border[] = "bottom_border";
static const char __pyx_k_bounding_rect[] = "bounding_rect";
static const char __pyx_k_calc_centroid[] = "calc_centroid";
static const char __pyx_k_content_block[] = "content_block";
static const char __pyx_k_content_boxes[] = "content_boxes";
static const char __pyx_k_content_rects[] = "content_rects";
static const char __pyx_k_h_start_point[] = "h_start_point";
static const char __pyx_k_ignore_single[] = "ignore_single";
static const char __pyx_k_invalid_lines[] = "invalid_lines";
static const char __pyx_k_neighbor_line[] = "neighbor_line";
static const char __pyx_k_outside_boxes[] = "outside_boxes";
static const char __pyx_k_outside_rects[] = "outside_rects";
static const char __pyx_k_overlap_ratio[] = "overlap_ratio";
static const char __pyx_k_same_position[] = "same_position";
static const char __pyx_k_top_stop_line[] = "top_stop_line";
static const char __pyx_k_v_start_point[] = "v_start_point";
static const char __pyx_k_Utils_draw_box[] = "Utils.draw_box";
static const char __pyx_k_Utils_fill_box[] = "Utils.fill_box";
static const char __pyx_k_Utils_is_noise[] = "Utils.is_noise";
static const char __pyx_k_align_vertical[] = "align_vertical";
static const char __pyx_k_col_alignments[] = "col_alignments";
static const char __pyx_k_content_blocks[] = "content_blocks";
static const char __pyx_k_expanded_image[] = "expanded_image";
static const char __pyx_k_external_rects[] = "external_rects";
static const char __pyx_k_h_single_lines[] = "h_single_lines";
static const char __pyx_k_is_box_far_box[] = "is_box_far_box";
static const char __pyx_k_left_stop_line[] = "left_stop_line";
static const char __pyx_k_new_text_block[] = "new_text_block";
static const char __pyx_k_old_text_block[] = "old_text_block";
static const char __pyx_k_orig_end_point[] = "orig_end_point";
static const char __pyx_k_temp_line_rect[] = "temp_line_rect";
static const char __pyx_k_v_single_lines[] = "v_single_lines";
static const char __pyx_k_vertical_lines[] = "vertical_lines";
static const char __pyx_k_virtual_h_line[] = "virtual_h_line";
static const char __pyx_k_virtual_v_line[] = "virtual_v_line";
static const char __pyx_k_Utils_draw_line[] = "Utils.draw_line";
static const char __pyx_k_Utils_same_line[] = "Utils.same_line";
static const char __pyx_k_Utils_same_rect[] = "Utils.same_rect";
static const char __pyx_k_a_content_block[] = "a_content_block";
static const char __pyx_k_b_content_block[] = "b_content_block";
static const char __pyx_k_constant_values[] = "constant_values";
static const char __pyx_k_line_inside_box[] = "line_inside_box";
static const char __pyx_k_line_split_line[] = "line_split_line";
static const char __pyx_k_lines_over_line[] = "lines_over_line";
static const char __pyx_k_new_text_blocks[] = "new_text_blocks";
static const char __pyx_k_old_text_blocks[] = "old_text_blocks";
static const char __pyx_k_overlap_percent[] = "overlap_percent";
static const char __pyx_k_ratio_threshold[] = "ratio_threshold";
static const char __pyx_k_real_text_block[] = "real_text_block";
static const char __pyx_k_right_stop_line[] = "right_stop_line";
static const char __pyx_k_temp_line_rects[] = "temp_line_rects";
static const char __pyx_k_text_block_rect[] = "text_block_rect";
static const char __pyx_k_text_stats_dict[] = "text_stats_dict";
static const char __pyx_k_ALIGNMENT_THRESH[] = "ALIGNMENT_THRESH";
static const char __pyx_k_Utils_draw_boxes[] = "Utils.draw_boxes";
static const char __pyx_k_Utils_draw_group[] = "Utils.draw_group";
static const char __pyx_k_Utils_draw_lines[] = "Utils.draw_lines";
static const char __pyx_k_Utils_draw_table[] = "Utils.draw_table";
static const char __pyx_k_Utils_fill_boxes[] = "Utils.fill_boxes";
static const char __pyx_k_Utils_fill_rects[] = "Utils.fill_rects";
static const char __pyx_k_Utils_line_pairs[] = "Utils.line_pairs";
static const char __pyx_k_Utils_sort_lines[] = "Utils.sort_lines";
static const char __pyx_k_Utils_width_line[] = "Utils.width_line";
static const char __pyx_k_align_horizontal[] = "align_horizontal";
static const char __pyx_k_bottom_stop_line[] = "bottom_stop_line";
static const char __pyx_k_horizontal_lines[] = "horizontal_lines";
static const char __pyx_k_is_point_in_line[] = "is_point_in_line";
static const char __pyx_k_lines_inside_box[] = "lines_inside_box";
static const char __pyx_k_merge_chars_list[] = "merge_chars_list";
static const char __pyx_k_orig_start_point[] = "orig_start_point";
static const char __pyx_k_rect_inside_rect[] = "rect_inside_rect";
static const char __pyx_k_rects_under_rect[] = "rects_under_rect";
static const char __pyx_k_table_processing[] = "table_processing";
static const char __pyx_k_text_block_rects[] = "text_block_rects";
static const char __pyx_k_white_percentage[] = "white_percentage";
static const char __pyx_k_FILL_AREA_PERCENT[] = "FILL_AREA_PERCENT";
static const char __pyx_k_Utils_draw_groups[] = "Utils.draw_groups";
static const char __pyx_k_Utils_expand_rect[] = "Utils.expand_rect";
static const char __pyx_k_Utils_height_line[] = "Utils.height_line";
static const char __pyx_k_Utils_merge_lines[] = "Utils.merge_lines";
static const char __pyx_k_Utils_reduce_line[] = "Utils.reduce_line";
static const char __pyx_k_Utils_same_h_rect[] = "Utils.same_h_rect";
static const char __pyx_k_Utils_same_v_rect[] = "Utils.same_v_rect";
static const char __pyx_k_Utils_shrink_line[] = "Utils.shrink_line";
static const char __pyx_k_Utils_split_lines[] = "Utils.split_lines";
static const char __pyx_k_connect_at_corner[] = "connect_at_corner";
static const char __pyx_k_expand_width_rect[] = "expand_width_rect";
static const char __pyx_k_extract_line_rect[] = "extract_line_rect";
static const char __pyx_k_h_line_inside_box[] = "h_line_inside_box";
static const char __pyx_k_is_line_cut_rects[] = "is_line_cut_rects";
static const char __pyx_k_is_point_far_line[] = "is_point_far_line";
static const char __pyx_k_line_intersection[] = "line_intersection";
static const char __pyx_k_line_overlap_line[] = "line_overlap_line";
static const char __pyx_k_line_rect_padding[] = "line_rect_padding";
static const char __pyx_k_rect_overlap_rect[] = "rect_overlap_rect";
static const char __pyx_k_stop_point_at_top[] = "stop_point_at_top";
static const char __pyx_k_v_line_inside_box[] = "v_line_inside_box";
static const char __pyx_k_REVERSE_NOISE_SIZE[] = "REVERSE_NOISE_SIZE";
static const char __pyx_k_Utils_expand_image[] = "Utils.expand_image";
static const char __pyx_k_Utils_extend_lines[] = "Utils.extend_lines";
static const char __pyx_k_Utils_is_fill_area[] = "Utils.is_fill_area";
static const char __pyx_k_Utils_is_intersect[] = "Utils.is_intersect";
static const char __pyx_k_Utils_rect_in_list[] = "Utils.rect_in_list";
static const char __pyx_k_Utils_refill_rects[] = "Utils.refill_rects";
static const char __pyx_k_Utils_resize_image[] = "Utils.resize_image";
static const char __pyx_k_Utils_single_lines[] = "Utils.single_lines";
static const char __pyx_k_alignments_contain[] = "alignments_contain";
static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
static const char __pyx_k_distance_threshold[] = "distance_threshold";
static const char __pyx_k_divider_line_color[] = "divider_line_color";
static const char __pyx_k_draw_content_block[] = "draw_content_block";
static const char __pyx_k_draw_virtual_lines[] = "draw_virtual_lines";
static const char __pyx_k_expand_height_rect[] = "expand_height_rect";
static const char __pyx_k_extract_line_image[] = "extract_line_image";
static const char __pyx_k_intersection_point[] = "intersection_point";
static const char __pyx_k_line_overlap_box_f[] = "line_overlap_box_f";
static const char __pyx_k_line_overlap_rects[] = "line_overlap_rects";
static const char __pyx_k_merge_border_lines[] = "merge_border_lines";
static const char __pyx_k_merge_single_chars[] = "merge_single_chars";
static const char __pyx_k_original_end_point[] = "original_end_point";
static const char __pyx_k_rect_can_be_merged[] = "rect_can_be_merged";
static const char __pyx_k_removed_line_rects[] = "removed_line_rects";
static const char __pyx_k_search_text_by_box[] = "search_text_by_box";
static const char __pyx_k_single_text_blocks[] = "single_text_blocks";
static const char __pyx_k_stop_point_at_left[] = "stop_point_at_left";
static const char __pyx_k_threshold_distance[] = "threshold_distance";
static const char __pyx_k_vertical_stop_line[] = "vertical_stop_line";
static const char __pyx_k_CHAIN_APPROX_SIMPLE[] = "CHAIN_APPROX_SIMPLE";
static const char __pyx_k_Utils_bounding_rect[] = "Utils.bounding_rect";
static const char __pyx_k_Utils_calc_centroid[] = "Utils.calc_centroid";
static const char __pyx_k_Utils_outside_rects[] = "Utils.outside_rects";
static const char __pyx_k_Utils_same_position[] = "Utils.same_position";
static const char __pyx_k_bounding_rect_lines[] = "bounding_rect_lines";
static const char __pyx_k_convert_box_to_line[] = "convert_box_to_line";
static const char __pyx_k_convert_line_to_box[] = "convert_line_to_box";
static const char __pyx_k_draw_content_blocks[] = "draw_content_blocks";
static const char __pyx_k_h_line_overlap_rect[] = "h_line_overlap_rect";
static const char __pyx_k_merge_overlap_boxes[] = "merge_overlap_boxes";
static const char __pyx_k_remove_padding_rect[] = "remove_padding_rect";
static const char __pyx_k_stop_point_at_right[] = "stop_point_at_right";
static const char __pyx_k_threshold_deviation[] = "threshold_deviation";
static const char __pyx_k_v_line_overlap_rect[] = "v_line_overlap_rect";
static const char __pyx_k_FONT_HERSHEY_COMPLEX[] = "FONT_HERSHEY_COMPLEX";
static const char __pyx_k_REVERSE_AREA_PERCENT[] = "REVERSE_AREA_PERCENT";
static const char __pyx_k_Utils_align_vertical[] = "Utils.align_vertical";
static const char __pyx_k_Utils_external_rects[] = "Utils.external_rects";
static const char __pyx_k_Utils_is_box_far_box[] = "Utils.is_box_far_box";
static const char __pyx_k_connect_at_end_point[] = "connect_at_end_point";
static const char __pyx_k_convert_rect_to_rect[] = "convert_rect_to_rect";
static const char __pyx_k_duplicate_line_rects[] = "duplicate_line_rects";
static const char __pyx_k_horizontal_stop_line[] = "horizontal_stop_line";
static const char __pyx_k_line_at_border_image[] = "line_at_border_image";
static const char __pyx_k_line_belong_with_box[] = "line_belong_with_box";
static const char __pyx_k_lines_intersect_line[] = "lines_intersect_line";
static const char __pyx_k_original_start_point[] = "original_start_point";
static const char __pyx_k_same_horizontal_sign[] = "same_horizontal_sign";
static const char __pyx_k_stop_point_at_bottom[] = "stop_point_at_bottom";
static const char __pyx_k_Utils_line_inside_box[] = "Utils.line_inside_box";
static const char __pyx_k_Utils_line_split_line[] = "Utils.line_split_line";
static const char __pyx_k_Utils_lines_over_line[] = "Utils.lines_over_line";
static const char __pyx_k_Utils_real_text_block[] = "Utils.real_text_block";
static const char __pyx_k_extend_line_at_corner[] = "extend_line_at_corner";
static const char __pyx_k_invalid_vertical_line[] = "invalid_vertical_line";
static const char __pyx_k_line_inside_table_box[] = "line_inside_table_box";
static const char __pyx_k_merge_duplicate_lines[] = "merge_duplicate_lines";
static const char __pyx_k_remove_invalid_signed[] = "remove_invalid_signed";
static const char __pyx_k_remove_line_at_border[] = "remove_line_at_border";
static const char __pyx_k_remove_underline_text[] = "remove_underline_text";
static const char __pyx_k_table_extraction_line[] = "table_extraction.line";
static const char __pyx_k_Utils_align_horizontal[] = "Utils.align_horizontal";
static const char __pyx_k_Utils_is_point_in_line[] = "Utils.is_point_in_line";
static const char __pyx_k_Utils_lines_inside_box[] = "Utils.lines_inside_box";
static const char __pyx_k_Utils_rect_inside_rect[] = "Utils.rect_inside_rect";
static const char __pyx_k_Utils_rects_under_rect[] = "Utils.rects_under_rect";
static const char __pyx_k_Utils_white_percentage[] = "Utils.white_percentage";
static const char __pyx_k_candidate_header_count[] = "candidate_header_count";
static const char __pyx_k_connect_at_start_point[] = "connect_at_start_point";
static const char __pyx_k_convert_rects_to_rects[] = "convert_rects_to_rects";
static const char __pyx_k_divider_vertical_lines[] = "divider_vertical_lines";
static const char __pyx_k_is_rect_contains_rects[] = "is_rect_contains_rects";
static const char __pyx_k_is_rect_divide_content[] = "is_rect_divide_content";
static const char __pyx_k_line_between_two_rects[] = "line_between_two_rects";
static const char __pyx_k_line_inside_text_block[] = "line_inside_text_block";
static const char __pyx_k_rect_between_two_rects[] = "rect_between_two_rects";
static const char __pyx_k_rect_overlap_two_rects[] = "rect_overlap_two_rects";
static const char __pyx_k_remove_dot_lines_noise[] = "remove_dot_lines_noise";
static const char __pyx_k_table_extraction_debug[] = "table_extraction.debug";
static const char __pyx_k_vertical_neighbor_line[] = "vertical_neighbor_line";
static const char __pyx_k_Utils_connect_at_corner[] = "Utils.connect_at_corner";
static const char __pyx_k_Utils_expand_width_rect[] = "Utils.expand_width_rect";
static const char __pyx_k_Utils_extract_line_rect[] = "Utils.extract_line_rect";
static const char __pyx_k_Utils_h_line_inside_box[] = "Utils.h_line_inside_box";
static const char __pyx_k_Utils_is_line_cut_rects[] = "Utils.is_line_cut_rects";
static const char __pyx_k_Utils_is_point_far_line[] = "Utils.is_point_far_line";
static const char __pyx_k_Utils_line_intersection[] = "Utils.line_intersection";
static const char __pyx_k_Utils_line_overlap_line[] = "Utils.line_overlap_line";
static const char __pyx_k_Utils_rect_overlap_rect[] = "Utils.rect_overlap_rect";
static const char __pyx_k_Utils_stop_point_at_top[] = "Utils.stop_point_at_top";
static const char __pyx_k_Utils_v_line_inside_box[] = "Utils.v_line_inside_box";
static const char __pyx_k_content_block_in_groups[] = "content_block_in_groups";
static const char __pyx_k_get_rect_contains_rects[] = "get_rect_contains_rects";
static const char __pyx_k_invalid_horizontal_line[] = "invalid_horizontal_line";
static const char __pyx_k_remove_noise_lines_rect[] = "remove_noise_lines_rect";
static const char __pyx_k_Utils_alignments_contain[] = "Utils.alignments_contain";
static const char __pyx_k_Utils_draw_content_block[] = "Utils.draw_content_block";
static const char __pyx_k_Utils_expand_height_rect[] = "Utils.expand_height_rect";
static const char __pyx_k_Utils_line_overlap_rects[] = "Utils.line_overlap_rects";
static const char __pyx_k_Utils_merge_border_lines[] = "Utils.merge_border_lines";
static const char __pyx_k_Utils_merge_single_chars[] = "Utils.merge_single_chars";
static const char __pyx_k_Utils_rect_can_be_merged[] = "Utils.rect_can_be_merged";
static const char __pyx_k_Utils_search_text_by_box[] = "Utils.search_text_by_box";
static const char __pyx_k_Utils_single_text_blocks[] = "Utils.single_text_blocks";
static const char __pyx_k_Utils_stop_point_at_left[] = "Utils.stop_point_at_left";
static const char __pyx_k_Utils_vertical_stop_line[] = "Utils.vertical_stop_line";
static const char __pyx_k_distance_from_box_to_box[] = "distance_from_box_to_box";
static const char __pyx_k_divider_horizontal_lines[] = "divider_horizontal_lines";
static const char __pyx_k_get_rect_contains_blocks[] = "get_rect_contains_blocks";
static const char __pyx_k_horizontal_neighbor_line[] = "horizontal_neighbor_line";
static const char __pyx_k_Utils_bounding_rect_lines[] = "Utils.bounding_rect_lines";
static const char __pyx_k_Utils_convert_box_to_line[] = "Utils.convert_box_to_line";
static const char __pyx_k_Utils_convert_line_to_box[] = "Utils.convert_line_to_box";
static const char __pyx_k_Utils_draw_content_blocks[] = "Utils.draw_content_blocks";
static const char __pyx_k_Utils_h_line_overlap_rect[] = "Utils.h_line_overlap_rect";
static const char __pyx_k_Utils_merge_overlap_boxes[] = "Utils.merge_overlap_boxes";
static const char __pyx_k_Utils_remove_padding_rect[] = "Utils.remove_padding_rect";
static const char __pyx_k_Utils_stop_point_at_right[] = "Utils.stop_point_at_right";
static const char __pyx_k_Utils_v_line_overlap_rect[] = "Utils.v_line_overlap_rect";
static const char __pyx_k_distance_from_line_to_box[] = "distance_from_line_to_box";
static const char __pyx_k_expand_with_vertical_line[] = "expand_with_vertical_line";
static const char __pyx_k_is_rect_divide_text_boxes[] = "is_rect_divide_text_boxes";
static const char __pyx_k_rect_vertical_inside_rect[] = "rect_vertical_inside_rect";
static const char __pyx_k_remove_reverse_line_rects[] = "remove_reverse_line_rects";
static const char __pyx_k_Utils_convert_rect_to_rect[] = "Utils.convert_rect_to_rect";
static const char __pyx_k_Utils_duplicate_line_rects[] = "Utils.duplicate_line_rects";
static const char __pyx_k_Utils_horizontal_stop_line[] = "Utils.horizontal_stop_line";
static const char __pyx_k_Utils_line_at_border_image[] = "Utils.line_at_border_image";
static const char __pyx_k_Utils_line_belong_with_box[] = "Utils.line_belong_with_box";
static const char __pyx_k_Utils_lines_intersect_line[] = "Utils.lines_intersect_line";
static const char __pyx_k_Utils_stop_point_at_bottom[] = "Utils.stop_point_at_bottom";
static const char __pyx_k_distance_from_line_to_line[] = "distance_from_line_to_line";
static const char __pyx_k_get_area_from_binary_image[] = "get_area_from_binary_image";
static const char __pyx_k_rect_vertical_overlap_rect[] = "rect_vertical_overlap_rect";
static const char __pyx_k_remove_content_block_by_id[] = "remove_content_block_by_id";
static const char __pyx_k_Utils_extend_line_at_corner[] = "Utils.extend_line_at_corner";
static const char __pyx_k_Utils_line_inside_table_box[] = "Utils.line_inside_table_box";
static const char __pyx_k_Utils_merge_duplicate_lines[] = "Utils.merge_duplicate_lines";
static const char __pyx_k_Utils_remove_invalid_signed[] = "Utils.remove_invalid_signed";
static const char __pyx_k_Utils_remove_underline_text[] = "Utils.remove_underline_text";
static const char __pyx_k_distance_from_point_to_line[] = "distance_from_point_to_line";
static const char __pyx_k_expand_with_horizontal_line[] = "expand_with_horizontal_line";
static const char __pyx_k_get_rows_from_content_boxes[] = "get_rows_from_content_boxes";
static const char __pyx_k_merge_two_types_text_blocks[] = "merge_two_types_text_blocks";
static const char __pyx_k_rect_horizontal_inside_rect[] = "rect_horizontal_inside_rect";
static const char __pyx_k_remove_duplicate_line_rects[] = "remove_duplicate_line_rects";
static const char __pyx_k_remove_noise_content_blocks[] = "remove_noise_content_blocks";
static const char __pyx_k_vertical_left_neighbor_line[] = "vertical_left_neighbor_line";
static const char __pyx_k_Utils_convert_rects_to_rects[] = "Utils.convert_rects_to_rects";
static const char __pyx_k_Utils_is_rect_contains_rects[] = "Utils.is_rect_contains_rects";
static const char __pyx_k_Utils_is_rect_divide_content[] = "Utils.is_rect_divide_content";
static const char __pyx_k_Utils_line_between_two_rects[] = "Utils.line_between_two_rects";
static const char __pyx_k_Utils_line_inside_text_block[] = "Utils.line_inside_text_block";
static const char __pyx_k_Utils_rect_between_two_rects[] = "Utils.rect_between_two_rects";
static const char __pyx_k_Utils_rect_overlap_two_rects[] = "Utils.rect_overlap_two_rects";
static const char __pyx_k_Utils_remove_dot_lines_noise[] = "Utils.remove_dot_lines_noise";
static const char __pyx_k_Utils_vertical_neighbor_line[] = "Utils.vertical_neighbor_line";
static const char __pyx_k_create_virtual_vertical_line[] = "create_virtual_vertical_line";
static const char __pyx_k_distance_from_point_to_point[] = "distance_from_point_to_point";
static const char __pyx_k_horizontal_top_neighbor_line[] = "horizontal_top_neighbor_line";
static const char __pyx_k_is_end_point_on_intersection[] = "is_end_point_on_intersection";
static const char __pyx_k_rect_horizontal_overlap_rect[] = "rect_horizontal_overlap_rect";
static const char __pyx_k_reset_connect_at_line_corner[] = "reset_connect_at_line_corner";
static const char __pyx_k_vertical_right_neighbor_line[] = "vertical_right_neighbor_line";
static const char __pyx_k_Utils_content_block_in_groups[] = "Utils.content_block_in_groups";
static const char __pyx_k_Utils_get_rect_contains_rects[] = "Utils.get_rect_contains_rects";
static const char __pyx_k_Utils_remove_noise_lines_rect[] = "Utils.remove_noise_lines_rect";
static const char __pyx_k_check_two_points_in_same_line[] = "check_two_points_in_same_line";
static const char __pyx_k_Utils_distance_from_box_to_box[] = "Utils.distance_from_box_to_box";
static const char __pyx_k_Utils_get_rect_contains_blocks[] = "Utils.get_rect_contains_blocks";
static const char __pyx_k_Utils_horizontal_neighbor_line[] = "Utils.horizontal_neighbor_line";
static const char __pyx_k_Utils_sort_lines_locals_lambda[] = "Utils.sort_lines.<locals>.<lambda>";
static const char __pyx_k_connect_at_start_and_end_point[] = "connect_at_start_and_end_point";
static const char __pyx_k_create_virtual_horizontal_line[] = "create_virtual_horizontal_line";
static const char __pyx_k_get_columns_from_content_boxes[] = "get_columns_from_content_boxes";
static const char __pyx_k_has_box_between_content_blocks[] = "has_box_between_content_blocks";
static const char __pyx_k_is_start_point_on_intersection[] = "is_start_point_on_intersection";
static const char __pyx_k_rect_overlap_rect_with_percent[] = "rect_overlap_rect_with_percent";
static const char __pyx_k_Utils_create_virtual_horizontal[] = "Utils.create_virtual_horizontal_line";
static const char __pyx_k_Utils_distance_from_line_to_box[] = "Utils.distance_from_line_to_box";
static const char __pyx_k_Utils_is_rect_divide_text_boxes[] = "Utils.is_rect_divide_text_boxes";
static const char __pyx_k_Utils_merge_border_lines_locals[] = "Utils.merge_border_lines.<locals>.<lambda>";
static const char __pyx_k_Utils_rect_vertical_inside_rect[] = "Utils.rect_vertical_inside_rect";
static const char __pyx_k_Utils_remove_reverse_line_rects[] = "Utils.remove_reverse_line_rects";
static const char __pyx_k_Utils_stop_point_at_left_locals[] = "Utils.stop_point_at_left.<locals>.<lambda>";
static const char __pyx_k_horizontal_bottom_neighbor_line[] = "horizontal_bottom_neighbor_line";
static const char __pyx_k_is_text_blocks_header_by_header[] = "is_text_blocks_header_by_header_dict";
static const char __pyx_k_Utils_bounding_lines_virtual_lin[] = "Utils.bounding_lines_virtual_line_real_line";
static const char __pyx_k_Utils_check_two_points_in_same_l[] = "Utils.check_two_points_in_same_line";
static const char __pyx_k_Utils_create_virtual_vertical_li[] = "Utils.create_virtual_vertical_line";
static const char __pyx_k_Utils_distance_from_line_to_line[] = "Utils.distance_from_line_to_line";
static const char __pyx_k_Utils_distance_from_point_to_lin[] = "Utils.distance_from_point_to_line";
static const char __pyx_k_Utils_distance_from_point_to_poi[] = "Utils.distance_from_point_to_point";
static const char __pyx_k_Utils_extend_line_at_corner_loca[] = "Utils.extend_line_at_corner.<locals>.<lambda>";
static const char __pyx_k_Utils_get_area_from_binary_image[] = "Utils.get_area_from_binary_image";
static const char __pyx_k_Utils_get_columns_from_content_b[] = "Utils.get_columns_from_content_boxes.<locals>.<lambda>";
static const char __pyx_k_Utils_get_rows_from_content_boxe[] = "Utils.get_rows_from_content_boxes.<locals>.<lambda>";
static const char __pyx_k_Utils_has_box_between_content_bl[] = "Utils.has_box_between_content_blocks.<locals>.<lambda>";
static const char __pyx_k_Utils_horizontal_bottom_neighbor[] = "Utils.horizontal_bottom_neighbor_line";
static const char __pyx_k_Utils_horizontal_line_cut_vertic[] = "Utils.horizontal_line_cut_vertical_line";
static const char __pyx_k_Utils_horizontal_top_neighbor_li[] = "Utils.horizontal_top_neighbor_line";
static const char __pyx_k_Utils_is_end_point_on_intersecti[] = "Utils.is_end_point_on_intersection";
static const char __pyx_k_Utils_is_start_point_on_intersec[] = "Utils.is_start_point_on_intersection";
static const char __pyx_k_Utils_is_text_blocks_header_by_h[] = "Utils.is_text_blocks_header_by_header_dict";
static const char __pyx_k_Utils_line_inside_text_block_loc[] = "Utils.line_inside_text_block.<locals>.expand_with_horizontal_line";
static const char __pyx_k_Utils_line_intersection_locals_d[] = "Utils.line_intersection.<locals>.det";
static const char __pyx_k_Utils_line_overlap_line_locals_l[] = "Utils.line_overlap_line.<locals>.<lambda>";
static const char __pyx_k_Utils_lines_over_line_locals_lam[] = "Utils.lines_over_line.<locals>.<lambda>";
static const char __pyx_k_Utils_merge_two_types_text_block[] = "Utils.merge_two_types_text_blocks";
static const char __pyx_k_Utils_outside_rects_locals_max_s[] = "Utils.outside_rects.<locals>.max_sort_f";
static const char __pyx_k_Utils_rect_between_two_rects_loc[] = "Utils.rect_between_two_rects.<locals>.<lambda>";
static const char __pyx_k_Utils_rect_horizontal_inside_rec[] = "Utils.rect_horizontal_inside_rect";
static const char __pyx_k_Utils_rect_horizontal_overlap_re[] = "Utils.rect_horizontal_overlap_rect.<locals>.<lambda>";
static const char __pyx_k_Utils_rect_overlap_rect_with_per[] = "Utils.rect_overlap_rect_with_percent";
static const char __pyx_k_Utils_rect_overlap_rect_with_wid[] = "Utils.rect_overlap_rect_with_width_height";
static const char __pyx_k_Utils_rect_vertical_overlap_rect[] = "Utils.rect_vertical_overlap_rect.<locals>.<lambda>";
static const char __pyx_k_Utils_rects_under_rect_locals_la[] = "Utils.rects_under_rect.<locals>.<lambda>";
static const char __pyx_k_Utils_remove_content_block_by_id[] = "Utils.remove_content_block_by_id";
static const char __pyx_k_Utils_remove_duplicate_line_rect[] = "Utils.remove_duplicate_line_rects.<locals>.<lambda>";
static const char __pyx_k_Utils_remove_invalid_signed_loca[] = "Utils.remove_invalid_signed.<locals>.same_horizontal_sign";
static const char __pyx_k_Utils_remove_noise_content_block[] = "Utils.remove_noise_content_blocks";
static const char __pyx_k_Utils_remove_underline_text_loca[] = "Utils.remove_underline_text.<locals>.align_center";
static const char __pyx_k_Utils_reset_connect_at_line_corn[] = "Utils.reset_connect_at_line_corner";
static const char __pyx_k_Utils_stop_point_at_bottom_local[] = "Utils.stop_point_at_bottom.<locals>.<lambda>";
static const char __pyx_k_Utils_stop_point_at_right_locals[] = "Utils.stop_point_at_right.<locals>.<lambda>";
static const char __pyx_k_Utils_stop_point_at_top_locals_l[] = "Utils.stop_point_at_top.<locals>.<lambda>";
static const char __pyx_k_Utils_vertical_left_neighbor_lin[] = "Utils.vertical_left_neighbor_line";
static const char __pyx_k_Utils_vertical_line_cut_horionta[] = "Utils.vertical_line_cut_horiontal_line";
static const char __pyx_k_Utils_vertical_right_neighbor_li[] = "Utils.vertical_right_neighbor_line";
static const char __pyx_k_bounding_lines_virtual_line_real[] = "bounding_lines_virtual_line_real_line";
static const char __pyx_k_horizontal_line_cut_vertical_lin[] = "horizontal_line_cut_vertical_line";
static const char __pyx_k_rect_overlap_rect_with_width_hei[] = "rect_overlap_rect_with_width_height";
static const char __pyx_k_table_extraction_utils_table_ext[] = "table_extraction/utils_table_extraction.pyx";
static const char __pyx_k_vertical_line_cut_horiontal_line[] = "vertical_line_cut_horiontal_line";
static const char __pyx_k_Utils_get_columns_from_content_b_2[] = "Utils.get_columns_from_content_boxes";
static const char __pyx_k_Utils_get_rows_from_content_boxe_2[] = "Utils.get_rows_from_content_boxes";
static const char __pyx_k_Utils_has_box_between_content_bl_2[] = "Utils.has_box_between_content_blocks";
static const char __pyx_k_Utils_line_inside_text_block_loc_2[] = "Utils.line_inside_text_block.<locals>.expand_with_vertical_line";
static const char __pyx_k_Utils_rect_horizontal_overlap_re_2[] = "Utils.rect_horizontal_overlap_rect";
static const char __pyx_k_Utils_rect_vertical_overlap_rect_2[] = "Utils.rect_vertical_overlap_rect";
static const char __pyx_k_Utils_remove_duplicate_line_rect_2[] = "Utils.remove_duplicate_line_rects";
static const char __pyx_k_table_extraction_utils_table_ext_2[] = "table_extraction.utils_table_extraction";
static PyObject *__pyx_n_s_ALIGNMENT_THRESH;
static PyObject *__pyx_n_s_CHAIN_APPROX_SIMPLE;
static PyObject *__pyx_n_s_Debug;
static PyObject *__pyx_n_s_FILLED;
static PyObject *__pyx_n_s_FILL_AREA_PERCENT;
static PyObject *__pyx_n_s_FONT_HERSHEY_COMPLEX;
static PyObject *__pyx_n_s_Line;
static PyObject *__pyx_n_s_OVERLAP_SIZE;
static PyObject *__pyx_n_s_PADDING_SIZE;
static PyObject *__pyx_n_s_RETR_EXTERNAL;
static PyObject *__pyx_n_s_RETR_TREE;
static PyObject *__pyx_n_s_REVERSE_AREA_PERCENT;
static PyObject *__pyx_n_s_REVERSE_NOISE_SIZE;
static PyObject *__pyx_n_s_THRESH;
static PyObject *__pyx_n_s_THRESH_SIZE;
static PyObject *__pyx_n_s_Utils;
static PyObject *__pyx_n_s_Utils_align_horizontal;
static PyObject *__pyx_n_s_Utils_align_vertical;
static PyObject *__pyx_n_s_Utils_alignments_contain;
static PyObject *__pyx_n_s_Utils_bounding_lines_virtual_lin;
static PyObject *__pyx_n_s_Utils_bounding_rect;
static PyObject *__pyx_n_s_Utils_bounding_rect_lines;
static PyObject *__pyx_n_s_Utils_calc_centroid;
static PyObject *__pyx_n_s_Utils_check_two_points_in_same_l;
static PyObject *__pyx_n_s_Utils_connect_at_corner;
static PyObject *__pyx_n_s_Utils_content_block_in_groups;
static PyObject *__pyx_n_s_Utils_convert_box_to_line;
static PyObject *__pyx_n_s_Utils_convert_line_to_box;
static PyObject *__pyx_n_s_Utils_convert_rect_to_rect;
static PyObject *__pyx_n_s_Utils_convert_rects_to_rects;
static PyObject *__pyx_n_s_Utils_create_virtual_horizontal;
static PyObject *__pyx_n_s_Utils_create_virtual_vertical_li;
static PyObject *__pyx_n_s_Utils_distance_from_box_to_box;
static PyObject *__pyx_n_s_Utils_distance_from_line_to_box;
static PyObject *__pyx_n_s_Utils_distance_from_line_to_line;
static PyObject *__pyx_n_s_Utils_distance_from_point_to_lin;
static PyObject *__pyx_n_s_Utils_distance_from_point_to_poi;
static PyObject *__pyx_n_s_Utils_draw_box;
static PyObject *__pyx_n_s_Utils_draw_boxes;
static PyObject *__pyx_n_s_Utils_draw_content_block;
static PyObject *__pyx_n_s_Utils_draw_content_blocks;
static PyObject *__pyx_n_s_Utils_draw_group;
static PyObject *__pyx_n_s_Utils_draw_groups;
static PyObject *__pyx_n_s_Utils_draw_line;
static PyObject *__pyx_n_s_Utils_draw_lines;
static PyObject *__pyx_n_s_Utils_draw_table;
static PyObject *__pyx_n_s_Utils_duplicate_line_rects;
static PyObject *__pyx_n_s_Utils_expand_height_rect;
static PyObject *__pyx_n_s_Utils_expand_image;
static PyObject *__pyx_n_s_Utils_expand_rect;
static PyObject *__pyx_n_s_Utils_expand_width_rect;
static PyObject *__pyx_n_s_Utils_extend_line_at_corner;
static PyObject *__pyx_n_s_Utils_extend_line_at_corner_loca;
static PyObject *__pyx_n_s_Utils_extend_lines;
static PyObject *__pyx_n_s_Utils_external_rects;
static PyObject *__pyx_n_s_Utils_extract_line_rect;
static PyObject *__pyx_n_s_Utils_fill_box;
static PyObject *__pyx_n_s_Utils_fill_boxes;
static PyObject *__pyx_n_s_Utils_fill_rects;
static PyObject *__pyx_n_s_Utils_get_area_from_binary_image;
static PyObject *__pyx_n_s_Utils_get_columns_from_content_b;
static PyObject *__pyx_n_s_Utils_get_columns_from_content_b_2;
static PyObject *__pyx_n_s_Utils_get_rect_contains_blocks;
static PyObject *__pyx_n_s_Utils_get_rect_contains_rects;
static PyObject *__pyx_n_s_Utils_get_rows_from_content_boxe;
static PyObject *__pyx_n_s_Utils_get_rows_from_content_boxe_2;
static PyObject *__pyx_n_s_Utils_h_line_inside_box;
static PyObject *__pyx_n_s_Utils_h_line_overlap_rect;
static PyObject *__pyx_n_s_Utils_has_box_between_content_bl;
static PyObject *__pyx_n_s_Utils_has_box_between_content_bl_2;
static PyObject *__pyx_n_s_Utils_height_line;
static PyObject *__pyx_n_s_Utils_horizontal_bottom_neighbor;
static PyObject *__pyx_n_s_Utils_horizontal_line_cut_vertic;
static PyObject *__pyx_n_s_Utils_horizontal_neighbor_line;
static PyObject *__pyx_n_s_Utils_horizontal_stop_line;
static PyObject *__pyx_n_s_Utils_horizontal_top_neighbor_li;
static PyObject *__pyx_n_s_Utils_is_box_far_box;
static PyObject *__pyx_n_s_Utils_is_end_point_on_intersecti;
static PyObject *__pyx_n_s_Utils_is_fill_area;
static PyObject *__pyx_n_s_Utils_is_intersect;
static PyObject *__pyx_n_s_Utils_is_line_cut_rects;
static PyObject *__pyx_n_s_Utils_is_noise;
static PyObject *__pyx_n_s_Utils_is_point_far_line;
static PyObject *__pyx_n_s_Utils_is_point_in_line;
static PyObject *__pyx_n_s_Utils_is_rect_contains_rects;
static PyObject *__pyx_n_s_Utils_is_rect_divide_content;
static PyObject *__pyx_n_s_Utils_is_rect_divide_text_boxes;
static PyObject *__pyx_n_s_Utils_is_start_point_on_intersec;
static PyObject *__pyx_n_s_Utils_is_text_blocks_header_by_h;
static PyObject *__pyx_n_s_Utils_line_at_border_image;
static PyObject *__pyx_n_s_Utils_line_belong_with_box;
static PyObject *__pyx_n_s_Utils_line_between_two_rects;
static PyObject *__pyx_n_s_Utils_line_inside_box;
static PyObject *__pyx_n_s_Utils_line_inside_table_box;
static PyObject *__pyx_n_s_Utils_line_inside_text_block;
static PyObject *__pyx_n_s_Utils_line_inside_text_block_loc;
static PyObject *__pyx_n_s_Utils_line_inside_text_block_loc_2;
static PyObject *__pyx_n_s_Utils_line_intersection;
static PyObject *__pyx_n_s_Utils_line_intersection_locals_d;
static PyObject *__pyx_n_s_Utils_line_overlap_line;
static PyObject *__pyx_n_s_Utils_line_overlap_line_locals_l;
static PyObject *__pyx_n_s_Utils_line_overlap_rects;
static PyObject *__pyx_n_s_Utils_line_pairs;
static PyObject *__pyx_n_s_Utils_line_split_line;
static PyObject *__pyx_n_s_Utils_lines_inside_box;
static PyObject *__pyx_n_s_Utils_lines_intersect_line;
static PyObject *__pyx_n_s_Utils_lines_over_line;
static PyObject *__pyx_n_s_Utils_lines_over_line_locals_lam;
static PyObject *__pyx_n_s_Utils_merge_border_lines;
static PyObject *__pyx_n_s_Utils_merge_border_lines_locals;
static PyObject *__pyx_n_s_Utils_merge_duplicate_lines;
static PyObject *__pyx_n_s_Utils_merge_lines;
static PyObject *__pyx_n_s_Utils_merge_overlap_boxes;
static PyObject *__pyx_n_s_Utils_merge_single_chars;
static PyObject *__pyx_n_s_Utils_merge_two_types_text_block;
static PyObject *__pyx_n_s_Utils_outside_rects;
static PyObject *__pyx_n_s_Utils_outside_rects_locals_max_s;
static PyObject *__pyx_n_s_Utils_real_text_block;
static PyObject *__pyx_n_s_Utils_rect_between_two_rects;
static PyObject *__pyx_n_s_Utils_rect_between_two_rects_loc;
static PyObject *__pyx_n_s_Utils_rect_can_be_merged;
static PyObject *__pyx_n_s_Utils_rect_horizontal_inside_rec;
static PyObject *__pyx_n_s_Utils_rect_horizontal_overlap_re;
static PyObject *__pyx_n_s_Utils_rect_horizontal_overlap_re_2;
static PyObject *__pyx_n_s_Utils_rect_in_list;
static PyObject *__pyx_n_s_Utils_rect_inside_rect;
static PyObject *__pyx_n_s_Utils_rect_overlap_rect;
static PyObject *__pyx_n_s_Utils_rect_overlap_rect_with_per;
static PyObject *__pyx_n_s_Utils_rect_overlap_rect_with_wid;
static PyObject *__pyx_n_s_Utils_rect_overlap_two_rects;
static PyObject *__pyx_n_s_Utils_rect_vertical_inside_rect;
static PyObject *__pyx_n_s_Utils_rect_vertical_overlap_rect;
static PyObject *__pyx_n_s_Utils_rect_vertical_overlap_rect_2;
static PyObject *__pyx_n_s_Utils_rects_under_rect;
static PyObject *__pyx_n_s_Utils_rects_under_rect_locals_la;
static PyObject *__pyx_n_s_Utils_reduce_line;
static PyObject *__pyx_n_s_Utils_refill_rects;
static PyObject *__pyx_n_s_Utils_remove_content_block_by_id;
static PyObject *__pyx_n_s_Utils_remove_dot_lines_noise;
static PyObject *__pyx_n_s_Utils_remove_duplicate_line_rect;
static PyObject *__pyx_n_s_Utils_remove_duplicate_line_rect_2;
static PyObject *__pyx_n_s_Utils_remove_invalid_signed;
static PyObject *__pyx_n_s_Utils_remove_invalid_signed_loca;
static PyObject *__pyx_n_s_Utils_remove_noise_content_block;
static PyObject *__pyx_n_s_Utils_remove_noise_lines_rect;
static PyObject *__pyx_n_s_Utils_remove_padding_rect;
static PyObject *__pyx_n_s_Utils_remove_reverse_line_rects;
static PyObject *__pyx_n_s_Utils_remove_underline_text;
static PyObject *__pyx_n_s_Utils_remove_underline_text_loca;
static PyObject *__pyx_n_s_Utils_reset_connect_at_line_corn;
static PyObject *__pyx_n_s_Utils_resize_image;
static PyObject *__pyx_n_s_Utils_same_h_rect;
static PyObject *__pyx_n_s_Utils_same_line;
static PyObject *__pyx_n_s_Utils_same_position;
static PyObject *__pyx_n_s_Utils_same_rect;
static PyObject *__pyx_n_s_Utils_same_v_rect;
static PyObject *__pyx_n_s_Utils_search_text_by_box;
static PyObject *__pyx_n_s_Utils_shrink_line;
static PyObject *__pyx_n_s_Utils_single_lines;
static PyObject *__pyx_n_s_Utils_single_text_blocks;
static PyObject *__pyx_n_s_Utils_sort_lines;
static PyObject *__pyx_n_s_Utils_sort_lines_locals_lambda;
static PyObject *__pyx_n_s_Utils_split_lines;
static PyObject *__pyx_n_s_Utils_stop_point_at_bottom;
static PyObject *__pyx_n_s_Utils_stop_point_at_bottom_local;
static PyObject *__pyx_n_s_Utils_stop_point_at_left;
static PyObject *__pyx_n_s_Utils_stop_point_at_left_locals;
static PyObject *__pyx_n_s_Utils_stop_point_at_right;
static PyObject *__pyx_n_s_Utils_stop_point_at_right_locals;
static PyObject *__pyx_n_s_Utils_stop_point_at_top;
static PyObject *__pyx_n_s_Utils_stop_point_at_top_locals_l;
static PyObject *__pyx_n_s_Utils_v_line_inside_box;
static PyObject *__pyx_n_s_Utils_v_line_overlap_rect;
static PyObject *__pyx_n_s_Utils_vertical_left_neighbor_lin;
static PyObject *__pyx_n_s_Utils_vertical_line_cut_horionta;
static PyObject *__pyx_n_s_Utils_vertical_neighbor_line;
static PyObject *__pyx_n_s_Utils_vertical_right_neighbor_li;
static PyObject *__pyx_n_s_Utils_vertical_stop_line;
static PyObject *__pyx_n_s_Utils_white_percentage;
static PyObject *__pyx_n_s_Utils_width_line;
static PyObject *__pyx_n_s__178;
static PyObject *__pyx_kp_s__21;
static PyObject *__pyx_kp_s__22;
static PyObject *__pyx_n_s_a;
static PyObject *__pyx_n_s_a_box;
static PyObject *__pyx_n_s_a_content_block;
static PyObject *__pyx_n_s_a_h;
static PyObject *__pyx_n_s_a_line;
static PyObject *__pyx_n_s_a_line_rect;
static PyObject *__pyx_n_s_a_point;
static PyObject *__pyx_n_s_a_rect;
static PyObject *__pyx_n_s_a_rect_area;
static PyObject *__pyx_n_s_a_rect_h;
static PyObject *__pyx_n_s_a_rect_w;
static PyObject *__pyx_n_s_a_rect_x;
static PyObject *__pyx_n_s_a_rect_x1;
static PyObject *__pyx_n_s_a_rect_x2;
static PyObject *__pyx_n_s_a_rect_y;
static PyObject *__pyx_n_s_a_rect_y1;
static PyObject *__pyx_n_s_a_rect_y2;
static PyObject *__pyx_n_s_a_w;
static PyObject *__pyx_n_s_a_x;
static PyObject *__pyx_n_s_a_y;
static PyObject *__pyx_n_s_added_boxes;
static PyObject *__pyx_n_s_adj;
static PyObject *__pyx_n_s_align_center;
static PyObject *__pyx_n_s_align_horizontal;
static PyObject *__pyx_n_s_align_vertical;
static PyObject *__pyx_n_s_alignment;
static PyObject *__pyx_n_s_alignments;
static PyObject *__pyx_n_s_alignments_contain;
static PyObject *__pyx_n_s_all_rects;
static PyObject *__pyx_n_s_append;
static PyObject *__pyx_n_s_area;
static PyObject *__pyx_n_s_area_white;
static PyObject *__pyx_n_s_array;
static PyObject *__pyx_n_s_ave_area;
static PyObject *__pyx_n_s_ave_h;
static PyObject *__pyx_n_s_ave_w;
static PyObject *__pyx_n_s_b;
static PyObject *__pyx_n_s_b_box;
static PyObject *__pyx_n_s_b_content_block;
static PyObject *__pyx_n_s_b_h;
static PyObject *__pyx_n_s_b_line;
static PyObject *__pyx_n_s_b_line_rect;
static PyObject *__pyx_n_s_b_point;
static PyObject *__pyx_n_s_b_rect;
static PyObject *__pyx_n_s_b_rect_area;
static PyObject *__pyx_n_s_b_rect_h;
static PyObject *__pyx_n_s_b_rect_w;
static PyObject *__pyx_n_s_b_rect_x;
static PyObject *__pyx_n_s_b_rect_x1;
static PyObject *__pyx_n_s_b_rect_x2;
static PyObject *__pyx_n_s_b_rect_y;
static PyObject *__pyx_n_s_b_rect_y1;
static PyObject *__pyx_n_s_b_rect_y2;
static PyObject *__pyx_n_s_b_w;
static PyObject *__pyx_n_s_b_x;
static PyObject *__pyx_n_s_b_y;
static PyObject *__pyx_n_s_back_line;
static PyObject *__pyx_n_s_binary_image;
static PyObject *__pyx_n_s_blank_image;
static PyObject *__pyx_n_s_block;
static PyObject *__pyx_n_s_block_text;
static PyObject *__pyx_n_s_block_texts;
static PyObject *__pyx_n_s_blocks;
static PyObject *__pyx_n_s_border_color;
static PyObject *__pyx_n_s_bottom;
static PyObject *__pyx_n_s_bottom_border;
static PyObject *__pyx_n_s_bottom_lines;
static PyObject *__pyx_n_s_bottom_point;
static PyObject *__pyx_n_s_bottom_stop_line;
static PyObject *__pyx_n_s_boundingRect;
static PyObject *__pyx_n_s_bounding_lines_virtual_line_real;
static PyObject *__pyx_n_s_bounding_rect;
static PyObject *__pyx_n_s_bounding_rect_lines;
static PyObject *__pyx_n_s_box;
static PyObject *__pyx_n_s_box_h;
static PyObject *__pyx_n_s_box_lines;
static PyObject *__pyx_n_s_box_w;
static PyObject *__pyx_n_s_box_x;
static PyObject *__pyx_n_s_box_y;
static PyObject *__pyx_n_s_boxes;
static PyObject *__pyx_n_s_c;
static PyObject *__pyx_n_s_c1;
static PyObject *__pyx_n_s_c2;
static PyObject *__pyx_n_s_calc_centroid;
static PyObject *__pyx_n_s_candidate_header_count;
static PyObject *__pyx_n_s_cb;
static PyObject *__pyx_n_s_center;
static PyObject *__pyx_n_s_center_line;
static PyObject *__pyx_n_s_center_text;
static PyObject *__pyx_n_s_check_two_points_in_same_line;
static PyObject *__pyx_n_s_cline_in_traceback;
static PyObject *__pyx_n_s_cnt;
static PyObject *__pyx_n_s_col_alignments;
static PyObject *__pyx_n_s_color;
static PyObject *__pyx_n_s_cols;
static PyObject *__pyx_n_s_combinations;
static PyObject *__pyx_n_s_connect_at_corner;
static PyObject *__pyx_n_s_connect_at_end_point;
static PyObject *__pyx_n_s_connect_at_start_and_end_point;
static PyObject *__pyx_n_s_connect_at_start_point;
static PyObject *__pyx_n_s_constant;
static PyObject *__pyx_n_s_constant_values;
static PyObject *__pyx_n_s_content_block;
static PyObject *__pyx_n_s_content_block_in_groups;
static PyObject *__pyx_n_s_content_blocks;
static PyObject *__pyx_n_s_content_boxes;
static PyObject *__pyx_n_s_content_rect;
static PyObject *__pyx_n_s_content_rects;
static PyObject *__pyx_n_s_contours;
static PyObject *__pyx_n_s_convert_box_to_line;
static PyObject *__pyx_n_s_convert_line_to_box;
static PyObject *__pyx_n_s_convert_rect_to_rect;
static PyObject *__pyx_n_s_convert_rects_to_rects;
static PyObject *__pyx_n_s_copy;
static PyObject *__pyx_n_s_count;
static PyObject *__pyx_n_s_count_down;
static PyObject *__pyx_n_s_create_virtual_horizontal_line;
static PyObject *__pyx_n_s_create_virtual_vertical_line;
static PyObject *__pyx_n_s_crnn_char;
static PyObject *__pyx_n_s_crnn_chars;
static PyObject *__pyx_n_s_cv2;
static PyObject *__pyx_n_s_d;
static PyObject *__pyx_n_s_d1;
static PyObject *__pyx_n_s_d11;
static PyObject *__pyx_n_s_d12;
static PyObject *__pyx_n_s_d2;
static PyObject *__pyx_n_s_d21;
static PyObject *__pyx_n_s_d22;
static PyObject *__pyx_n_s_det;
static PyObject *__pyx_n_s_direction;
static PyObject *__pyx_n_s_distance;
static PyObject *__pyx_n_s_distance_from_box_to_box;
static PyObject *__pyx_n_s_distance_from_line_to_box;
static PyObject *__pyx_n_s_distance_from_line_to_line;
static PyObject *__pyx_n_s_distance_from_point_to_line;
static PyObject *__pyx_n_s_distance_from_point_to_point;
static PyObject *__pyx_n_s_distance_threshold;
static PyObject *__pyx_n_s_div;
static PyObject *__pyx_n_s_divider_horizontal_lines;
static PyObject *__pyx_n_s_divider_line_color;
static PyObject *__pyx_n_s_divider_vertical_lines;
static PyObject *__pyx_n_s_doc;
static PyObject *__pyx_n_s_dot_rect;
static PyObject *__pyx_n_s_dot_rects;
static PyObject *__pyx_n_s_draw_box;
static PyObject *__pyx_n_s_draw_boxes;
static PyObject *__pyx_n_s_draw_content_block;
static PyObject *__pyx_n_s_draw_content_blocks;
static PyObject *__pyx_n_s_draw_group;
static PyObject *__pyx_n_s_draw_groups;
static PyObject *__pyx_n_s_draw_line;
static PyObject *__pyx_n_s_draw_lines;
static PyObject *__pyx_n_s_draw_table;
static PyObject *__pyx_n_s_draw_virtual_lines;
static PyObject *__pyx_n_s_dst_box;
static PyObject *__pyx_n_s_dst_rect;
static PyObject *__pyx_n_s_dst_text;
static PyObject *__pyx_n_s_duplicate_line_rects;
static PyObject *__pyx_n_s_dx;
static PyObject *__pyx_n_s_dy;
static PyObject *__pyx_n_s_end;
static PyObject *__pyx_n_s_end_line;
static PyObject *__pyx_n_s_end_point;
static PyObject *__pyx_n_s_end_x;
static PyObject *__pyx_n_s_end_y;
static PyObject *__pyx_n_s_enumerate;
static PyObject *__pyx_n_s_expand;
static PyObject *__pyx_n_s_expand_height_rect;
static PyObject *__pyx_n_s_expand_image;
static PyObject *__pyx_n_s_expand_rect;
static PyObject *__pyx_n_s_expand_size;
static PyObject *__pyx_n_s_expand_width_rect;
static PyObject *__pyx_n_s_expand_with_horizontal_line;
static PyObject *__pyx_n_s_expand_with_vertical_line;
static PyObject *__pyx_n_s_expanded_image;
static PyObject *__pyx_n_s_extend_boxes;
static PyObject *__pyx_n_s_extend_line_at_corner;
static PyObject *__pyx_n_s_extend_lines;
static PyObject *__pyx_n_s_external_rects;
static PyObject *__pyx_n_s_extract_line_image;
static PyObject *__pyx_n_s_extract_line_rect;
static PyObject *__pyx_n_s_f_between;
static PyObject *__pyx_n_s_f_under;
static PyObject *__pyx_n_s_fill_box;
static PyObject *__pyx_n_s_fill_boxes;
static PyObject *__pyx_n_s_fill_rects;
static PyObject *__pyx_n_s_findContours;
static PyObject *__pyx_n_s_float32;
static PyObject *__pyx_n_s_front_line;
static PyObject *__pyx_n_s_fullmatch;
static PyObject *__pyx_n_s_get_area_from_binary_image;
static PyObject *__pyx_n_s_get_columns_from_content_boxes;
static PyObject *__pyx_n_s_get_rect_contains_blocks;
static PyObject *__pyx_n_s_get_rect_contains_rects;
static PyObject *__pyx_n_s_get_rows_from_content_boxes;
static PyObject *__pyx_n_s_group;
static PyObject *__pyx_n_s_groups;
static PyObject *__pyx_n_s_h;
static PyObject *__pyx_n_s_h_end_point;
static PyObject *__pyx_n_s_h_image;
static PyObject *__pyx_n_s_h_line;
static PyObject *__pyx_n_s_h_line_inside_box;
static PyObject *__pyx_n_s_h_line_overlap_rect;
static PyObject *__pyx_n_s_h_line_pairs;
static PyObject *__pyx_n_s_h_line_temp;
static PyObject *__pyx_n_s_h_lines;
static PyObject *__pyx_n_s_h_lines_temp;
static PyObject *__pyx_n_s_h_single_lines;
static PyObject *__pyx_n_s_h_start_point;
static PyObject *__pyx_n_s_has_box_between_content_blocks;
static PyObject *__pyx_n_s_header_regex;
static PyObject *__pyx_n_s_height;
static PyObject *__pyx_n_s_height_line;
static PyObject *__pyx_n_s_height_ratio;
static PyObject *__pyx_n_s_horizontal;
static PyObject *__pyx_n_s_horizontal_bottom_neighbor_line;
static PyObject *__pyx_n_s_horizontal_line_cut_vertical_lin;
static PyObject *__pyx_n_s_horizontal_lines;
static PyObject *__pyx_n_s_horizontal_neighbor_line;
static PyObject *__pyx_n_s_horizontal_stop_line;
static PyObject *__pyx_n_s_horizontal_top_neighbor_line;
static PyObject *__pyx_n_s_i;
static PyObject *__pyx_n_s_idx;
static PyObject *__pyx_n_s_ignore_single;
static PyObject *__pyx_n_s_image;
static PyObject *__pyx_n_s_image_shape;
static PyObject *__pyx_n_s_image_size;
static PyObject *__pyx_n_s_import;
static PyObject *__pyx_n_s_insert;
static PyObject *__pyx_n_s_inside_box;
static PyObject *__pyx_n_s_inside_lines;
static PyObject *__pyx_n_s_intersection_point;
static PyObject *__pyx_n_s_invalid_dot;
static PyObject *__pyx_n_s_invalid_dots;
static PyObject *__pyx_n_s_invalid_horizontal_line;
static PyObject *__pyx_n_s_invalid_line;
static PyObject *__pyx_n_s_invalid_lines;
static PyObject *__pyx_n_s_invalid_vertical_line;
static PyObject *__pyx_n_s_is_box_far_box;
static PyObject *__pyx_n_s_is_end_point_on_intersection;
static PyObject *__pyx_n_s_is_fill_area;
static PyObject *__pyx_n_s_is_intersect;
static PyObject *__pyx_n_s_is_line_cut_rects;
static PyObject *__pyx_n_s_is_noise;
static PyObject *__pyx_n_s_is_point_far_line;
static PyObject *__pyx_n_s_is_point_in_line;
static PyObject *__pyx_n_s_is_rect_contains_rects;
static PyObject *__pyx_n_s_is_rect_divide_content;
static PyObject *__pyx_n_s_is_rect_divide_text_boxes;
static PyObject *__pyx_n_s_is_start_point_on_intersection;
static PyObject *__pyx_n_s_is_text_blocks_header_by_header;
static PyObject *__pyx_n_s_itertools;
static PyObject *__pyx_n_s_j;
static PyObject *__pyx_n_s_join;
static PyObject *__pyx_n_s_key;
static PyObject *__pyx_n_s_left;
static PyObject *__pyx_n_s_left_border;
static PyObject *__pyx_n_s_left_lines;
static PyObject *__pyx_n_s_left_point;
static PyObject *__pyx_n_s_left_stop_line;
static PyObject *__pyx_n_s_length;
static PyObject *__pyx_n_s_line;
static PyObject *__pyx_n_s_line1;
static PyObject *__pyx_n_s_line2;
static PyObject *__pyx_n_s_line_at_border_image;
static PyObject *__pyx_n_s_line_belong_with_box;
static PyObject *__pyx_n_s_line_between_two_rects;
static PyObject *__pyx_n_s_line_checked;
static PyObject *__pyx_n_s_line_color;
static PyObject *__pyx_n_s_line_end_x;
static PyObject *__pyx_n_s_line_end_y;
static PyObject *__pyx_n_s_line_inside_box;
static PyObject *__pyx_n_s_line_inside_table_box;
static PyObject *__pyx_n_s_line_inside_text_block;
static PyObject *__pyx_n_s_line_intersection;
static PyObject *__pyx_n_s_line_list;
static PyObject *__pyx_n_s_line_overlap_box_f;
static PyObject *__pyx_n_s_line_overlap_line;
static PyObject *__pyx_n_s_line_overlap_rects;
static PyObject *__pyx_n_s_line_pair;
static PyObject *__pyx_n_s_line_pairs;
static PyObject *__pyx_n_s_line_rect;
static PyObject *__pyx_n_s_line_rect_padding;
static PyObject *__pyx_n_s_line_rects;
static PyObject *__pyx_n_s_line_split_line;
static PyObject *__pyx_n_s_line_start_x;
static PyObject *__pyx_n_s_line_start_y;
static PyObject *__pyx_n_s_lines;
static PyObject *__pyx_n_s_lines_inside_box;
static PyObject *__pyx_n_s_lines_intersect_line;
static PyObject *__pyx_n_s_lines_over_line;
static PyObject *__pyx_n_s_lines_temp;
static PyObject *__pyx_n_s_lower_lines;
static PyObject *__pyx_n_s_main;
static PyObject *__pyx_n_s_math;
static PyObject *__pyx_n_s_max;
static PyObject *__pyx_n_s_max_h_rect;
static PyObject *__pyx_n_s_max_sort_f;
static PyObject *__pyx_n_s_max_w_rect;
static PyObject *__pyx_n_s_max_white;
static PyObject *__pyx_n_s_merge_border_lines;
static PyObject *__pyx_n_s_merge_chars;
static PyObject *__pyx_n_s_merge_chars_list;
static PyObject *__pyx_n_s_merge_duplicate_lines;
static PyObject *__pyx_n_s_merge_lines;
static PyObject *__pyx_n_s_merge_overlap_boxes;
static PyObject *__pyx_n_s_merge_single_chars;
static PyObject *__pyx_n_s_merge_two_types_text_blocks;
static PyObject *__pyx_n_s_metaclass;
static PyObject *__pyx_n_s_min;
static PyObject *__pyx_n_s_min_distance;
static PyObject *__pyx_n_s_min_h_rect;
static PyObject *__pyx_n_s_min_rect;
static PyObject *__pyx_n_s_min_w_rect;
static PyObject *__pyx_n_s_module;
static PyObject *__pyx_n_s_name;
static PyObject *__pyx_n_s_neighbor_line;
static PyObject *__pyx_n_s_new_box;
static PyObject *__pyx_n_s_new_text_block;
static PyObject *__pyx_n_s_new_text_blocks;
static PyObject *__pyx_n_s_noise_blocks;
static PyObject *__pyx_n_s_np;
static PyObject *__pyx_n_s_numpy;
static PyObject *__pyx_n_s_object;
static PyObject *__pyx_n_s_old_text_block;
static PyObject *__pyx_n_s_old_text_blocks;
static PyObject *__pyx_n_s_orientation;
static PyObject *__pyx_n_s_orig_end_point;
static PyObject *__pyx_n_s_orig_start_point;
static PyObject *__pyx_n_s_original_end_point;
static PyObject *__pyx_n_s_original_start_point;
static PyObject *__pyx_n_s_other_line;
static PyObject *__pyx_n_s_outside_boxes;
static PyObject *__pyx_n_s_outside_rects;
static PyObject *__pyx_n_s_over_f;
static PyObject *__pyx_n_s_over_lines;
static PyObject *__pyx_n_s_overlap_area;
static PyObject *__pyx_n_s_overlap_percent;
static PyObject *__pyx_n_s_overlap_ratio;
static PyObject *__pyx_n_s_pad;
static PyObject *__pyx_n_s_padding_size;
static PyObject *__pyx_n_s_part_area;
static PyObject *__pyx_n_s_percent;
static PyObject *__pyx_n_s_point;
static PyObject *__pyx_n_s_points;
static PyObject *__pyx_n_s_pop;
static PyObject *__pyx_n_s_position;
static PyObject *__pyx_n_s_prepare;
static PyObject *__pyx_n_s_putText;
static PyObject *__pyx_n_s_qualname;
static PyObject *__pyx_n_s_r;
static PyObject *__pyx_n_s_range;
static PyObject *__pyx_n_s_ratio_threshold;
static PyObject *__pyx_n_s_re;
static PyObject *__pyx_n_s_real_line;
static PyObject *__pyx_n_s_real_text_block;
static PyObject *__pyx_n_s_rect;
static PyObject *__pyx_n_s_rect_between_two_rects;
static PyObject *__pyx_n_s_rect_can_be_merged;
static PyObject *__pyx_n_s_rect_end_x;
static PyObject *__pyx_n_s_rect_end_y;
static PyObject *__pyx_n_s_rect_h;
static PyObject *__pyx_n_s_rect_horizontal_inside_rect;
static PyObject *__pyx_n_s_rect_horizontal_overlap_rect;
static PyObject *__pyx_n_s_rect_in_list;
static PyObject *__pyx_n_s_rect_inside_rect;
static PyObject *__pyx_n_s_rect_line;
static PyObject *__pyx_n_s_rect_list;
static PyObject *__pyx_n_s_rect_overlap_rect;
static PyObject *__pyx_n_s_rect_overlap_rect_with_percent;
static PyObject *__pyx_n_s_rect_overlap_rect_with_width_hei;
static PyObject *__pyx_n_s_rect_overlap_two_rects;
static PyObject *__pyx_n_s_rect_pair;
static PyObject *__pyx_n_s_rect_start_x;
static PyObject *__pyx_n_s_rect_start_y;
static PyObject *__pyx_n_s_rect_vertical_inside_rect;
static PyObject *__pyx_n_s_rect_vertical_overlap_rect;
static PyObject *__pyx_n_s_rect_w;
static PyObject *__pyx_n_s_rectangle;
static PyObject *__pyx_n_s_rects;
static PyObject *__pyx_n_s_rects_under_rect;
static PyObject *__pyx_n_s_reduce_line;
static PyObject *__pyx_n_s_refill_rects;
static PyObject *__pyx_n_s_regex;
static PyObject *__pyx_n_s_remove;
static PyObject *__pyx_n_s_remove_content_block_by_id;
static PyObject *__pyx_n_s_remove_dot_lines_noise;
static PyObject *__pyx_n_s_remove_duplicate_line_rects;
static PyObject *__pyx_n_s_remove_invalid_signed;
static PyObject *__pyx_n_s_remove_line_at_border;
static PyObject *__pyx_n_s_remove_noise_content_blocks;
static PyObject *__pyx_n_s_remove_noise_lines_rect;
static PyObject *__pyx_n_s_remove_padding_rect;
static PyObject *__pyx_n_s_remove_reverse_line_rects;
static PyObject *__pyx_n_s_remove_underline_text;
static PyObject *__pyx_n_s_removed_line_rects;
static PyObject *__pyx_n_s_replace;
static PyObject *__pyx_n_s_res;
static PyObject *__pyx_n_s_reset_connect_at_line_corner;
static PyObject *__pyx_n_s_resize;
static PyObject *__pyx_n_s_resize_image;
static PyObject *__pyx_n_s_ret_blocks;
static PyObject *__pyx_n_s_ret_rects;
static PyObject *__pyx_n_s_return_lines;
static PyObject *__pyx_n_s_return_rects;
static PyObject *__pyx_n_s_reverse;
static PyObject *__pyx_n_s_right;
static PyObject *__pyx_n_s_right_border;
static PyObject *__pyx_n_s_right_lines;
static PyObject *__pyx_n_s_right_point;
static PyObject *__pyx_n_s_right_stop_line;
static PyObject *__pyx_n_s_rows;
static PyObject *__pyx_n_s_same_h_rect;
static PyObject *__pyx_n_s_same_horizontal_sign;
static PyObject *__pyx_n_s_same_line;
static PyObject *__pyx_n_s_same_position;
static PyObject *__pyx_n_s_same_rect;
static PyObject *__pyx_n_s_same_v_rect;
static PyObject *__pyx_n_s_search_text_by_box;
static PyObject *__pyx_n_s_searched_ids;
static PyObject *__pyx_n_s_shape;
static PyObject *__pyx_n_s_shrink_line;
static PyObject *__pyx_n_s_shrink_size;
static PyObject *__pyx_n_s_single_lines;
static PyObject *__pyx_n_s_single_text_blocks;
static PyObject *__pyx_n_s_size;
static PyObject *__pyx_n_s_sort;
static PyObject *__pyx_n_s_sort_lines;
static PyObject *__pyx_n_s_sorted;
static PyObject *__pyx_n_s_span_list;
static PyObject *__pyx_n_s_split_line;
static PyObject *__pyx_n_s_split_lines;
static PyObject *__pyx_n_s_sqrt;
static PyObject *__pyx_n_s_square;
static PyObject *__pyx_n_s_src_box;
static PyObject *__pyx_n_s_src_rect;
static PyObject *__pyx_n_s_src_text;
static PyObject *__pyx_n_s_start;
static PyObject *__pyx_n_s_start_line;
static PyObject *__pyx_n_s_start_point;
static PyObject *__pyx_n_s_start_x;
static PyObject *__pyx_n_s_start_y;
static PyObject *__pyx_n_s_staticmethod;
static PyObject *__pyx_n_s_stop_point_at_bottom;
static PyObject *__pyx_n_s_stop_point_at_left;
static PyObject *__pyx_n_s_stop_point_at_right;
static PyObject *__pyx_n_s_stop_point_at_top;
static PyObject *__pyx_n_s_sum;
static PyObject *__pyx_n_s_table;
static PyObject *__pyx_n_s_table_extraction_debug;
static PyObject *__pyx_n_s_table_extraction_line;
static PyObject *__pyx_kp_s_table_extraction_utils_table_ext;
static PyObject *__pyx_n_s_table_extraction_utils_table_ext_2;
static PyObject *__pyx_n_s_table_processing;
static PyObject *__pyx_n_s_tail_box;
static PyObject *__pyx_n_s_temp_box;
static PyObject *__pyx_n_s_temp_line_rect;
static PyObject *__pyx_n_s_temp_line_rects;
static PyObject *__pyx_n_s_test;
static PyObject *__pyx_n_s_text;
static PyObject *__pyx_n_s_text_block;
static PyObject *__pyx_n_s_text_block_rect;
static PyObject *__pyx_n_s_text_block_rects;
static PyObject *__pyx_n_s_text_blocks;
static PyObject *__pyx_n_s_text_box;
static PyObject *__pyx_n_s_text_boxes;
static PyObject *__pyx_n_s_text_list;
static PyObject *__pyx_n_s_text_stats_dict;
static PyObject *__pyx_n_s_thickness;
static PyObject *__pyx_n_s_thresh;
static PyObject *__pyx_n_s_threshold;
static PyObject *__pyx_n_s_threshold_deviation;
static PyObject *__pyx_n_s_threshold_distance;
static PyObject *__pyx_n_s_threshold_h;
static PyObject *__pyx_n_s_threshold_v;
static PyObject *__pyx_n_s_times;
static PyObject *__pyx_n_s_tmp_area;
static PyObject *__pyx_n_s_tmp_col;
static PyObject *__pyx_n_s_tmp_row;
static PyObject *__pyx_n_s_top;
static PyObject *__pyx_n_s_top_border;
static PyObject *__pyx_n_s_top_lines;
static PyObject *__pyx_n_s_top_point;
static PyObject *__pyx_n_s_top_stop_line;
static PyObject *__pyx_n_s_type;
static PyObject *__pyx_n_s_uint8;
static PyObject *__pyx_n_s_underline;
static PyObject *__pyx_n_s_underlines;
static PyObject *__pyx_n_s_upper_lines;
static PyObject *__pyx_n_s_v;
static PyObject *__pyx_n_s_v_end_point;
static PyObject *__pyx_n_s_v_line;
static PyObject *__pyx_n_s_v_line_inside_box;
static PyObject *__pyx_n_s_v_line_overlap_rect;
static PyObject *__pyx_n_s_v_line_pairs;
static PyObject *__pyx_n_s_v_lines;
static PyObject *__pyx_n_s_v_single_lines;
static PyObject *__pyx_n_s_v_start_point;
static PyObject *__pyx_n_s_vertical;
static PyObject *__pyx_n_s_vertical_left_neighbor_line;
static PyObject *__pyx_n_s_vertical_line_cut_horiontal_line;
static PyObject *__pyx_n_s_vertical_lines;
static PyObject *__pyx_n_s_vertical_neighbor_line;
static PyObject *__pyx_n_s_vertical_right_neighbor_line;
static PyObject *__pyx_n_s_vertical_stop_line;
static PyObject *__pyx_n_s_virtual_h_line;
static PyObject *__pyx_n_s_virtual_line;
static PyObject *__pyx_n_s_virtual_v_line;
static PyObject *__pyx_n_s_w;
static PyObject *__pyx_n_s_w_image;
static PyObject *__pyx_n_s_white_percentage;
static PyObject *__pyx_n_s_white_pixels;
static PyObject *__pyx_n_s_width;
static PyObject *__pyx_n_s_width_line;
static PyObject *__pyx_n_s_width_ratio;
static PyObject *__pyx_n_s_x;
static PyObject *__pyx_n_s_x0;
static PyObject *__pyx_n_s_x1;
static PyObject *__pyx_n_s_x2;
static PyObject *__pyx_n_s_x_position;
static PyObject *__pyx_n_s_xdiff;
static PyObject *__pyx_n_s_y;
static PyObject *__pyx_n_s_y0;
static PyObject *__pyx_n_s_y1;
static PyObject *__pyx_n_s_y2;
static PyObject *__pyx_n_s_y_position;
static PyObject *__pyx_n_s_ydiff;
static PyObject *__pyx_n_s_zeros;
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_is_noise(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_2resize_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_width, PyObject *__pyx_v_height); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_4refill_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_6shrink_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_8reduce_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_10is_intersect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a, PyObject *__pyx_v_b); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_12line_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_14lines_intersect_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_16line_split_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_split_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_18duplicate_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line_rect, PyObject *__pyx_v_b_line_rect, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_20get_area_from_binary_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22remove_reverse_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line_rects, PyObject *__pyx_v_binary_image, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda1(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_24remove_duplicate_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_26same_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_28same_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_30same_h_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_32same_v_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_34same_position(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_36merge_duplicate_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_38distance_from_point_to_point(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_point, PyObject *__pyx_v_b_point); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_40distance_from_line_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_42distance_from_point_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_44distance_from_line_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_direction); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_46distance_from_box_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_box, PyObject *__pyx_v_dst_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_48is_box_far_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_box, PyObject *__pyx_v_dst_box, PyObject *__pyx_v_times); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_50calc_centroid(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_52split_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_54merge_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda2(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda3(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_56merge_border_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_58extend_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda4(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda5(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda6(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda7(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_60sort_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_type); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_62horizontal_line_cut_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_64vertical_line_cut_horiontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_h_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_66create_virtual_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_neighbor_line, PyObject *__pyx_v_direction); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_68create_virtual_horizontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_neighbor_line, PyObject *__pyx_v_direction); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_70vertical_left_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_invalid_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_72vertical_right_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_invalid_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_74vertical_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_76horizontal_top_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_invalid_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_78horizontal_bottom_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_invalid_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_80horizontal_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_82is_line_cut_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_84vertical_stop_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_content_rects, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_86horizontal_stop_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_content_rects, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_88line_pairs(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_single_lines, PyObject *__pyx_v_v_single_lines, PyObject *__pyx_v_distance_threshold, PyObject *__pyx_v_ratio_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_90connect_at_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda8(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda9(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda10(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda11(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_92stop_point_at_top(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda12(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda13(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda14(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda15(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_94stop_point_at_bottom(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda16(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda17(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda18(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda19(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_96stop_point_at_left(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda20(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda21(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda22(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda23(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_98stop_point_at_right(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_100single_text_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_text_blocks, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_102single_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_104lines_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_lines, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_106line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_108v_line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_110h_line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_112expand_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_114expand_width_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_116expand_height_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_118line_inside_table_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_line, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_120rect_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_122rect_horizontal_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_124rect_vertical_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_126is_rect_contains_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_reverse); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_128get_rect_contains_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_reverse); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_130get_rect_contains_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_blocks, PyObject *__pyx_v_reverse); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda24(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda25(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda26(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda27(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_132lines_over_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_lines, PyObject *__pyx_v_direction); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_134line_inside_text_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_block, PyObject *__pyx_v_line, PyObject *__pyx_v_expand); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_136rect_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda28(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda29(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_138rect_horizontal_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh, PyObject *__pyx_v_inside_box); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda30(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda31(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_140rect_vertical_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh, PyObject *__pyx_v_inside_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_142line_overlap_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_percent, PyObject *__pyx_v_shrink_size); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_144is_rect_divide_content(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_bounding_rect, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_expand_size, PyObject *__pyx_v_overlap_percent, PyObject *__pyx_v_cnt); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_146is_rect_divide_text_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_bounding_rect, PyObject *__pyx_v_text_boxes, PyObject *__pyx_v_expand_size, PyObject *__pyx_v_overlap_percent, PyObject *__pyx_v_cnt); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_148h_line_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rect, PyObject *__pyx_v_percent); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_150v_line_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rect, PyObject *__pyx_v_percent); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_152rect_overlap_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda32(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda33(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_154line_overlap_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_156bounding_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_158bounding_rect_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_160bounding_lines_virtual_line_real_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_virtual_line, PyObject *__pyx_v_real_line, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_162external_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image_size, PyObject *__pyx_v_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_max_sort_f(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_164outside_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_166convert_box_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_168convert_line_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_170fill_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_color); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_172rect_in_list(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_all_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_174line_between_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_lines, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda34(PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda35(PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_176rect_between_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_rects); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda36(PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_dst_rect); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda37(PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_dst_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_178rects_under_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_180alignments_contain(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_col_alignments, PyObject *__pyx_v_alignments); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_182remove_content_block_by_id(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_idx, PyObject *__pyx_v_content_blocks); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_184remove_noise_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_text_stats_dict); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda38(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_block); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda39(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_block); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_186has_box_between_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_content_block, PyObject *__pyx_v_b_content_block, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_boxes, PyObject *__pyx_v_orientation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_188draw_group(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_group, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_190draw_groups(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_groups, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_192draw_content_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_content_block, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_194draw_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_196draw_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_box, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_198fill_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_box, PyObject *__pyx_v_color); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_200draw_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_boxes, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_202fill_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_boxes, PyObject *__pyx_v_color); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_204draw_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_line, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_206draw_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_lines, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_208draw_table(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_table, PyObject *__pyx_v_border_color, PyObject *__pyx_v_line_color, PyObject *__pyx_v_divider_line_color, PyObject *__pyx_v_thickness, PyObject *__pyx_v_draw_virtual_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_210rect_overlap_rect_with_percent(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_threshold, PyObject *__pyx_v_min_rect); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_212rect_overlap_rect_with_width_height(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_width, PyObject *__pyx_v_height); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_214rect_can_be_merged(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda40(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda41(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_216extend_line_at_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold_v, PyObject *__pyx_v_threshold_h); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_218line_belong_with_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_220reset_connect_at_line_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_222expand_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_padding_size); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_224remove_padding_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image_shape, PyObject *__pyx_v_padding_size); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_226line_at_border_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image_shape, PyObject *__pyx_v_padding_size); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_228check_two_points_in_same_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_point, PyObject *__pyx_v_b_point, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_230real_text_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_box, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_232remove_dot_lines_noise(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dot_rects, PyObject *__pyx_v_text_blocks); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_234white_percentage(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_236width_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_238height_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_240content_block_in_groups(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_groups, PyObject *__pyx_v_content_block); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_block_text, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold_deviation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_242remove_underline_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_block_texts, PyObject *__pyx_v_threshold_distance, PyObject *__pyx_v_threshold_deviation); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_same_horizontal_sign(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_244remove_invalid_signed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_246merge_overlap_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_width, PyObject *__pyx_v_height); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_248merge_two_types_text_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_old_text_blocks, PyObject *__pyx_v_new_text_blocks); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_250remove_noise_lines_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line_rects, PyObject *__pyx_v_text_block_rects); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_252convert_rect_to_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_width_ratio, PyObject *__pyx_v_height_ratio); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_254convert_rects_to_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects, PyObject *__pyx_v_width_ratio, PyObject *__pyx_v_height_ratio); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_256extract_line_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_remove_line_at_border); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_258is_point_in_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_260is_start_point_on_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_262is_end_point_on_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_264is_point_far_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line, PyObject *__pyx_v_times); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_266search_text_by_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_crnn_chars, PyObject *__pyx_v_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_268merge_single_chars(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_list); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_270is_text_blocks_header_by_header_dict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_blocks, PyObject *__pyx_v_crnn_chars, PyObject *__pyx_v_header_regex); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_272align_horizontal(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_box, PyObject *__pyx_v_b_box, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_274align_vertical(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_box, PyObject *__pyx_v_b_box, PyObject *__pyx_v_threshold); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda42(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_276get_rows_from_content_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_boxes, PyObject *__pyx_v_ignore_single); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda43(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_278get_columns_from_content_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_boxes, PyObject *__pyx_v_ignore_single); /* proto */
static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_280is_fill_area(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_image); /* proto */
static PyObject *__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static __Pyx_CachedCFunction __pyx_umethod_PyList_Type_remove = {0, &__pyx_n_s_remove, 0, 0, 0};
static PyObject *__pyx_float_0_1;
static PyObject *__pyx_float_0_5;
static PyObject *__pyx_float_0_8;
static PyObject *__pyx_int_0;
static PyObject *__pyx_int_1;
static PyObject *__pyx_int_2;
static PyObject *__pyx_int_3;
static PyObject *__pyx_int_5;
static PyObject *__pyx_int_10;
static PyObject *__pyx_int_15;
static PyObject *__pyx_int_20;
static PyObject *__pyx_int_30;
static PyObject *__pyx_int_40;
static PyObject *__pyx_int_50;
static PyObject *__pyx_int_60;
static PyObject *__pyx_int_100;
static PyObject *__pyx_int_200;
static PyObject *__pyx_int_255;
static PyObject *__pyx_int_300;
static PyObject *__pyx_int_500;
static PyObject *__pyx_int_1000;
static PyObject *__pyx_int_1936;
static PyObject *__pyx_int_2730;
static PyObject *__pyx_int_neg_2;
static PyObject *__pyx_slice_;
static PyObject *__pyx_tuple__2;
static PyObject *__pyx_tuple__4;
static PyObject *__pyx_tuple__5;
static PyObject *__pyx_tuple__7;
static PyObject *__pyx_tuple__9;
static PyObject *__pyx_tuple__10;
static PyObject *__pyx_tuple__12;
static PyObject *__pyx_tuple__13;
static PyObject *__pyx_tuple__14;
static PyObject *__pyx_tuple__15;
static PyObject *__pyx_tuple__16;
static PyObject *__pyx_tuple__18;
static PyObject *__pyx_tuple__20;
static PyObject *__pyx_tuple__23;
static PyObject *__pyx_tuple__24;
static PyObject *__pyx_tuple__25;
static PyObject *__pyx_tuple__27;
static PyObject *__pyx_tuple__29;
static PyObject *__pyx_tuple__30;
static PyObject *__pyx_tuple__32;
static PyObject *__pyx_tuple__34;
static PyObject *__pyx_tuple__35;
static PyObject *__pyx_tuple__37;
static PyObject *__pyx_tuple__38;
static PyObject *__pyx_tuple__40;
static PyObject *__pyx_tuple__42;
static PyObject *__pyx_tuple__44;
static PyObject *__pyx_tuple__46;
static PyObject *__pyx_tuple__48;
static PyObject *__pyx_tuple__49;
static PyObject *__pyx_tuple__51;
static PyObject *__pyx_tuple__53;
static PyObject *__pyx_tuple__54;
static PyObject *__pyx_tuple__56;
static PyObject *__pyx_tuple__57;
static PyObject *__pyx_tuple__59;
static PyObject *__pyx_tuple__61;
static PyObject *__pyx_tuple__63;
static PyObject *__pyx_tuple__64;
static PyObject *__pyx_tuple__66;
static PyObject *__pyx_tuple__67;
static PyObject *__pyx_tuple__69;
static PyObject *__pyx_tuple__70;
static PyObject *__pyx_tuple__72;
static PyObject *__pyx_tuple__74;
static PyObject *__pyx_tuple__76;
static PyObject *__pyx_tuple__78;
static PyObject *__pyx_tuple__80;
static PyObject *__pyx_tuple__82;
static PyObject *__pyx_tuple__84;
static PyObject *__pyx_tuple__85;
static PyObject *__pyx_tuple__87;
static PyObject *__pyx_tuple__89;
static PyObject *__pyx_tuple__91;
static PyObject *__pyx_tuple__92;
static PyObject *__pyx_tuple__94;
static PyObject *__pyx_tuple__95;
static PyObject *__pyx_tuple__97;
static PyObject *__pyx_tuple__98;
static PyObject *__pyx_codeobj__3;
static PyObject *__pyx_codeobj__6;
static PyObject *__pyx_codeobj__8;
static PyObject *__pyx_tuple__100;
static PyObject *__pyx_tuple__101;
static PyObject *__pyx_tuple__103;
static PyObject *__pyx_tuple__105;
static PyObject *__pyx_tuple__107;
static PyObject *__pyx_tuple__108;
static PyObject *__pyx_tuple__110;
static PyObject *__pyx_tuple__111;
static PyObject *__pyx_tuple__113;
static PyObject *__pyx_tuple__114;
static PyObject *__pyx_tuple__116;
static PyObject *__pyx_tuple__117;
static PyObject *__pyx_tuple__119;
static PyObject *__pyx_tuple__121;
static PyObject *__pyx_tuple__122;
static PyObject *__pyx_tuple__124;
static PyObject *__pyx_tuple__125;
static PyObject *__pyx_tuple__127;
static PyObject *__pyx_tuple__129;
static PyObject *__pyx_tuple__130;
static PyObject *__pyx_tuple__132;
static PyObject *__pyx_tuple__133;
static PyObject *__pyx_tuple__135;
static PyObject *__pyx_tuple__136;
static PyObject *__pyx_tuple__138;
static PyObject *__pyx_tuple__139;
static PyObject *__pyx_tuple__141;
static PyObject *__pyx_tuple__142;
static PyObject *__pyx_tuple__144;
static PyObject *__pyx_tuple__146;
static PyObject *__pyx_tuple__148;
static PyObject *__pyx_tuple__150;
static PyObject *__pyx_tuple__152;
static PyObject *__pyx_tuple__153;
static PyObject *__pyx_tuple__155;
static PyObject *__pyx_tuple__157;
static PyObject *__pyx_tuple__158;
static PyObject *__pyx_tuple__160;
static PyObject *__pyx_tuple__161;
static PyObject *__pyx_tuple__163;
static PyObject *__pyx_tuple__164;
static PyObject *__pyx_tuple__166;
static PyObject *__pyx_tuple__167;
static PyObject *__pyx_tuple__169;
static PyObject *__pyx_tuple__171;
static PyObject *__pyx_tuple__173;
static PyObject *__pyx_tuple__175;
static PyObject *__pyx_tuple__177;
static PyObject *__pyx_tuple__179;
static PyObject *__pyx_tuple__181;
static PyObject *__pyx_tuple__182;
static PyObject *__pyx_tuple__184;
static PyObject *__pyx_tuple__185;
static PyObject *__pyx_tuple__187;
static PyObject *__pyx_tuple__188;
static PyObject *__pyx_tuple__190;
static PyObject *__pyx_tuple__191;
static PyObject *__pyx_tuple__193;
static PyObject *__pyx_tuple__194;
static PyObject *__pyx_tuple__196;
static PyObject *__pyx_tuple__197;
static PyObject *__pyx_tuple__199;
static PyObject *__pyx_tuple__200;
static PyObject *__pyx_tuple__202;
static PyObject *__pyx_tuple__204;
static PyObject *__pyx_tuple__205;
static PyObject *__pyx_tuple__207;
static PyObject *__pyx_tuple__208;
static PyObject *__pyx_tuple__210;
static PyObject *__pyx_tuple__211;
static PyObject *__pyx_tuple__213;
static PyObject *__pyx_tuple__214;
static PyObject *__pyx_tuple__216;
static PyObject *__pyx_tuple__217;
static PyObject *__pyx_tuple__219;
static PyObject *__pyx_tuple__220;
static PyObject *__pyx_tuple__222;
static PyObject *__pyx_tuple__223;
static PyObject *__pyx_tuple__225;
static PyObject *__pyx_tuple__227;
static PyObject *__pyx_tuple__228;
static PyObject *__pyx_tuple__230;
static PyObject *__pyx_tuple__232;
static PyObject *__pyx_tuple__234;
static PyObject *__pyx_tuple__235;
static PyObject *__pyx_tuple__237;
static PyObject *__pyx_tuple__239;
static PyObject *__pyx_tuple__241;
static PyObject *__pyx_tuple__243;
static PyObject *__pyx_tuple__244;
static PyObject *__pyx_tuple__246;
static PyObject *__pyx_tuple__247;
static PyObject *__pyx_tuple__249;
static PyObject *__pyx_tuple__251;
static PyObject *__pyx_tuple__252;
static PyObject *__pyx_tuple__254;
static PyObject *__pyx_tuple__255;
static PyObject *__pyx_tuple__257;
static PyObject *__pyx_tuple__258;
static PyObject *__pyx_tuple__260;
static PyObject *__pyx_tuple__262;
static PyObject *__pyx_tuple__264;
static PyObject *__pyx_tuple__266;
static PyObject *__pyx_tuple__267;
static PyObject *__pyx_tuple__269;
static PyObject *__pyx_tuple__270;
static PyObject *__pyx_tuple__272;
static PyObject *__pyx_tuple__273;
static PyObject *__pyx_tuple__275;
static PyObject *__pyx_tuple__276;
static PyObject *__pyx_tuple__278;
static PyObject *__pyx_tuple__279;
static PyObject *__pyx_tuple__281;
static PyObject *__pyx_tuple__282;
static PyObject *__pyx_tuple__284;
static PyObject *__pyx_tuple__285;
static PyObject *__pyx_tuple__287;
static PyObject *__pyx_tuple__288;
static PyObject *__pyx_tuple__290;
static PyObject *__pyx_tuple__291;
static PyObject *__pyx_tuple__293;
static PyObject *__pyx_tuple__294;
static PyObject *__pyx_tuple__296;
static PyObject *__pyx_tuple__297;
static PyObject *__pyx_tuple__299;
static PyObject *__pyx_tuple__300;
static PyObject *__pyx_tuple__302;
static PyObject *__pyx_tuple__303;
static PyObject *__pyx_tuple__305;
static PyObject *__pyx_tuple__307;
static PyObject *__pyx_tuple__308;
static PyObject *__pyx_tuple__310;
static PyObject *__pyx_tuple__311;
static PyObject *__pyx_tuple__313;
static PyObject *__pyx_tuple__314;
static PyObject *__pyx_tuple__316;
static PyObject *__pyx_tuple__318;
static PyObject *__pyx_tuple__320;
static PyObject *__pyx_tuple__322;
static PyObject *__pyx_tuple__324;
static PyObject *__pyx_tuple__325;
static PyObject *__pyx_tuple__327;
static PyObject *__pyx_tuple__328;
static PyObject *__pyx_tuple__330;
static PyObject *__pyx_tuple__332;
static PyObject *__pyx_tuple__334;
static PyObject *__pyx_tuple__336;
static PyObject *__pyx_tuple__338;
static PyObject *__pyx_tuple__340;
static PyObject *__pyx_tuple__341;
static PyObject *__pyx_tuple__343;
static PyObject *__pyx_tuple__345;
static PyObject *__pyx_tuple__346;
static PyObject *__pyx_tuple__348;
static PyObject *__pyx_tuple__350;
static PyObject *__pyx_tuple__352;
static PyObject *__pyx_tuple__354;
static PyObject *__pyx_tuple__356;
static PyObject *__pyx_tuple__357;
static PyObject *__pyx_tuple__359;
static PyObject *__pyx_tuple__361;
static PyObject *__pyx_tuple__362;
static PyObject *__pyx_tuple__364;
static PyObject *__pyx_tuple__365;
static PyObject *__pyx_tuple__367;
static PyObject *__pyx_tuple__368;
static PyObject *__pyx_tuple__370;
static PyObject *__pyx_tuple__372;
static PyObject *__pyx_tuple__374;
static PyObject *__pyx_tuple__376;
static PyObject *__pyx_tuple__377;
static PyObject *__pyx_tuple__379;
static PyObject *__pyx_tuple__380;
static PyObject *__pyx_tuple__382;
static PyObject *__pyx_tuple__383;
static PyObject *__pyx_tuple__385;
static PyObject *__pyx_tuple__386;
static PyObject *__pyx_codeobj__11;
static PyObject *__pyx_codeobj__17;
static PyObject *__pyx_codeobj__19;
static PyObject *__pyx_codeobj__26;
static PyObject *__pyx_codeobj__28;
static PyObject *__pyx_codeobj__31;
static PyObject *__pyx_codeobj__33;
static PyObject *__pyx_codeobj__36;
static PyObject *__pyx_codeobj__39;
static PyObject *__pyx_codeobj__41;
static PyObject *__pyx_codeobj__43;
static PyObject *__pyx_codeobj__45;
static PyObject *__pyx_codeobj__47;
static PyObject *__pyx_codeobj__50;
static PyObject *__pyx_codeobj__52;
static PyObject *__pyx_codeobj__55;
static PyObject *__pyx_codeobj__58;
static PyObject *__pyx_codeobj__60;
static PyObject *__pyx_codeobj__62;
static PyObject *__pyx_codeobj__65;
static PyObject *__pyx_codeobj__68;
static PyObject *__pyx_codeobj__71;
static PyObject *__pyx_codeobj__73;
static PyObject *__pyx_codeobj__75;
static PyObject *__pyx_codeobj__77;
static PyObject *__pyx_codeobj__79;
static PyObject *__pyx_codeobj__81;
static PyObject *__pyx_codeobj__83;
static PyObject *__pyx_codeobj__86;
static PyObject *__pyx_codeobj__88;
static PyObject *__pyx_codeobj__90;
static PyObject *__pyx_codeobj__93;
static PyObject *__pyx_codeobj__96;
static PyObject *__pyx_codeobj__99;
static PyObject *__pyx_codeobj__102;
static PyObject *__pyx_codeobj__104;
static PyObject *__pyx_codeobj__106;
static PyObject *__pyx_codeobj__109;
static PyObject *__pyx_codeobj__112;
static PyObject *__pyx_codeobj__115;
static PyObject *__pyx_codeobj__118;
static PyObject *__pyx_codeobj__120;
static PyObject *__pyx_codeobj__123;
static PyObject *__pyx_codeobj__126;
static PyObject *__pyx_codeobj__128;
static PyObject *__pyx_codeobj__131;
static PyObject *__pyx_codeobj__134;
static PyObject *__pyx_codeobj__137;
static PyObject *__pyx_codeobj__140;
static PyObject *__pyx_codeobj__143;
static PyObject *__pyx_codeobj__145;
static PyObject *__pyx_codeobj__147;
static PyObject *__pyx_codeobj__149;
static PyObject *__pyx_codeobj__151;
static PyObject *__pyx_codeobj__154;
static PyObject *__pyx_codeobj__156;
static PyObject *__pyx_codeobj__159;
static PyObject *__pyx_codeobj__162;
static PyObject *__pyx_codeobj__165;
static PyObject *__pyx_codeobj__168;
static PyObject *__pyx_codeobj__170;
static PyObject *__pyx_codeobj__172;
static PyObject *__pyx_codeobj__174;
static PyObject *__pyx_codeobj__176;
static PyObject *__pyx_codeobj__180;
static PyObject *__pyx_codeobj__183;
static PyObject *__pyx_codeobj__186;
static PyObject *__pyx_codeobj__189;
static PyObject *__pyx_codeobj__192;
static PyObject *__pyx_codeobj__195;
static PyObject *__pyx_codeobj__198;
static PyObject *__pyx_codeobj__201;
static PyObject *__pyx_codeobj__203;
static PyObject *__pyx_codeobj__206;
static PyObject *__pyx_codeobj__209;
static PyObject *__pyx_codeobj__212;
static PyObject *__pyx_codeobj__215;
static PyObject *__pyx_codeobj__218;
static PyObject *__pyx_codeobj__221;
static PyObject *__pyx_codeobj__224;
static PyObject *__pyx_codeobj__226;
static PyObject *__pyx_codeobj__229;
static PyObject *__pyx_codeobj__231;
static PyObject *__pyx_codeobj__233;
static PyObject *__pyx_codeobj__236;
static PyObject *__pyx_codeobj__238;
static PyObject *__pyx_codeobj__240;
static PyObject *__pyx_codeobj__242;
static PyObject *__pyx_codeobj__245;
static PyObject *__pyx_codeobj__248;
static PyObject *__pyx_codeobj__250;
static PyObject *__pyx_codeobj__253;
static PyObject *__pyx_codeobj__256;
static PyObject *__pyx_codeobj__259;
static PyObject *__pyx_codeobj__261;
static PyObject *__pyx_codeobj__263;
static PyObject *__pyx_codeobj__265;
static PyObject *__pyx_codeobj__268;
static PyObject *__pyx_codeobj__271;
static PyObject *__pyx_codeobj__274;
static PyObject *__pyx_codeobj__277;
static PyObject *__pyx_codeobj__280;
static PyObject *__pyx_codeobj__283;
static PyObject *__pyx_codeobj__286;
static PyObject *__pyx_codeobj__289;
static PyObject *__pyx_codeobj__292;
static PyObject *__pyx_codeobj__295;
static PyObject *__pyx_codeobj__298;
static PyObject *__pyx_codeobj__301;
static PyObject *__pyx_codeobj__304;
static PyObject *__pyx_codeobj__306;
static PyObject *__pyx_codeobj__309;
static PyObject *__pyx_codeobj__312;
static PyObject *__pyx_codeobj__315;
static PyObject *__pyx_codeobj__317;
static PyObject *__pyx_codeobj__319;
static PyObject *__pyx_codeobj__321;
static PyObject *__pyx_codeobj__323;
static PyObject *__pyx_codeobj__326;
static PyObject *__pyx_codeobj__329;
static PyObject *__pyx_codeobj__331;
static PyObject *__pyx_codeobj__333;
static PyObject *__pyx_codeobj__335;
static PyObject *__pyx_codeobj__337;
static PyObject *__pyx_codeobj__339;
static PyObject *__pyx_codeobj__342;
static PyObject *__pyx_codeobj__344;
static PyObject *__pyx_codeobj__347;
static PyObject *__pyx_codeobj__349;
static PyObject *__pyx_codeobj__351;
static PyObject *__pyx_codeobj__353;
static PyObject *__pyx_codeobj__355;
static PyObject *__pyx_codeobj__358;
static PyObject *__pyx_codeobj__360;
static PyObject *__pyx_codeobj__363;
static PyObject *__pyx_codeobj__366;
static PyObject *__pyx_codeobj__369;
static PyObject *__pyx_codeobj__371;
static PyObject *__pyx_codeobj__373;
static PyObject *__pyx_codeobj__375;
static PyObject *__pyx_codeobj__378;
static PyObject *__pyx_codeobj__381;
static PyObject *__pyx_codeobj__384;
static PyObject *__pyx_codeobj__387;
/* Late includes */

/* "table_extraction/utils_table_extraction.pyx":12
 * 
 *     @staticmethod
 *     def is_noise(rect):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_1is_noise(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_is_noise[] = "\n        :param rect:\n        :return: the all of the rectangles if rectangle's square is greater than a threshold\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_1is_noise = {"is_noise", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_1is_noise, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_is_noise};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_1is_noise(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_noise (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_is_noise(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_is_noise(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  long __pyx_v_THRESH_SIZE;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  int __pyx_v_is_noise;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("is_noise", 0);

  /* "table_extraction/utils_table_extraction.pyx":17
 *         :return: the all of the rectangles if rectangle's square is greater than a threshold
 *         """
 *         THRESH_SIZE = 115             # <<<<<<<<<<<<<<
 *         w, h = rect[2:]
 *         is_noise = True if w * h < THRESH_SIZE else False
 */
  __pyx_v_THRESH_SIZE = 0x73;

  /* "table_extraction/utils_table_extraction.pyx":18
 *         """
 *         THRESH_SIZE = 115
 *         w, h = rect[2:]             # <<<<<<<<<<<<<<
 *         is_noise = True if w * h < THRESH_SIZE else False
 *         return is_noise
 */
  __pyx_t_1 = __Pyx_PyObject_GetSlice(__pyx_v_rect, 2, 0, NULL, NULL, &__pyx_slice_, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 18, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 18, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 18, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 18, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 18, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_h = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":19
 *         THRESH_SIZE = 115
 *         w, h = rect[2:]
 *         is_noise = True if w * h < THRESH_SIZE else False             # <<<<<<<<<<<<<<
 *         return is_noise
 * 
 */
  __pyx_t_1 = PyNumber_Multiply(__pyx_v_w, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 19, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_THRESH_SIZE); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 19, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 19, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 19, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_7) {
    __pyx_t_6 = 1;
  } else {
    __pyx_t_6 = 0;
  }
  __pyx_v_is_noise = __pyx_t_6;

  /* "table_extraction/utils_table_extraction.pyx":20
 *         w, h = rect[2:]
 *         is_noise = True if w * h < THRESH_SIZE else False
 *         return is_noise             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyBool_FromLong(__pyx_v_is_noise); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 20, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":12
 * 
 *     @staticmethod
 *     def is_noise(rect):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_noise", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":23
 * 
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):             # <<<<<<<<<<<<<<
 *         if image.shape[0] > image.shape[1]:
 *             size = (width, height)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_3resize_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_3resize_image = {"resize_image", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_3resize_image, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_3resize_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_width = 0;
  PyObject *__pyx_v_height = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("resize_image (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_width,&__pyx_n_s_height,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject *)__pyx_int_1936));
    values[2] = ((PyObject *)((PyObject *)__pyx_int_2730));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_width);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_height);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "resize_image") < 0)) __PYX_ERR(0, 23, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_width = values[1];
    __pyx_v_height = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("resize_image", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 23, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.resize_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_2resize_image(__pyx_self, __pyx_v_image, __pyx_v_width, __pyx_v_height);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_2resize_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_width, PyObject *__pyx_v_height) {
  PyObject *__pyx_v_size = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("resize_image", 0);

  /* "table_extraction/utils_table_extraction.pyx":24
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):
 *         if image.shape[0] > image.shape[1]:             # <<<<<<<<<<<<<<
 *             size = (width, height)
 *         else:
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_shape); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_shape); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 24, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_4) {

    /* "table_extraction/utils_table_extraction.pyx":25
 *     def resize_image(image, width=1936, height=2730):
 *         if image.shape[0] > image.shape[1]:
 *             size = (width, height)             # <<<<<<<<<<<<<<
 *         else:
 *             size = (height, width)
 */
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 25, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_width);
    __Pyx_GIVEREF(__pyx_v_width);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_width);
    __Pyx_INCREF(__pyx_v_height);
    __Pyx_GIVEREF(__pyx_v_height);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_height);
    __pyx_v_size = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":24
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):
 *         if image.shape[0] > image.shape[1]:             # <<<<<<<<<<<<<<
 *             size = (width, height)
 *         else:
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":27
 *             size = (width, height)
 *         else:
 *             size = (height, width)             # <<<<<<<<<<<<<<
 *         return cv2.resize(image, size)
 * 
 */
  /*else*/ {
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 27, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_height);
    __Pyx_GIVEREF(__pyx_v_height);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_height);
    __Pyx_INCREF(__pyx_v_width);
    __Pyx_GIVEREF(__pyx_v_width);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_width);
    __pyx_v_size = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":28
 *         else:
 *             size = (height, width)
 *         return cv2.resize(image, size)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 28, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_resize); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 28, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_image, __pyx_v_size};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_image, __pyx_v_size};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 28, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_image);
    __Pyx_INCREF(__pyx_v_size);
    __Pyx_GIVEREF(__pyx_v_size);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_size);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 28, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":23
 * 
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):             # <<<<<<<<<<<<<<
 *         if image.shape[0] > image.shape[1]:
 *             size = (width, height)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.resize_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_size);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":31
 * 
 *     @staticmethod
 *     def refill_rects(image):             # <<<<<<<<<<<<<<
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_5refill_rects(PyObject *__pyx_self, PyObject *__pyx_v_image); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_5refill_rects = {"refill_rects", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_5refill_rects, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_5refill_rects(PyObject *__pyx_self, PyObject *__pyx_v_image) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("refill_rects (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_4refill_rects(__pyx_self, ((PyObject *)__pyx_v_image));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_4refill_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image) {
  PyObject *__pyx_v_contours = NULL;
  PyObject *__pyx_v_rects = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  int __pyx_t_11;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("refill_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":32
 *     @staticmethod
 *     def refill_rects(image):
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]             # <<<<<<<<<<<<<<
 *         rects = [cv2.boundingRect(c) for c in contours]
 *         rects = [rect for rect in rects if rect[2] < 20 or rect[3] < 20]
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_findContours); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_copy); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  __pyx_t_2 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_RETR_TREE); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_CHAIN_APPROX_SIMPLE); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_t_2, __pyx_t_5, __pyx_t_6};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_t_2, __pyx_t_5, __pyx_t_6};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(3+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 32, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_t_6);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_6 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 32, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 32, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_contours = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":33
 *     def refill_rects(image):
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]             # <<<<<<<<<<<<<<
 *         rects = [rect for rect in rects if rect[2] < 20 or rect[3] < 20]
 * 
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 33, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (likely(PyList_CheckExact(__pyx_v_contours)) || PyTuple_CheckExact(__pyx_v_contours)) {
    __pyx_t_1 = __pyx_v_contours; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_contours); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 33, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_10 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 33, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 33, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 33, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 33, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 33, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      }
    } else {
      __pyx_t_8 = __pyx_t_10(__pyx_t_1);
      if (unlikely(!__pyx_t_8)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 33, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_8);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_cv2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 33, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 33, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_8 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_c) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_c);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 33, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 33, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_rects = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":34
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 *         rects = [rect for rect in rects if rect[2] < 20 or rect[3] < 20]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 34, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
  for (;;) {
    if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 34, __pyx_L1_error)
    #else
    __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_8, __pyx_int_20, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (!__pyx_t_12) {
    } else {
      __pyx_t_11 = __pyx_t_12;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = PyObject_RichCompare(__pyx_t_5, __pyx_int_20, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 34, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_11 = __pyx_t_12;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_11) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_v_rect))) __PYX_ERR(0, 34, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_rects, ((PyObject*)__pyx_t_3));
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":31
 * 
 *     @staticmethod
 *     def refill_rects(image):             # <<<<<<<<<<<<<<
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.refill_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_contours);
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":37
 * 
 *     @staticmethod
 *     def shrink_line(h_lines, v_lines, threshold=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: those horizontal lines in the table
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_7shrink_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_6shrink_line[] = "\n        :param h_lines: those horizontal lines in the table\n        :param v_lines: those vertical lines in the table\n        :param threshold: maximum of vertical line or horizontal line can be extended.\n                 the horizontal line and vertical line can be extended or shrunk\n                 the start point(end point) of the line will be set at intersection point of these lines\n                 when the distance between start point(end point) of horizontal(vertical) and\n                 start point (end point) of vertical (horizontal) to the intersection point is smaller than threshold.\n        :return: horizontal lines, vertical lines in the table\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_7shrink_line = {"shrink_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_7shrink_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_6shrink_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_7shrink_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("shrink_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_lines,&__pyx_n_s_v_lines,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_10));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("shrink_line", 0, 2, 3, 1); __PYX_ERR(0, 37, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "shrink_line") < 0)) __PYX_ERR(0, 37, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_lines = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("shrink_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 37, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.shrink_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_6shrink_line(__pyx_self, __pyx_v_h_lines, __pyx_v_v_lines, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_6shrink_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_v_intersection_point = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("shrink_line", 0);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);

  /* "table_extraction/utils_table_extraction.pyx":48
 *         :return: horizontal lines, vertical lines in the table
 *         """
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 48, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 48, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 48, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 48, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 48, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 48, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 48, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":49
 *         """
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:
 *                     continue
 */
    if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
      __pyx_t_4 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_5 = 0;
      __pyx_t_6 = NULL;
    } else {
      __pyx_t_5 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 49, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 49, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_6)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 49, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        } else {
          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 49, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 49, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        }
      } else {
        __pyx_t_7 = __pyx_t_6(__pyx_t_4);
        if (unlikely(!__pyx_t_7)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 49, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_7);
      }
      __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":50
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:             # <<<<<<<<<<<<<<
 *                     continue
 * 
 */
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_7, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_7, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = PyNumber_Subtract(__pyx_t_10, __pyx_v_threshold); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = PyObject_RichCompare(__pyx_t_9, __pyx_t_7, Py_LT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (!__pyx_t_11) {
      } else {
        __pyx_t_8 = __pyx_t_11;
        goto __pyx_L8_bool_binop_done;
      }
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_10, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_10, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = PyNumber_Add(__pyx_t_9, __pyx_v_threshold); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyObject_RichCompare(__pyx_t_7, __pyx_t_10, Py_GT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 50, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_8 = __pyx_t_11;
      __pyx_L8_bool_binop_done:;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":51
 *             for h_line in h_lines:
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:
 *                     continue             # <<<<<<<<<<<<<<
 * 
 *                  # if line is a point, bail out
 */
        goto __pyx_L5_continue;

        /* "table_extraction/utils_table_extraction.pyx":50
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:             # <<<<<<<<<<<<<<
 *                     continue
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":54
 * 
 *                  # if line is a point, bail out
 *                 if h_line.start_point[0] == h_line.end_point[0] or v_line.start_point[1] == v_line.end_point[1]:             # <<<<<<<<<<<<<<
 *                     continue
 * 
 */
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_9, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_9, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyObject_RichCompare(__pyx_t_10, __pyx_t_7, Py_EQ); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (!__pyx_t_11) {
      } else {
        __pyx_t_8 = __pyx_t_11;
        goto __pyx_L11_bool_binop_done;
      }
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_9, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_9, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyObject_RichCompare(__pyx_t_7, __pyx_t_10, Py_EQ); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 54, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_8 = __pyx_t_11;
      __pyx_L11_bool_binop_done:;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":55
 *                  # if line is a point, bail out
 *                 if h_line.start_point[0] == h_line.end_point[0] or v_line.start_point[1] == v_line.end_point[1]:
 *                     continue             # <<<<<<<<<<<<<<
 * 
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= threshold:
 */
        goto __pyx_L5_continue;

        /* "table_extraction/utils_table_extraction.pyx":54
 * 
 *                  # if line is a point, bail out
 *                 if h_line.start_point[0] == h_line.end_point[0] or v_line.start_point[1] == v_line.end_point[1]:             # <<<<<<<<<<<<<<
 *                     continue
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":57
 *                     continue
 * 
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= threshold:             # <<<<<<<<<<<<<<
 * 
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
      __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_Utils); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 57, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_distance_from_line_to_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 57, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = NULL;
      __pyx_t_12 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_7, function);
          __pyx_t_12 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 57, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_GOTREF(__pyx_t_9);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 57, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_GOTREF(__pyx_t_9);
      } else
      #endif
      {
        __pyx_t_13 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 57, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        if (__pyx_t_10) {
          __Pyx_GIVEREF(__pyx_t_10); PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_10); __pyx_t_10 = NULL;
        }
        __Pyx_INCREF(__pyx_v_h_line);
        __Pyx_GIVEREF(__pyx_v_h_line);
        PyTuple_SET_ITEM(__pyx_t_13, 0+__pyx_t_12, __pyx_v_h_line);
        __Pyx_INCREF(__pyx_v_v_line);
        __Pyx_GIVEREF(__pyx_v_v_line);
        PyTuple_SET_ITEM(__pyx_t_13, 1+__pyx_t_12, __pyx_v_v_line);
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_13, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 57, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 57, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 57, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":59
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= threshold:
 * 
 *                     intersection_point = Utils.line_intersection(h_line, v_line)             # <<<<<<<<<<<<<<
 *                     if not intersection_point[0]:
 *                         continue
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 59, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_line_intersection); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 59, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = NULL;
        __pyx_t_12 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_13);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_13, function);
            __pyx_t_12 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_13)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 59, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_13)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 59, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
        } else
        #endif
        {
          __pyx_t_10 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 59, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_INCREF(__pyx_v_h_line);
          __Pyx_GIVEREF(__pyx_v_h_line);
          PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_12, __pyx_v_h_line);
          __Pyx_INCREF(__pyx_v_v_line);
          __Pyx_GIVEREF(__pyx_v_v_line);
          PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_12, __pyx_v_v_line);
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_13, __pyx_t_10, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 59, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        }
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_XDECREF_SET(__pyx_v_intersection_point, __pyx_t_7);
        __pyx_t_7 = 0;

        /* "table_extraction/utils_table_extraction.pyx":60
 * 
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 * 
 */
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_intersection_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 60, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 60, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_11 = ((!__pyx_t_8) != 0);
        if (__pyx_t_11) {

          /* "table_extraction/utils_table_extraction.pyx":61
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 *                         continue             # <<<<<<<<<<<<<<
 * 
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 */
          goto __pyx_L5_continue;

          /* "table_extraction/utils_table_extraction.pyx":60
 * 
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 * 
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":63
 *                         continue
 * 
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.original_start_point = h_line.start_point # add at #112511
 *                         h_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_Utils); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 63, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 63, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 63, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_9 = NULL;
        __pyx_t_12 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_10, function);
            __pyx_t_12 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_13, __pyx_v_intersection_point};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_13, __pyx_v_intersection_point};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        } else
        #endif
        {
          __pyx_t_14 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 63, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_13);
          PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_12, __pyx_t_13);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_12, __pyx_v_intersection_point);
          __pyx_t_13 = 0;
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_14, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 63, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        }
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = PyObject_RichCompare(__pyx_t_7, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 63, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 63, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_11) {

          /* "table_extraction/utils_table_extraction.pyx":64
 * 
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 *                         h_line.original_start_point = h_line.start_point # add at #112511             # <<<<<<<<<<<<<<
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 */
          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 64, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_original_start_point, __pyx_t_10) < 0) __PYX_ERR(0, 64, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

          /* "table_extraction/utils_table_extraction.pyx":65
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 *                         h_line.original_start_point = h_line.start_point # add at #112511
 *                         h_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_start_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 65, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":66
 *                         h_line.original_start_point = h_line.start_point # add at #112511
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 66, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":63
 *                         continue
 * 
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.original_start_point = h_line.start_point # add at #112511
 *                         h_line.start_point = intersection_point
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":68
 *                         h_line.connect_at_start_point = True
 * 
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.original_end_point = h_line.end_point # add at #112511
 *                         h_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 68, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 68, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 68, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_13 = NULL;
        __pyx_t_12 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
          __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_14);
          if (likely(__pyx_t_13)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
            __Pyx_INCREF(__pyx_t_13);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_14, function);
            __pyx_t_12 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_7, __pyx_v_intersection_point};
          __pyx_t_10 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 68, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_7, __pyx_v_intersection_point};
          __pyx_t_10 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 68, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 68, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_13) {
            __Pyx_GIVEREF(__pyx_t_13); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_13); __pyx_t_13 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_7);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_12, __pyx_t_7);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_12, __pyx_v_intersection_point);
          __pyx_t_7 = 0;
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_9, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 68, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = PyObject_RichCompare(__pyx_t_10, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_14); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 68, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_14); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 68, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        if (__pyx_t_11) {

          /* "table_extraction/utils_table_extraction.pyx":69
 * 
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 *                         h_line.original_end_point = h_line.end_point # add at #112511             # <<<<<<<<<<<<<<
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 */
          __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 69, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_original_end_point, __pyx_t_14) < 0) __PYX_ERR(0, 69, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;

          /* "table_extraction/utils_table_extraction.pyx":70
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 *                         h_line.original_end_point = h_line.end_point # add at #112511
 *                         h_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_end_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 70, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":71
 *                         h_line.original_end_point = h_line.end_point # add at #112511
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 71, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":68
 *                         h_line.connect_at_start_point = True
 * 
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.original_end_point = h_line.end_point # add at #112511
 *                         h_line.end_point = intersection_point
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":73
 *                         h_line.connect_at_end_point = True
 * 
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.original_start_point = v_line.start_point # add at #112511
 *                         v_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_Utils); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 73, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 73, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 73, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = NULL;
        __pyx_t_12 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_7)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_7);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_12 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_10, __pyx_v_intersection_point};
          __pyx_t_14 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 73, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_10, __pyx_v_intersection_point};
          __pyx_t_14 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 73, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        {
          __pyx_t_13 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 73, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          if (__pyx_t_7) {
            __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_7); __pyx_t_7 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_13, 0+__pyx_t_12, __pyx_t_10);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_13, 1+__pyx_t_12, __pyx_v_intersection_point);
          __pyx_t_10 = 0;
          __pyx_t_14 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_13, NULL); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 73, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = PyObject_RichCompare(__pyx_t_14, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 73, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 73, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (__pyx_t_11) {

          /* "table_extraction/utils_table_extraction.pyx":74
 * 
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 *                         v_line.original_start_point = v_line.start_point # add at #112511             # <<<<<<<<<<<<<<
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True
 */
          __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 74, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_original_start_point, __pyx_t_9) < 0) __PYX_ERR(0, 74, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

          /* "table_extraction/utils_table_extraction.pyx":75
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 *                         v_line.original_start_point = v_line.start_point # add at #112511
 *                         v_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_start_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 75, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":76
 *                         v_line.original_start_point = v_line.start_point # add at #112511
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 76, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":73
 *                         h_line.connect_at_end_point = True
 * 
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.original_start_point = v_line.start_point # add at #112511
 *                         v_line.start_point = intersection_point
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":78
 *                         v_line.connect_at_start_point = True
 * 
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.original_end_point = v_line.end_point # add at #112511
 *                         v_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_Utils); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 78, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 78, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 78, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_10 = NULL;
        __pyx_t_12 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_13);
          if (likely(__pyx_t_10)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
            __Pyx_INCREF(__pyx_t_10);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_13, function);
            __pyx_t_12 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_13)) {
          PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_t_14, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 78, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_13)) {
          PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_t_14, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_12, 2+__pyx_t_12); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 78, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        } else
        #endif
        {
          __pyx_t_7 = PyTuple_New(2+__pyx_t_12); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 78, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          if (__pyx_t_10) {
            __Pyx_GIVEREF(__pyx_t_10); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_10); __pyx_t_10 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_14);
          PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_12, __pyx_t_14);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_12, __pyx_v_intersection_point);
          __pyx_t_14 = 0;
          __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_13, __pyx_t_7, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 78, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        }
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __pyx_t_13 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_13); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 78, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 78, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        if (__pyx_t_11) {

          /* "table_extraction/utils_table_extraction.pyx":79
 * 
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 *                         v_line.original_end_point = v_line.end_point # add at #112511             # <<<<<<<<<<<<<<
 *                         v_line.end_point = intersection_point
 *                         v_line.connect_at_end_point = True
 */
          __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 79, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_original_end_point, __pyx_t_13) < 0) __PYX_ERR(0, 79, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;

          /* "table_extraction/utils_table_extraction.pyx":80
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 *                         v_line.original_end_point = v_line.end_point # add at #112511
 *                         v_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_end_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 80, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":81
 *                         v_line.original_end_point = v_line.end_point # add at #112511
 *                         v_line.end_point = intersection_point
 *                         v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *         # Remove all lines with length = 0
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 81, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":78
 *                         v_line.connect_at_start_point = True
 * 
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.original_end_point = v_line.end_point # add at #112511
 *                         v_line.end_point = intersection_point
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":57
 *                     continue
 * 
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= threshold:             # <<<<<<<<<<<<<<
 * 
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":49
 *         """
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:
 *                     continue
 */
      __pyx_L5_continue:;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":48
 *         :return: horizontal lines, vertical lines in the table
 *         """
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if h_line.start_point[1] < v_line.start_point[1] - threshold or h_line.start_point[1] > v_line.end_point[1] + threshold:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":84
 * 
 *         # Remove all lines with length = 0
 *         h_lines = [line for line in h_lines if line.length() > 0]             # <<<<<<<<<<<<<<
 *         v_lines = [line for line in v_lines if line.length() > 0]
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 84, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_4 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 84, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 84, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_13 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_13); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 84, __pyx_L1_error)
        #else
        __pyx_t_13 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 84, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_13 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_13); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 84, __pyx_L1_error)
        #else
        __pyx_t_13 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 84, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        #endif
      }
    } else {
      __pyx_t_13 = __pyx_t_3(__pyx_t_4);
      if (unlikely(!__pyx_t_13)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 84, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_13);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_13);
    __pyx_t_13 = 0;
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_length); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 84, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_13 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 84, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = PyObject_RichCompare(__pyx_t_13, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 84, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 84, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (__pyx_t_11) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 84, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":85
 *         # Remove all lines with length = 0
 *         h_lines = [line for line in h_lines if line.length() > 0]
 *         v_lines = [line for line in v_lines if line.length() > 0]             # <<<<<<<<<<<<<<
 * 
 *         return h_lines, v_lines
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 85, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_4 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 85, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 85, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_9 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_9); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 85, __pyx_L1_error)
        #else
        __pyx_t_9 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 85, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_9 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_9); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 85, __pyx_L1_error)
        #else
        __pyx_t_9 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 85, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        #endif
      }
    } else {
      __pyx_t_9 = __pyx_t_3(__pyx_t_4);
      if (unlikely(!__pyx_t_9)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 85, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_9);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_9);
    __pyx_t_9 = 0;
    __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_length); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 85, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_13))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_13);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_13, function);
      }
    }
    __pyx_t_9 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_13, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_13);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 85, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __pyx_t_13 = PyObject_RichCompare(__pyx_t_9, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_13); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 85, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 85, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    if (__pyx_t_11) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 85, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_v_lines, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":87
 *         v_lines = [line for line in v_lines if line.length() > 0]
 * 
 *         return h_lines, v_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 87, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_GIVEREF(__pyx_v_h_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);
  __Pyx_GIVEREF(__pyx_v_v_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_v_lines);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":37
 * 
 *     @staticmethod
 *     def shrink_line(h_lines, v_lines, threshold=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: those horizontal lines in the table
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.shrink_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XDECREF(__pyx_v_intersection_point);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":90
 * 
 *     @staticmethod
 *     def reduce_line(h_lines, v_lines, threshold=15):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: all of the horizontal lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_9reduce_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_8reduce_line[] = "\n        :param h_lines: all of the horizontal lines\n        :param v_lines: all of the vertical lines\n        :param threshold: maximum of a line's length can be reduced\n        :return: the list of horizontal lines and vertical lines\n                 The horizontal line and vertical line is reduced if it's intersection is inside the line and\n                 distance between start point (end point) and this intersection is smaller than threshold\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_9reduce_line = {"reduce_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_9reduce_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_8reduce_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_9reduce_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("reduce_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_lines,&__pyx_n_s_v_lines,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_15));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("reduce_line", 0, 2, 3, 1); __PYX_ERR(0, 90, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "reduce_line") < 0)) __PYX_ERR(0, 90, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_lines = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("reduce_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 90, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.reduce_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_8reduce_line(__pyx_self, __pyx_v_h_lines, __pyx_v_v_lines, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_8reduce_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_v_intersection_point = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  int __pyx_t_13;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("reduce_line", 0);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);

  /* "table_extraction/utils_table_extraction.pyx":99
 *                  distance between start point (end point) and this intersection is smaller than threshold
 *         """
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if Utils.is_intersect(h_line, v_line):
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 99, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 99, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 99, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 99, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 99, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 99, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 99, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":100
 *         """
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if Utils.is_intersect(h_line, v_line):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
    if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
      __pyx_t_4 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_5 = 0;
      __pyx_t_6 = NULL;
    } else {
      __pyx_t_5 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 100, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 100, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_6)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 100, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 100, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        } else {
          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 100, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 100, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        }
      } else {
        __pyx_t_7 = __pyx_t_6(__pyx_t_4);
        if (unlikely(!__pyx_t_7)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 100, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_7);
      }
      __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":101
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if Utils.is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 101, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 101, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 101, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 101, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 101, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_h_line);
        __Pyx_GIVEREF(__pyx_v_h_line);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_h_line);
        __Pyx_INCREF(__pyx_v_v_line);
        __Pyx_GIVEREF(__pyx_v_v_line);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_v_line);
        __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 101, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 101, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (__pyx_t_12) {

        /* "table_extraction/utils_table_extraction.pyx":102
 *             for h_line in h_lines:
 *                 if Utils.is_intersect(h_line, v_line):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)             # <<<<<<<<<<<<<<
 *                     if not intersection_point[0]:
 *                         continue
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 102, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_line_intersection); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 102, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_11);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_11, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 102, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 102, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
        } else
        #endif
        {
          __pyx_t_8 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 102, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_INCREF(__pyx_v_h_line);
          __Pyx_GIVEREF(__pyx_v_h_line);
          PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_10, __pyx_v_h_line);
          __Pyx_INCREF(__pyx_v_v_line);
          __Pyx_GIVEREF(__pyx_v_v_line);
          PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_10, __pyx_v_v_line);
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_8, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 102, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        }
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_XDECREF_SET(__pyx_v_intersection_point, __pyx_t_7);
        __pyx_t_7 = 0;

        /* "table_extraction/utils_table_extraction.pyx":103
 *                 if Utils.is_intersect(h_line, v_line):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 */
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_intersection_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 103, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 103, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_13 = ((!__pyx_t_12) != 0);
        if (__pyx_t_13) {

          /* "table_extraction/utils_table_extraction.pyx":104
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 *                         continue             # <<<<<<<<<<<<<<
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 *                         h_line.start_point = intersection_point
 */
          goto __pyx_L5_continue;

          /* "table_extraction/utils_table_extraction.pyx":103
 *                 if Utils.is_intersect(h_line, v_line):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":105
 *                     if not intersection_point[0]:
 *                         continue
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 */
        __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 105, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 105, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 105, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_9 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_8, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 105, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 105, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        {
          __pyx_t_14 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 105, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_10, __pyx_t_11);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_11 = 0;
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_14, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 105, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        }
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = PyObject_RichCompare(__pyx_t_7, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 105, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 105, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (__pyx_t_13) {

          /* "table_extraction/utils_table_extraction.pyx":106
 *                         continue
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 *                         h_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 106, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":107
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 *                         v_line.start_point = intersection_point
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 107, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":105
 *                     if not intersection_point[0]:
 *                         continue
 *                     if Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":108
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True
 */
        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 108, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 108, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 108, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_11 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
          __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_14);
          if (likely(__pyx_t_11)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
            __Pyx_INCREF(__pyx_t_11);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_14, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_7, __pyx_v_intersection_point};
          __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 108, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_7, __pyx_v_intersection_point};
          __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 108, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 108, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_11) {
            __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_11); __pyx_t_11 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_7);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_10, __pyx_t_7);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_7 = 0;
          __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_9, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 108, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = PyObject_RichCompare(__pyx_t_8, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_14); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 108, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_14); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 108, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        if (__pyx_t_13) {

          /* "table_extraction/utils_table_extraction.pyx":109
 *                         h_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 *                         v_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 109, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":110
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 *                         h_line.end_point = intersection_point
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 110, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":108
 *                         h_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":111
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 */
        __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 111, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 111, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 111, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_7 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_7)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_7);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_8, __pyx_v_intersection_point};
          __pyx_t_14 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 111, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_8, __pyx_v_intersection_point};
          __pyx_t_14 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 111, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        {
          __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 111, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          if (__pyx_t_7) {
            __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_7); __pyx_t_7 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_8);
          PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_t_8);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_8 = 0;
          __pyx_t_14 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 111, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = PyObject_RichCompare(__pyx_t_14, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 111, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 111, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (__pyx_t_13) {

          /* "table_extraction/utils_table_extraction.pyx":112
 *                         v_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 *                         h_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_end_point = True
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 112, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":113
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 *                         v_line.end_point = intersection_point
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 113, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":111
 *                         v_line.start_point = intersection_point
 *                         v_line.connect_at_start_point = True
 *                     if Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":114
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.end_point = intersection_point
 *                         v_line.connect_at_end_point = True
 */
        __Pyx_GetModuleGlobalName(__pyx_t_14, __pyx_n_s_Utils); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 114, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_14, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 114, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 114, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_8 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_11, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_14, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 114, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_14, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 114, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        } else
        #endif
        {
          __pyx_t_7 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 114, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_14);
          PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_10, __pyx_t_14);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_14 = 0;
          __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_7, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 114, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        }
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_11); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 114, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 114, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        if (__pyx_t_13) {

          /* "table_extraction/utils_table_extraction.pyx":115
 *                         h_line.connect_at_end_point = True
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 *                         v_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_end_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 115, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":116
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:
 *                         v_line.end_point = intersection_point
 *                         v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *         # Remove all lines with length = 0
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 116, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":114
 *                         h_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 *                     if Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold:             # <<<<<<<<<<<<<<
 *                         v_line.end_point = intersection_point
 *                         v_line.connect_at_end_point = True
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":101
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if Utils.is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":100
 *         """
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if Utils.is_intersect(h_line, v_line):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
      __pyx_L5_continue:;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":99
 *                  distance between start point (end point) and this intersection is smaller than threshold
 *         """
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if Utils.is_intersect(h_line, v_line):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":119
 * 
 *         # Remove all lines with length = 0
 *         h_lines = [line for line in h_lines if line.length() > 0]             # <<<<<<<<<<<<<<
 *         v_lines = [line for line in v_lines if line.length() > 0]
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 119, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_4 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 119, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 119, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_11 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_11); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 119, __pyx_L1_error)
        #else
        __pyx_t_11 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 119, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_11 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_11); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 119, __pyx_L1_error)
        #else
        __pyx_t_11 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 119, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        #endif
      }
    } else {
      __pyx_t_11 = __pyx_t_3(__pyx_t_4);
      if (unlikely(!__pyx_t_11)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 119, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_11);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_11);
    __pyx_t_11 = 0;
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_length); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 119, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_11 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 119, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = PyObject_RichCompare(__pyx_t_11, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 119, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 119, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (__pyx_t_13) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 119, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":120
 *         # Remove all lines with length = 0
 *         h_lines = [line for line in h_lines if line.length() > 0]
 *         v_lines = [line for line in v_lines if line.length() > 0]             # <<<<<<<<<<<<<<
 * 
 *         return h_lines, v_lines
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 120, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_4 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 120, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 120, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_9 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_9); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 120, __pyx_L1_error)
        #else
        __pyx_t_9 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_9 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_2); __Pyx_INCREF(__pyx_t_9); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 120, __pyx_L1_error)
        #else
        __pyx_t_9 = PySequence_ITEM(__pyx_t_4, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        #endif
      }
    } else {
      __pyx_t_9 = __pyx_t_3(__pyx_t_4);
      if (unlikely(!__pyx_t_9)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 120, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_9);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_9);
    __pyx_t_9 = 0;
    __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_length); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 120, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_11))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_11);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_11, function);
      }
    }
    __pyx_t_9 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_11, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_11);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 120, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = PyObject_RichCompare(__pyx_t_9, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_11); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 120, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 120, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    if (__pyx_t_13) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 120, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_v_lines, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":122
 *         v_lines = [line for line in v_lines if line.length() > 0]
 * 
 *         return h_lines, v_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 122, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_GIVEREF(__pyx_v_h_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);
  __Pyx_GIVEREF(__pyx_v_v_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_v_lines);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":90
 * 
 *     @staticmethod
 *     def reduce_line(h_lines, v_lines, threshold=15):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: all of the horizontal lines
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.reduce_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XDECREF(__pyx_v_intersection_point);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":125
 * 
 *     @staticmethod
 *     def is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_11is_intersect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_11is_intersect = {"is_intersect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_11is_intersect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_11is_intersect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_intersect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_v_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_intersect", 1, 2, 2, 1); __PYX_ERR(0, 125, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_intersect") < 0)) __PYX_ERR(0, 125, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_h_line = values[0];
    __pyx_v_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_intersect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 125, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_intersect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_10is_intersect(__pyx_self, __pyx_v_h_line, __pyx_v_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_10is_intersect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line) {
  PyObject *__pyx_v_h_start_point = NULL;
  PyObject *__pyx_v_h_end_point = NULL;
  PyObject *__pyx_v_v_start_point = NULL;
  PyObject *__pyx_v_v_end_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("is_intersect", 0);

  /* "table_extraction/utils_table_extraction.pyx":126
 *     @staticmethod
 *     def is_intersect(h_line, v_line):
 *         h_start_point = h_line.start_point             # <<<<<<<<<<<<<<
 *         h_end_point = h_line.end_point
 *         v_start_point = v_line.start_point
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 126, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_h_start_point = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":127
 *     def is_intersect(h_line, v_line):
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point             # <<<<<<<<<<<<<<
 *         v_start_point = v_line.start_point
 *         v_end_point = v_line.end_point
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 127, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_h_end_point = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":128
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point
 *         v_start_point = v_line.start_point             # <<<<<<<<<<<<<<
 *         v_end_point = v_line.end_point
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 128, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_v_start_point = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":129
 *         h_end_point = h_line.end_point
 *         v_start_point = v_line.start_point
 *         v_end_point = v_line.end_point             # <<<<<<<<<<<<<<
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 129, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_v_end_point = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":130
 *         v_start_point = v_line.start_point
 *         v_end_point = v_line.end_point
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \             # <<<<<<<<<<<<<<
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_h_start_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_v_start_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 130, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":131
 *         v_end_point = v_line.end_point
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_v_start_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":130
 *         v_start_point = v_line.start_point
 *         v_end_point = v_line.end_point
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \             # <<<<<<<<<<<<<<
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]
 * 
 */
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_h_end_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 130, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":131
 *         v_end_point = v_line.end_point
 *         return h_start_point[0] <= v_start_point[0] and v_start_point[0] <= h_end_point[0] \
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_v_start_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_h_start_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 131, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_h_start_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_v_end_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 131, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":125
 * 
 *     @staticmethod
 *     def is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_intersect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_start_point);
  __Pyx_XDECREF(__pyx_v_h_end_point);
  __Pyx_XDECREF(__pyx_v_v_start_point);
  __Pyx_XDECREF(__pyx_v_v_end_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":134
 * 
 *     @staticmethod
 *     def line_intersection(a_line, b_line):             # <<<<<<<<<<<<<<
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13line_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_13line_intersection = {"line_intersection", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13line_intersection, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13line_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_intersection (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_intersection", 1, 2, 2, 1); __PYX_ERR(0, 134, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_intersection") < 0)) __PYX_ERR(0, 134, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_intersection", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 134, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_12line_intersection(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":141
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here
 * 
 *         def det(a, b):             # <<<<<<<<<<<<<<
 *             return a[0] * b[1] - a[1] * b[0]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_1det(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_1det = {"det", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_1det, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_1det(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a = 0;
  PyObject *__pyx_v_b = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("det (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_b,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("det", 1, 2, 2, 1); __PYX_ERR(0, 141, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "det") < 0)) __PYX_ERR(0, 141, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a = values[0];
    __pyx_v_b = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("det", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 141, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_intersection.det", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(__pyx_self, __pyx_v_a, __pyx_v_b);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a, PyObject *__pyx_v_b) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("det", 0);

  /* "table_extraction/utils_table_extraction.pyx":142
 * 
 *         def det(a, b):
 *             return a[0] * b[1] - a[1] * b[0]             # <<<<<<<<<<<<<<
 * 
 *         div = det(xdiff, ydiff)
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Multiply(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Multiply(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 142, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":141
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here
 * 
 *         def det(a, b):             # <<<<<<<<<<<<<<
 *             return a[0] * b[1] - a[1] * b[0]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_intersection.det", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":134
 * 
 *     @staticmethod
 *     def line_intersection(a_line, b_line):             # <<<<<<<<<<<<<<
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_12line_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_v_line1 = NULL;
  PyObject *__pyx_v_line2 = NULL;
  PyObject *__pyx_v_xdiff = NULL;
  PyObject *__pyx_v_ydiff = NULL;
  PyObject *__pyx_v_det = 0;
  PyObject *__pyx_v_div = NULL;
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("line_intersection", 0);

  /* "table_extraction/utils_table_extraction.pyx":135
 *     @staticmethod
 *     def line_intersection(a_line, b_line):
 *         line1 = (a_line.start_point, a_line.end_point)             # <<<<<<<<<<<<<<
 *         line2 = (b_line.start_point, b_line.end_point)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 135, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 135, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 135, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_v_line1 = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":136
 *     def line_intersection(a_line, b_line):
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)             # <<<<<<<<<<<<<<
 * 
 *         xdiff = (line1[0][0] - line1[1][0], line2[0][0] - line2[1][0])
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 136, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 136, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 136, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_2);
  __pyx_t_3 = 0;
  __pyx_t_2 = 0;
  __pyx_v_line2 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":138
 *         line2 = (b_line.start_point, b_line.end_point)
 * 
 *         xdiff = (line1[0][0] - line1[1][0], line2[0][0] - line2[1][0])             # <<<<<<<<<<<<<<
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here
 * 
 */
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v_line1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v_line1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt_Tuple(__pyx_v_line2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt_Tuple(__pyx_v_line2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_3);
  __pyx_t_1 = 0;
  __pyx_t_3 = 0;
  __pyx_v_xdiff = ((PyObject*)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":139
 * 
 *         xdiff = (line1[0][0] - line1[1][0], line2[0][0] - line2[1][0])
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here             # <<<<<<<<<<<<<<
 * 
 *         def det(a, b):
 */
  __pyx_t_4 = __Pyx_GetItemInt_Tuple(__pyx_v_line1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt_Tuple(__pyx_v_line1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v_line2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt_Tuple(__pyx_v_line2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_1);
  __pyx_t_4 = 0;
  __pyx_t_1 = 0;
  __pyx_v_ydiff = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":141
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here
 * 
 *         def det(a, b):             # <<<<<<<<<<<<<<
 *             return a[0] * b[1] - a[1] * b[0]
 * 
 */
  __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_1det, 0, __pyx_n_s_Utils_line_intersection_locals_d, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__3)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 141, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_det = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":144
 *             return a[0] * b[1] - a[1] * b[0]
 * 
 *         div = det(xdiff, ydiff)             # <<<<<<<<<<<<<<
 *         if div == 0:
 *             return None, None #14560
 */
  __pyx_t_2 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(__pyx_v_det, __pyx_v_xdiff, __pyx_v_ydiff); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 144, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_div = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":145
 * 
 *         div = det(xdiff, ydiff)
 *         if div == 0:             # <<<<<<<<<<<<<<
 *             return None, None #14560
 *             # raise Exception('lines do not intersect')
 */
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_v_div, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 145, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 145, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_5) {

    /* "table_extraction/utils_table_extraction.pyx":146
 *         div = det(xdiff, ydiff)
 *         if div == 0:
 *             return None, None #14560             # <<<<<<<<<<<<<<
 *             # raise Exception('lines do not intersect')
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_tuple__4);
    __pyx_r = __pyx_tuple__4;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":145
 * 
 *         div = det(xdiff, ydiff)
 *         if div == 0:             # <<<<<<<<<<<<<<
 *             return None, None #14560
 *             # raise Exception('lines do not intersect')
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":149
 *             # raise Exception('lines do not intersect')
 * 
 *         d = (det(*line1), det(*line2))             # <<<<<<<<<<<<<<
 *         x = int(det(d, xdiff) / div)
 *         y = int(det(d, ydiff) / div)
 */
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_v_det, __pyx_v_line1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_v_det, __pyx_v_line2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1);
  __pyx_t_2 = 0;
  __pyx_t_1 = 0;
  __pyx_v_d = ((PyObject*)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":150
 * 
 *         d = (det(*line1), det(*line2))
 *         x = int(det(d, xdiff) / div)             # <<<<<<<<<<<<<<
 *         y = int(det(d, ydiff) / div)
 *         return x, y
 */
  __pyx_t_4 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(__pyx_v_det, __pyx_v_d, __pyx_v_xdiff); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_v_div); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_x = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":151
 *         d = (det(*line1), det(*line2))
 *         x = int(det(d, xdiff) / div)
 *         y = int(det(d, ydiff) / div)             # <<<<<<<<<<<<<<
 *         return x, y
 * 
 */
  __pyx_t_4 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_17line_intersection_det(__pyx_v_det, __pyx_v_d, __pyx_v_ydiff); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 151, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_v_div); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 151, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 151, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":152
 *         x = int(det(d, xdiff) / div)
 *         y = int(det(d, ydiff) / div)
 *         return x, y             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 152, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_v_x);
  __Pyx_GIVEREF(__pyx_v_x);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_x);
  __Pyx_INCREF(__pyx_v_y);
  __Pyx_GIVEREF(__pyx_v_y);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_y);
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":134
 * 
 *     @staticmethod
 *     def line_intersection(a_line, b_line):             # <<<<<<<<<<<<<<
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line1);
  __Pyx_XDECREF(__pyx_v_line2);
  __Pyx_XDECREF(__pyx_v_xdiff);
  __Pyx_XDECREF(__pyx_v_ydiff);
  __Pyx_XDECREF(__pyx_v_det);
  __Pyx_XDECREF(__pyx_v_div);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":155
 * 
 *     @staticmethod
 *     def lines_intersect_line(lines, line):             # <<<<<<<<<<<<<<
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_intersect_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_intersect_line = {"lines_intersect_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_intersect_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_intersect_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lines_intersect_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_lines,&__pyx_n_s_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lines_intersect_line", 1, 2, 2, 1); __PYX_ERR(0, 155, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lines_intersect_line") < 0)) __PYX_ERR(0, 155, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_lines = values[0];
    __pyx_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lines_intersect_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 155, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_intersect_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_14lines_intersect_line(__pyx_self, __pyx_v_lines, __pyx_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_14lines_intersect_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_line) {
  PyObject *__pyx_v_other_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  __Pyx_RefNannySetupContext("lines_intersect_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":156
 *     @staticmethod
 *     def lines_intersect_line(lines, line):
 *         if line.orientation=="h":             # <<<<<<<<<<<<<<
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 *         elif line.orientation=="v":
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 156, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":157
 *     def lines_intersect_line(lines, line):
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]             # <<<<<<<<<<<<<<
 *         elif line.orientation=="v":
 *             return [other_line for other_line in lines if Utils.is_intersect(other_line, line)]
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 157, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
      __pyx_t_3 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
      __pyx_t_5 = NULL;
    } else {
      __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 157, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 157, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_5)) {
        if (likely(PyList_CheckExact(__pyx_t_3))) {
          if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 157, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 157, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        } else {
          if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 157, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 157, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        }
      } else {
        __pyx_t_6 = __pyx_t_5(__pyx_t_3);
        if (unlikely(!__pyx_t_6)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 157, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_6);
      }
      __Pyx_XDECREF_SET(__pyx_v_other_line, __pyx_t_6);
      __pyx_t_6 = 0;
      __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 157, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 157, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = NULL;
      __pyx_t_9 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_7)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_7);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
          __pyx_t_9 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_line, __pyx_v_other_line};
        __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 157, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_line, __pyx_v_other_line};
        __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 157, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      {
        __pyx_t_10 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 157, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        if (__pyx_t_7) {
          __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_7); __pyx_t_7 = NULL;
        }
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_9, __pyx_v_line);
        __Pyx_INCREF(__pyx_v_other_line);
        __Pyx_GIVEREF(__pyx_v_other_line);
        PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_9, __pyx_v_other_line);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_10, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 157, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 157, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_2) {
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_other_line))) __PYX_ERR(0, 157, __pyx_L1_error)
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":156
 *     @staticmethod
 *     def lines_intersect_line(lines, line):
 *         if line.orientation=="h":             # <<<<<<<<<<<<<<
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 *         elif line.orientation=="v":
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":158
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 *         elif line.orientation=="v":             # <<<<<<<<<<<<<<
 *             return [other_line for other_line in lines if Utils.is_intersect(other_line, line)]
 *         else:
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 158, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":159
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 *         elif line.orientation=="v":
 *             return [other_line for other_line in lines if Utils.is_intersect(other_line, line)]             # <<<<<<<<<<<<<<
 *         else:
 *             return []
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 159, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
      __pyx_t_3 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
      __pyx_t_5 = NULL;
    } else {
      __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 159, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 159, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_5)) {
        if (likely(PyList_CheckExact(__pyx_t_3))) {
          if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 159, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 159, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        } else {
          if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_6); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 159, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 159, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        }
      } else {
        __pyx_t_6 = __pyx_t_5(__pyx_t_3);
        if (unlikely(!__pyx_t_6)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 159, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_6);
      }
      __Pyx_XDECREF_SET(__pyx_v_other_line, __pyx_t_6);
      __pyx_t_6 = 0;
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 159, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 159, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_9 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_10);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_10, function);
          __pyx_t_9 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_10)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_other_line, __pyx_v_line};
        __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 159, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_other_line, __pyx_v_line};
        __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 159, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      {
        __pyx_t_7 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 159, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_other_line);
        __Pyx_GIVEREF(__pyx_v_other_line);
        PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_9, __pyx_v_other_line);
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_9, __pyx_v_line);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_7, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 159, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      }
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 159, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_2) {
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_other_line))) __PYX_ERR(0, 159, __pyx_L1_error)
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":158
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 *         elif line.orientation=="v":             # <<<<<<<<<<<<<<
 *             return [other_line for other_line in lines if Utils.is_intersect(other_line, line)]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":161
 *             return [other_line for other_line in lines if Utils.is_intersect(other_line, line)]
 *         else:
 *             return []             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 161, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":155
 * 
 *     @staticmethod
 *     def lines_intersect_line(lines, line):             # <<<<<<<<<<<<<<
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_intersect_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_other_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":164
 * 
 *     @staticmethod
 *     def line_split_line(line, split_line):             # <<<<<<<<<<<<<<
 *         """ Split line by split_line
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_split_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_16line_split_line[] = " Split line by split_line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_split_line = {"line_split_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_split_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_16line_split_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_split_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_split_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_split_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_split_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_split_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_split_line", 1, 2, 2, 1); __PYX_ERR(0, 164, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_split_line") < 0)) __PYX_ERR(0, 164, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_line = values[0];
    __pyx_v_split_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_split_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 164, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_split_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_16line_split_line(__pyx_self, __pyx_v_line, __pyx_v_split_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_16line_split_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_split_line) {
  PyObject *__pyx_v_front_line = NULL;
  PyObject *__pyx_v_back_line = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *(*__pyx_t_7)(PyObject *);
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("line_split_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":167
 *         """ Split line by split_line
 *         """
 *         front_line = line.copy()             # <<<<<<<<<<<<<<
 *         back_line  = line.copy()
 *         if line.orientation=="h":
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 167, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 167, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_front_line = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":168
 *         """
 *         front_line = line.copy()
 *         back_line  = line.copy()             # <<<<<<<<<<<<<<
 *         if line.orientation=="h":
 *             if Utils.is_intersect(line, split_line):
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 168, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 168, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_back_line = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":169
 *         front_line = line.copy()
 *         back_line  = line.copy()
 *         if line.orientation=="h":             # <<<<<<<<<<<<<<
 *             if Utils.is_intersect(line, split_line):
 *                 x, y = Utils.line_intersection(line, split_line)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 169, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 169, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_4) {

    /* "table_extraction/utils_table_extraction.pyx":170
 *         back_line  = line.copy()
 *         if line.orientation=="h":
 *             if Utils.is_intersect(line, split_line):             # <<<<<<<<<<<<<<
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 170, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 170, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_line, __pyx_v_split_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 170, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_line, __pyx_v_split_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 170, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 170, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_line);
      __Pyx_INCREF(__pyx_v_split_line);
      __Pyx_GIVEREF(__pyx_v_split_line);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_split_line);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 170, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 170, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_4) {

      /* "table_extraction/utils_table_extraction.pyx":171
 *         if line.orientation=="h":
 *             if Utils.is_intersect(line, split_line):
 *                 x, y = Utils.line_intersection(line, split_line)             # <<<<<<<<<<<<<<
 *                 if not x:
 *                     return None
 */
      __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 171, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_line_intersection); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 171, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_3)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_3);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
          __pyx_t_5 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_line, __pyx_v_split_line};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_line, __pyx_v_split_line};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        if (__pyx_t_3) {
          __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
        }
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_5, __pyx_v_line);
        __Pyx_INCREF(__pyx_v_split_line);
        __Pyx_GIVEREF(__pyx_v_split_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_5, __pyx_v_split_line);
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
        PyObject* sequence = __pyx_t_1;
        Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
        if (unlikely(size != 2)) {
          if (size > 2) __Pyx_RaiseTooManyValuesError(2);
          else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
          __PYX_ERR(0, 171, __pyx_L1_error)
        }
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        if (likely(PyTuple_CheckExact(sequence))) {
          __pyx_t_6 = PyTuple_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
        } else {
          __pyx_t_6 = PyList_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
        }
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_2);
        #else
        __pyx_t_6 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else {
        Py_ssize_t index = -1;
        __pyx_t_3 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 171, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_7 = Py_TYPE(__pyx_t_3)->tp_iternext;
        index = 0; __pyx_t_6 = __pyx_t_7(__pyx_t_3); if (unlikely(!__pyx_t_6)) goto __pyx_L5_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_6);
        index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_3); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_2);
        if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_3), 2) < 0) __PYX_ERR(0, 171, __pyx_L1_error)
        __pyx_t_7 = NULL;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        goto __pyx_L6_unpacking_done;
        __pyx_L5_unpacking_failed:;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_7 = NULL;
        if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
        __PYX_ERR(0, 171, __pyx_L1_error)
        __pyx_L6_unpacking_done:;
      }
      __pyx_v_x = __pyx_t_6;
      __pyx_t_6 = 0;
      __pyx_v_y = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":172
 *             if Utils.is_intersect(line, split_line):
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 if line.start_point[0]==x or line.end_point[0]==x:
 */
      __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_x); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 172, __pyx_L1_error)
      __pyx_t_8 = ((!__pyx_t_4) != 0);
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":173
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 *                     return None             # <<<<<<<<<<<<<<
 *                 if line.start_point[0]==x or line.end_point[0]==x:
 *                     return None
 */
        __Pyx_XDECREF(__pyx_r);
        __pyx_r = Py_None; __Pyx_INCREF(Py_None);
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":172
 *             if Utils.is_intersect(line, split_line):
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 if line.start_point[0]==x or line.end_point[0]==x:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":174
 *                 if not x:
 *                     return None
 *                 if line.start_point[0]==x or line.end_point[0]==x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 front_line.end_point  = (x, front_line.end_point[1])
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_x, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_4) {
      } else {
        __pyx_t_8 = __pyx_t_4;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_x, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 174, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_8 = __pyx_t_4;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":175
 *                     return None
 *                 if line.start_point[0]==x or line.end_point[0]==x:
 *                     return None             # <<<<<<<<<<<<<<
 *                 front_line.end_point  = (x, front_line.end_point[1])
 *                 back_line.start_point = (x, back_line.start_point[1])
 */
        __Pyx_XDECREF(__pyx_r);
        __pyx_r = Py_None; __Pyx_INCREF(Py_None);
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":174
 *                 if not x:
 *                     return None
 *                 if line.start_point[0]==x or line.end_point[0]==x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 front_line.end_point  = (x, front_line.end_point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":176
 *                 if line.start_point[0]==x or line.end_point[0]==x:
 *                     return None
 *                 front_line.end_point  = (x, front_line.end_point[1])             # <<<<<<<<<<<<<<
 *                 back_line.start_point = (x, back_line.start_point[1])
 *                 return front_line, back_line
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_front_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 176, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 176, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 176, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_x);
      __Pyx_GIVEREF(__pyx_v_x);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_2);
      __pyx_t_2 = 0;
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_front_line, __pyx_n_s_end_point, __pyx_t_1) < 0) __PYX_ERR(0, 176, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":177
 *                     return None
 *                 front_line.end_point  = (x, front_line.end_point[1])
 *                 back_line.start_point = (x, back_line.start_point[1])             # <<<<<<<<<<<<<<
 *                 return front_line, back_line
 *             return None
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_back_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 177, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 177, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 177, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_x);
      __Pyx_GIVEREF(__pyx_v_x);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_2);
      __pyx_t_2 = 0;
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_back_line, __pyx_n_s_start_point, __pyx_t_1) < 0) __PYX_ERR(0, 177, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":178
 *                 front_line.end_point  = (x, front_line.end_point[1])
 *                 back_line.start_point = (x, back_line.start_point[1])
 *                 return front_line, back_line             # <<<<<<<<<<<<<<
 *             return None
 *         else:
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 178, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_front_line);
      __Pyx_GIVEREF(__pyx_v_front_line);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_front_line);
      __Pyx_INCREF(__pyx_v_back_line);
      __Pyx_GIVEREF(__pyx_v_back_line);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_back_line);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":170
 *         back_line  = line.copy()
 *         if line.orientation=="h":
 *             if Utils.is_intersect(line, split_line):             # <<<<<<<<<<<<<<
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":179
 *                 back_line.start_point = (x, back_line.start_point[1])
 *                 return front_line, back_line
 *             return None             # <<<<<<<<<<<<<<
 *         else:
 *             if Utils.is_intersect(split_line, line):
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":169
 *         front_line = line.copy()
 *         back_line  = line.copy()
 *         if line.orientation=="h":             # <<<<<<<<<<<<<<
 *             if Utils.is_intersect(line, split_line):
 *                 x, y = Utils.line_intersection(line, split_line)
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":181
 *             return None
 *         else:
 *             if Utils.is_intersect(split_line, line):             # <<<<<<<<<<<<<<
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 */
  /*else*/ {
    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 181, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 181, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_split_line, __pyx_v_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_split_line, __pyx_v_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 181, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_INCREF(__pyx_v_split_line);
      __Pyx_GIVEREF(__pyx_v_split_line);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_5, __pyx_v_split_line);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_5, __pyx_v_line);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 181, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_8) {

      /* "table_extraction/utils_table_extraction.pyx":182
 *         else:
 *             if Utils.is_intersect(split_line, line):
 *                 x, y = Utils.line_intersection(line, split_line)             # <<<<<<<<<<<<<<
 *                 if not x:
 *                     return None
 */
      __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 182, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_line_intersection); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 182, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
          __pyx_t_5 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_line, __pyx_v_split_line};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_line, __pyx_v_split_line};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_5, __pyx_v_line);
        __Pyx_INCREF(__pyx_v_split_line);
        __Pyx_GIVEREF(__pyx_v_split_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_5, __pyx_v_split_line);
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
        PyObject* sequence = __pyx_t_1;
        Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
        if (unlikely(size != 2)) {
          if (size > 2) __Pyx_RaiseTooManyValuesError(2);
          else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
          __PYX_ERR(0, 182, __pyx_L1_error)
        }
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        if (likely(PyTuple_CheckExact(sequence))) {
          __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
        } else {
          __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
          __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
        }
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_2);
        #else
        __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else {
        Py_ssize_t index = -1;
        __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 182, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_7 = Py_TYPE(__pyx_t_6)->tp_iternext;
        index = 0; __pyx_t_3 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_3)) goto __pyx_L12_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_3);
        index = 1; __pyx_t_2 = __pyx_t_7(__pyx_t_6); if (unlikely(!__pyx_t_2)) goto __pyx_L12_unpacking_failed;
        __Pyx_GOTREF(__pyx_t_2);
        if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 2) < 0) __PYX_ERR(0, 182, __pyx_L1_error)
        __pyx_t_7 = NULL;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        goto __pyx_L13_unpacking_done;
        __pyx_L12_unpacking_failed:;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __pyx_t_7 = NULL;
        if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
        __PYX_ERR(0, 182, __pyx_L1_error)
        __pyx_L13_unpacking_done:;
      }
      __pyx_v_x = __pyx_t_3;
      __pyx_t_3 = 0;
      __pyx_v_y = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":183
 *             if Utils.is_intersect(split_line, line):
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 if line.start_point[1]==y or line.end_point[1]==y:
 */
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_v_x); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 183, __pyx_L1_error)
      __pyx_t_4 = ((!__pyx_t_8) != 0);
      if (__pyx_t_4) {

        /* "table_extraction/utils_table_extraction.pyx":184
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 *                     return None             # <<<<<<<<<<<<<<
 *                 if line.start_point[1]==y or line.end_point[1]==y:
 *                     return None
 */
        __Pyx_XDECREF(__pyx_r);
        __pyx_r = Py_None; __Pyx_INCREF(Py_None);
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":183
 *             if Utils.is_intersect(split_line, line):
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:             # <<<<<<<<<<<<<<
 *                     return None
 *                 if line.start_point[1]==y or line.end_point[1]==y:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":185
 *                 if not x:
 *                     return None
 *                 if line.start_point[1]==y or line.end_point[1]==y:             # <<<<<<<<<<<<<<
 *                     return None
 *                 front_line.end_point  = (front_line.end_point[0], y)
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_y, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_8) {
      } else {
        __pyx_t_4 = __pyx_t_8;
        goto __pyx_L16_bool_binop_done;
      }
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_y, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 185, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_4 = __pyx_t_8;
      __pyx_L16_bool_binop_done:;
      if (__pyx_t_4) {

        /* "table_extraction/utils_table_extraction.pyx":186
 *                     return None
 *                 if line.start_point[1]==y or line.end_point[1]==y:
 *                     return None             # <<<<<<<<<<<<<<
 *                 front_line.end_point  = (front_line.end_point[0], y)
 *                 back_line.start_point = (back_line.start_point[0], y)
 */
        __Pyx_XDECREF(__pyx_r);
        __pyx_r = Py_None; __Pyx_INCREF(Py_None);
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":185
 *                 if not x:
 *                     return None
 *                 if line.start_point[1]==y or line.end_point[1]==y:             # <<<<<<<<<<<<<<
 *                     return None
 *                 front_line.end_point  = (front_line.end_point[0], y)
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":187
 *                 if line.start_point[1]==y or line.end_point[1]==y:
 *                     return None
 *                 front_line.end_point  = (front_line.end_point[0], y)             # <<<<<<<<<<<<<<
 *                 back_line.start_point = (back_line.start_point[0], y)
 *                 return front_line, back_line
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_front_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 187, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 187, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
      __Pyx_INCREF(__pyx_v_y);
      __Pyx_GIVEREF(__pyx_v_y);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y);
      __pyx_t_2 = 0;
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_front_line, __pyx_n_s_end_point, __pyx_t_1) < 0) __PYX_ERR(0, 187, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":188
 *                     return None
 *                 front_line.end_point  = (front_line.end_point[0], y)
 *                 back_line.start_point = (back_line.start_point[0], y)             # <<<<<<<<<<<<<<
 *                 return front_line, back_line
 *         return None
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_back_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 188, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 188, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
      __Pyx_INCREF(__pyx_v_y);
      __Pyx_GIVEREF(__pyx_v_y);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y);
      __pyx_t_2 = 0;
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_back_line, __pyx_n_s_start_point, __pyx_t_1) < 0) __PYX_ERR(0, 188, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":189
 *                 front_line.end_point  = (front_line.end_point[0], y)
 *                 back_line.start_point = (back_line.start_point[0], y)
 *                 return front_line, back_line             # <<<<<<<<<<<<<<
 *         return None
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_front_line);
      __Pyx_GIVEREF(__pyx_v_front_line);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_front_line);
      __Pyx_INCREF(__pyx_v_back_line);
      __Pyx_GIVEREF(__pyx_v_back_line);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_back_line);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":181
 *             return None
 *         else:
 *             if Utils.is_intersect(split_line, line):             # <<<<<<<<<<<<<<
 *                 x, y = Utils.line_intersection(line, split_line)
 *                 if not x:
 */
    }
  }

  /* "table_extraction/utils_table_extraction.pyx":190
 *                 back_line.start_point = (back_line.start_point[0], y)
 *                 return front_line, back_line
 *         return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":164
 * 
 *     @staticmethod
 *     def line_split_line(line, split_line):             # <<<<<<<<<<<<<<
 *         """ Split line by split_line
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_split_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_front_line);
  __Pyx_XDECREF(__pyx_v_back_line);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":193
 * 
 *     @staticmethod
 *     def duplicate_line_rects(a_line_rect, b_line_rect, orientation="horizontal", threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param a_line_rect: the bounding rectangle of a line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19duplicate_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_18duplicate_line_rects[] = "\n        :param a_line_rect: the bounding rectangle of a line\n        :param b_line_rect: the bounding rectangle of the line\n        :param orientation: the orientation of the line\n        :param threshold: if the distance between two lines is smaller than this parameter, these two lines are one line.\n        :return: Whether or not two lines are duplicated.\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19duplicate_line_rects = {"duplicate_line_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19duplicate_line_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_18duplicate_line_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19duplicate_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line_rect = 0;
  PyObject *__pyx_v_b_line_rect = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("duplicate_line_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line_rect,&__pyx_n_s_b_line_rect,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("duplicate_line_rects", 0, 2, 4, 1); __PYX_ERR(0, 193, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "duplicate_line_rects") < 0)) __PYX_ERR(0, 193, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line_rect = values[0];
    __pyx_v_b_line_rect = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("duplicate_line_rects", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 193, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.duplicate_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_18duplicate_line_rects(__pyx_self, __pyx_v_a_line_rect, __pyx_v_b_line_rect, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_18duplicate_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line_rect, PyObject *__pyx_v_b_line_rect, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_a_x = NULL;
  PyObject *__pyx_v_a_y = NULL;
  PyObject *__pyx_v_a_w = NULL;
  PyObject *__pyx_v_a_h = NULL;
  PyObject *__pyx_v_b_x = NULL;
  PyObject *__pyx_v_b_y = NULL;
  PyObject *__pyx_v_b_w = NULL;
  PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("duplicate_line_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":201
 *         :return: Whether or not two lines are duplicated.
 *         """
 *         a_x, a_y, a_w, a_h = a_line_rect             # <<<<<<<<<<<<<<
 *         b_x, b_y, b_w, b_h = b_line_rect
 *         if orientation == "horizontal":
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_line_rect))) || (PyList_CheckExact(__pyx_v_a_line_rect))) {
    PyObject* sequence = __pyx_v_a_line_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 201, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 201, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_line_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 201, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 201, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 201, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_a_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":202
 *         """
 *         a_x, a_y, a_w, a_h = a_line_rect
 *         b_x, b_y, b_w, b_h = b_line_rect             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal":
 *             return (a_x <= b_x or a_x - b_x <= threshold) and (b_x + b_w <= a_x + a_w or b_x + b_w - a_x - a_w <= threshold) and abs(b_y + b_h / 2 - a_y - a_h / 2) <= (a_h + b_h) / 2
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_line_rect))) || (PyList_CheckExact(__pyx_v_b_line_rect))) {
    PyObject* sequence = __pyx_v_b_line_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 202, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 202, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_line_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 202, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 202, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 202, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_y = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_h = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":203
 *         a_x, a_y, a_w, a_h = a_line_rect
 *         b_x, b_y, b_w, b_h = b_line_rect
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             return (a_x <= b_x or a_x - b_x <= threshold) and (b_x + b_w <= a_x + a_w or b_x + b_w - a_x - a_w <= threshold) and abs(b_y + b_h / 2 - a_y - a_h / 2) <= (a_h + b_h) / 2
 *         else:
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 203, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":204
 *         b_x, b_y, b_w, b_h = b_line_rect
 *         if orientation == "horizontal":
 *             return (a_x <= b_x or a_x - b_x <= threshold) and (b_x + b_w <= a_x + a_w or b_x + b_w - a_x - a_w <= threshold) and abs(b_y + b_h / 2 - a_y - a_h / 2) <= (a_h + b_h) / 2             # <<<<<<<<<<<<<<
 *         else:
 *             return (a_y <= b_y or a_y - b_y <= threshold) and (b_y + b_h <= a_y + a_h or b_y + b_h - a_y - a_h <= threshold) and abs(b_x + b_w / 2 - a_x - a_w / 2) <= (a_w + b_w) / 2
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_a_x, __pyx_v_b_x, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!__pyx_t_7) {
    } else {
      goto __pyx_L9_next_and;
    }
    __pyx_t_2 = PyNumber_Subtract(__pyx_v_a_x, __pyx_v_b_x); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 204, __pyx_L1_error)
    if (__pyx_t_7) {
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_1 = __pyx_t_3;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_L9_next_and:;
    __pyx_t_3 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PyNumber_Add(__pyx_v_a_x, __pyx_v_a_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (!__pyx_t_7) {
    } else {
      goto __pyx_L11_next_and;
    }
    __pyx_t_4 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_2 = PyNumber_Subtract(__pyx_t_4, __pyx_v_a_x); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Subtract(__pyx_t_2, __pyx_v_a_w); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 204, __pyx_L1_error)
    if (__pyx_t_7) {
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_2);
      __pyx_t_1 = __pyx_t_2;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_L11_next_and:;
    __pyx_t_2 = __Pyx_PyNumber_Divide(__pyx_v_b_h, __pyx_int_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = PyNumber_Add(__pyx_v_b_y, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Subtract(__pyx_t_4, __pyx_v_a_y); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_a_h, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Add(__pyx_v_a_h, __pyx_v_b_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_PyNumber_Divide(__pyx_t_3, __pyx_int_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 204, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_L8_bool_binop_done:;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":203
 *         a_x, a_y, a_w, a_h = a_line_rect
 *         b_x, b_y, b_w, b_h = b_line_rect
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             return (a_x <= b_x or a_x - b_x <= threshold) and (b_x + b_w <= a_x + a_w or b_x + b_w - a_x - a_w <= threshold) and abs(b_y + b_h / 2 - a_y - a_h / 2) <= (a_h + b_h) / 2
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":206
 *             return (a_x <= b_x or a_x - b_x <= threshold) and (b_x + b_w <= a_x + a_w or b_x + b_w - a_x - a_w <= threshold) and abs(b_y + b_h / 2 - a_y - a_h / 2) <= (a_h + b_h) / 2
 *         else:
 *             return (a_y <= b_y or a_y - b_y <= threshold) and (b_y + b_h <= a_y + a_h or b_y + b_h - a_y - a_h <= threshold) and abs(b_x + b_w / 2 - a_x - a_w / 2) <= (a_w + b_w) / 2             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_a_y, __pyx_v_b_y, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!__pyx_t_7) {
    } else {
      goto __pyx_L14_next_and;
    }
    __pyx_t_3 = PyNumber_Subtract(__pyx_v_a_y, __pyx_v_b_y); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 206, __pyx_L1_error)
    if (__pyx_t_7) {
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_2);
      __pyx_t_1 = __pyx_t_2;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L13_bool_binop_done;
    }
    __pyx_L14_next_and:;
    __pyx_t_2 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyNumber_Add(__pyx_v_a_y, __pyx_v_a_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (!__pyx_t_7) {
    } else {
      goto __pyx_L16_next_and;
    }
    __pyx_t_4 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_4, __pyx_v_a_y); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_v_a_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 206, __pyx_L1_error)
    if (__pyx_t_7) {
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_1 = __pyx_t_3;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L13_bool_binop_done;
    }
    __pyx_L16_next_and:;
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_v_b_w, __pyx_int_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyNumber_Add(__pyx_v_b_x, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_4, __pyx_v_a_x); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_a_w, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Add(__pyx_v_a_w, __pyx_v_b_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_2, __pyx_int_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_L13_bool_binop_done:;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":193
 * 
 *     @staticmethod
 *     def duplicate_line_rects(a_line_rect, b_line_rect, orientation="horizontal", threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param a_line_rect: the bounding rectangle of a line
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.duplicate_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":209
 * 
 *     @staticmethod
 *     def get_area_from_binary_image(rect, image):             # <<<<<<<<<<<<<<
 *         x, y, w, h = rect
 *         return image[y:y+h,x:x+w]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21get_area_from_binary_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21get_area_from_binary_image = {"get_area_from_binary_image", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21get_area_from_binary_image, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21get_area_from_binary_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_area_from_binary_image (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_image,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("get_area_from_binary_image", 1, 2, 2, 1); __PYX_ERR(0, 209, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_area_from_binary_image") < 0)) __PYX_ERR(0, 209, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_image = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_area_from_binary_image", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 209, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_area_from_binary_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_20get_area_from_binary_image(__pyx_self, __pyx_v_rect, __pyx_v_image);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_20get_area_from_binary_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  __Pyx_RefNannySetupContext("get_area_from_binary_image", 0);

  /* "table_extraction/utils_table_extraction.pyx":210
 *     @staticmethod
 *     def get_area_from_binary_image(rect, image):
 *         x, y, w, h = rect             # <<<<<<<<<<<<<<
 *         return image[y:y+h,x:x+w]
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
    PyObject* sequence = __pyx_v_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 210, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 210, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 210, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 210, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 210, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":211
 *     def get_area_from_binary_image(rect, image):
 *         x, y, w, h = rect
 *         return image[y:y+h,x:x+w]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PySlice_New(__pyx_v_y, __pyx_t_4, Py_None); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PySlice_New(__pyx_v_x, __pyx_t_4, Py_None); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_2);
  __pyx_t_3 = 0;
  __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetItem(__pyx_v_image, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":209
 * 
 *     @staticmethod
 *     def get_area_from_binary_image(rect, image):             # <<<<<<<<<<<<<<
 *         x, y, w, h = rect
 *         return image[y:y+h,x:x+w]
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_area_from_binary_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":214
 * 
 *     @staticmethod
 *     def remove_reverse_line_rects(line_rects, binary_image, orientation="v"):             # <<<<<<<<<<<<<<
 *         """
 *         remove noise line rects if reverse area
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_23remove_reverse_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22remove_reverse_line_rects[] = "\n        remove noise line rects if reverse area\n\n        :param line_rects:\n        :param binary_image: background is black\n        :param orientation: \"v\" or \"h\"\n        :return removed_rects:\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_23remove_reverse_line_rects = {"remove_reverse_line_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_23remove_reverse_line_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22remove_reverse_line_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_23remove_reverse_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line_rects = 0;
  PyObject *__pyx_v_binary_image = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_reverse_line_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line_rects,&__pyx_n_s_binary_image,&__pyx_n_s_orientation,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line_rects)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_binary_image)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_reverse_line_rects", 0, 2, 3, 1); __PYX_ERR(0, 214, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_reverse_line_rects") < 0)) __PYX_ERR(0, 214, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line_rects = values[0];
    __pyx_v_binary_image = values[1];
    __pyx_v_orientation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_reverse_line_rects", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 214, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_reverse_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22remove_reverse_line_rects(__pyx_self, __pyx_v_line_rects, __pyx_v_binary_image, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22remove_reverse_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line_rects, PyObject *__pyx_v_binary_image, PyObject *__pyx_v_orientation) {
  long __pyx_v_REVERSE_NOISE_SIZE;
  long __pyx_v_REVERSE_AREA_PERCENT;
  PyObject *__pyx_v_count = NULL;
  PyObject *__pyx_v_removed_line_rects = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_line_rect = NULL;
  PyObject *__pyx_v_size = NULL;
  PyObject *__pyx_v_part_area = NULL;
  PyObject *__pyx_v_max_white = NULL;
  PyObject *__pyx_v_area_white = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  __Pyx_RefNannySetupContext("remove_reverse_line_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":223
 *         :return removed_rects:
 *         """
 *         REVERSE_NOISE_SIZE   = 40             # <<<<<<<<<<<<<<
 *         REVERSE_AREA_PERCENT = 70
 *         count = 0
 */
  __pyx_v_REVERSE_NOISE_SIZE = 40;

  /* "table_extraction/utils_table_extraction.pyx":224
 *         """
 *         REVERSE_NOISE_SIZE   = 40
 *         REVERSE_AREA_PERCENT = 70             # <<<<<<<<<<<<<<
 *         count = 0
 *         removed_line_rects = line_rects.copy()
 */
  __pyx_v_REVERSE_AREA_PERCENT = 70;

  /* "table_extraction/utils_table_extraction.pyx":225
 *         REVERSE_NOISE_SIZE   = 40
 *         REVERSE_AREA_PERCENT = 70
 *         count = 0             # <<<<<<<<<<<<<<
 *         removed_line_rects = line_rects.copy()
 *         for i, line_rect in enumerate(line_rects):
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_count = __pyx_int_0;

  /* "table_extraction/utils_table_extraction.pyx":226
 *         REVERSE_AREA_PERCENT = 70
 *         count = 0
 *         removed_line_rects = line_rects.copy()             # <<<<<<<<<<<<<<
 *         for i, line_rect in enumerate(line_rects):
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line_rects, __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 226, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 226, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_removed_line_rects = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":227
 *         count = 0
 *         removed_line_rects = line_rects.copy()
 *         for i, line_rect in enumerate(line_rects):             # <<<<<<<<<<<<<<
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 *             if size>REVERSE_NOISE_SIZE:
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_1 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_line_rects)) || PyTuple_CheckExact(__pyx_v_line_rects)) {
    __pyx_t_2 = __pyx_v_line_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_line_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 227, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 227, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 227, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 227, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 227, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 227, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
      }
    } else {
      __pyx_t_3 = __pyx_t_5(__pyx_t_2);
      if (unlikely(!__pyx_t_3)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 227, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_3);
    }
    __Pyx_XDECREF_SET(__pyx_v_line_rect, __pyx_t_3);
    __pyx_t_3 = 0;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_3 = __Pyx_PyInt_AddObjC(__pyx_t_1, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 227, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1);
    __pyx_t_1 = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":228
 *         removed_line_rects = line_rects.copy()
 *         for i, line_rect in enumerate(line_rects):
 *             size = line_rect[2] if orientation=="h" else line_rect[3]             # <<<<<<<<<<<<<<
 *             if size>REVERSE_NOISE_SIZE:
 *                 continue
 */
    __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 228, __pyx_L1_error)
    if (__pyx_t_6) {
      __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_line_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 228, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_3 = __pyx_t_7;
      __pyx_t_7 = 0;
    } else {
      __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_line_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 228, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_3 = __pyx_t_7;
      __pyx_t_7 = 0;
    }
    __Pyx_XDECREF_SET(__pyx_v_size, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":229
 *         for i, line_rect in enumerate(line_rects):
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 *             if size>REVERSE_NOISE_SIZE:             # <<<<<<<<<<<<<<
 *                 continue
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)
 */
    __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_REVERSE_NOISE_SIZE); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 229, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = PyObject_RichCompare(__pyx_v_size, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 229, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 229, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":230
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 *             if size>REVERSE_NOISE_SIZE:
 *                 continue             # <<<<<<<<<<<<<<
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect
 */
      goto __pyx_L3_continue;

      /* "table_extraction/utils_table_extraction.pyx":229
 *         for i, line_rect in enumerate(line_rects):
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 *             if size>REVERSE_NOISE_SIZE:             # <<<<<<<<<<<<<<
 *                 continue
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":231
 *             if size>REVERSE_NOISE_SIZE:
 *                 continue
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)             # <<<<<<<<<<<<<<
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect
 *             area_white = np.sum(part_area)
 */
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_get_area_from_binary_image); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_9 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_8);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_8, function);
        __pyx_t_9 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_line_rect, __pyx_v_binary_image};
      __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 231, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_7);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_line_rect, __pyx_v_binary_image};
      __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 231, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_7);
    } else
    #endif
    {
      __pyx_t_10 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 231, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_INCREF(__pyx_v_line_rect);
      __Pyx_GIVEREF(__pyx_v_line_rect);
      PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_9, __pyx_v_line_rect);
      __Pyx_INCREF(__pyx_v_binary_image);
      __Pyx_GIVEREF(__pyx_v_binary_image);
      PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_9, __pyx_v_binary_image);
      __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_10, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 231, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    }
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_XDECREF_SET(__pyx_v_part_area, __pyx_t_7);
    __pyx_t_7 = 0;

    /* "table_extraction/utils_table_extraction.pyx":232
 *                 continue
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect             # <<<<<<<<<<<<<<
 *             area_white = np.sum(part_area)
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:
 */
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_line_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 232, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_line_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 232, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_10 = PyNumber_Multiply(__pyx_t_7, __pyx_t_8); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 232, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PyNumber_Multiply(__pyx_t_10, __pyx_int_255); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 232, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __Pyx_XDECREF_SET(__pyx_v_max_white, __pyx_t_8);
    __pyx_t_8 = 0;

    /* "table_extraction/utils_table_extraction.pyx":233
 *             part_area  = Utils.get_area_from_binary_image(line_rect, binary_image)
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect
 *             area_white = np.sum(part_area)             # <<<<<<<<<<<<<<
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:
 *                 removed_line_rects.pop(i-count)
 */
    __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_np); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 233, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_sum); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 233, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __pyx_t_10 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_10)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_10);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    __pyx_t_8 = (__pyx_t_10) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_10, __pyx_v_part_area) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_part_area);
    __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 233, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_XDECREF_SET(__pyx_v_area_white, __pyx_t_8);
    __pyx_t_8 = 0;

    /* "table_extraction/utils_table_extraction.pyx":234
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect
 *             area_white = np.sum(part_area)
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:             # <<<<<<<<<<<<<<
 *                 removed_line_rects.pop(i-count)
 *                 count += 1
 */
    __pyx_t_8 = __Pyx_PyNumber_Divide(__pyx_v_area_white, __pyx_v_max_white); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 234, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_7 = PyNumber_Multiply(__pyx_t_8, __pyx_int_100); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 234, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_PyInt_From_long(__pyx_v_REVERSE_AREA_PERCENT); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 234, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_10 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_GE); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 234, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 234, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":235
 *             area_white = np.sum(part_area)
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:
 *                 removed_line_rects.pop(i-count)             # <<<<<<<<<<<<<<
 *                 count += 1
 *         return removed_line_rects
 */
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_removed_line_rects, __pyx_n_s_pop); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 235, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_7 = PyNumber_Subtract(__pyx_v_i, __pyx_v_count); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 235, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_3 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_3)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_3);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
        }
      }
      __pyx_t_10 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_8, __pyx_t_3, __pyx_t_7) : __Pyx_PyObject_CallOneArg(__pyx_t_8, __pyx_t_7);
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 235, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":236
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:
 *                 removed_line_rects.pop(i-count)
 *                 count += 1             # <<<<<<<<<<<<<<
 *         return removed_line_rects
 * 
 */
      __pyx_t_10 = __Pyx_PyInt_AddObjC(__pyx_v_count, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 236, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF_SET(__pyx_v_count, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":234
 *             max_white  = line_rect[2]*line_rect[3]*255 # max number of white on line_rect
 *             area_white = np.sum(part_area)
 *             if area_white/max_white*100>=REVERSE_AREA_PERCENT:             # <<<<<<<<<<<<<<
 *                 removed_line_rects.pop(i-count)
 *                 count += 1
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":227
 *         count = 0
 *         removed_line_rects = line_rects.copy()
 *         for i, line_rect in enumerate(line_rects):             # <<<<<<<<<<<<<<
 *             size = line_rect[2] if orientation=="h" else line_rect[3]
 *             if size>REVERSE_NOISE_SIZE:
 */
    __pyx_L3_continue:;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":237
 *                 removed_line_rects.pop(i-count)
 *                 count += 1
 *         return removed_line_rects             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_removed_line_rects);
  __pyx_r = __pyx_v_removed_line_rects;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":214
 * 
 *     @staticmethod
 *     def remove_reverse_line_rects(line_rects, binary_image, orientation="v"):             # <<<<<<<<<<<<<<
 *         """
 *         remove noise line rects if reverse area
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_reverse_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_count);
  __Pyx_XDECREF(__pyx_v_removed_line_rects);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_line_rect);
  __Pyx_XDECREF(__pyx_v_size);
  __Pyx_XDECREF(__pyx_v_part_area);
  __Pyx_XDECREF(__pyx_v_max_white);
  __Pyx_XDECREF(__pyx_v_area_white);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":240
 * 
 *     @staticmethod
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """
 *         :param rects: the list bounding rectangle of lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_25remove_duplicate_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_24remove_duplicate_line_rects[] = "\n        :param rects: the list bounding rectangle of lines\n        :param orientation: the orientation of the list of lines.\n        :return: the list bounding rectangle of the lines without duplicated lines\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_25remove_duplicate_line_rects = {"remove_duplicate_line_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_25remove_duplicate_line_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_24remove_duplicate_line_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_25remove_duplicate_line_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_duplicate_line_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rects,&__pyx_n_s_orientation,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_duplicate_line_rects") < 0)) __PYX_ERR(0, 240, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_rects = values[0];
    __pyx_v_orientation = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_duplicate_line_rects", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 240, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_duplicate_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_24remove_duplicate_line_rects(__pyx_self, __pyx_v_rects, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":247
 *         """
 *         if orientation == "horizontal":
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)             # <<<<<<<<<<<<<<
 *         else:
 *             rects = sorted(rects, key=lambda rect: rect[3], reverse=True)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_lambda(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_lambda = {"lambda", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_lambda, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_lambda(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 247, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_duplicate_line_rects.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":249
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)
 *         else:
 *             rects = sorted(rects, key=lambda rect: rect[3], reverse=True)             # <<<<<<<<<<<<<<
 * 
 *         # list bounding rectangle of duplicated line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_1lambda1(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_1lambda1 = {"lambda1", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_1lambda1, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_1lambda1(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda1 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda1(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda1(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda1", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_duplicate_line_rects.lambda1", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":240
 * 
 *     @staticmethod
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """
 *         :param rects: the list bounding rectangle of lines
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_24remove_duplicate_line_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_duplicate_line_rects = NULL;
  PyObject *__pyx_v_rect_pair = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  int __pyx_t_13;
  __Pyx_RefNannySetupContext("remove_duplicate_line_rects", 0);
  __Pyx_INCREF(__pyx_v_rects);

  /* "table_extraction/utils_table_extraction.pyx":246
 *         :return: the list bounding rectangle of the lines without duplicated lines
 *         """
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)
 *         else:
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 246, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":247
 *         """
 *         if orientation == "horizontal":
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)             # <<<<<<<<<<<<<<
 *         else:
 *             rects = sorted(rects, key=lambda rect: rect[3], reverse=True)
 */
    __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 247, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_rects);
    __Pyx_GIVEREF(__pyx_v_rects);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_rects);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 247, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_lambda, 0, __pyx_n_s_Utils_remove_duplicate_line_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 247, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_4) < 0) __PYX_ERR(0, 247, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 247, __pyx_L1_error)
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 247, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_rects, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":246
 *         :return: the list bounding rectangle of the lines without duplicated lines
 *         """
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)
 *         else:
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":249
 *             rects = sorted(rects, key=lambda rect: rect[2], reverse=True)
 *         else:
 *             rects = sorted(rects, key=lambda rect: rect[3], reverse=True)             # <<<<<<<<<<<<<<
 * 
 *         # list bounding rectangle of duplicated line
 */
  /*else*/ {
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_rects);
    __Pyx_GIVEREF(__pyx_v_rects);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_rects);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27remove_duplicate_line_rects_1lambda1, 0, __pyx_n_s_Utils_remove_duplicate_line_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 249, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 249, __pyx_L1_error)
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_rects, __pyx_t_2);
    __pyx_t_2 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":252
 * 
 *         # list bounding rectangle of duplicated line
 *         duplicate_line_rects = []             # <<<<<<<<<<<<<<
 *         # check the line is duplicated or not
 *         for rect_pair in itertools.combinations(rects, r=2):
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 252, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_duplicate_line_rects = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":254
 *         duplicate_line_rects = []
 *         # check the line is duplicated or not
 *         for rect_pair in itertools.combinations(rects, r=2):             # <<<<<<<<<<<<<<
 *             if Utils.duplicate_line_rects(rect_pair[0], rect_pair[1], orientation):
 *                 duplicate_line_rects.append(rect_pair[1])
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_itertools); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_combinations); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_v_rects);
  __Pyx_GIVEREF(__pyx_v_rects);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_rects);
  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_r, __pyx_int_2) < 0) __PYX_ERR(0, 254, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
    __pyx_t_4 = __pyx_t_5; __Pyx_INCREF(__pyx_t_4); __pyx_t_6 = 0;
    __pyx_t_7 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 254, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 254, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_7)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 254, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 254, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 254, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 254, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_7(__pyx_t_4);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 254, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect_pair, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":255
 *         # check the line is duplicated or not
 *         for rect_pair in itertools.combinations(rects, r=2):
 *             if Utils.duplicate_line_rects(rect_pair[0], rect_pair[1], orientation):             # <<<<<<<<<<<<<<
 *                 duplicate_line_rects.append(rect_pair[1])
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 255, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_duplicate_line_rects); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 255, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect_pair, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 255, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect_pair, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 255, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_9 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[4] = {__pyx_t_9, __pyx_t_2, __pyx_t_8, __pyx_v_orientation};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 255, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[4] = {__pyx_t_9, __pyx_t_2, __pyx_t_8, __pyx_v_orientation};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 255, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_11 = PyTuple_New(3+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 255, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      if (__pyx_t_9) {
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_9); __pyx_t_9 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_t_2);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_orientation);
      __Pyx_GIVEREF(__pyx_v_orientation);
      PyTuple_SET_ITEM(__pyx_t_11, 2+__pyx_t_10, __pyx_v_orientation);
      __pyx_t_2 = 0;
      __pyx_t_8 = 0;
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_11, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 255, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 255, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_1) {

      /* "table_extraction/utils_table_extraction.pyx":256
 *         for rect_pair in itertools.combinations(rects, r=2):
 *             if Utils.duplicate_line_rects(rect_pair[0], rect_pair[1], orientation):
 *                 duplicate_line_rects.append(rect_pair[1])             # <<<<<<<<<<<<<<
 * 
 *         # remove duplicated line
 */
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect_pair, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 256, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_duplicate_line_rects, __pyx_t_5); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 256, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":255
 *         # check the line is duplicated or not
 *         for rect_pair in itertools.combinations(rects, r=2):
 *             if Utils.duplicate_line_rects(rect_pair[0], rect_pair[1], orientation):             # <<<<<<<<<<<<<<
 *                 duplicate_line_rects.append(rect_pair[1])
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":254
 *         duplicate_line_rects = []
 *         # check the line is duplicated or not
 *         for rect_pair in itertools.combinations(rects, r=2):             # <<<<<<<<<<<<<<
 *             if Utils.duplicate_line_rects(rect_pair[0], rect_pair[1], orientation):
 *                 duplicate_line_rects.append(rect_pair[1])
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":259
 * 
 *         # remove duplicated line
 *         for rect in duplicate_line_rects:             # <<<<<<<<<<<<<<
 *             if rect in rects:
 *                 rects.remove(rect)
 */
  __pyx_t_4 = __pyx_v_duplicate_line_rects; __Pyx_INCREF(__pyx_t_4); __pyx_t_6 = 0;
  for (;;) {
    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_4)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 259, __pyx_L1_error)
    #else
    __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 259, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":260
 *         # remove duplicated line
 *         for rect in duplicate_line_rects:
 *             if rect in rects:             # <<<<<<<<<<<<<<
 *                 rects.remove(rect)
 *         return rects
 */
    __pyx_t_1 = (__Pyx_PySequence_ContainsTF(__pyx_v_rect, __pyx_v_rects, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 260, __pyx_L1_error)
    __pyx_t_13 = (__pyx_t_1 != 0);
    if (__pyx_t_13) {

      /* "table_extraction/utils_table_extraction.pyx":261
 *         for rect in duplicate_line_rects:
 *             if rect in rects:
 *                 rects.remove(rect)             # <<<<<<<<<<<<<<
 *         return rects
 * 
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_rects, __pyx_n_s_remove); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 261, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_11 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_11)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      __pyx_t_5 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_11, __pyx_v_rect) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_rect);
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 261, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":260
 *         # remove duplicated line
 *         for rect in duplicate_line_rects:
 *             if rect in rects:             # <<<<<<<<<<<<<<
 *                 rects.remove(rect)
 *         return rects
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":259
 * 
 *         # remove duplicated line
 *         for rect in duplicate_line_rects:             # <<<<<<<<<<<<<<
 *             if rect in rects:
 *                 rects.remove(rect)
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":262
 *             if rect in rects:
 *                 rects.remove(rect)
 *         return rects             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_rects);
  __pyx_r = __pyx_v_rects;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":240
 * 
 *     @staticmethod
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """
 *         :param rects: the list bounding rectangle of lines
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_duplicate_line_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_duplicate_line_rects);
  __Pyx_XDECREF(__pyx_v_rect_pair);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":265
 * 
 *     @staticmethod
 *     def same_line(a_line, b_line):             # <<<<<<<<<<<<<<
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27same_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27same_line = {"same_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27same_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27same_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_line", 1, 2, 2, 1); __PYX_ERR(0, 265, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_line") < 0)) __PYX_ERR(0, 265, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 265, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_26same_line(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_26same_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("same_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":266
 *     @staticmethod
 *     def same_line(a_line, b_line):
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 266, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 266, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":265
 * 
 *     @staticmethod
 *     def same_line(a_line, b_line):             # <<<<<<<<<<<<<<
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":269
 * 
 *     @staticmethod
 *     def same_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_29same_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_29same_rect = {"same_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_29same_rect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_29same_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_rect", 1, 2, 2, 1); __PYX_ERR(0, 269, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_rect") < 0)) __PYX_ERR(0, 269, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 269, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_28same_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_28same_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("same_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":270
 *     @staticmethod
 *     def same_rect(a_rect, b_rect):
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 270, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 270, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 270, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":269
 * 
 *     @staticmethod
 *     def same_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":273
 * 
 *     @staticmethod
 *     def same_h_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_31same_h_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_31same_h_rect = {"same_h_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_31same_h_rect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_31same_h_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_thresh = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_h_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_thresh,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_h_rect", 0, 2, 3, 1); __PYX_ERR(0, 273, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thresh);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_h_rect") < 0)) __PYX_ERR(0, 273, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_thresh = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_h_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 273, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_h_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_30same_h_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_thresh);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_30same_h_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("same_h_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":274
 *     @staticmethod
 *     def same_h_rect(a_rect, b_rect, thresh=0):
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_v_thresh); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 274, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
    __Pyx_DECREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_v_thresh); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 274, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_4, __pyx_v_thresh); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 274, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 274, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = PyNumber_Add(__pyx_t_6, __pyx_v_thresh); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 274, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_1 = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":273
 * 
 *     @staticmethod
 *     def same_h_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_h_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":277
 * 
 *     @staticmethod
 *     def same_v_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_33same_v_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_33same_v_rect = {"same_v_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_33same_v_rect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_33same_v_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_thresh = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_v_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_thresh,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_v_rect", 0, 2, 3, 1); __PYX_ERR(0, 277, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thresh);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_v_rect") < 0)) __PYX_ERR(0, 277, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_thresh = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_v_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 277, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_v_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_32same_v_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_thresh);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_32same_v_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("same_v_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":278
 *     @staticmethod
 *     def same_v_rect(a_rect, b_rect, thresh=0):
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_v_thresh); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 278, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
    __Pyx_DECREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_v_thresh); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 278, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_4, __pyx_v_thresh); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 278, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 278, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = PyNumber_Add(__pyx_t_6, __pyx_v_thresh); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 278, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_1 = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":277
 * 
 *     @staticmethod
 *     def same_v_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_v_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":281
 * 
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_35same_position(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_35same_position = {"same_position", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_35same_position, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_35same_position(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_position (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_position", 0, 2, 3, 1); __PYX_ERR(0, 281, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_position") < 0)) __PYX_ERR(0, 281, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_position", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 281, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_position", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_34same_position(__pyx_self, __pyx_v_a_line, __pyx_v_b_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_34same_position(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("same_position", 0);

  /* "table_extraction/utils_table_extraction.pyx":282
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):
 *         if a_line.orientation == "h":             # <<<<<<<<<<<<<<
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 282, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":283
 *     def same_position(a_line, b_line, threshold=5):
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 *         else:
 */
    __Pyx_XDECREF(__pyx_r);

    /* "table_extraction/utils_table_extraction.pyx":284
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold             # <<<<<<<<<<<<<<
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);

    /* "table_extraction/utils_table_extraction.pyx":283
 *     def same_position(a_line, b_line, threshold=5):
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 *         else:
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_4, __pyx_t_6};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 283, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_t_4, __pyx_t_6};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 283, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 283, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_7) {
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_7); __pyx_t_7 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_t_6);
      __pyx_t_4 = 0;
      __pyx_t_6 = 0;
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_9, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 283, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 283, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 283, __pyx_L1_error)
    if (__pyx_t_2) {
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_5);
      __pyx_t_1 = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      goto __pyx_L4_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":284
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold             # <<<<<<<<<<<<<<
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_width_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_5 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_3, __pyx_v_a_line) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_v_a_line);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_width_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    __pyx_t_9 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_3, __pyx_v_b_line) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_b_line);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = PyNumber_Subtract(__pyx_t_5, __pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = __Pyx_PyNumber_Absolute(__pyx_t_6); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 284, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_1 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_L4_bool_binop_done:;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":282
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):
 *         if a_line.orientation == "h":             # <<<<<<<<<<<<<<
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":286
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                     and abs(Utils.height_line(a_line) - Utils.height_line(b_line)) <= threshold
 * 
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);

    /* "table_extraction/utils_table_extraction.pyx":287
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and abs(Utils.height_line(a_line) - Utils.height_line(b_line)) <= threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 286, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);

    /* "table_extraction/utils_table_extraction.pyx":286
 *                     and  abs(Utils.width_line(a_line) - Utils.width_line(b_line)) <= threshold
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                     and abs(Utils.height_line(a_line) - Utils.height_line(b_line)) <= threshold
 * 
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 286, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 286, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 286, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_9, __pyx_t_3};
      __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 286, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_9, __pyx_t_3};
      __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 286, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 286, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_9);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_8, __pyx_t_9);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_8, __pyx_t_3);
      __pyx_t_9 = 0;
      __pyx_t_3 = 0;
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_7, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 286, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_6, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 286, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 286, __pyx_L1_error)
    if (__pyx_t_2) {
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else {
      __Pyx_INCREF(__pyx_t_5);
      __pyx_t_1 = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":287
 *         else:
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 *                     and abs(Utils.height_line(a_line) - Utils.height_line(b_line)) <= threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_height_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    __pyx_t_5 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_6, __pyx_v_a_line) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_a_line);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_height_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_7 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_6, __pyx_v_b_line) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_b_line);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_5, __pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_7, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 287, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_L6_bool_binop_done:;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":281
 * 
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.same_position", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":290
 * 
 *     @staticmethod
 *     def merge_duplicate_lines(a_line, b_line):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 *         if a_line.orientation == "h":
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_37merge_duplicate_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_37merge_duplicate_lines = {"merge_duplicate_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_37merge_duplicate_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_37merge_duplicate_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_duplicate_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("merge_duplicate_lines", 1, 2, 2, 1); __PYX_ERR(0, 290, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "merge_duplicate_lines") < 0)) __PYX_ERR(0, 290, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("merge_duplicate_lines", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 290, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_duplicate_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_36merge_duplicate_lines(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_36merge_duplicate_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_v_Line = NULL;
  PyObject *__pyx_v_start_point = NULL;
  PyObject *__pyx_v_end_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("merge_duplicate_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":291
 *     @staticmethod
 *     def merge_duplicate_lines(a_line, b_line):
 *         from .table_processing import Line             # <<<<<<<<<<<<<<
 *         if a_line.orientation == "h":
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 291, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Line);
  __Pyx_GIVEREF(__pyx_n_s_Line);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Line);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_processing, __pyx_t_1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 291, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 291, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_Line = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":292
 *     def merge_duplicate_lines(a_line, b_line):
 *         from .table_processing import Line
 *         if a_line.orientation == "h":             # <<<<<<<<<<<<<<
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))
 *             end_point = (a_line.end_point[0], int((a_line.end_point[1] + b_line.end_point[1]) / 2))
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 292, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_t_2, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 292, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":293
 *         from .table_processing import Line
 *         if a_line.orientation == "h":
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))             # <<<<<<<<<<<<<<
 *             end_point = (a_line.end_point[0], int((a_line.end_point[1] + b_line.end_point[1]) / 2))
 *             return Line(start_point, end_point, 0, "h")
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Add(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyNumber_Divide(__pyx_t_2, __pyx_int_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyNumber_Int(__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_2);
    __pyx_t_1 = 0;
    __pyx_t_2 = 0;
    __pyx_v_start_point = ((PyObject*)__pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":294
 *         if a_line.orientation == "h":
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))
 *             end_point = (a_line.end_point[0], int((a_line.end_point[1] + b_line.end_point[1]) / 2))             # <<<<<<<<<<<<<<
 *             return Line(start_point, end_point, 0, "h")
 *         else:
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_5, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_v_end_point = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":295
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))
 *             end_point = (a_line.end_point[0], int((a_line.end_point[1] + b_line.end_point[1]) / 2))
 *             return Line(start_point, end_point, 0, "h")             # <<<<<<<<<<<<<<
 *         else:
 *             start_point = (int((a_line.start_point[0] + b_line.start_point[0]) / 2), a_line.start_point[1])
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_Line);
    __pyx_t_5 = __pyx_v_Line; __pyx_t_2 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_2, __pyx_v_start_point, __pyx_v_end_point, __pyx_int_0, __pyx_n_s_h};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 295, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_2, __pyx_v_start_point, __pyx_v_end_point, __pyx_int_0, __pyx_n_s_h};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 295, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_1 = PyTuple_New(4+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 295, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_INCREF(__pyx_v_start_point);
      __Pyx_GIVEREF(__pyx_v_start_point);
      PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_6, __pyx_v_start_point);
      __Pyx_INCREF(__pyx_v_end_point);
      __Pyx_GIVEREF(__pyx_v_end_point);
      PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_6, __pyx_v_end_point);
      __Pyx_INCREF(__pyx_int_0);
      __Pyx_GIVEREF(__pyx_int_0);
      PyTuple_SET_ITEM(__pyx_t_1, 2+__pyx_t_6, __pyx_int_0);
      __Pyx_INCREF(__pyx_n_s_h);
      __Pyx_GIVEREF(__pyx_n_s_h);
      PyTuple_SET_ITEM(__pyx_t_1, 3+__pyx_t_6, __pyx_n_s_h);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_1, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 295, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":292
 *     def merge_duplicate_lines(a_line, b_line):
 *         from .table_processing import Line
 *         if a_line.orientation == "h":             # <<<<<<<<<<<<<<
 *             start_point = (a_line.start_point[0], int((a_line.start_point[1] + b_line.start_point[1]) / 2))
 *             end_point = (a_line.end_point[0], int((a_line.end_point[1] + b_line.end_point[1]) / 2))
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":297
 *             return Line(start_point, end_point, 0, "h")
 *         else:
 *             start_point = (int((a_line.start_point[0] + b_line.start_point[0]) / 2), a_line.start_point[1])             # <<<<<<<<<<<<<<
 *             end_point = (int((a_line.end_point[0] + b_line.end_point[0]) / 2), a_line.end_point[1])
 *             return Line(start_point, end_point, 0, "v")
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Add(__pyx_t_5, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_v_start_point = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":298
 *         else:
 *             start_point = (int((a_line.start_point[0] + b_line.start_point[0]) / 2), a_line.start_point[1])
 *             end_point = (int((a_line.end_point[0] + b_line.end_point[0]) / 2), a_line.end_point[1])             # <<<<<<<<<<<<<<
 *             return Line(start_point, end_point, 0, "v")
 * 
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Add(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
    __pyx_t_1 = 0;
    __pyx_t_5 = 0;
    __pyx_v_end_point = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":299
 *             start_point = (int((a_line.start_point[0] + b_line.start_point[0]) / 2), a_line.start_point[1])
 *             end_point = (int((a_line.end_point[0] + b_line.end_point[0]) / 2), a_line.end_point[1])
 *             return Line(start_point, end_point, 0, "v")             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_Line);
    __pyx_t_5 = __pyx_v_Line; __pyx_t_1 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_v_start_point, __pyx_v_end_point, __pyx_int_0, __pyx_n_s_v};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 299, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_v_start_point, __pyx_v_end_point, __pyx_int_0, __pyx_n_s_v};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 299, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_2 = PyTuple_New(4+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 299, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      if (__pyx_t_1) {
        __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      __Pyx_INCREF(__pyx_v_start_point);
      __Pyx_GIVEREF(__pyx_v_start_point);
      PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_6, __pyx_v_start_point);
      __Pyx_INCREF(__pyx_v_end_point);
      __Pyx_GIVEREF(__pyx_v_end_point);
      PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_6, __pyx_v_end_point);
      __Pyx_INCREF(__pyx_int_0);
      __Pyx_GIVEREF(__pyx_int_0);
      PyTuple_SET_ITEM(__pyx_t_2, 2+__pyx_t_6, __pyx_int_0);
      __Pyx_INCREF(__pyx_n_s_v);
      __Pyx_GIVEREF(__pyx_n_s_v);
      PyTuple_SET_ITEM(__pyx_t_2, 3+__pyx_t_6, __pyx_n_s_v);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_2, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 299, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":290
 * 
 *     @staticmethod
 *     def merge_duplicate_lines(a_line, b_line):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 *         if a_line.orientation == "h":
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_duplicate_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_Line);
  __Pyx_XDECREF(__pyx_v_start_point);
  __Pyx_XDECREF(__pyx_v_end_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":302
 * 
 *     @staticmethod
 *     def distance_from_point_to_point(a_point, b_point):             # <<<<<<<<<<<<<<
 *         x1, y1 = a_point
 *         x2, y2 = b_point
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_39distance_from_point_to_point(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_39distance_from_point_to_point = {"distance_from_point_to_point", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_39distance_from_point_to_point, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_39distance_from_point_to_point(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_point = 0;
  PyObject *__pyx_v_b_point = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("distance_from_point_to_point (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_point,&__pyx_n_s_b_point,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_point)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_point_to_point", 1, 2, 2, 1); __PYX_ERR(0, 302, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "distance_from_point_to_point") < 0)) __PYX_ERR(0, 302, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_point = values[0];
    __pyx_v_b_point = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("distance_from_point_to_point", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 302, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_point_to_point", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_38distance_from_point_to_point(__pyx_self, __pyx_v_a_point, __pyx_v_b_point);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_38distance_from_point_to_point(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_point, PyObject *__pyx_v_b_point) {
  PyObject *__pyx_v_x1 = NULL;
  PyObject *__pyx_v_y1 = NULL;
  PyObject *__pyx_v_x2 = NULL;
  PyObject *__pyx_v_y2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("distance_from_point_to_point", 0);

  /* "table_extraction/utils_table_extraction.pyx":303
 *     @staticmethod
 *     def distance_from_point_to_point(a_point, b_point):
 *         x1, y1 = a_point             # <<<<<<<<<<<<<<
 *         x2, y2 = b_point
 *         return math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_point))) || (PyList_CheckExact(__pyx_v_a_point))) {
    PyObject* sequence = __pyx_v_a_point;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 303, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_1 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 303, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 303, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
  } else {
    Py_ssize_t index = -1;
    __pyx_t_3 = PyObject_GetIter(__pyx_v_a_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 303, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = Py_TYPE(__pyx_t_3)->tp_iternext;
    index = 0; __pyx_t_1 = __pyx_t_4(__pyx_t_3); if (unlikely(!__pyx_t_1)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_1);
    index = 1; __pyx_t_2 = __pyx_t_4(__pyx_t_3); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_4(__pyx_t_3), 2) < 0) __PYX_ERR(0, 303, __pyx_L1_error)
    __pyx_t_4 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 303, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x1 = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y1 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":304
 *     def distance_from_point_to_point(a_point, b_point):
 *         x1, y1 = a_point
 *         x2, y2 = b_point             # <<<<<<<<<<<<<<
 *         return math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_point))) || (PyList_CheckExact(__pyx_v_b_point))) {
    PyObject* sequence = __pyx_v_b_point;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 304, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 304, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 304, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    #endif
  } else {
    Py_ssize_t index = -1;
    __pyx_t_3 = PyObject_GetIter(__pyx_v_b_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 304, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = Py_TYPE(__pyx_t_3)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_4(__pyx_t_3); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_1 = __pyx_t_4(__pyx_t_3); if (unlikely(!__pyx_t_1)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_1);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_4(__pyx_t_3), 2) < 0) __PYX_ERR(0, 304, __pyx_L1_error)
    __pyx_t_4 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 304, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_x2 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_y2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":305
 *         x1, y1 = a_point
 *         x2, y2 = b_point
 *         return math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_math); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sqrt); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_5 = PyNumber_Power(__pyx_t_2, __pyx_int_2, Py_None); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyNumber_Power(__pyx_t_2, __pyx_int_2, Py_None); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Add(__pyx_t_5, __pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_6, __pyx_t_2) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_2);
  __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":302
 * 
 *     @staticmethod
 *     def distance_from_point_to_point(a_point, b_point):             # <<<<<<<<<<<<<<
 *         x1, y1 = a_point
 *         x2, y2 = b_point
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_point_to_point", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x1);
  __Pyx_XDECREF(__pyx_v_y1);
  __Pyx_XDECREF(__pyx_v_x2);
  __Pyx_XDECREF(__pyx_v_y2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":308
 * 
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         if Utils.is_intersect(h_line, v_line):
 *             return 0
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_41distance_from_line_to_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_41distance_from_line_to_line = {"distance_from_line_to_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_41distance_from_line_to_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_41distance_from_line_to_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("distance_from_line_to_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_v_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_line_to_line", 1, 2, 2, 1); __PYX_ERR(0, 308, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "distance_from_line_to_line") < 0)) __PYX_ERR(0, 308, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_h_line = values[0];
    __pyx_v_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("distance_from_line_to_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 308, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_line_to_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_40distance_from_line_to_line(__pyx_self, __pyx_v_h_line, __pyx_v_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_40distance_from_line_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line) {
  PyObject *__pyx_v_d11 = NULL;
  PyObject *__pyx_v_d12 = NULL;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_v_d21 = NULL;
  PyObject *__pyx_v_d22 = NULL;
  PyObject *__pyx_v_d2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("distance_from_line_to_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":309
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):
 *         if Utils.is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *             return 0
 *         else:
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_is_intersect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_h_line, __pyx_v_v_line};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 309, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_h_line, __pyx_v_v_line};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 309, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 309, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_h_line);
    __Pyx_GIVEREF(__pyx_v_h_line);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_h_line);
    __Pyx_INCREF(__pyx_v_v_line);
    __Pyx_GIVEREF(__pyx_v_v_line);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_v_line);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 309, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 309, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":310
 *     def distance_from_line_to_line(h_line, v_line):
 *         if Utils.is_intersect(h_line, v_line):
 *             return 0             # <<<<<<<<<<<<<<
 *         else:
 *             d11 = Utils.distance_from_point_to_line(h_line.start_point, v_line)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_int_0);
    __pyx_r = __pyx_int_0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":309
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):
 *         if Utils.is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *             return 0
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":312
 *             return 0
 *         else:
 *             d11 = Utils.distance_from_point_to_line(h_line.start_point, v_line)             # <<<<<<<<<<<<<<
 *             d12 = Utils.distance_from_point_to_line(h_line.end_point, v_line)
 *             d1 = min(d11, d12)
 */
  /*else*/ {
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 312, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_distance_from_point_to_line); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 312, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 312, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_3, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 312, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_3, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 312, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 312, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_4, __pyx_t_3);
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_4, __pyx_v_v_line);
      __pyx_t_3 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 312, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_d11 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":313
 *         else:
 *             d11 = Utils.distance_from_point_to_line(h_line.start_point, v_line)
 *             d12 = Utils.distance_from_point_to_line(h_line.end_point, v_line)             # <<<<<<<<<<<<<<
 *             d1 = min(d11, d12)
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 313, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_distance_from_point_to_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 313, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 313, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_5, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 313, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_5, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 313, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_2 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_4, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_4, __pyx_v_v_line);
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_v_d12 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":314
 *             d11 = Utils.distance_from_point_to_line(h_line.start_point, v_line)
 *             d12 = Utils.distance_from_point_to_line(h_line.end_point, v_line)
 *             d1 = min(d11, d12)             # <<<<<<<<<<<<<<
 * 
 *             d21 = Utils.distance_from_point_to_line(v_line.start_point, h_line)
 */
    __Pyx_INCREF(__pyx_v_d12);
    __pyx_t_1 = __pyx_v_d12;
    __Pyx_INCREF(__pyx_v_d11);
    __pyx_t_7 = __pyx_v_d11;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_7, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 314, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 314, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_2 = __pyx_t_1;
    } else {
      __Pyx_INCREF(__pyx_t_7);
      __pyx_t_2 = __pyx_t_7;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __pyx_t_2;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_d1 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":316
 *             d1 = min(d11, d12)
 * 
 *             d21 = Utils.distance_from_point_to_line(v_line.start_point, h_line)             # <<<<<<<<<<<<<<
 *             d22 = Utils.distance_from_point_to_line(v_line.end_point, h_line)
 *             d2 = min(d21, d22)
 */
    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 316, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_distance_from_point_to_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 316, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 316, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_2, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_2, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_4, __pyx_t_2);
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_4, __pyx_v_h_line);
      __pyx_t_2 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_v_d21 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":317
 * 
 *             d21 = Utils.distance_from_point_to_line(v_line.start_point, h_line)
 *             d22 = Utils.distance_from_point_to_line(v_line.end_point, h_line)             # <<<<<<<<<<<<<<
 *             d2 = min(d21, d22)
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 317, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_distance_from_point_to_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 317, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 317, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_2 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_7, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_7, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 317, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_7);
      PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_t_7);
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_h_line);
      __pyx_t_7 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_d22 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":318
 *             d21 = Utils.distance_from_point_to_line(v_line.start_point, h_line)
 *             d22 = Utils.distance_from_point_to_line(v_line.end_point, h_line)
 *             d2 = min(d21, d22)             # <<<<<<<<<<<<<<
 * 
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 */
    __Pyx_INCREF(__pyx_v_d22);
    __pyx_t_1 = __pyx_v_d22;
    __Pyx_INCREF(__pyx_v_d21);
    __pyx_t_3 = __pyx_v_d21;
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 318, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 318, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1;
    } else {
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_5 = __pyx_t_3;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __pyx_t_5;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_d2 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":320
 *             d2 = min(d21, d22)
 * 
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *                 return d1
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 320, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_horizontal_line_cut_vertical_lin); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 320, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_h_line, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 320, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_h_line, __pyx_v_v_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 320, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 320, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_4, __pyx_v_h_line);
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_4, __pyx_v_v_line);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 320, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 320, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":321
 * 
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 return d1             # <<<<<<<<<<<<<<
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 return d2
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_d1);
      __pyx_r = __pyx_v_d1;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":320
 *             d2 = min(d21, d22)
 * 
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *                 return d1
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":322
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 return d1
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *                 return d2
 *             else:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 322, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_vertical_line_cut_horiontal_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 322, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_4 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_4 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_v_line, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 322, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_v_line, __pyx_v_h_line};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 322, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 322, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_v_line);
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_h_line);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 322, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 322, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":323
 *                 return d1
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 return d2             # <<<<<<<<<<<<<<
 *             else:
 *                 return max(d1, d2)
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_d2);
      __pyx_r = __pyx_v_d2;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":322
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 return d1
 *             elif Utils.vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *                 return d2
 *             else:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":325
 *                 return d2
 *             else:
 *                 return max(d1, d2)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    /*else*/ {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_d2);
      __pyx_t_1 = __pyx_v_d2;
      __Pyx_INCREF(__pyx_v_d1);
      __pyx_t_7 = __pyx_v_d1;
      __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_7, Py_GT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 325, __pyx_L1_error)
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 325, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      if (__pyx_t_6) {
        __Pyx_INCREF(__pyx_t_1);
        __pyx_t_5 = __pyx_t_1;
      } else {
        __Pyx_INCREF(__pyx_t_7);
        __pyx_t_5 = __pyx_t_7;
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_INCREF(__pyx_t_5);
      __pyx_r = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      goto __pyx_L0;
    }
  }

  /* "table_extraction/utils_table_extraction.pyx":308
 * 
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         if Utils.is_intersect(h_line, v_line):
 *             return 0
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_line_to_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d11);
  __Pyx_XDECREF(__pyx_v_d12);
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XDECREF(__pyx_v_d21);
  __Pyx_XDECREF(__pyx_v_d22);
  __Pyx_XDECREF(__pyx_v_d2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":328
 * 
 *     @staticmethod
 *     def distance_from_point_to_line(point, line):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_43distance_from_point_to_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_43distance_from_point_to_line = {"distance_from_point_to_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_43distance_from_point_to_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_43distance_from_point_to_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("distance_from_point_to_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_point,&__pyx_n_s_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_point_to_line", 1, 2, 2, 1); __PYX_ERR(0, 328, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "distance_from_point_to_line") < 0)) __PYX_ERR(0, 328, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_point = values[0];
    __pyx_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("distance_from_point_to_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 328, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_point_to_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_42distance_from_point_to_line(__pyx_self, __pyx_v_point, __pyx_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_42distance_from_point_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line) {
  PyObject *__pyx_v_x1 = NULL;
  PyObject *__pyx_v_y1 = NULL;
  PyObject *__pyx_v_x2 = NULL;
  PyObject *__pyx_v_y2 = NULL;
  PyObject *__pyx_v_x0 = NULL;
  PyObject *__pyx_v_y0 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("distance_from_point_to_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":329
 *     @staticmethod
 *     def distance_from_point_to_line(point, line):
 *         x1, y1 = line.start_point             # <<<<<<<<<<<<<<
 *         x2, y2 = line.end_point
 *         x0, y0 = point
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 329, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 329, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 329, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 329, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x1 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_y1 = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":330
 *     def distance_from_point_to_line(point, line):
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point             # <<<<<<<<<<<<<<
 *         x0, y0 = point
 *         return abs((x2 - x1) * (y1 - y0) - (x1 - x0) * (y2 - y1)) / np.sqrt(np.square(x2 - x1) + np.square(y2 - y1))
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 330, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 330, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 330, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 330, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 330, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    index = 1; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 330, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 330, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_x2 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_y2 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":331
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 *         x0, y0 = point             # <<<<<<<<<<<<<<
 *         return abs((x2 - x1) * (y1 - y0) - (x1 - x0) * (y2 - y1)) / np.sqrt(np.square(x2 - x1) + np.square(y2 - y1))
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_point))) || (PyList_CheckExact(__pyx_v_point))) {
    PyObject* sequence = __pyx_v_point;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 331, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_1 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 331, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 331, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
  } else {
    Py_ssize_t index = -1;
    __pyx_t_3 = PyObject_GetIter(__pyx_v_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 331, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext;
    index = 0; __pyx_t_1 = __pyx_t_5(__pyx_t_3); if (unlikely(!__pyx_t_1)) goto __pyx_L7_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_1);
    index = 1; __pyx_t_2 = __pyx_t_5(__pyx_t_3); if (unlikely(!__pyx_t_2)) goto __pyx_L7_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_3), 2) < 0) __PYX_ERR(0, 331, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L8_unpacking_done;
    __pyx_L7_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 331, __pyx_L1_error)
    __pyx_L8_unpacking_done:;
  }
  __pyx_v_x0 = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y0 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":332
 *         x2, y2 = line.end_point
 *         x0, y0 = point
 *         return abs((x2 - x1) * (y1 - y0) - (x1 - x0) * (y2 - y1)) / np.sqrt(np.square(x2 - x1) + np.square(y2 - y1))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_y1, __pyx_v_y0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Multiply(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_x1, __pyx_v_x0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyNumber_Multiply(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_np); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_sqrt); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_np); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_square); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_8 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
    __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_7);
    if (likely(__pyx_t_8)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_8);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_7, function);
    }
  }
  __pyx_t_3 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_8, __pyx_t_6) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_np); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_square); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_9 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
    __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
    if (likely(__pyx_t_9)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
      __Pyx_INCREF(__pyx_t_9);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_8, function);
    }
  }
  __pyx_t_7 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_8, __pyx_t_9, __pyx_t_6) : __Pyx_PyObject_CallOneArg(__pyx_t_8, __pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = PyNumber_Add(__pyx_t_3, __pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_7, __pyx_t_8) : __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_8);
  __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":328
 * 
 *     @staticmethod
 *     def distance_from_point_to_line(point, line):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_point_to_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x1);
  __Pyx_XDECREF(__pyx_v_y1);
  __Pyx_XDECREF(__pyx_v_x2);
  __Pyx_XDECREF(__pyx_v_y2);
  __Pyx_XDECREF(__pyx_v_x0);
  __Pyx_XDECREF(__pyx_v_y0);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":335
 * 
 *     @staticmethod
 *     def distance_from_line_to_box(box, line, direction):             # <<<<<<<<<<<<<<
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_45distance_from_line_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_45distance_from_line_to_box = {"distance_from_line_to_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_45distance_from_line_to_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_45distance_from_line_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_direction = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("distance_from_line_to_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_line,&__pyx_n_s_direction,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_line_to_box", 1, 3, 3, 1); __PYX_ERR(0, 335, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_direction)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_line_to_box", 1, 3, 3, 2); __PYX_ERR(0, 335, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "distance_from_line_to_box") < 0)) __PYX_ERR(0, 335, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_box = values[0];
    __pyx_v_line = values[1];
    __pyx_v_direction = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("distance_from_line_to_box", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 335, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_line_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_44distance_from_line_to_box(__pyx_self, __pyx_v_box, __pyx_v_line, __pyx_v_direction);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_44distance_from_line_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_direction) {
  PyObject *__pyx_v_distance = NULL;
  PyObject *__pyx_v_box_x = NULL;
  PyObject *__pyx_v_box_y = NULL;
  PyObject *__pyx_v_box_w = NULL;
  PyObject *__pyx_v_box_h = NULL;
  PyObject *__pyx_v_position = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("distance_from_line_to_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":336
 *     @staticmethod
 *     def distance_from_line_to_box(box, line, direction):
 *         distance = 1000             # <<<<<<<<<<<<<<
 *         box_x, box_y, box_w, box_h = box
 *         if line.orientation == "h":
 */
  __Pyx_INCREF(__pyx_int_1000);
  __pyx_v_distance = __pyx_int_1000;

  /* "table_extraction/utils_table_extraction.pyx":337
 *     def distance_from_line_to_box(box, line, direction):
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box             # <<<<<<<<<<<<<<
 *         if line.orientation == "h":
 *             position = line.start_point[1]
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 337, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 337, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 337, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 337, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 337, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_box_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_box_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_box_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_box_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":338
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 *         if line.orientation == "h":             # <<<<<<<<<<<<<<
 *             position = line.start_point[1]
 *         else:
 */
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 338, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_t_4, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 338, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":339
 *         box_x, box_y, box_w, box_h = box
 *         if line.orientation == "h":
 *             position = line.start_point[1]             # <<<<<<<<<<<<<<
 *         else:
 *             position = line.start_point[0]
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 339, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 339, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_position = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":338
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 *         if line.orientation == "h":             # <<<<<<<<<<<<<<
 *             position = line.start_point[1]
 *         else:
 */
    goto __pyx_L5;
  }

  /* "table_extraction/utils_table_extraction.pyx":341
 *             position = line.start_point[1]
 *         else:
 *             position = line.start_point[0]             # <<<<<<<<<<<<<<
 * 
 *         if direction == "left":
 */
  /*else*/ {
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_position = __pyx_t_4;
    __pyx_t_4 = 0;
  }
  __pyx_L5:;

  /* "table_extraction/utils_table_extraction.pyx":343
 *             position = line.start_point[0]
 * 
 *         if direction == "left":             # <<<<<<<<<<<<<<
 *             distance = position - box_x
 *         elif direction == "top":
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_left, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 343, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":344
 * 
 *         if direction == "left":
 *             distance = position - box_x             # <<<<<<<<<<<<<<
 *         elif direction == "top":
 *             distance = position - box_y
 */
    __pyx_t_4 = PyNumber_Subtract(__pyx_v_position, __pyx_v_box_x); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 344, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF_SET(__pyx_v_distance, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":343
 *             position = line.start_point[0]
 * 
 *         if direction == "left":             # <<<<<<<<<<<<<<
 *             distance = position - box_x
 *         elif direction == "top":
 */
    goto __pyx_L6;
  }

  /* "table_extraction/utils_table_extraction.pyx":345
 *         if direction == "left":
 *             distance = position - box_x
 *         elif direction == "top":             # <<<<<<<<<<<<<<
 *             distance = position - box_y
 *         elif direction == "right":
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_top, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 345, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":346
 *             distance = position - box_x
 *         elif direction == "top":
 *             distance = position - box_y             # <<<<<<<<<<<<<<
 *         elif direction == "right":
 *             distance = box_x + box_w - position
 */
    __pyx_t_4 = PyNumber_Subtract(__pyx_v_position, __pyx_v_box_y); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 346, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF_SET(__pyx_v_distance, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":345
 *         if direction == "left":
 *             distance = position - box_x
 *         elif direction == "top":             # <<<<<<<<<<<<<<
 *             distance = position - box_y
 *         elif direction == "right":
 */
    goto __pyx_L6;
  }

  /* "table_extraction/utils_table_extraction.pyx":347
 *         elif direction == "top":
 *             distance = position - box_y
 *         elif direction == "right":             # <<<<<<<<<<<<<<
 *             distance = box_x + box_w - position
 *         elif direction == "bottom":
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_right, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 347, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":348
 *             distance = position - box_y
 *         elif direction == "right":
 *             distance = box_x + box_w - position             # <<<<<<<<<<<<<<
 *         elif direction == "bottom":
 *             distance = box_y + box_h - position
 */
    __pyx_t_4 = PyNumber_Add(__pyx_v_box_x, __pyx_v_box_w); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 348, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_4, __pyx_v_position); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 348, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_distance, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":347
 *         elif direction == "top":
 *             distance = position - box_y
 *         elif direction == "right":             # <<<<<<<<<<<<<<
 *             distance = box_x + box_w - position
 *         elif direction == "bottom":
 */
    goto __pyx_L6;
  }

  /* "table_extraction/utils_table_extraction.pyx":349
 *         elif direction == "right":
 *             distance = box_x + box_w - position
 *         elif direction == "bottom":             # <<<<<<<<<<<<<<
 *             distance = box_y + box_h - position
 * 
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_bottom, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 349, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":350
 *             distance = box_x + box_w - position
 *         elif direction == "bottom":
 *             distance = box_y + box_h - position             # <<<<<<<<<<<<<<
 * 
 *         return abs(distance)
 */
    __pyx_t_3 = PyNumber_Add(__pyx_v_box_y, __pyx_v_box_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 350, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_v_position); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 350, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_distance, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":349
 *         elif direction == "right":
 *             distance = box_x + box_w - position
 *         elif direction == "bottom":             # <<<<<<<<<<<<<<
 *             distance = box_y + box_h - position
 * 
 */
  }
  __pyx_L6:;

  /* "table_extraction/utils_table_extraction.pyx":352
 *             distance = box_y + box_h - position
 * 
 *         return abs(distance)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_v_distance); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 352, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":335
 * 
 *     @staticmethod
 *     def distance_from_line_to_box(box, line, direction):             # <<<<<<<<<<<<<<
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_line_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_distance);
  __Pyx_XDECREF(__pyx_v_box_x);
  __Pyx_XDECREF(__pyx_v_box_y);
  __Pyx_XDECREF(__pyx_v_box_w);
  __Pyx_XDECREF(__pyx_v_box_h);
  __Pyx_XDECREF(__pyx_v_position);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":355
 * 
 *     @staticmethod
 *     def distance_from_box_to_box(src_box, dst_box):             # <<<<<<<<<<<<<<
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_47distance_from_box_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_47distance_from_box_to_box = {"distance_from_box_to_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_47distance_from_box_to_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_47distance_from_box_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_src_box = 0;
  PyObject *__pyx_v_dst_box = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("distance_from_box_to_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_src_box,&__pyx_n_s_dst_box,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_src_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_dst_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("distance_from_box_to_box", 1, 2, 2, 1); __PYX_ERR(0, 355, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "distance_from_box_to_box") < 0)) __PYX_ERR(0, 355, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_src_box = values[0];
    __pyx_v_dst_box = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("distance_from_box_to_box", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 355, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_box_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_46distance_from_box_to_box(__pyx_self, __pyx_v_src_box, __pyx_v_dst_box);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_46distance_from_box_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_box, PyObject *__pyx_v_dst_box) {
  PyObject *__pyx_v_c1 = NULL;
  PyObject *__pyx_v_c2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("distance_from_box_to_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":356
 *     @staticmethod
 *     def distance_from_box_to_box(src_box, dst_box):
 *          c1 = Utils.calc_centroid(src_box)             # <<<<<<<<<<<<<<
 *          c2 = Utils.calc_centroid(dst_box)
 *          return Utils.distance_from_point_to_point(c1, c2)
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_calc_centroid); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_2) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_2, __pyx_v_src_box) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_src_box);
  __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_c1 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":357
 *     def distance_from_box_to_box(src_box, dst_box):
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)             # <<<<<<<<<<<<<<
 *          return Utils.distance_from_point_to_point(c1, c2)
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_calc_centroid); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_3, __pyx_v_dst_box) : __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v_dst_box);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_c2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":358
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)
 *          return Utils.distance_from_point_to_point(c1, c2)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 358, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 358, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_c1, __pyx_v_c2};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 358, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_c1, __pyx_v_c2};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 358, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 358, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_c1);
    __Pyx_GIVEREF(__pyx_v_c1);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_c1);
    __Pyx_INCREF(__pyx_v_c2);
    __Pyx_GIVEREF(__pyx_v_c2);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_c2);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 358, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":355
 * 
 *     @staticmethod
 *     def distance_from_box_to_box(src_box, dst_box):             # <<<<<<<<<<<<<<
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.distance_from_box_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_c1);
  __Pyx_XDECREF(__pyx_v_c2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":361
 * 
 *     @staticmethod
 *     def is_box_far_box(src_box, dst_box, times=1):             # <<<<<<<<<<<<<<
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_49is_box_far_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_49is_box_far_box = {"is_box_far_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_49is_box_far_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_49is_box_far_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_src_box = 0;
  PyObject *__pyx_v_dst_box = 0;
  PyObject *__pyx_v_times = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_box_far_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_src_box,&__pyx_n_s_dst_box,&__pyx_n_s_times,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_src_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_dst_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_box_far_box", 0, 2, 3, 1); __PYX_ERR(0, 361, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_times);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_box_far_box") < 0)) __PYX_ERR(0, 361, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_src_box = values[0];
    __pyx_v_dst_box = values[1];
    __pyx_v_times = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_box_far_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 361, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_box_far_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_48is_box_far_box(__pyx_self, __pyx_v_src_box, __pyx_v_dst_box, __pyx_v_times);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_48is_box_far_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_box, PyObject *__pyx_v_dst_box, PyObject *__pyx_v_times) {
  PyObject *__pyx_v_distance = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("is_box_far_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":362
 *     @staticmethod
 *     def is_box_far_box(src_box, dst_box, times=1):
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)             # <<<<<<<<<<<<<<
 *         if src_box[2]*times<distance:
 *             return True
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 362, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_distance_from_box_to_box); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 362, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_src_box, __pyx_v_dst_box};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_src_box, __pyx_v_dst_box};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_src_box);
    __Pyx_GIVEREF(__pyx_v_src_box);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_src_box);
    __Pyx_INCREF(__pyx_v_dst_box);
    __Pyx_GIVEREF(__pyx_v_dst_box);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_dst_box);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_distance = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":363
 *     def is_box_far_box(src_box, dst_box, times=1):
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_src_box, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 363, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Multiply(__pyx_t_1, __pyx_v_times); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 363, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_distance, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 363, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 363, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":364
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:
 *             return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":363
 *     def is_box_far_box(src_box, dst_box, times=1):
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":365
 *         if src_box[2]*times<distance:
 *             return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":361
 * 
 *     @staticmethod
 *     def is_box_far_box(src_box, dst_box, times=1):             # <<<<<<<<<<<<<<
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_box_far_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_distance);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":368
 * 
 *     @staticmethod
 *     def calc_centroid(box):             # <<<<<<<<<<<<<<
 *         x, y, w, h = box
 *         return x+w/2, y+h/2
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_51calc_centroid(PyObject *__pyx_self, PyObject *__pyx_v_box); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_51calc_centroid = {"calc_centroid", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_51calc_centroid, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_51calc_centroid(PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("calc_centroid (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_50calc_centroid(__pyx_self, ((PyObject *)__pyx_v_box));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_50calc_centroid(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  __Pyx_RefNannySetupContext("calc_centroid", 0);

  /* "table_extraction/utils_table_extraction.pyx":369
 *     @staticmethod
 *     def calc_centroid(box):
 *         x, y, w, h = box             # <<<<<<<<<<<<<<
 *         return x+w/2, y+h/2
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 369, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 369, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 369, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 369, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 369, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":370
 *     def calc_centroid(box):
 *         x, y, w, h = box
 *         return x+w/2, y+h/2             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_w, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyNumber_Add(__pyx_v_x, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_h, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PyNumber_Add(__pyx_v_y, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_2);
  __pyx_t_3 = 0;
  __pyx_t_2 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":368
 * 
 *     @staticmethod
 *     def calc_centroid(box):             # <<<<<<<<<<<<<<
 *         x, y, w, h = box
 *         return x+w/2, y+h/2
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.calc_centroid", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":373
 * 
 *     @staticmethod
 *     def split_lines(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines: the list of the lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_53split_lines(PyObject *__pyx_self, PyObject *__pyx_v_lines); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_52split_lines[] = "\n        :param lines: the list of the lines\n        :return: divide those line into 2 list: horizontal lines and vertical lines\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_53split_lines = {"split_lines", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_53split_lines, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_52split_lines};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_53split_lines(PyObject *__pyx_self, PyObject *__pyx_v_lines) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("split_lines (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_52split_lines(__pyx_self, ((PyObject *)__pyx_v_lines));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_52split_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines) {
  PyObject *__pyx_v_h_lines = NULL;
  PyObject *__pyx_v_v_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("split_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":378
 *         :return: divide those line into 2 list: horizontal lines and vertical lines
 *         """
 *         h_lines = [line for line in lines if line.orientation == "h"]             # <<<<<<<<<<<<<<
 *         v_lines = [line for line in lines if line.orientation == "v"]
 *         return h_lines, v_lines
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_2 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 378, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 378, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 378, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 378, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 378, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 378, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 378, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 378, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_t_5, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 378, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 378, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_h_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":379
 *         """
 *         h_lines = [line for line in lines if line.orientation == "h"]
 *         v_lines = [line for line in lines if line.orientation == "v"]             # <<<<<<<<<<<<<<
 *         return h_lines, v_lines
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 379, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_2 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 379, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 379, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 379, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 379, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_t_5, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 379, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 379, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_v_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":380
 *         h_lines = [line for line in lines if line.orientation == "h"]
 *         v_lines = [line for line in lines if line.orientation == "v"]
 *         return h_lines, v_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 380, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_GIVEREF(__pyx_v_h_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);
  __Pyx_GIVEREF(__pyx_v_v_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_v_lines);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":373
 * 
 *     @staticmethod
 *     def split_lines(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines: the list of the lines
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.split_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":383
 * 
 *     @staticmethod
 *     def merge_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_55merge_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_55merge_lines = {"merge_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_55merge_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_55merge_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,&__pyx_n_s_orientation,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("merge_lines", 0, 2, 3, 1); __PYX_ERR(0, 383, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "merge_lines") < 0)) __PYX_ERR(0, 383, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
    __pyx_v_orientation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("merge_lines", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 383, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_54merge_lines(__pyx_self, __pyx_v_a_line, __pyx_v_b_line, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_54merge_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_Line = NULL;
  PyObject *__pyx_v_start_x = NULL;
  PyObject *__pyx_v_end_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_width = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_start_y = NULL;
  PyObject *__pyx_v_end_y = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("merge_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":384
 *     @staticmethod
 *     def merge_lines(a_line, b_line, orientation="horizontal"):
 *         from table_extraction.line import Line             # <<<<<<<<<<<<<<
 * 
 *         if orientation == "horizontal":
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Line);
  __Pyx_GIVEREF(__pyx_n_s_Line);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Line);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_extraction_line, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_Line = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":386
 *         from table_extraction.line import Line
 * 
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             start_x = a_line.start_point[0] if a_line.start_point[0] < b_line.start_point[0] else b_line.start_point[0]
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 386, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":387
 * 
 *         if orientation == "horizontal":
 *             start_x = a_line.start_point[0] if a_line.start_point[0] < b_line.start_point[0] else b_line.start_point[0]             # <<<<<<<<<<<<<<
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]
 *             y = int((a_line.start_point[1] + b_line.start_point[1]) / 2)
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 387, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_2 = __pyx_t_5;
      __pyx_t_5 = 0;
    } else {
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_2 = __pyx_t_1;
      __pyx_t_1 = 0;
    }
    __pyx_v_start_x = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":388
 *         if orientation == "horizontal":
 *             start_x = a_line.start_point[0] if a_line.start_point[0] < b_line.start_point[0] else b_line.start_point[0]
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]             # <<<<<<<<<<<<<<
 *             y = int((a_line.start_point[1] + b_line.start_point[1]) / 2)
 *             width = int((a_line.width + b_line.width) / 2)
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_5, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 388, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_3) {
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_2 = __pyx_t_4;
      __pyx_t_4 = 0;
    } else {
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_2 = __pyx_t_1;
      __pyx_t_1 = 0;
    }
    __pyx_v_end_x = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":389
 *             start_x = a_line.start_point[0] if a_line.start_point[0] < b_line.start_point[0] else b_line.start_point[0]
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]
 *             y = int((a_line.start_point[1] + b_line.start_point[1]) / 2)             # <<<<<<<<<<<<<<
 *             width = int((a_line.width + b_line.width) / 2)
 * 
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_2, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_y = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":390
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]
 *             y = int((a_line.start_point[1] + b_line.start_point[1]) / 2)
 *             width = int((a_line.width + b_line.width) / 2)             # <<<<<<<<<<<<<<
 * 
 *             line = Line((start_x, y), (end_x, y), width, orientation)
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_width); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_width); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = PyNumber_Add(__pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_width = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":392
 *             width = int((a_line.width + b_line.width) / 2)
 * 
 *             line = Line((start_x, y), (end_x, y), width, orientation)             # <<<<<<<<<<<<<<
 * 
 *         else:
 */
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_start_x);
    __Pyx_GIVEREF(__pyx_v_start_x);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_start_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_y);
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_end_x);
    __Pyx_GIVEREF(__pyx_v_end_x);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_end_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_y);
    __Pyx_INCREF(__pyx_v_Line);
    __pyx_t_5 = __pyx_v_Line; __pyx_t_6 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_2, __pyx_v_width, __pyx_v_orientation};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_2, __pyx_v_width, __pyx_v_orientation};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_2);
      __Pyx_INCREF(__pyx_v_width);
      __Pyx_GIVEREF(__pyx_v_width);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_width);
      __Pyx_INCREF(__pyx_v_orientation);
      __Pyx_GIVEREF(__pyx_v_orientation);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_orientation);
      __pyx_t_4 = 0;
      __pyx_t_2 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_line = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":386
 *         from table_extraction.line import Line
 * 
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             start_x = a_line.start_point[0] if a_line.start_point[0] < b_line.start_point[0] else b_line.start_point[0]
 *             end_x = b_line.end_point[0] if a_line.end_point[0] < b_line.end_point[0] else a_line.end_point[0]
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":395
 * 
 *         else:
 *             start_y = a_line.start_point[1] if a_line.start_point[1] < b_line.start_point[1] else b_line.start_point[1]             # <<<<<<<<<<<<<<
 *             end_y = b_line.end_point[1] if a_line.end_point[1] < b_line.end_point[1] else a_line.end_point[1]
 *             x = int((a_line.start_point[0] + b_line.start_point[0]) / 2)
 */
  /*else*/ {
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_8, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 395, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_3) {
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 395, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 395, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_1 = __pyx_t_2;
      __pyx_t_2 = 0;
    } else {
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 395, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 395, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_1 = __pyx_t_5;
      __pyx_t_5 = 0;
    }
    __pyx_v_start_y = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":396
 *         else:
 *             start_y = a_line.start_point[1] if a_line.start_point[1] < b_line.start_point[1] else b_line.start_point[1]
 *             end_y = b_line.end_point[1] if a_line.end_point[1] < b_line.end_point[1] else a_line.end_point[1]             # <<<<<<<<<<<<<<
 *             x = int((a_line.start_point[0] + b_line.start_point[0]) / 2)
 *             width = int((a_line.width + b_line.width) / 2)
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_2, __pyx_t_8, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 396, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_3) {
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 396, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_1 = __pyx_t_8;
      __pyx_t_8 = 0;
    } else {
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 396, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_8, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 396, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_1 = __pyx_t_5;
      __pyx_t_5 = 0;
    }
    __pyx_v_end_y = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":397
 *             start_y = a_line.start_point[1] if a_line.start_point[1] < b_line.start_point[1] else b_line.start_point[1]
 *             end_y = b_line.end_point[1] if a_line.end_point[1] < b_line.end_point[1] else a_line.end_point[1]
 *             x = int((a_line.start_point[0] + b_line.start_point[0]) / 2)             # <<<<<<<<<<<<<<
 *             width = int((a_line.width + b_line.width) / 2)
 * 
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Add(__pyx_t_5, __pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_int_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Int(__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 397, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_v_x = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":398
 *             end_y = b_line.end_point[1] if a_line.end_point[1] < b_line.end_point[1] else a_line.end_point[1]
 *             x = int((a_line.start_point[0] + b_line.start_point[0]) / 2)
 *             width = int((a_line.width + b_line.width) / 2)             # <<<<<<<<<<<<<<
 * 
 *             line = Line((x, start_y), (x, end_y), width, orientation)
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_width); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 398, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_width); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 398, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 398, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_PyNumber_Divide(__pyx_t_5, __pyx_int_2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 398, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyNumber_Int(__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 398, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_v_width = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":400
 *             width = int((a_line.width + b_line.width) / 2)
 * 
 *             line = Line((x, start_y), (x, end_y), width, orientation)             # <<<<<<<<<<<<<<
 * 
 *         line.connect_at_start_point = a_line.connect_at_start_point
 */
    __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 400, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_start_y);
    __Pyx_GIVEREF(__pyx_v_start_y);
    PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_start_y);
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 400, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_end_y);
    __Pyx_GIVEREF(__pyx_v_end_y);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_end_y);
    __Pyx_INCREF(__pyx_v_Line);
    __pyx_t_2 = __pyx_v_Line; __pyx_t_4 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_8, __pyx_t_1, __pyx_v_width, __pyx_v_orientation};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 400, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_8, __pyx_t_1, __pyx_v_width, __pyx_v_orientation};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 400, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 400, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_8);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_1);
      __Pyx_INCREF(__pyx_v_width);
      __Pyx_GIVEREF(__pyx_v_width);
      PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_7, __pyx_v_width);
      __Pyx_INCREF(__pyx_v_orientation);
      __Pyx_GIVEREF(__pyx_v_orientation);
      PyTuple_SET_ITEM(__pyx_t_6, 3+__pyx_t_7, __pyx_v_orientation);
      __pyx_t_8 = 0;
      __pyx_t_1 = 0;
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 400, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_line = __pyx_t_5;
    __pyx_t_5 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":402
 *             line = Line((x, start_y), (x, end_y), width, orientation)
 * 
 *         line.connect_at_start_point = a_line.connect_at_start_point             # <<<<<<<<<<<<<<
 *         line.connect_at_end_point = b_line.connect_at_end_point
 *         return line
 */
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_line, __pyx_n_s_connect_at_start_point, __pyx_t_5) < 0) __PYX_ERR(0, 402, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":403
 * 
 *         line.connect_at_start_point = a_line.connect_at_start_point
 *         line.connect_at_end_point = b_line.connect_at_end_point             # <<<<<<<<<<<<<<
 *         return line
 * 
 */
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 403, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_line, __pyx_n_s_connect_at_end_point, __pyx_t_5) < 0) __PYX_ERR(0, 403, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":404
 *         line.connect_at_start_point = a_line.connect_at_start_point
 *         line.connect_at_end_point = b_line.connect_at_end_point
 *         return line             # <<<<<<<<<<<<<<
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_line);
  __pyx_r = __pyx_v_line;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":383
 * 
 *     @staticmethod
 *     def merge_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_Line);
  __Pyx_XDECREF(__pyx_v_start_x);
  __Pyx_XDECREF(__pyx_v_end_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_width);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_start_y);
  __Pyx_XDECREF(__pyx_v_end_y);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":406
 *         return line
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if len(lines) == 1:
 *             return lines[0]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_57merge_border_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_57merge_border_lines = {"merge_border_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_57merge_border_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_57merge_border_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_border_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_lines,&__pyx_n_s_orientation,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "merge_border_lines") < 0)) __PYX_ERR(0, 406, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_lines = values[0];
    __pyx_v_orientation = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("merge_border_lines", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 406, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_border_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_56merge_border_lines(__pyx_self, __pyx_v_lines, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":411
 *         else:
 *             if orientation == "horizontal":
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *             else:
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_lambda2(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_lambda2 = {"lambda2", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_lambda2, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_lambda2(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda2 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda2(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda2(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda2", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_border_lines.lambda2", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":413
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])
 *             else:
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *             start_line = lines[0]
 *             end_line = lines[-1]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_1lambda3(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_1lambda3 = {"lambda3", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_1lambda3, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_1lambda3(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda3 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda3(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda3(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda3", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 413, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 413, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_border_lines.lambda3", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":406
 *         return line
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if len(lines) == 1:
 *             return lines[0]
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_56merge_border_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_start_line = NULL;
  PyObject *__pyx_v_end_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("merge_border_lines", 0);
  __Pyx_INCREF(__pyx_v_lines);

  /* "table_extraction/utils_table_extraction.pyx":407
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):
 *         if len(lines) == 1:             # <<<<<<<<<<<<<<
 *             return lines[0]
 *         else:
 */
  __pyx_t_1 = PyObject_Length(__pyx_v_lines); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 407, __pyx_L1_error)
  __pyx_t_2 = ((__pyx_t_1 == 1) != 0);
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":408
 *     def merge_border_lines(lines, orientation="horizontal"):
 *         if len(lines) == 1:
 *             return lines[0]             # <<<<<<<<<<<<<<
 *         else:
 *             if orientation == "horizontal":
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":407
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):
 *         if len(lines) == 1:             # <<<<<<<<<<<<<<
 *             return lines[0]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":410
 *             return lines[0]
 *         else:
 *             if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])
 *             else:
 */
  /*else*/ {
    __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 410, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "table_extraction/utils_table_extraction.pyx":411
 *         else:
 *             if orientation == "horizontal":
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *             else:
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])
 */
      __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 411, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_lines);
      __Pyx_GIVEREF(__pyx_v_lines);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_lines);
      __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 411, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_lambda2, 0, __pyx_n_s_Utils_merge_border_lines_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 411, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_key, __pyx_t_5) < 0) __PYX_ERR(0, 411, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 411, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF_SET(__pyx_v_lines, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":410
 *             return lines[0]
 *         else:
 *             if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])
 *             else:
 */
      goto __pyx_L4;
    }

    /* "table_extraction/utils_table_extraction.pyx":413
 *                 lines = sorted(lines, key=lambda line: line.start_point[0])
 *             else:
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *             start_line = lines[0]
 *             end_line = lines[-1]
 */
    /*else*/ {
      __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_lines);
      __Pyx_GIVEREF(__pyx_v_lines);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_lines);
      __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18merge_border_lines_1lambda3, 0, __pyx_n_s_Utils_merge_border_lines_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 413, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF_SET(__pyx_v_lines, __pyx_t_3);
      __pyx_t_3 = 0;
    }
    __pyx_L4:;

    /* "table_extraction/utils_table_extraction.pyx":414
 *             else:
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])
 *             start_line = lines[0]             # <<<<<<<<<<<<<<
 *             end_line = lines[-1]
 * 
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_start_line = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":415
 *                 lines = sorted(lines, key=lambda line: line.start_point[1])
 *             start_line = lines[0]
 *             end_line = lines[-1]             # <<<<<<<<<<<<<<
 * 
 *             return Utils.merge_lines(start_line, end_line, orientation)
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 415, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_end_line = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":417
 *             end_line = lines[-1]
 * 
 *             return Utils.merge_lines(start_line, end_line, orientation)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 417, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_merge_lines); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 417, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_v_start_line, __pyx_v_end_line, __pyx_v_orientation};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 417, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_v_start_line, __pyx_v_end_line, __pyx_v_orientation};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 417, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_7 = PyTuple_New(3+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 417, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_INCREF(__pyx_v_start_line);
      __Pyx_GIVEREF(__pyx_v_start_line);
      PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_v_start_line);
      __Pyx_INCREF(__pyx_v_end_line);
      __Pyx_GIVEREF(__pyx_v_end_line);
      PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_v_end_line);
      __Pyx_INCREF(__pyx_v_orientation);
      __Pyx_GIVEREF(__pyx_v_orientation);
      PyTuple_SET_ITEM(__pyx_t_7, 2+__pyx_t_6, __pyx_v_orientation);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_7, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 417, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":406
 *         return line
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if len(lines) == 1:
 *             return lines[0]
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_border_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_start_line);
  __Pyx_XDECREF(__pyx_v_end_line);
  __Pyx_XDECREF(__pyx_v_lines);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":420
 * 
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal":
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_59extend_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_59extend_lines = {"extend_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_59extend_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_59extend_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("extend_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,&__pyx_n_s_orientation,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("extend_lines", 0, 2, 3, 1); __PYX_ERR(0, 420, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "extend_lines") < 0)) __PYX_ERR(0, 420, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
    __pyx_v_orientation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("extend_lines", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 420, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_58extend_lines(__pyx_self, __pyx_v_a_line, __pyx_v_b_line, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_58extend_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("extend_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":421
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 *         else:
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 421, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":422
 *     def extend_lines(a_line, b_line, orientation="horizontal"):
 *         if orientation == "horizontal":
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])             # <<<<<<<<<<<<<<
 *         else:
 *             b_line.start_point = (b_line.start_point[0], a_line.start_point[1])
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point, __pyx_t_2) < 0) __PYX_ERR(0, 422, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":421
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):
 *         if orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 *         else:
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":424
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 *         else:
 *             b_line.start_point = (b_line.start_point[0], a_line.start_point[1])             # <<<<<<<<<<<<<<
 *         b_line.connect_at_start_point = a_line.connect_at_start_point
 * 
 */
  /*else*/ {
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_3);
    __pyx_t_4 = 0;
    __pyx_t_3 = 0;
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point, __pyx_t_2) < 0) __PYX_ERR(0, 424, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":425
 *         else:
 *             b_line.start_point = (b_line.start_point[0], a_line.start_point[1])
 *         b_line.connect_at_start_point = a_line.connect_at_start_point             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 425, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_b_line, __pyx_n_s_connect_at_start_point, __pyx_t_2) < 0) __PYX_ERR(0, 425, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":420
 * 
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal":
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":428
 * 
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):             # <<<<<<<<<<<<<<
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_61sort_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_61sort_lines = {"sort_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_61sort_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_61sort_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_type = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("sort_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_lines,&__pyx_n_s_v_lines,&__pyx_n_s_type,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_position));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("sort_lines", 0, 2, 3, 1); __PYX_ERR(0, 428, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_type);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "sort_lines") < 0)) __PYX_ERR(0, 428, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_lines = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_type = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("sort_lines", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 428, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_60sort_lines(__pyx_self, __pyx_v_h_lines, __pyx_v_v_lines, __pyx_v_type);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":430
 *     def sort_lines(h_lines, v_lines, type="position"):
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_lambda4(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_lambda4 = {"lambda4", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_lambda4, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_lambda4(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda4 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda4(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda4(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda4", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 430, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 430, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines.lambda4", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":431
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_1lambda5(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_1lambda5 = {"lambda5", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_1lambda5, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_1lambda5(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda5 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda5(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda5(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda5", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 431, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 431, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines.lambda5", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":433
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])             # <<<<<<<<<<<<<<
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])
 *         return h_lines, v_lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_2lambda6(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_2lambda6 = {"lambda6", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_2lambda6, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_2lambda6(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda6 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda6(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda6(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda6", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines.lambda6", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":434
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])             # <<<<<<<<<<<<<<
 *         return h_lines, v_lines
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_3lambda7(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_3lambda7 = {"lambda7", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_3lambda7, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_3lambda7(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda7 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda7(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda7(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda7", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 434, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 434, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 434, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 434, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 434, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines.lambda7", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":428
 * 
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):             # <<<<<<<<<<<<<<
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_60sort_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_type) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("sort_lines", 0);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);

  /* "table_extraction/utils_table_extraction.pyx":429
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):
 *         if type == "position":             # <<<<<<<<<<<<<<
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_type, __pyx_n_s_position, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 429, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":430
 *     def sort_lines(h_lines, v_lines, type="position"):
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":
 */
    __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_h_lines);
    __Pyx_GIVEREF(__pyx_v_h_lines);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_h_lines);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_lambda4, 0, __pyx_n_s_Utils_sort_lines_locals_lambda, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_4) < 0) __PYX_ERR(0, 430, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":431
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 */
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 431, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_v_lines);
    __Pyx_GIVEREF(__pyx_v_v_lines);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_v_lines);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 431, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_1lambda5, 0, __pyx_n_s_Utils_sort_lines_locals_lambda, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 431, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 431, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 431, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_v_lines, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":429
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):
 *         if type == "position":             # <<<<<<<<<<<<<<
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":432
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":             # <<<<<<<<<<<<<<
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_type, __pyx_n_s_length, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 432, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":433
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])             # <<<<<<<<<<<<<<
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])
 *         return h_lines, v_lines
 */
    __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_h_lines);
    __Pyx_GIVEREF(__pyx_v_h_lines);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_h_lines);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_2lambda6, 0, __pyx_n_s_Utils_sort_lines_locals_lambda, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_4) < 0) __PYX_ERR(0, 433, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":434
 *         elif type == "length":
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])             # <<<<<<<<<<<<<<
 *         return h_lines, v_lines
 * 
 */
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 434, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_v_lines);
    __Pyx_GIVEREF(__pyx_v_v_lines);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_v_lines);
    __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 434, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_10sort_lines_3lambda7, 0, __pyx_n_s_Utils_sort_lines_locals_lambda, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 434, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 434, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_4, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 434, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_v_lines, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":432
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.start_point[0])
 *         elif type == "length":             # <<<<<<<<<<<<<<
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])
 */
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":435
 *             h_lines = sorted(h_lines, key=lambda line: line.end_point[1] - line.start_point[1])
 *             v_lines = sorted(v_lines, key=lambda line: line.end_point[0] - line.start_point[0])
 *         return h_lines, v_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_GIVEREF(__pyx_v_h_lines);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);
  __Pyx_GIVEREF(__pyx_v_v_lines);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_v_lines);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":428
 * 
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):             # <<<<<<<<<<<<<<
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.sort_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":438
 * 
 *     @staticmethod
 *     def horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_63horizontal_line_cut_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_63horizontal_line_cut_vertical_line = {"horizontal_line_cut_vertical_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_63horizontal_line_cut_vertical_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_63horizontal_line_cut_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("horizontal_line_cut_vertical_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_v_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_line_cut_vertical_line", 1, 2, 2, 1); __PYX_ERR(0, 438, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "horizontal_line_cut_vertical_line") < 0)) __PYX_ERR(0, 438, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_h_line = values[0];
    __pyx_v_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("horizontal_line_cut_vertical_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 438, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_line_cut_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_62horizontal_line_cut_vertical_line(__pyx_self, __pyx_v_h_line, __pyx_v_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_62horizontal_line_cut_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("horizontal_line_cut_vertical_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":439
 *     @staticmethod
 *     def horizontal_line_cut_vertical_line(h_line, v_line):
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 439, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 439, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":438
 * 
 *     @staticmethod
 *     def horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_line_cut_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":442
 * 
 *     @staticmethod
 *     def vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_65vertical_line_cut_horiontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_65vertical_line_cut_horiontal_line = {"vertical_line_cut_horiontal_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_65vertical_line_cut_horiontal_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_65vertical_line_cut_horiontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("vertical_line_cut_horiontal_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_h_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_line_cut_horiontal_line", 1, 2, 2, 1); __PYX_ERR(0, 442, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "vertical_line_cut_horiontal_line") < 0)) __PYX_ERR(0, 442, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_v_line = values[0];
    __pyx_v_h_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("vertical_line_cut_horiontal_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 442, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_line_cut_horiontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_64vertical_line_cut_horiontal_line(__pyx_self, __pyx_v_v_line, __pyx_v_h_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_64vertical_line_cut_horiontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_h_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("vertical_line_cut_horiontal_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":443
 *     @staticmethod
 *     def vertical_line_cut_horiontal_line(v_line, h_line):
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 443, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 443, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":442
 * 
 *     @staticmethod
 *     def vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_line_cut_horiontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":446
 * 
 *     @staticmethod
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_67create_virtual_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_67create_virtual_vertical_line = {"create_virtual_vertical_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_67create_virtual_vertical_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_67create_virtual_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_neighbor_line = 0;
  PyObject *__pyx_v_direction = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("create_virtual_vertical_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_neighbor_line,&__pyx_n_s_direction,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_start));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_neighbor_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("create_virtual_vertical_line", 0, 2, 3, 1); __PYX_ERR(0, 446, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_direction);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "create_virtual_vertical_line") < 0)) __PYX_ERR(0, 446, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_line = values[0];
    __pyx_v_neighbor_line = values[1];
    __pyx_v_direction = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("create_virtual_vertical_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 446, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.create_virtual_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_66create_virtual_vertical_line(__pyx_self, __pyx_v_h_line, __pyx_v_neighbor_line, __pyx_v_direction);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_66create_virtual_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_neighbor_line, PyObject *__pyx_v_direction) {
  PyObject *__pyx_v_Line = NULL;
  PyObject *__pyx_v_virtual_v_line = NULL;
  PyObject *__pyx_v_x_position = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("create_virtual_vertical_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":447
 *     @staticmethod
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):
 *         from .table_processing import Line             # <<<<<<<<<<<<<<
 * 
 *         if direction == "start":
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Line);
  __Pyx_GIVEREF(__pyx_n_s_Line);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Line);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_processing, __pyx_t_1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_Line = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":449
 *         from .table_processing import Line
 * 
 *         if direction == "start":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_start, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 449, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":450
 * 
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 450, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 450, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_3) {

      /* "table_extraction/utils_table_extraction.pyx":451
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')             # <<<<<<<<<<<<<<
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 451, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_6);
      __pyx_t_5 = 0;
      __pyx_t_6 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_6 = __pyx_v_Line; __pyx_t_5 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_t_1, __pyx_t_4, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_t_1, __pyx_t_4, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_5) {
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_v);
        __Pyx_GIVEREF(__pyx_n_s_v);
        PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_n_s_v);
        __pyx_t_1 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_v_virtual_v_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":452
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 452, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":453
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_start_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 453, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":454
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 h_line.connect_at_start_point = True
 *                 return virtual_v_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 454, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":455
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 return virtual_v_line
 *             else:
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 455, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":456
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_start_point = True
 *                 return virtual_v_line             # <<<<<<<<<<<<<<
 *             else:
 *                 x_position = 0
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_v_line);
      __pyx_r = __pyx_v_virtual_v_line;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":450
 * 
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":458
 *                 return virtual_v_line
 *             else:
 *                 x_position = 0             # <<<<<<<<<<<<<<
 *                 if h_line.start_point[0] > neighbor_line.start_point[0]:
 *                     x_position = neighbor_line.start_point[0]
 */
    /*else*/ {
      __Pyx_INCREF(__pyx_int_0);
      __pyx_v_x_position = __pyx_int_0;

      /* "table_extraction/utils_table_extraction.pyx":459
 *             else:
 *                 x_position = 0
 *                 if h_line.start_point[0] > neighbor_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     x_position = neighbor_line.start_point[0]
 *                     h_line.start_point = (x_position, h_line.start_point[1])
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 459, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_3) {

        /* "table_extraction/utils_table_extraction.pyx":460
 *                 x_position = 0
 *                 if h_line.start_point[0] > neighbor_line.start_point[0]:
 *                     x_position = neighbor_line.start_point[0]             # <<<<<<<<<<<<<<
 *                     h_line.start_point = (x_position, h_line.start_point[1])
 *                 else:
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 460, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 460, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_DECREF_SET(__pyx_v_x_position, __pyx_t_8);
        __pyx_t_8 = 0;

        /* "table_extraction/utils_table_extraction.pyx":461
 *                 if h_line.start_point[0] > neighbor_line.start_point[0]:
 *                     x_position = neighbor_line.start_point[0]
 *                     h_line.start_point = (x_position, h_line.start_point[1])             # <<<<<<<<<<<<<<
 *                 else:
 *                     x_position = h_line.start_point[0]
 */
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_8, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_INCREF(__pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_v_x_position);
        PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_t_2);
        __pyx_t_2 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point, __pyx_t_8) < 0) __PYX_ERR(0, 461, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;

        /* "table_extraction/utils_table_extraction.pyx":459
 *             else:
 *                 x_position = 0
 *                 if h_line.start_point[0] > neighbor_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     x_position = neighbor_line.start_point[0]
 *                     h_line.start_point = (x_position, h_line.start_point[1])
 */
        goto __pyx_L5;
      }

      /* "table_extraction/utils_table_extraction.pyx":463
 *                     h_line.start_point = (x_position, h_line.start_point[1])
 *                 else:
 *                     x_position = h_line.start_point[0]             # <<<<<<<<<<<<<<
 *                     neighbor_line.start_point = (x_position, neighbor_line.start_point[1])
 *                 neighbor_line.connect_at_start_point = True
 */
      /*else*/ {
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 463, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 463, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF_SET(__pyx_v_x_position, __pyx_t_2);
        __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":464
 *                 else:
 *                     x_position = h_line.start_point[0]
 *                     neighbor_line.start_point = (x_position, neighbor_line.start_point[1])             # <<<<<<<<<<<<<<
 *                 neighbor_line.connect_at_start_point = True
 *                 h_line.connect_at_start_point = True
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 464, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 464, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 464, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_v_x_position);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_8);
        __pyx_t_8 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point, __pyx_t_2) < 0) __PYX_ERR(0, 464, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L5:;

      /* "table_extraction/utils_table_extraction.pyx":465
 *                     x_position = h_line.start_point[0]
 *                     neighbor_line.start_point = (x_position, neighbor_line.start_point[1])
 *                 neighbor_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 h_line.connect_at_start_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 465, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":466
 *                     neighbor_line.start_point = (x_position, neighbor_line.start_point[1])
 *                 neighbor_line.connect_at_start_point = True
 *                 h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                 virtual_v_line = Line((x_position, h_line.start_point[1]), (x_position, neighbor_line.start_point[1]), 0, 'v')
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 466, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":468
 *                 h_line.connect_at_start_point = True
 * 
 *                 virtual_v_line = Line((x_position, h_line.start_point[1]), (x_position, neighbor_line.start_point[1]), 0, 'v')             # <<<<<<<<<<<<<<
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 */
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_8, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_INCREF(__pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_v_x_position);
      PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_t_6);
      __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_6, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 468, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_INCREF(__pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_v_x_position);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_4 = __pyx_v_Line; __pyx_t_1 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_t_8, __pyx_t_6, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 468, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_t_8, __pyx_t_6, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 468, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 468, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        if (__pyx_t_1) {
          __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_1); __pyx_t_1 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_7, __pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_6);
        PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_7, __pyx_t_6);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_5, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_v);
        __Pyx_GIVEREF(__pyx_n_s_v);
        PyTuple_SET_ITEM(__pyx_t_5, 3+__pyx_t_7, __pyx_n_s_v);
        __pyx_t_8 = 0;
        __pyx_t_6 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 468, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_virtual_v_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":469
 * 
 *                 virtual_v_line = Line((x_position, h_line.start_point[1]), (x_position, neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 469, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":470
 *                 virtual_v_line = Line((x_position, h_line.start_point[1]), (x_position, neighbor_line.start_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 470, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":471
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 return virtual_v_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 471, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":473
 *                 virtual_v_line.connect_at_end_point = True
 * 
 *                 return virtual_v_line             # <<<<<<<<<<<<<<
 * 
 *         elif direction == "end":
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_v_line);
      __pyx_r = __pyx_v_virtual_v_line;
      goto __pyx_L0;
    }

    /* "table_extraction/utils_table_extraction.pyx":449
 *         from .table_processing import Line
 * 
 *         if direction == "start":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_v_line = Line(h_line.start_point, (h_line.start_point[0], neighbor_line.start_point[1]), 0, 'v')
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":475
 *                 return virtual_v_line
 * 
 *         elif direction == "end":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_end, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 475, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":476
 * 
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 476, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 476, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_3) {

      /* "table_extraction/utils_table_extraction.pyx":477
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')             # <<<<<<<<<<<<<<
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 477, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_8);
      __pyx_t_6 = 0;
      __pyx_t_8 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_8 = __pyx_v_Line; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_5, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 477, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_5, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 477, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_1 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 477, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_7, __pyx_t_4);
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_7, __pyx_t_5);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_1, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_v);
        __Pyx_GIVEREF(__pyx_n_s_v);
        PyTuple_SET_ITEM(__pyx_t_1, 3+__pyx_t_7, __pyx_n_s_v);
        __pyx_t_4 = 0;
        __pyx_t_5 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 477, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_virtual_v_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":478
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 478, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":479
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 479, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":480
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 h_line.connect_at_end_point = True
 *                 return virtual_v_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 480, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":481
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 return virtual_v_line
 *             else:
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 481, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":482
 *                 virtual_v_line.connect_at_end_point = True
 *                 h_line.connect_at_end_point = True
 *                 return virtual_v_line             # <<<<<<<<<<<<<<
 *             else:
 *                 x_position = 0
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_v_line);
      __pyx_r = __pyx_v_virtual_v_line;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":476
 * 
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":484
 *                 return virtual_v_line
 *             else:
 *                 x_position = 0             # <<<<<<<<<<<<<<
 *                 if h_line.end_point[0] > neighbor_line.end_point[0]:
 *                     x_position = h_line.end_point[0]
 */
    /*else*/ {
      __Pyx_INCREF(__pyx_int_0);
      __pyx_v_x_position = __pyx_int_0;

      /* "table_extraction/utils_table_extraction.pyx":485
 *             else:
 *                 x_position = 0
 *                 if h_line.end_point[0] > neighbor_line.end_point[0]:             # <<<<<<<<<<<<<<
 *                     x_position = h_line.end_point[0]
 *                     neighbor_line.end_point = (x_position, neighbor_line.end_point[1])
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_8, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 485, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_3) {

        /* "table_extraction/utils_table_extraction.pyx":486
 *                 x_position = 0
 *                 if h_line.end_point[0] > neighbor_line.end_point[0]:
 *                     x_position = h_line.end_point[0]             # <<<<<<<<<<<<<<
 *                     neighbor_line.end_point = (x_position, neighbor_line.end_point[1])
 *                 else:
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 486, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_DECREF_SET(__pyx_v_x_position, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "table_extraction/utils_table_extraction.pyx":487
 *                 if h_line.end_point[0] > neighbor_line.end_point[0]:
 *                     x_position = h_line.end_point[0]
 *                     neighbor_line.end_point = (x_position, neighbor_line.end_point[1])             # <<<<<<<<<<<<<<
 *                 else:
 *                     x_position = neighbor_line.end_point[0]
 */
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 487, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 487, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 487, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_INCREF(__pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_v_x_position);
        PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_2);
        __pyx_t_2 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point, __pyx_t_1) < 0) __PYX_ERR(0, 487, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

        /* "table_extraction/utils_table_extraction.pyx":485
 *             else:
 *                 x_position = 0
 *                 if h_line.end_point[0] > neighbor_line.end_point[0]:             # <<<<<<<<<<<<<<
 *                     x_position = h_line.end_point[0]
 *                     neighbor_line.end_point = (x_position, neighbor_line.end_point[1])
 */
        goto __pyx_L7;
      }

      /* "table_extraction/utils_table_extraction.pyx":489
 *                     neighbor_line.end_point = (x_position, neighbor_line.end_point[1])
 *                 else:
 *                     x_position = neighbor_line.end_point[0]             # <<<<<<<<<<<<<<
 *                     h_line.end_point = (x_position, h_line.end_point[1])
 *                 neighbor_line.connect_at_end_point = True
 */
      /*else*/ {
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 489, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 489, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF_SET(__pyx_v_x_position, __pyx_t_2);
        __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":490
 *                 else:
 *                     x_position = neighbor_line.end_point[0]
 *                     h_line.end_point = (x_position, h_line.end_point[1])             # <<<<<<<<<<<<<<
 *                 neighbor_line.connect_at_end_point = True
 *                 h_line.connect_at_end_point = True
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 490, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 490, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 490, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_v_x_position);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_x_position);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_1);
        __pyx_t_1 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point, __pyx_t_2) < 0) __PYX_ERR(0, 490, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L7:;

      /* "table_extraction/utils_table_extraction.pyx":491
 *                     x_position = neighbor_line.end_point[0]
 *                     h_line.end_point = (x_position, h_line.end_point[1])
 *                 neighbor_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 h_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 491, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":492
 *                     h_line.end_point = (x_position, h_line.end_point[1])
 *                 neighbor_line.connect_at_end_point = True
 *                 h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 virtual_v_line = Line((x_position, h_line.end_point[1]), (x_position, neighbor_line.end_point[1]), 0, 'v')
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 492, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":494
 *                 h_line.connect_at_end_point = True
 * 
 *                 virtual_v_line = Line((x_position, h_line.end_point[1]), (x_position, neighbor_line.end_point[1]), 0, 'v')             # <<<<<<<<<<<<<<
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_v_x_position);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_8);
      __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_8, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 494, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_INCREF(__pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_v_x_position);
      PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_x_position);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_t_5);
      __pyx_t_5 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_5 = __pyx_v_Line; __pyx_t_4 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_1, __pyx_t_8, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 494, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_1, __pyx_t_8, __pyx_int_0, __pyx_n_s_v};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 494, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 494, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_8);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_v);
        __Pyx_GIVEREF(__pyx_n_s_v);
        PyTuple_SET_ITEM(__pyx_t_6, 3+__pyx_t_7, __pyx_n_s_v);
        __pyx_t_1 = 0;
        __pyx_t_8 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 494, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_v_virtual_v_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":495
 * 
 *                 virtual_v_line = Line((x_position, h_line.end_point[1]), (x_position, neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 495, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":496
 *                 virtual_v_line = Line((x_position, h_line.end_point[1]), (x_position, neighbor_line.end_point[1]), 0, 'v')
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_v_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 496, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":497
 *                 virtual_v_line.virtual_line = True
 *                 virtual_v_line.connect_at_start_point = True
 *                 virtual_v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 return virtual_v_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 497, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":499
 *                 virtual_v_line.connect_at_end_point = True
 * 
 *                 return virtual_v_line             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_v_line);
      __pyx_r = __pyx_v_virtual_v_line;
      goto __pyx_L0;
    }

    /* "table_extraction/utils_table_extraction.pyx":475
 *                 return virtual_v_line
 * 
 *         elif direction == "end":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_v_line = Line(h_line.end_point, (h_line.end_point[0], neighbor_line.end_point[1]), 0, 'v')
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":446
 * 
 *     @staticmethod
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.create_virtual_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_Line);
  __Pyx_XDECREF(__pyx_v_virtual_v_line);
  __Pyx_XDECREF(__pyx_v_x_position);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":502
 * 
 *     @staticmethod
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_69create_virtual_horizontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_69create_virtual_horizontal_line = {"create_virtual_horizontal_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_69create_virtual_horizontal_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_69create_virtual_horizontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_neighbor_line = 0;
  PyObject *__pyx_v_direction = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("create_virtual_horizontal_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_neighbor_line,&__pyx_n_s_direction,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_start));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_neighbor_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("create_virtual_horizontal_line", 0, 2, 3, 1); __PYX_ERR(0, 502, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_direction);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "create_virtual_horizontal_line") < 0)) __PYX_ERR(0, 502, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_v_line = values[0];
    __pyx_v_neighbor_line = values[1];
    __pyx_v_direction = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("create_virtual_horizontal_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 502, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.create_virtual_horizontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_68create_virtual_horizontal_line(__pyx_self, __pyx_v_v_line, __pyx_v_neighbor_line, __pyx_v_direction);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_68create_virtual_horizontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_neighbor_line, PyObject *__pyx_v_direction) {
  PyObject *__pyx_v_Line = NULL;
  PyObject *__pyx_v_virtual_h_line = NULL;
  PyObject *__pyx_v_y_position = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("create_virtual_horizontal_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":503
 *     @staticmethod
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):
 *         from .table_processing import Line             # <<<<<<<<<<<<<<
 * 
 *         if direction == "start":
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 503, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Line);
  __Pyx_GIVEREF(__pyx_n_s_Line);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Line);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_processing, __pyx_t_1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 503, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 503, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_Line = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":505
 *         from .table_processing import Line
 * 
 *         if direction == "start":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_start, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 505, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":506
 * 
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 506, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 506, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_3) {

      /* "table_extraction/utils_table_extraction.pyx":507
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')             # <<<<<<<<<<<<<<
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 507, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_6);
      __pyx_t_5 = 0;
      __pyx_t_6 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_6 = __pyx_v_Line; __pyx_t_5 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_t_1, __pyx_t_4, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 507, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
        PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_t_1, __pyx_t_4, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 507, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 507, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_5) {
          __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_h);
        __Pyx_GIVEREF(__pyx_n_s_h);
        PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_n_s_h);
        __pyx_t_1 = 0;
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 507, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_v_virtual_h_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":508
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 508, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":509
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_start_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 509, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":510
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 v_line.connect_at_start_point = True
 *                 return virtual_h_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 510, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":511
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 return virtual_h_line
 *             else:
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 511, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":512
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_start_point = True
 *                 return virtual_h_line             # <<<<<<<<<<<<<<
 *             else:
 *                 y_position = 0
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_h_line);
      __pyx_r = __pyx_v_virtual_h_line;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":506
 * 
 *         if direction == "start":
 *             if neighbor_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":514
 *                 return virtual_h_line
 *             else:
 *                 y_position = 0             # <<<<<<<<<<<<<<
 *                 if v_line.start_point[1] > neighbor_line.start_point[1]:
 *                     y_position = neighbor_line.start_point[1]
 */
    /*else*/ {
      __Pyx_INCREF(__pyx_int_0);
      __pyx_v_y_position = __pyx_int_0;

      /* "table_extraction/utils_table_extraction.pyx":515
 *             else:
 *                 y_position = 0
 *                 if v_line.start_point[1] > neighbor_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     y_position = neighbor_line.start_point[1]
 *                     v_line.start_point = (v_line.start_point[0], y_position)
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 515, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_3) {

        /* "table_extraction/utils_table_extraction.pyx":516
 *                 y_position = 0
 *                 if v_line.start_point[1] > neighbor_line.start_point[1]:
 *                     y_position = neighbor_line.start_point[1]             # <<<<<<<<<<<<<<
 *                     v_line.start_point = (v_line.start_point[0], y_position)
 *                 else:
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 516, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 516, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_DECREF_SET(__pyx_v_y_position, __pyx_t_8);
        __pyx_t_8 = 0;

        /* "table_extraction/utils_table_extraction.pyx":517
 *                 if v_line.start_point[1] > neighbor_line.start_point[1]:
 *                     y_position = neighbor_line.start_point[1]
 *                     v_line.start_point = (v_line.start_point[0], y_position)             # <<<<<<<<<<<<<<
 *                 else:
 *                     y_position = v_line.start_point[1]
 */
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 517, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 517, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 517, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_2);
        __Pyx_INCREF(__pyx_v_y_position);
        __Pyx_GIVEREF(__pyx_v_y_position);
        PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_y_position);
        __pyx_t_2 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point, __pyx_t_8) < 0) __PYX_ERR(0, 517, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;

        /* "table_extraction/utils_table_extraction.pyx":515
 *             else:
 *                 y_position = 0
 *                 if v_line.start_point[1] > neighbor_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     y_position = neighbor_line.start_point[1]
 *                     v_line.start_point = (v_line.start_point[0], y_position)
 */
        goto __pyx_L5;
      }

      /* "table_extraction/utils_table_extraction.pyx":519
 *                     v_line.start_point = (v_line.start_point[0], y_position)
 *                 else:
 *                     y_position = v_line.start_point[1]             # <<<<<<<<<<<<<<
 *                     neighbor_line.start_point = (neighbor_line.start_point[0], y_position)
 *                 neighbor_line.connect_at_start_point = True
 */
      /*else*/ {
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 519, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_8, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 519, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF_SET(__pyx_v_y_position, __pyx_t_2);
        __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":520
 *                 else:
 *                     y_position = v_line.start_point[1]
 *                     neighbor_line.start_point = (neighbor_line.start_point[0], y_position)             # <<<<<<<<<<<<<<
 *                 neighbor_line.connect_at_start_point = True
 *                 v_line.connect_at_start_point = True
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 520, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 520, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 520, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_8);
        __Pyx_INCREF(__pyx_v_y_position);
        __Pyx_GIVEREF(__pyx_v_y_position);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_y_position);
        __pyx_t_8 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point, __pyx_t_2) < 0) __PYX_ERR(0, 520, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L5:;

      /* "table_extraction/utils_table_extraction.pyx":521
 *                     y_position = v_line.start_point[1]
 *                     neighbor_line.start_point = (neighbor_line.start_point[0], y_position)
 *                 neighbor_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 v_line.connect_at_start_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 521, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":522
 *                     neighbor_line.start_point = (neighbor_line.start_point[0], y_position)
 *                 neighbor_line.connect_at_start_point = True
 *                 v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                 virtual_h_line = Line((v_line.start_point[0], y_position), (neighbor_line.start_point[0], y_position), 0, 'h')
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 522, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":524
 *                 v_line.connect_at_start_point = True
 * 
 *                 virtual_h_line = Line((v_line.start_point[0], y_position), (neighbor_line.start_point[0], y_position), 0, 'h')             # <<<<<<<<<<<<<<
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 */
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6);
      __Pyx_INCREF(__pyx_v_y_position);
      __Pyx_GIVEREF(__pyx_v_y_position);
      PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_y_position);
      __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_6, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 524, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4);
      __Pyx_INCREF(__pyx_v_y_position);
      __Pyx_GIVEREF(__pyx_v_y_position);
      PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_y_position);
      __pyx_t_4 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_4 = __pyx_v_Line; __pyx_t_1 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_t_8, __pyx_t_6, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 524, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_t_8, __pyx_t_6, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 524, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 524, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        if (__pyx_t_1) {
          __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_1); __pyx_t_1 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_7, __pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_6);
        PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_7, __pyx_t_6);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_5, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_h);
        __Pyx_GIVEREF(__pyx_n_s_h);
        PyTuple_SET_ITEM(__pyx_t_5, 3+__pyx_t_7, __pyx_n_s_h);
        __pyx_t_8 = 0;
        __pyx_t_6 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 524, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_virtual_h_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":525
 * 
 *                 virtual_h_line = Line((v_line.start_point[0], y_position), (neighbor_line.start_point[0], y_position), 0, 'h')
 *                 virtual_h_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 525, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":526
 *                 virtual_h_line = Line((v_line.start_point[0], y_position), (neighbor_line.start_point[0], y_position), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 526, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":527
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 return virtual_h_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 527, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":529
 *                 virtual_h_line.connect_at_end_point = True
 * 
 *                 return virtual_h_line             # <<<<<<<<<<<<<<
 * 
 *         elif direction == "end":
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_h_line);
      __pyx_r = __pyx_v_virtual_h_line;
      goto __pyx_L0;
    }

    /* "table_extraction/utils_table_extraction.pyx":505
 *         from .table_processing import Line
 * 
 *         if direction == "start":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_start_point:
 *                 virtual_h_line = Line(v_line.start_point, (neighbor_line.start_point[0], v_line.start_point[1]), 0, 'h')
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":531
 *                 return virtual_h_line
 * 
 *         elif direction == "end":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_end, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 531, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":532
 * 
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 532, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 532, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_3) {

      /* "table_extraction/utils_table_extraction.pyx":533
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')             # <<<<<<<<<<<<<<
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_8);
      __pyx_t_6 = 0;
      __pyx_t_8 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_8 = __pyx_v_Line; __pyx_t_6 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_5, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 533, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_t_4, __pyx_t_5, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 533, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_1 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 533, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_7, __pyx_t_4);
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_7, __pyx_t_5);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_1, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_h);
        __Pyx_GIVEREF(__pyx_n_s_h);
        PyTuple_SET_ITEM(__pyx_t_1, 3+__pyx_t_7, __pyx_n_s_h);
        __pyx_t_4 = 0;
        __pyx_t_5 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_1, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 533, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_virtual_h_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":534
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 534, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":535
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 535, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":536
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 v_line.connect_at_end_point = True
 *                 return virtual_h_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 536, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":537
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 return virtual_h_line
 *             else:
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 537, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":538
 *                 virtual_h_line.connect_at_end_point = True
 *                 v_line.connect_at_end_point = True
 *                 return virtual_h_line             # <<<<<<<<<<<<<<
 *             else:
 *                 y_position = 0
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_h_line);
      __pyx_r = __pyx_v_virtual_h_line;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":532
 * 
 *         elif direction == "end":
 *             if neighbor_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":540
 *                 return virtual_h_line
 *             else:
 *                 y_position = 0             # <<<<<<<<<<<<<<
 *                 if v_line.end_point[1] > neighbor_line.end_point[1]:
 *                     y_position = v_line.end_point[1]
 */
    /*else*/ {
      __Pyx_INCREF(__pyx_int_0);
      __pyx_v_y_position = __pyx_int_0;

      /* "table_extraction/utils_table_extraction.pyx":541
 *             else:
 *                 y_position = 0
 *                 if v_line.end_point[1] > neighbor_line.end_point[1]:             # <<<<<<<<<<<<<<
 *                     y_position = v_line.end_point[1]
 *                     neighbor_line.end_point = (neighbor_line.end_point[0], y_position)
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_8, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 541, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_3) {

        /* "table_extraction/utils_table_extraction.pyx":542
 *                 y_position = 0
 *                 if v_line.end_point[1] > neighbor_line.end_point[1]:
 *                     y_position = v_line.end_point[1]             # <<<<<<<<<<<<<<
 *                     neighbor_line.end_point = (neighbor_line.end_point[0], y_position)
 *                 else:
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 542, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 542, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_DECREF_SET(__pyx_v_y_position, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "table_extraction/utils_table_extraction.pyx":543
 *                 if v_line.end_point[1] > neighbor_line.end_point[1]:
 *                     y_position = v_line.end_point[1]
 *                     neighbor_line.end_point = (neighbor_line.end_point[0], y_position)             # <<<<<<<<<<<<<<
 *                 else:
 *                     y_position = neighbor_line.end_point[1]
 */
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 543, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 543, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 543, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
        __Pyx_INCREF(__pyx_v_y_position);
        __Pyx_GIVEREF(__pyx_v_y_position);
        PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y_position);
        __pyx_t_2 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point, __pyx_t_1) < 0) __PYX_ERR(0, 543, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

        /* "table_extraction/utils_table_extraction.pyx":541
 *             else:
 *                 y_position = 0
 *                 if v_line.end_point[1] > neighbor_line.end_point[1]:             # <<<<<<<<<<<<<<
 *                     y_position = v_line.end_point[1]
 *                     neighbor_line.end_point = (neighbor_line.end_point[0], y_position)
 */
        goto __pyx_L7;
      }

      /* "table_extraction/utils_table_extraction.pyx":545
 *                     neighbor_line.end_point = (neighbor_line.end_point[0], y_position)
 *                 else:
 *                     y_position = neighbor_line.end_point[1]             # <<<<<<<<<<<<<<
 *                     v_line.end_point = (v_line.end_point[0], y_position)
 * 
 */
      /*else*/ {
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 545, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 545, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF_SET(__pyx_v_y_position, __pyx_t_2);
        __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":546
 *                 else:
 *                     y_position = neighbor_line.end_point[1]
 *                     v_line.end_point = (v_line.end_point[0], y_position)             # <<<<<<<<<<<<<<
 * 
 *                 neighbor_line.connect_at_end_point = True
 */
        __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 546, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 546, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 546, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
        __Pyx_INCREF(__pyx_v_y_position);
        __Pyx_GIVEREF(__pyx_v_y_position);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_y_position);
        __pyx_t_1 = 0;
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point, __pyx_t_2) < 0) __PYX_ERR(0, 546, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L7:;

      /* "table_extraction/utils_table_extraction.pyx":548
 *                     v_line.end_point = (v_line.end_point[0], y_position)
 * 
 *                 neighbor_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                 v_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 548, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":549
 * 
 *                 neighbor_line.connect_at_end_point = True
 *                 v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 virtual_h_line = Line((v_line.end_point[0], y_position), (neighbor_line.end_point[0], y_position), 0, 'h')
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 549, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":551
 *                 v_line.connect_at_end_point = True
 * 
 *                 virtual_h_line = Line((v_line.end_point[0], y_position), (neighbor_line.end_point[0], y_position), 0, 'h')             # <<<<<<<<<<<<<<
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_y_position);
      __Pyx_GIVEREF(__pyx_v_y_position);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y_position);
      __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_neighbor_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_y_position);
      __Pyx_GIVEREF(__pyx_v_y_position);
      PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_y_position);
      __pyx_t_5 = 0;
      __Pyx_INCREF(__pyx_v_Line);
      __pyx_t_5 = __pyx_v_Line; __pyx_t_4 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_1, __pyx_t_8, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 551, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_t_1, __pyx_t_8, __pyx_int_0, __pyx_n_s_h};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 551, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      } else
      #endif
      {
        __pyx_t_6 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 551, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_8);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_7, __pyx_int_0);
        __Pyx_INCREF(__pyx_n_s_h);
        __Pyx_GIVEREF(__pyx_n_s_h);
        PyTuple_SET_ITEM(__pyx_t_6, 3+__pyx_t_7, __pyx_n_s_h);
        __pyx_t_1 = 0;
        __pyx_t_8 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_6, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 551, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_v_virtual_h_line = __pyx_t_2;
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":552
 * 
 *                 virtual_h_line = Line((v_line.end_point[0], y_position), (neighbor_line.end_point[0], y_position), 0, 'h')
 *                 virtual_h_line.virtual_line = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_virtual_line, Py_True) < 0) __PYX_ERR(0, 552, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":553
 *                 virtual_h_line = Line((v_line.end_point[0], y_position), (neighbor_line.end_point[0], y_position), 0, 'h')
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                 virtual_h_line.connect_at_end_point = True
 * 
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 553, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":554
 *                 virtual_h_line.virtual_line = True
 *                 virtual_h_line.connect_at_start_point = True
 *                 virtual_h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                 return virtual_h_line
 */
      if (__Pyx_PyObject_SetAttrStr(__pyx_v_virtual_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 554, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":556
 *                 virtual_h_line.connect_at_end_point = True
 * 
 *                 return virtual_h_line             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_virtual_h_line);
      __pyx_r = __pyx_v_virtual_h_line;
      goto __pyx_L0;
    }

    /* "table_extraction/utils_table_extraction.pyx":531
 *                 return virtual_h_line
 * 
 *         elif direction == "end":             # <<<<<<<<<<<<<<
 *             if neighbor_line.connect_at_end_point:
 *                 virtual_h_line = Line(v_line.end_point, (neighbor_line.end_point[0], v_line.end_point[1]), 0, 'h')
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":502
 * 
 *     @staticmethod
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.create_virtual_horizontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_Line);
  __Pyx_XDECREF(__pyx_v_virtual_h_line);
  __Pyx_XDECREF(__pyx_v_y_position);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":559
 * 
 *     @staticmethod
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         for line in v_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_71vertical_left_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_71vertical_left_neighbor_line = {"vertical_left_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_71vertical_left_neighbor_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_71vertical_left_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_invalid_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("vertical_left_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_v_lines,&__pyx_n_s_invalid_lines,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_None));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_left_neighbor_line", 0, 2, 3, 1); __PYX_ERR(0, 559, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_invalid_lines);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "vertical_left_neighbor_line") < 0)) __PYX_ERR(0, 559, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_v_line = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_invalid_lines = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("vertical_left_neighbor_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 559, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_left_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_70vertical_left_neighbor_line(__pyx_self, __pyx_v_v_line, __pyx_v_v_lines, __pyx_v_invalid_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_70vertical_left_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_invalid_lines) {
  PyObject *__pyx_v_left_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("vertical_left_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":560
 *     @staticmethod
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         left_lines = []             # <<<<<<<<<<<<<<
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 560, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_left_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":561
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         left_lines = []
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 561, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 561, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 561, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 561, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 561, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 561, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 561, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":562
 *         left_lines = []
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     left_lines.append(line)
 */
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_line, __pyx_v_v_line, Py_NE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 562, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 562, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":563
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     left_lines.append(line)
 *                 elif not invalid_lines:
 */
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 563, __pyx_L1_error)
      if (__pyx_t_6) {
      } else {
        __pyx_t_5 = __pyx_t_6;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_line, __pyx_v_invalid_lines, Py_NE)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 563, __pyx_L1_error)
      __pyx_t_9 = (__pyx_t_6 != 0);
      __pyx_t_5 = __pyx_t_9;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":564
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 *                     left_lines.append(line)             # <<<<<<<<<<<<<<
 *                 elif not invalid_lines:
 *                     left_lines.append(line)
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 564, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":563
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     left_lines.append(line)
 *                 elif not invalid_lines:
 */
        goto __pyx_L8;
      }

      /* "table_extraction/utils_table_extraction.pyx":565
 *                 if invalid_lines and line not in invalid_lines:
 *                     left_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     left_lines.append(line)
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 565, __pyx_L1_error)
      __pyx_t_9 = ((!__pyx_t_5) != 0);
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":566
 *                     left_lines.append(line)
 *                 elif not invalid_lines:
 *                     left_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(left_lines) > 0:
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 566, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":565
 *                 if invalid_lines and line not in invalid_lines:
 *                     left_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     left_lines.append(line)
 * 
 */
      }
      __pyx_L8:;

      /* "table_extraction/utils_table_extraction.pyx":562
 *         left_lines = []
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     left_lines.append(line)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":561
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         left_lines = []
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line!=v_line and line.start_point[0] < v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":568
 *                     left_lines.append(line)
 * 
 *         if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *             return left_lines[-1]
 *         else:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 568, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":569
 * 
 *         if len(left_lines) > 0:
 *             return left_lines[-1]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_left_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 569, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":568
 *                     left_lines.append(line)
 * 
 *         if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *             return left_lines[-1]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":571
 *             return left_lines[-1]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":559
 * 
 *     @staticmethod
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         for line in v_lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_left_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_left_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":574
 * 
 *     @staticmethod
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         right_lines = []
 *         for line in v_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_73vertical_right_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_73vertical_right_neighbor_line = {"vertical_right_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_73vertical_right_neighbor_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_73vertical_right_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_invalid_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("vertical_right_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_v_lines,&__pyx_n_s_invalid_lines,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_None));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_right_neighbor_line", 0, 2, 3, 1); __PYX_ERR(0, 574, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_invalid_lines);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "vertical_right_neighbor_line") < 0)) __PYX_ERR(0, 574, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_v_line = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_invalid_lines = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("vertical_right_neighbor_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 574, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_right_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_72vertical_right_neighbor_line(__pyx_self, __pyx_v_v_line, __pyx_v_v_lines, __pyx_v_invalid_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_72vertical_right_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_invalid_lines) {
  PyObject *__pyx_v_right_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("vertical_right_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":575
 *     @staticmethod
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         right_lines = []             # <<<<<<<<<<<<<<
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 575, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_right_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":576
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         right_lines = []
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 576, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 576, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 576, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 576, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 576, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 576, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 576, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":577
 *         right_lines = []
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     right_lines.append(line)
 */
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_line, __pyx_v_v_line, Py_NE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 577, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 577, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":578
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     right_lines.append(line)
 *                 elif not invalid_lines:
 */
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 578, __pyx_L1_error)
      if (__pyx_t_6) {
      } else {
        __pyx_t_5 = __pyx_t_6;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_line, __pyx_v_invalid_lines, Py_NE)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 578, __pyx_L1_error)
      __pyx_t_9 = (__pyx_t_6 != 0);
      __pyx_t_5 = __pyx_t_9;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":579
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 *                     right_lines.append(line)             # <<<<<<<<<<<<<<
 *                 elif not invalid_lines:
 *                     right_lines.append(line)
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 579, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":578
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     right_lines.append(line)
 *                 elif not invalid_lines:
 */
        goto __pyx_L8;
      }

      /* "table_extraction/utils_table_extraction.pyx":580
 *                 if invalid_lines and line not in invalid_lines:
 *                     right_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     right_lines.append(line)
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 580, __pyx_L1_error)
      __pyx_t_9 = ((!__pyx_t_5) != 0);
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":581
 *                     right_lines.append(line)
 *                 elif not invalid_lines:
 *                     right_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(right_lines) > 0:
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 581, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":580
 *                 if invalid_lines and line not in invalid_lines:
 *                     right_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     right_lines.append(line)
 * 
 */
      }
      __pyx_L8:;

      /* "table_extraction/utils_table_extraction.pyx":577
 *         right_lines = []
 *         for line in v_lines:
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     right_lines.append(line)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":576
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         right_lines = []
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line!=v_line and line.start_point[0] > v_line.start_point[0]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":583
 *                     right_lines.append(line)
 * 
 *         if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             return right_lines[0]
 *         else:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 583, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":584
 * 
 *         if len(right_lines) > 0:
 *             return right_lines[0]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_right_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 584, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":583
 *                     right_lines.append(line)
 * 
 *         if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             return right_lines[0]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":586
 *             return right_lines[0]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":574
 * 
 *     @staticmethod
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         right_lines = []
 *         for line in v_lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_right_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_right_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":589
 * 
 *     @staticmethod
 *     def vertical_neighbor_line(v_line, v_lines):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         right_lines = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_75vertical_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_75vertical_neighbor_line = {"vertical_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_75vertical_neighbor_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_75vertical_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("vertical_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_v_lines,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_neighbor_line", 1, 2, 2, 1); __PYX_ERR(0, 589, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "vertical_neighbor_line") < 0)) __PYX_ERR(0, 589, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_v_line = values[0];
    __pyx_v_v_lines = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("vertical_neighbor_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 589, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_74vertical_neighbor_line(__pyx_self, __pyx_v_v_line, __pyx_v_v_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_74vertical_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_v_lines) {
  PyObject *__pyx_v_left_lines = NULL;
  PyObject *__pyx_v_right_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("vertical_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":590
 *     @staticmethod
 *     def vertical_neighbor_line(v_line, v_lines):
 *         left_lines = []             # <<<<<<<<<<<<<<
 *         right_lines = []
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_left_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":591
 *     def vertical_neighbor_line(v_line, v_lines):
 *         left_lines = []
 *         right_lines = []             # <<<<<<<<<<<<<<
 * 
 *         for line in v_lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 591, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_right_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":593
 *         right_lines = []
 * 
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line.start_point[0] < v_line.start_point[0]:
 *                 left_lines.append(line)
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 593, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 593, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 593, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 593, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 593, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 593, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 593, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":594
 * 
 *         for line in v_lines:
 *             if line.start_point[0] < v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 left_lines.append(line)
 *             elif line.start_point[0] > v_line.start_point[0]:
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_5, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 594, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":595
 *         for line in v_lines:
 *             if line.start_point[0] < v_line.start_point[0]:
 *                 left_lines.append(line)             # <<<<<<<<<<<<<<
 *             elif line.start_point[0] > v_line.start_point[0]:
 *                 right_lines.append(line)
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_line); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 595, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":594
 * 
 *         for line in v_lines:
 *             if line.start_point[0] < v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 left_lines.append(line)
 *             elif line.start_point[0] > v_line.start_point[0]:
 */
      goto __pyx_L5;
    }

    /* "table_extraction/utils_table_extraction.pyx":596
 *             if line.start_point[0] < v_line.start_point[0]:
 *                 left_lines.append(line)
 *             elif line.start_point[0] > v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 right_lines.append(line)
 * 
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_5, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 596, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":597
 *                 left_lines.append(line)
 *             elif line.start_point[0] > v_line.start_point[0]:
 *                 right_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(left_lines) > 0 and len(right_lines) == 0:
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_line); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 597, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":596
 *             if line.start_point[0] < v_line.start_point[0]:
 *                 left_lines.append(line)
 *             elif line.start_point[0] > v_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                 right_lines.append(line)
 * 
 */
    }
    __pyx_L5:;

    /* "table_extraction/utils_table_extraction.pyx":593
 *         right_lines = []
 * 
 *         for line in v_lines:             # <<<<<<<<<<<<<<
 *             if line.start_point[0] < v_line.start_point[0]:
 *                 left_lines.append(line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":599
 *                 right_lines.append(line)
 * 
 *         if len(left_lines) > 0 and len(right_lines) == 0:             # <<<<<<<<<<<<<<
 *             return left_lines[-1]
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 599, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 599, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 == 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L7_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":600
 * 
 *         if len(left_lines) > 0 and len(right_lines) == 0:
 *             return left_lines[-1]             # <<<<<<<<<<<<<<
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 *             return right_lines[0]
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_left_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 600, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":599
 *                 right_lines.append(line)
 * 
 *         if len(left_lines) > 0 and len(right_lines) == 0:             # <<<<<<<<<<<<<<
 *             return left_lines[-1]
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":601
 *         if len(left_lines) > 0 and len(right_lines) == 0:
 *             return left_lines[-1]
 *         elif len(left_lines) == 0 and len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 601, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 == 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L9_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 601, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L9_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":602
 *             return left_lines[-1]
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 *             return right_lines[0]             # <<<<<<<<<<<<<<
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_right_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 602, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":601
 *         if len(left_lines) > 0 and len(right_lines) == 0:
 *             return left_lines[-1]
 *         elif len(left_lines) == 0 and len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":603
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 *                 return right_lines[-1]
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 603, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L11_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 603, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L11_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":604
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return right_lines[-1]
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 */
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_9) {
    } else {
      __pyx_t_7 = __pyx_t_9;
      goto __pyx_L14_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 604, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_10 = ((!__pyx_t_9) != 0);
    __pyx_t_7 = __pyx_t_10;
    __pyx_L14_bool_binop_done:;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":605
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 *                 return right_lines[-1]             # <<<<<<<<<<<<<<
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 *                 return left_lines[0]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 605, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":604
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return right_lines[-1]
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":606
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 *                 return right_lines[-1]
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return left_lines[0]
 *             if not v_line.connect_at_start_point:
 */
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_9 = ((!__pyx_t_10) != 0);
    if (__pyx_t_9) {
    } else {
      __pyx_t_7 = __pyx_t_9;
      goto __pyx_L17_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_7 = __pyx_t_9;
    __pyx_L17_bool_binop_done:;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":607
 *                 return right_lines[-1]
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 *                 return left_lines[0]             # <<<<<<<<<<<<<<
 *             if not v_line.connect_at_start_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 607, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":606
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 *                 return right_lines[-1]
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return left_lines[0]
 *             if not v_line.connect_at_start_point:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":608
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 *                 return left_lines[0]
 *             if not v_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 *             if not v_line.connect_at_end_point:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 608, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 608, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_9 = ((!__pyx_t_7) != 0);
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":609
 *                 return left_lines[0]
 *             if not v_line.connect_at_start_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]             # <<<<<<<<<<<<<<
 *             if not v_line.connect_at_end_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] > right_lines[-1].end_point[1] else right_lines[-1]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_end_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_6, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 609, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_9) {
        __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 609, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_1 = __pyx_t_6;
        __pyx_t_6 = 0;
      } else {
        __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 609, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_1 = __pyx_t_6;
        __pyx_t_6 = 0;
      }
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":608
 *             if not left_lines[0].connect_at_start_and_end_point() and right_lines[-1].connect_at_start_and_end_point():
 *                 return left_lines[0]
 *             if not v_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 *             if not v_line.connect_at_end_point:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":610
 *             if not v_line.connect_at_start_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 *             if not v_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 return left_lines[0] if left_lines[0].end_point[1] > right_lines[-1].end_point[1] else right_lines[-1]
 *         else:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 610, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 610, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_7 = ((!__pyx_t_9) != 0);
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":611
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 *             if not v_line.connect_at_end_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] > right_lines[-1].end_point[1] else right_lines[-1]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_5, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_5, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_7) {
        __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 611, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_1 = __pyx_t_4;
        __pyx_t_4 = 0;
      } else {
        __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 611, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_1 = __pyx_t_4;
        __pyx_t_4 = 0;
      }
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":610
 *             if not v_line.connect_at_start_point:
 *                 return left_lines[0] if left_lines[0].end_point[1] < right_lines[-1].end_point[1] else right_lines[-1]
 *             if not v_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 return left_lines[0] if left_lines[0].end_point[1] > right_lines[-1].end_point[1] else right_lines[-1]
 *         else:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":603
 *         elif len(left_lines) == 0 and len(right_lines) > 0:
 *             return right_lines[0]
 *         elif len(left_lines) > 0 and len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             if left_lines[0].connect_at_start_and_end_point() and not right_lines[-1].connect_at_start_and_end_point():
 *                 return right_lines[-1]
 */
    goto __pyx_L6;
  }

  /* "table_extraction/utils_table_extraction.pyx":613
 *                 return left_lines[0] if left_lines[0].end_point[1] > right_lines[-1].end_point[1] else right_lines[-1]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }
  __pyx_L6:;

  /* "table_extraction/utils_table_extraction.pyx":589
 * 
 *     @staticmethod
 *     def vertical_neighbor_line(v_line, v_lines):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         right_lines = []
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_left_lines);
  __Pyx_XDECREF(__pyx_v_right_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":616
 * 
 *     @staticmethod
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         top_lines = []
 *         for line in h_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_77horizontal_top_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_77horizontal_top_neighbor_line = {"horizontal_top_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_77horizontal_top_neighbor_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_77horizontal_top_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_invalid_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("horizontal_top_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_h_lines,&__pyx_n_s_invalid_lines,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_None));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_top_neighbor_line", 0, 2, 3, 1); __PYX_ERR(0, 616, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_invalid_lines);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "horizontal_top_neighbor_line") < 0)) __PYX_ERR(0, 616, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_line = values[0];
    __pyx_v_h_lines = values[1];
    __pyx_v_invalid_lines = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("horizontal_top_neighbor_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 616, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_top_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_76horizontal_top_neighbor_line(__pyx_self, __pyx_v_h_line, __pyx_v_h_lines, __pyx_v_invalid_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_76horizontal_top_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_invalid_lines) {
  PyObject *__pyx_v_top_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("horizontal_top_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":617
 *     @staticmethod
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         top_lines = []             # <<<<<<<<<<<<<<
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 617, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_top_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":618
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         top_lines = []
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_1 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 618, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 618, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 618, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 618, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 618, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 618, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 618, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":619
 *         top_lines = []
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     top_lines.append(line)
 */
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_line, __pyx_v_h_line, Py_NE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 619, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 619, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":620
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     top_lines.append(line)
 *                 elif not invalid_lines:
 */
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 620, __pyx_L1_error)
      if (__pyx_t_6) {
      } else {
        __pyx_t_5 = __pyx_t_6;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_line, __pyx_v_invalid_lines, Py_NE)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 620, __pyx_L1_error)
      __pyx_t_9 = (__pyx_t_6 != 0);
      __pyx_t_5 = __pyx_t_9;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":621
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 *                     top_lines.append(line)             # <<<<<<<<<<<<<<
 *                 elif not invalid_lines:
 *                     top_lines.append(line)
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_top_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 621, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":620
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     top_lines.append(line)
 *                 elif not invalid_lines:
 */
        goto __pyx_L8;
      }

      /* "table_extraction/utils_table_extraction.pyx":622
 *                 if invalid_lines and line not in invalid_lines:
 *                     top_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     top_lines.append(line)
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 622, __pyx_L1_error)
      __pyx_t_9 = ((!__pyx_t_5) != 0);
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":623
 *                     top_lines.append(line)
 *                 elif not invalid_lines:
 *                     top_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(top_lines) > 0:
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_top_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 623, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":622
 *                 if invalid_lines and line not in invalid_lines:
 *                     top_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     top_lines.append(line)
 * 
 */
      }
      __pyx_L8:;

      /* "table_extraction/utils_table_extraction.pyx":619
 *         top_lines = []
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     top_lines.append(line)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":618
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         top_lines = []
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line!=h_line and line.start_point[1] < h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":625
 *                     top_lines.append(line)
 * 
 *         if len(top_lines) > 0:             # <<<<<<<<<<<<<<
 *             return top_lines[-1]
 *         else:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_top_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 625, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":626
 * 
 *         if len(top_lines) > 0:
 *             return top_lines[-1]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 626, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":625
 *                     top_lines.append(line)
 * 
 *         if len(top_lines) > 0:             # <<<<<<<<<<<<<<
 *             return top_lines[-1]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":628
 *             return top_lines[-1]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":616
 * 
 *     @staticmethod
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         top_lines = []
 *         for line in h_lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_top_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_top_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":631
 * 
 *     @staticmethod
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 *         for line in h_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_79horizontal_bottom_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_79horizontal_bottom_neighbor_line = {"horizontal_bottom_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_79horizontal_bottom_neighbor_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_79horizontal_bottom_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_invalid_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("horizontal_bottom_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_h_lines,&__pyx_n_s_invalid_lines,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_None));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_bottom_neighbor_line", 0, 2, 3, 1); __PYX_ERR(0, 631, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_invalid_lines);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "horizontal_bottom_neighbor_line") < 0)) __PYX_ERR(0, 631, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_line = values[0];
    __pyx_v_h_lines = values[1];
    __pyx_v_invalid_lines = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("horizontal_bottom_neighbor_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 631, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_bottom_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_78horizontal_bottom_neighbor_line(__pyx_self, __pyx_v_h_line, __pyx_v_h_lines, __pyx_v_invalid_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_78horizontal_bottom_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_invalid_lines) {
  PyObject *__pyx_v_bottom_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("horizontal_bottom_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":632
 *     @staticmethod
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         bottom_lines = []             # <<<<<<<<<<<<<<
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 632, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_bottom_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":633
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         bottom_lines = []
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_1 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 633, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 633, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 633, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 633, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 633, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 633, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 633, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":634
 *         bottom_lines = []
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     bottom_lines.append(line)
 */
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_line, __pyx_v_h_line, Py_NE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 634, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 634, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":635
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(line)
 *                 elif not invalid_lines:
 */
      __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 635, __pyx_L1_error)
      if (__pyx_t_6) {
      } else {
        __pyx_t_5 = __pyx_t_6;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_line, __pyx_v_invalid_lines, Py_NE)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 635, __pyx_L1_error)
      __pyx_t_9 = (__pyx_t_6 != 0);
      __pyx_t_5 = __pyx_t_9;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":636
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 *                     bottom_lines.append(line)             # <<<<<<<<<<<<<<
 *                 elif not invalid_lines:
 *                     bottom_lines.append(line)
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_bottom_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 636, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":635
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(line)
 *                 elif not invalid_lines:
 */
        goto __pyx_L8;
      }

      /* "table_extraction/utils_table_extraction.pyx":637
 *                 if invalid_lines and line not in invalid_lines:
 *                     bottom_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(line)
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_invalid_lines); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 637, __pyx_L1_error)
      __pyx_t_9 = ((!__pyx_t_5) != 0);
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":638
 *                     bottom_lines.append(line)
 *                 elif not invalid_lines:
 *                     bottom_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(bottom_lines) > 0:
 */
        __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_bottom_lines, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 638, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":637
 *                 if invalid_lines and line not in invalid_lines:
 *                     bottom_lines.append(line)
 *                 elif not invalid_lines:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(line)
 * 
 */
      }
      __pyx_L8:;

      /* "table_extraction/utils_table_extraction.pyx":634
 *         bottom_lines = []
 *         for line in h_lines:
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 if invalid_lines and line not in invalid_lines:
 *                     bottom_lines.append(line)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":633
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         bottom_lines = []
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line!=h_line and line.start_point[1] > h_line.start_point[1]:
 *                 if invalid_lines and line not in invalid_lines:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":640
 *                     bottom_lines.append(line)
 * 
 *         if len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             return bottom_lines[0]
 *         else:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_bottom_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 640, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":641
 * 
 *         if len(bottom_lines) > 0:
 *             return bottom_lines[0]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 641, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":640
 *                     bottom_lines.append(line)
 * 
 *         if len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             return bottom_lines[0]
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":643
 *             return bottom_lines[0]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":631
 * 
 *     @staticmethod
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 *         for line in h_lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_bottom_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_bottom_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":646
 * 
 *     @staticmethod
 *     def horizontal_neighbor_line(h_line, h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_line:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_81horizontal_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_80horizontal_neighbor_line[] = "\n        :param h_line:\n        :param h_lines:\n        :return: try to find neighbor horizontal line of input line.\n                The neighbor line is nearest line and does not connect to any others lines\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_81horizontal_neighbor_line = {"horizontal_neighbor_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_81horizontal_neighbor_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_80horizontal_neighbor_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_81horizontal_neighbor_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("horizontal_neighbor_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_h_lines,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_neighbor_line", 1, 2, 2, 1); __PYX_ERR(0, 646, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "horizontal_neighbor_line") < 0)) __PYX_ERR(0, 646, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_h_line = values[0];
    __pyx_v_h_lines = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("horizontal_neighbor_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 646, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_80horizontal_neighbor_line(__pyx_self, __pyx_v_h_line, __pyx_v_h_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_80horizontal_neighbor_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_h_lines) {
  PyObject *__pyx_v_top_lines = NULL;
  PyObject *__pyx_v_bottom_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("horizontal_neighbor_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":653
 *                 The neighbor line is nearest line and does not connect to any others lines
 *         """
 *         top_lines = []             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 653, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_top_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":654
 *         """
 *         top_lines = []
 *         bottom_lines = []             # <<<<<<<<<<<<<<
 * 
 *         for line in h_lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 654, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_bottom_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":656
 *         bottom_lines = []
 * 
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line.start_point[1] < h_line.start_point[1]:
 *                 top_lines.append(line)
 */
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_1 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 656, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 656, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 656, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 656, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 656, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 656, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 656, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":657
 * 
 *         for line in h_lines:
 *             if line.start_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 top_lines.append(line)
 *             elif line.start_point[1] > h_line.start_point[1]:
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_5, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 657, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":658
 *         for line in h_lines:
 *             if line.start_point[1] < h_line.start_point[1]:
 *                 top_lines.append(line)             # <<<<<<<<<<<<<<
 *             elif line.start_point[1] > h_line.start_point[1]:
 *                 bottom_lines.append(line)
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_top_lines, __pyx_v_line); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 658, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":657
 * 
 *         for line in h_lines:
 *             if line.start_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 top_lines.append(line)
 *             elif line.start_point[1] > h_line.start_point[1]:
 */
      goto __pyx_L5;
    }

    /* "table_extraction/utils_table_extraction.pyx":659
 *             if line.start_point[1] < h_line.start_point[1]:
 *                 top_lines.append(line)
 *             elif line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 bottom_lines.append(line)
 * 
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_5, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 659, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":660
 *                 top_lines.append(line)
 *             elif line.start_point[1] > h_line.start_point[1]:
 *                 bottom_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_bottom_lines, __pyx_v_line); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 660, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":659
 *             if line.start_point[1] < h_line.start_point[1]:
 *                 top_lines.append(line)
 *             elif line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                 bottom_lines.append(line)
 * 
 */
    }
    __pyx_L5:;

    /* "table_extraction/utils_table_extraction.pyx":656
 *         bottom_lines = []
 * 
 *         for line in h_lines:             # <<<<<<<<<<<<<<
 *             if line.start_point[1] < h_line.start_point[1]:
 *                 top_lines.append(line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":662
 *                 bottom_lines.append(line)
 * 
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:             # <<<<<<<<<<<<<<
 *             return top_lines[-1]
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_top_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 662, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_bottom_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 662, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 == 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L7_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":663
 * 
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:
 *             return top_lines[-1]             # <<<<<<<<<<<<<<
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 *             return bottom_lines[0]
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 663, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":662
 *                 bottom_lines.append(line)
 * 
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:             # <<<<<<<<<<<<<<
 *             return top_lines[-1]
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":664
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:
 *             return top_lines[-1]
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_top_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 664, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 == 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L9_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_bottom_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 664, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L9_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":665
 *             return top_lines[-1]
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 *             return bottom_lines[0]             # <<<<<<<<<<<<<<
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 665, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":664
 *         if len(top_lines) > 0 and len(bottom_lines) == 0:
 *             return top_lines[-1]
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":666
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 *                 return top_lines[-1]
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_top_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 666, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {
  } else {
    __pyx_t_7 = __pyx_t_9;
    goto __pyx_L11_bool_binop_done;
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_bottom_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 666, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  __pyx_t_7 = __pyx_t_9;
  __pyx_L11_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":667
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return top_lines[-1]
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 */
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_9) {
    } else {
      __pyx_t_7 = __pyx_t_9;
      goto __pyx_L14_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 667, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_10 = ((!__pyx_t_9) != 0);
    __pyx_t_7 = __pyx_t_10;
    __pyx_L14_bool_binop_done:;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":668
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 *                 return top_lines[-1]             # <<<<<<<<<<<<<<
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 *                 return bottom_lines[0]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 668, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":667
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return top_lines[-1]
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":669
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 *                 return top_lines[-1]
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0]
 *             if not h_line.connect_at_start_point:
 */
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_9 = ((!__pyx_t_10) != 0);
    if (__pyx_t_9) {
    } else {
      __pyx_t_7 = __pyx_t_9;
      goto __pyx_L17_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_connect_at_start_and_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 669, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_7 = __pyx_t_9;
    __pyx_L17_bool_binop_done:;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":670
 *                 return top_lines[-1]
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 *                 return bottom_lines[0]             # <<<<<<<<<<<<<<
 *             if not h_line.connect_at_start_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 670, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":669
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 *                 return top_lines[-1]
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0]
 *             if not h_line.connect_at_start_point:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":671
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 *                 return bottom_lines[0]
 *             if not h_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 *             if not h_line.connect_at_end_point:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 671, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 671, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_9 = ((!__pyx_t_7) != 0);
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":672
 *                 return bottom_lines[0]
 *             if not h_line.connect_at_start_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]             # <<<<<<<<<<<<<<
 *             if not h_line.connect_at_end_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] > top_lines[-1].end_point[0] else top_lines[-1]
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_end_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_6, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 672, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_9) {
        __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 672, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_1 = __pyx_t_6;
        __pyx_t_6 = 0;
      } else {
        __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 672, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_1 = __pyx_t_6;
        __pyx_t_6 = 0;
      }
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":671
 *             if not bottom_lines[0].connect_at_start_and_end_point() and top_lines[-1].connect_at_start_and_end_point():
 *                 return bottom_lines[0]
 *             if not h_line.connect_at_start_point:             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 *             if not h_line.connect_at_end_point:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":673
 *             if not h_line.connect_at_start_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 *             if not h_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] > top_lines[-1].end_point[0] else top_lines[-1]
 *         else:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 673, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 673, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_7 = ((!__pyx_t_9) != 0);
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":674
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 *             if not h_line.connect_at_end_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] > top_lines[-1].end_point[0] else top_lines[-1]             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_5, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 674, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_7) {
        __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 674, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_1 = __pyx_t_4;
        __pyx_t_4 = 0;
      } else {
        __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 674, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_1 = __pyx_t_4;
        __pyx_t_4 = 0;
      }
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":673
 *             if not h_line.connect_at_start_point:
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] < top_lines[-1].end_point[0] else top_lines[-1]
 *             if not h_line.connect_at_end_point:             # <<<<<<<<<<<<<<
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] > top_lines[-1].end_point[0] else top_lines[-1]
 *         else:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":666
 *         elif len(top_lines) == 0 and len(bottom_lines) > 0:
 *             return bottom_lines[0]
 *         elif len(top_lines) > 0 and len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             if bottom_lines[0].connect_at_start_and_end_point() and not top_lines[-1].connect_at_start_and_end_point():
 *                 return top_lines[-1]
 */
    goto __pyx_L6;
  }

  /* "table_extraction/utils_table_extraction.pyx":676
 *                 return bottom_lines[0] if bottom_lines[0].end_point[0] > top_lines[-1].end_point[0] else top_lines[-1]
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }
  __pyx_L6:;

  /* "table_extraction/utils_table_extraction.pyx":646
 * 
 *     @staticmethod
 *     def horizontal_neighbor_line(h_line, h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_line:
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_neighbor_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_top_lines);
  __Pyx_XDECREF(__pyx_v_bottom_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":679
 * 
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_83is_line_cut_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_83is_line_cut_rects = {"is_line_cut_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_83is_line_cut_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_83is_line_cut_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_line_cut_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_rects,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_neg_2));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_line_cut_rects", 0, 2, 4, 1); __PYX_ERR(0, 679, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_line_cut_rects") < 0)) __PYX_ERR(0, 679, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_rects = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_line_cut_rects", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 679, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_line_cut_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_82is_line_cut_rects(__pyx_self, __pyx_v_line, __pyx_v_rects, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_82is_line_cut_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_rect_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("is_line_cut_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":680
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_rect(rect, threshold)
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 */
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 680, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 680, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 680, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 680, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 680, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 680, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 680, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":681
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)             # <<<<<<<<<<<<<<
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 *             if Utils.rect_overlap_rect(rect_line, rect):
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 681, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 681, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_rect, __pyx_v_threshold};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 681, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_rect, __pyx_v_threshold};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 681, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 681, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_threshold);
      __Pyx_GIVEREF(__pyx_v_threshold);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_threshold);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 681, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":682
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)             # <<<<<<<<<<<<<<
 *             if Utils.rect_overlap_rect(rect_line, rect):
 *                 return True
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 682, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_convert_line_to_box); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 682, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 682, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_line);
    __Pyx_GIVEREF(__pyx_v_line);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_line);
    __pyx_t_8 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 682, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_threshold, __pyx_int_2) < 0) __PYX_ERR(0, 682, __pyx_L1_error)
    if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_orientation, __pyx_v_orientation) < 0) __PYX_ERR(0, 682, __pyx_L1_error)
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_4, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 682, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_XDECREF_SET(__pyx_v_rect_line, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":683
 *             rect = Utils.expand_rect(rect, threshold)
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 *             if Utils.rect_overlap_rect(rect_line, rect):             # <<<<<<<<<<<<<<
 *                 return True
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 683, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 683, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_rect_line, __pyx_v_rect};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_rect_line, __pyx_v_rect};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 683, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect_line);
      __Pyx_GIVEREF(__pyx_v_rect_line);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_v_rect_line);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_v_rect);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 683, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":684
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 *             if Utils.rect_overlap_rect(rect_line, rect):
 *                 return True             # <<<<<<<<<<<<<<
 * 
 *         return False
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":683
 *             rect = Utils.expand_rect(rect, threshold)
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 *             if Utils.rect_overlap_rect(rect_line, rect):             # <<<<<<<<<<<<<<
 *                 return True
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":680
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_rect(rect, threshold)
 *             rect_line = Utils.convert_line_to_box(line, threshold=2, orientation=orientation)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":686
 *                 return True
 * 
 *         return False             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":679
 * 
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_line_cut_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_rect_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":690
 * 
 *     @staticmethod
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 * 
 *         left_stop_line = None
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_85vertical_stop_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_85vertical_stop_line = {"vertical_stop_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_85vertical_stop_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_85vertical_stop_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_content_rects = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("vertical_stop_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_v_lines,&__pyx_n_s_content_rects,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[3] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_stop_line", 0, 3, 4, 1); __PYX_ERR(0, 690, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("vertical_stop_line", 0, 3, 4, 2); __PYX_ERR(0, 690, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "vertical_stop_line") < 0)) __PYX_ERR(0, 690, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_line = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_content_rects = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("vertical_stop_line", 0, 3, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 690, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_stop_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_84vertical_stop_line(__pyx_self, __pyx_v_h_line, __pyx_v_v_lines, __pyx_v_content_rects, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_84vertical_stop_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_content_rects, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_left_stop_line = NULL;
  PyObject *__pyx_v_right_stop_line = NULL;
  int __pyx_v_invalid_horizontal_line;
  PyObject *__pyx_v_left_lines = NULL;
  PyObject *__pyx_v_right_lines = NULL;
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_v_content_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  int __pyx_t_11;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("vertical_stop_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":692
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):
 * 
 *         left_stop_line = None             # <<<<<<<<<<<<<<
 *         right_stop_line = None
 *         invalid_horizontal_line = False
 */
  __Pyx_INCREF(Py_None);
  __pyx_v_left_stop_line = Py_None;

  /* "table_extraction/utils_table_extraction.pyx":693
 * 
 *         left_stop_line = None
 *         right_stop_line = None             # <<<<<<<<<<<<<<
 *         invalid_horizontal_line = False
 * 
 */
  __Pyx_INCREF(Py_None);
  __pyx_v_right_stop_line = Py_None;

  /* "table_extraction/utils_table_extraction.pyx":694
 *         left_stop_line = None
 *         right_stop_line = None
 *         invalid_horizontal_line = False             # <<<<<<<<<<<<<<
 * 
 *         left_lines = []
 */
  __pyx_v_invalid_horizontal_line = 0;

  /* "table_extraction/utils_table_extraction.pyx":696
 *         invalid_horizontal_line = False
 * 
 *         left_lines = []             # <<<<<<<<<<<<<<
 *         right_lines = []
 *         for v_line in v_lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 696, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_left_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":697
 * 
 *         left_lines = []
 *         right_lines = []             # <<<<<<<<<<<<<<
 *         for v_line in v_lines:
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 697, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_right_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":698
 *         left_lines = []
 *         right_lines = []
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 # Find the left stop line if horizontal line is not connected at start point
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 698, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 698, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 698, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 698, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 698, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 698, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 698, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":699
 *         right_lines = []
 *         for v_line in v_lines:
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *                 # Find the left stop line if horizontal line is not connected at start point
 *                 if not h_line.connect_at_start_point and v_line.start_point[0] < h_line.start_point[0]:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 699, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_horizontal_line_cut_vertical_lin); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 699, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_h_line, __pyx_v_v_line};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 699, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_h_line, __pyx_v_v_line};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 699, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 699, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_h_line);
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_v_line);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 699, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 699, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":701
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 # Find the left stop line if horizontal line is not connected at start point
 *                 if not h_line.connect_at_start_point and v_line.start_point[0] < h_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     left_lines.append(v_line)
 * 
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_11 = ((!__pyx_t_10) != 0);
      if (__pyx_t_11) {
      } else {
        __pyx_t_9 = __pyx_t_11;
        goto __pyx_L7_bool_binop_done;
      }
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 701, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_11;
      __pyx_L7_bool_binop_done:;
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":702
 *                 # Find the left stop line if horizontal line is not connected at start point
 *                 if not h_line.connect_at_start_point and v_line.start_point[0] < h_line.start_point[0]:
 *                     left_lines.append(v_line)             # <<<<<<<<<<<<<<
 * 
 *                 # Find the right stop line if horizontal line is not connected at end point
 */
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_v_line); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 702, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":701
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 # Find the left stop line if horizontal line is not connected at start point
 *                 if not h_line.connect_at_start_point and v_line.start_point[0] < h_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     left_lines.append(v_line)
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":705
 * 
 *                 # Find the right stop line if horizontal line is not connected at end point
 *                 if not h_line.connect_at_end_point and v_line.start_point[0] > h_line.end_point[0]:             # <<<<<<<<<<<<<<
 *                     right_lines.append(v_line)
 * 
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = ((!__pyx_t_11) != 0);
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L10_bool_binop_done;
      }
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 705, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_10;
      __pyx_L10_bool_binop_done:;
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":706
 *                 # Find the right stop line if horizontal line is not connected at end point
 *                 if not h_line.connect_at_end_point and v_line.start_point[0] > h_line.end_point[0]:
 *                     right_lines.append(v_line)             # <<<<<<<<<<<<<<
 * 
 *         if len(left_lines) > 0:
 */
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_v_line); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 706, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":705
 * 
 *                 # Find the right stop line if horizontal line is not connected at end point
 *                 if not h_line.connect_at_end_point and v_line.start_point[0] > h_line.end_point[0]:             # <<<<<<<<<<<<<<
 *                     right_lines.append(v_line)
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":699
 *         right_lines = []
 *         for v_line in v_lines:
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *                 # Find the left stop line if horizontal line is not connected at start point
 *                 if not h_line.connect_at_start_point and v_line.start_point[0] < h_line.start_point[0]:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":698
 *         left_lines = []
 *         right_lines = []
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             if Utils.horizontal_line_cut_vertical_line(h_line, v_line):
 *                 # Find the left stop line if horizontal line is not connected at start point
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":708
 *                     right_lines.append(v_line)
 * 
 *         if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *             left_stop_line = left_lines[-1]
 * 
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 708, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":709
 * 
 *         if len(left_lines) > 0:
 *             left_stop_line = left_lines[-1]             # <<<<<<<<<<<<<<
 * 
 *         if len(right_lines) > 0:
 */
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_left_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 709, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_left_stop_line, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":708
 *                     right_lines.append(v_line)
 * 
 *         if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *             left_stop_line = left_lines[-1]
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":711
 *             left_stop_line = left_lines[-1]
 * 
 *         if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             right_stop_line = right_lines[0]
 * 
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 711, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":712
 * 
 *         if len(right_lines) > 0:
 *             right_stop_line = right_lines[0]             # <<<<<<<<<<<<<<
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 */
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_right_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 712, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_right_stop_line, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":711
 *             left_stop_line = left_lines[-1]
 * 
 *         if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *             right_stop_line = right_lines[0]
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":715
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:             # <<<<<<<<<<<<<<
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 */
  if (likely(PyList_CheckExact(__pyx_v_content_rects)) || PyTuple_CheckExact(__pyx_v_content_rects)) {
    __pyx_t_1 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 715, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 715, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 715, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 715, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 715, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 715, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 715, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":716
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 */
    __pyx_t_9 = (__pyx_v_left_stop_line != Py_None);
    __pyx_t_10 = (__pyx_t_9 != 0);
    if (__pyx_t_10) {

      /* "table_extraction/utils_table_extraction.pyx":717
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_left_stop_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyObject_RichCompare(__pyx_t_6, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (__pyx_t_9) {
      } else {
        __pyx_t_10 = __pyx_t_9;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":718
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:             # <<<<<<<<<<<<<<
 *                         left_stop_line = None
 *                         invalid_horizontal_line = True
 */
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);

      /* "table_extraction/utils_table_extraction.pyx":717
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = PyNumber_Add(__pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 717, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_9) {
      } else {
        __pyx_t_10 = __pyx_t_9;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":718
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:             # <<<<<<<<<<<<<<
 *                         left_stop_line = None
 *                         invalid_horizontal_line = True
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 718, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyNumber_Add(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 718, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 718, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 718, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 718, __pyx_L1_error)
      if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
        __Pyx_DECREF(__pyx_t_4);
        __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 718, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_content_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 718, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_14 = PyNumber_Add(__pyx_t_5, __pyx_t_13); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 718, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __pyx_t_13 = PyNumber_Subtract(__pyx_t_14, __pyx_v_threshold); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 718, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_13, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 718, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 718, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __pyx_t_9;
      __pyx_L18_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":717
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None
 */
      if (__pyx_t_10) {

        /* "table_extraction/utils_table_extraction.pyx":719
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None             # <<<<<<<<<<<<<<
 *                         invalid_horizontal_line = True
 *                         h_line.connect_at_start_point = True
 */
        __Pyx_INCREF(Py_None);
        __Pyx_DECREF_SET(__pyx_v_left_stop_line, Py_None);

        /* "table_extraction/utils_table_extraction.pyx":720
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None
 *                         invalid_horizontal_line = True             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_start_point = True
 * 
 */
        __pyx_v_invalid_horizontal_line = 1;

        /* "table_extraction/utils_table_extraction.pyx":721
 *                         left_stop_line = None
 *                         invalid_horizontal_line = True
 *                         h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *             if right_stop_line is not None:
 */
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 721, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":717
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         left_stop_line = None
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":716
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:
 *             if left_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 *                     and content_rect[1] + threshold <= h_line.start_point[1] <= content_rect[1] + content_rect[3] - threshold:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":723
 *                         h_line.connect_at_start_point = True
 * 
 *             if right_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 */
    __pyx_t_10 = (__pyx_v_right_stop_line != Py_None);
    __pyx_t_9 = (__pyx_t_10 != 0);
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":724
 * 
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyObject_RichCompare(__pyx_t_6, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L23_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":725
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:             # <<<<<<<<<<<<<<
 *                         right_stop_line = None
 *                         invalid_horizontal_line = True
 */
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);

      /* "table_extraction/utils_table_extraction.pyx":724
 * 
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = PyNumber_Add(__pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_right_stop_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 724, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L23_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":725
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:             # <<<<<<<<<<<<<<
 *                         right_stop_line = None
 *                         invalid_horizontal_line = True
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 725, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyNumber_Add(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 725, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 725, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 725, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 725, __pyx_L1_error)
      if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
        __Pyx_DECREF(__pyx_t_4);
        __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 725, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_14 = __Pyx_GetItemInt(__pyx_v_content_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 725, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_5 = PyNumber_Add(__pyx_t_13, __pyx_t_14); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 725, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = PyNumber_Subtract(__pyx_t_5, __pyx_v_threshold); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 725, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_14, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 725, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 725, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_10;
      __pyx_L23_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":724
 * 
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None
 */
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":726
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None             # <<<<<<<<<<<<<<
 *                         invalid_horizontal_line = True
 *                         h_line.connect_at_end_point = True
 */
        __Pyx_INCREF(Py_None);
        __Pyx_DECREF_SET(__pyx_v_right_stop_line, Py_None);

        /* "table_extraction/utils_table_extraction.pyx":727
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None
 *                         invalid_horizontal_line = True             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_end_point = True
 * 
 */
        __pyx_v_invalid_horizontal_line = 1;

        /* "table_extraction/utils_table_extraction.pyx":728
 *                         right_stop_line = None
 *                         invalid_horizontal_line = True
 *                         h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *         return left_stop_line, right_stop_line, invalid_horizontal_line
 */
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 728, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":724
 * 
 *             if right_stop_line is not None:
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \             # <<<<<<<<<<<<<<
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 *                         right_stop_line = None
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":723
 *                         h_line.connect_at_start_point = True
 * 
 *             if right_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if h_line.end_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= right_stop_line.end_point[0] \
 *                     and content_rect[1] + threshold <= h_line.end_point[1] <= content_rect[1] + content_rect[3] - threshold:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":715
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:             # <<<<<<<<<<<<<<
 *             if left_stop_line is not None:
 *                 if left_stop_line.start_point[0] <= content_rect[0] and content_rect[0] + content_rect[2] <= h_line.start_point[0] \
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":730
 *                         h_line.connect_at_end_point = True
 * 
 *         return left_stop_line, right_stop_line, invalid_horizontal_line             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_invalid_horizontal_line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 730, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 730, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_v_left_stop_line);
  __Pyx_GIVEREF(__pyx_v_left_stop_line);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_left_stop_line);
  __Pyx_INCREF(__pyx_v_right_stop_line);
  __Pyx_GIVEREF(__pyx_v_right_stop_line);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_right_stop_line);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":690
 * 
 *     @staticmethod
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 * 
 *         left_stop_line = None
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.vertical_stop_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_left_stop_line);
  __Pyx_XDECREF(__pyx_v_right_stop_line);
  __Pyx_XDECREF(__pyx_v_left_lines);
  __Pyx_XDECREF(__pyx_v_right_lines);
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XDECREF(__pyx_v_content_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":733
 * 
 *     @staticmethod
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 *         top_stop_line = None
 *         bottom_stop_line = None
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_87horizontal_stop_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_87horizontal_stop_line = {"horizontal_stop_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_87horizontal_stop_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_87horizontal_stop_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_content_rects = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("horizontal_stop_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_v_line,&__pyx_n_s_h_lines,&__pyx_n_s_content_rects,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[3] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_stop_line", 0, 3, 4, 1); __PYX_ERR(0, 733, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("horizontal_stop_line", 0, 3, 4, 2); __PYX_ERR(0, 733, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "horizontal_stop_line") < 0)) __PYX_ERR(0, 733, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_v_line = values[0];
    __pyx_v_h_lines = values[1];
    __pyx_v_content_rects = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("horizontal_stop_line", 0, 3, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 733, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_stop_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_86horizontal_stop_line(__pyx_self, __pyx_v_v_line, __pyx_v_h_lines, __pyx_v_content_rects, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_86horizontal_stop_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_v_line, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_content_rects, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_top_stop_line = NULL;
  PyObject *__pyx_v_bottom_stop_line = NULL;
  int __pyx_v_invalid_vertical_line;
  PyObject *__pyx_v_top_lines = NULL;
  PyObject *__pyx_v_bottom_lines = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_v_content_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  int __pyx_t_11;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("horizontal_stop_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":734
 *     @staticmethod
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):
 *         top_stop_line = None             # <<<<<<<<<<<<<<
 *         bottom_stop_line = None
 *         invalid_vertical_line = False
 */
  __Pyx_INCREF(Py_None);
  __pyx_v_top_stop_line = Py_None;

  /* "table_extraction/utils_table_extraction.pyx":735
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):
 *         top_stop_line = None
 *         bottom_stop_line = None             # <<<<<<<<<<<<<<
 *         invalid_vertical_line = False
 * 
 */
  __Pyx_INCREF(Py_None);
  __pyx_v_bottom_stop_line = Py_None;

  /* "table_extraction/utils_table_extraction.pyx":736
 *         top_stop_line = None
 *         bottom_stop_line = None
 *         invalid_vertical_line = False             # <<<<<<<<<<<<<<
 * 
 *         top_lines = []
 */
  __pyx_v_invalid_vertical_line = 0;

  /* "table_extraction/utils_table_extraction.pyx":738
 *         invalid_vertical_line = False
 * 
 *         top_lines = []             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 *         for h_line in h_lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 738, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_top_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":739
 * 
 *         top_lines = []
 *         bottom_lines = []             # <<<<<<<<<<<<<<
 *         for h_line in h_lines:
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_bottom_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":740
 *         top_lines = []
 *         bottom_lines = []
 *         for h_line in h_lines:             # <<<<<<<<<<<<<<
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 # Find the top stop line if vertical line is not connected at start point
 */
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_1 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 740, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 740, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 740, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 740, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 740, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 740, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":741
 *         bottom_lines = []
 *         for h_line in h_lines:
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *                 # Find the top stop line if vertical line is not connected at start point
 *                 if not v_line.connect_at_start_point and v_line.start_point[1] > h_line.start_point[1]:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 741, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_vertical_line_cut_horiontal_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 741, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_v_line, __pyx_v_h_line};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 741, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_v_line, __pyx_v_h_line};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 741, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 741, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_v_line);
      __Pyx_GIVEREF(__pyx_v_v_line);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_v_line);
      __Pyx_INCREF(__pyx_v_h_line);
      __Pyx_GIVEREF(__pyx_v_h_line);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_h_line);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 741, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 741, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":743
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 # Find the top stop line if vertical line is not connected at start point
 *                 if not v_line.connect_at_start_point and v_line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     top_lines.append(h_line)
 * 
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_11 = ((!__pyx_t_10) != 0);
      if (__pyx_t_11) {
      } else {
        __pyx_t_9 = __pyx_t_11;
        goto __pyx_L7_bool_binop_done;
      }
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 743, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_11;
      __pyx_L7_bool_binop_done:;
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":744
 *                 # Find the top stop line if vertical line is not connected at start point
 *                 if not v_line.connect_at_start_point and v_line.start_point[1] > h_line.start_point[1]:
 *                     top_lines.append(h_line)             # <<<<<<<<<<<<<<
 * 
 *                 # Find the bottom stop line if vertical line is not connected at end point
 */
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_top_lines, __pyx_v_h_line); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 744, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":743
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 # Find the top stop line if vertical line is not connected at start point
 *                 if not v_line.connect_at_start_point and v_line.start_point[1] > h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     top_lines.append(h_line)
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":747
 * 
 *                 # Find the bottom stop line if vertical line is not connected at end point
 *                 if not v_line.connect_at_end_point and v_line.end_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(h_line)
 * 
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = ((!__pyx_t_11) != 0);
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L10_bool_binop_done;
      }
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 747, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_10;
      __pyx_L10_bool_binop_done:;
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":748
 *                 # Find the bottom stop line if vertical line is not connected at end point
 *                 if not v_line.connect_at_end_point and v_line.end_point[1] < h_line.start_point[1]:
 *                     bottom_lines.append(h_line)             # <<<<<<<<<<<<<<
 * 
 *         if len(top_lines) > 0:
 */
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_bottom_lines, __pyx_v_h_line); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 748, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":747
 * 
 *                 # Find the bottom stop line if vertical line is not connected at end point
 *                 if not v_line.connect_at_end_point and v_line.end_point[1] < h_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     bottom_lines.append(h_line)
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":741
 *         bottom_lines = []
 *         for h_line in h_lines:
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *                 # Find the top stop line if vertical line is not connected at start point
 *                 if not v_line.connect_at_start_point and v_line.start_point[1] > h_line.start_point[1]:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":740
 *         top_lines = []
 *         bottom_lines = []
 *         for h_line in h_lines:             # <<<<<<<<<<<<<<
 *             if Utils.vertical_line_cut_horiontal_line(v_line, h_line):
 *                 # Find the top stop line if vertical line is not connected at start point
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":750
 *                     bottom_lines.append(h_line)
 * 
 *         if len(top_lines) > 0:             # <<<<<<<<<<<<<<
 *             top_stop_line = top_lines[-1]
 * 
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_top_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 750, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":751
 * 
 *         if len(top_lines) > 0:
 *             top_stop_line = top_lines[-1]             # <<<<<<<<<<<<<<
 * 
 *         if len(bottom_lines) > 0:
 */
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_top_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 751, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_top_stop_line, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":750
 *                     bottom_lines.append(h_line)
 * 
 *         if len(top_lines) > 0:             # <<<<<<<<<<<<<<
 *             top_stop_line = top_lines[-1]
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":753
 *             top_stop_line = top_lines[-1]
 * 
 *         if len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             bottom_stop_line = bottom_lines[0]
 * 
 */
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_bottom_lines); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 753, __pyx_L1_error)
  __pyx_t_9 = ((__pyx_t_2 > 0) != 0);
  if (__pyx_t_9) {

    /* "table_extraction/utils_table_extraction.pyx":754
 * 
 *         if len(bottom_lines) > 0:
 *             bottom_stop_line = bottom_lines[0]             # <<<<<<<<<<<<<<
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 */
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_bottom_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 754, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF_SET(__pyx_v_bottom_stop_line, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":753
 *             top_stop_line = top_lines[-1]
 * 
 *         if len(bottom_lines) > 0:             # <<<<<<<<<<<<<<
 *             bottom_stop_line = bottom_lines[0]
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":757
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:             # <<<<<<<<<<<<<<
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 */
  if (likely(PyList_CheckExact(__pyx_v_content_rects)) || PyTuple_CheckExact(__pyx_v_content_rects)) {
    __pyx_t_1 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 757, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 757, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 757, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 757, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 757, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 757, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 757, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":758
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 */
    __pyx_t_9 = (__pyx_v_top_stop_line != Py_None);
    __pyx_t_10 = (__pyx_t_9 != 0);
    if (__pyx_t_10) {

      /* "table_extraction/utils_table_extraction.pyx":759
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_top_stop_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyObject_RichCompare(__pyx_t_6, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (__pyx_t_9) {
      } else {
        __pyx_t_10 = __pyx_t_9;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":760
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:             # <<<<<<<<<<<<<<
 *                         top_stop_line = None
 *                         v_line.connect_at_start_point = True
 */
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);

      /* "table_extraction/utils_table_extraction.pyx":759
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = PyNumber_Add(__pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 759, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_9) {
      } else {
        __pyx_t_10 = __pyx_t_9;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":760
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:             # <<<<<<<<<<<<<<
 *                         top_stop_line = None
 *                         v_line.connect_at_start_point = True
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 760, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyNumber_Add(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 760, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 760, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 760, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 760, __pyx_L1_error)
      if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
        __Pyx_DECREF(__pyx_t_4);
        __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 760, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_content_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 760, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_14 = PyNumber_Add(__pyx_t_5, __pyx_t_13); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 760, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __pyx_t_13 = PyNumber_Subtract(__pyx_t_14, __pyx_v_threshold); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 760, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_13, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 760, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 760, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __pyx_t_9;
      __pyx_L18_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":759
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None
 */
      if (__pyx_t_10) {

        /* "table_extraction/utils_table_extraction.pyx":761
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_start_point = True
 *                         invalid_vertical_line = True
 */
        __Pyx_INCREF(Py_None);
        __Pyx_DECREF_SET(__pyx_v_top_stop_line, Py_None);

        /* "table_extraction/utils_table_extraction.pyx":762
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None
 *                         v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                         invalid_vertical_line = True
 * 
 */
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 762, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":763
 *                         top_stop_line = None
 *                         v_line.connect_at_start_point = True
 *                         invalid_vertical_line = True             # <<<<<<<<<<<<<<
 * 
 *             if bottom_stop_line is not None:
 */
        __pyx_v_invalid_vertical_line = 1;

        /* "table_extraction/utils_table_extraction.pyx":759
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         top_stop_line = None
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":758
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:
 *             if top_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 *                     and content_rect[0] + threshold <= v_line.start_point[0] <= content_rect[0] + content_rect[2] - threshold:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":765
 *                         invalid_vertical_line = True
 * 
 *             if bottom_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 */
    __pyx_t_10 = (__pyx_v_bottom_stop_line != Py_None);
    __pyx_t_9 = (__pyx_t_10 != 0);
    if (__pyx_t_9) {

      /* "table_extraction/utils_table_extraction.pyx":766
 * 
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyObject_RichCompare(__pyx_t_6, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L23_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":767
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:             # <<<<<<<<<<<<<<
 *                         bottom_stop_line = None
 *                         v_line.connect_at_end_point = True
 */
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_content_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);

      /* "table_extraction/utils_table_extraction.pyx":766
 * 
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = PyNumber_Add(__pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_bottom_stop_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_8, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 766, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L23_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":767
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:             # <<<<<<<<<<<<<<
 *                         bottom_stop_line = None
 *                         v_line.connect_at_end_point = True
 */
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 767, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = PyNumber_Add(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 767, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 767, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 767, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 767, __pyx_L1_error)
      if (__Pyx_PyObject_IsTrue(__pyx_t_4)) {
        __Pyx_DECREF(__pyx_t_4);
        __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_content_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 767, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __pyx_t_14 = __Pyx_GetItemInt(__pyx_v_content_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 767, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __pyx_t_5 = PyNumber_Add(__pyx_t_13, __pyx_t_14); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 767, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __pyx_t_14 = PyNumber_Subtract(__pyx_t_5, __pyx_v_threshold); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 767, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_t_14, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 767, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 767, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_9 = __pyx_t_10;
      __pyx_L23_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":766
 * 
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None
 */
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":768
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_end_point = True
 *                         invalid_vertical_line = True
 */
        __Pyx_INCREF(Py_None);
        __Pyx_DECREF_SET(__pyx_v_bottom_stop_line, Py_None);

        /* "table_extraction/utils_table_extraction.pyx":769
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None
 *                         v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                         invalid_vertical_line = True
 * 
 */
        if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 769, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":770
 *                         bottom_stop_line = None
 *                         v_line.connect_at_end_point = True
 *                         invalid_vertical_line = True             # <<<<<<<<<<<<<<
 * 
 *         return top_stop_line, bottom_stop_line, invalid_vertical_line
 */
        __pyx_v_invalid_vertical_line = 1;

        /* "table_extraction/utils_table_extraction.pyx":766
 * 
 *             if bottom_stop_line is not None:
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \             # <<<<<<<<<<<<<<
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 *                         bottom_stop_line = None
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":765
 *                         invalid_vertical_line = True
 * 
 *             if bottom_stop_line is not None:             # <<<<<<<<<<<<<<
 *                 if v_line.end_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= bottom_stop_line.end_point[1] \
 *                     and content_rect[0] + threshold <= v_line.end_point[0] <= content_rect[0] + content_rect[2] - threshold:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":757
 * 
 *         # Make sure the expanding not cut any content blocks. In case the line cut a content blocks, stop it.
 *         for content_rect in content_rects:             # <<<<<<<<<<<<<<
 *             if top_stop_line is not None:
 *                 if top_stop_line.start_point[1] <= content_rect[1] and content_rect[1] + content_rect[3] <= v_line.start_point[1] \
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":772
 *                         invalid_vertical_line = True
 * 
 *         return top_stop_line, bottom_stop_line, invalid_vertical_line             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyBool_FromLong(__pyx_v_invalid_vertical_line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 772, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 772, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_v_top_stop_line);
  __Pyx_GIVEREF(__pyx_v_top_stop_line);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_top_stop_line);
  __Pyx_INCREF(__pyx_v_bottom_stop_line);
  __Pyx_GIVEREF(__pyx_v_bottom_stop_line);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_bottom_stop_line);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":733
 * 
 *     @staticmethod
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 *         top_stop_line = None
 *         bottom_stop_line = None
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.horizontal_stop_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_top_stop_line);
  __Pyx_XDECREF(__pyx_v_bottom_stop_line);
  __Pyx_XDECREF(__pyx_v_top_lines);
  __Pyx_XDECREF(__pyx_v_bottom_lines);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XDECREF(__pyx_v_content_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":775
 * 
 *     @staticmethod
 *     def line_pairs(h_single_lines, v_single_lines, distance_threshold=20, ratio_threshold=0.1):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_single_lines: the list of horizontal lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_89line_pairs(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_88line_pairs[] = "\n        :param h_single_lines: the list of horizontal lines\n        :param v_single_lines: the list of vertical lines\n        :param distance_threshold: deviation between start point of the line\n        :param ratio_threshold: ratio of the length of the line\n        :return: these pair lines.\n                -------------\n\n                                -----> this is horizontal pair line\n\n                -------------\n\n                or\n\n                |             |\n                |             |\n                |             | -----> this is vertical pair line\n                |             |\n                |             |\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_89line_pairs = {"line_pairs", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_89line_pairs, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_88line_pairs};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_89line_pairs(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_single_lines = 0;
  PyObject *__pyx_v_v_single_lines = 0;
  PyObject *__pyx_v_distance_threshold = 0;
  PyObject *__pyx_v_ratio_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_pairs (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_single_lines,&__pyx_n_s_v_single_lines,&__pyx_n_s_distance_threshold,&__pyx_n_s_ratio_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_20));
    values[3] = ((PyObject *)((PyObject*)__pyx_float_0_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_single_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_single_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_pairs", 0, 2, 4, 1); __PYX_ERR(0, 775, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_distance_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_ratio_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_pairs") < 0)) __PYX_ERR(0, 775, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_single_lines = values[0];
    __pyx_v_v_single_lines = values[1];
    __pyx_v_distance_threshold = values[2];
    __pyx_v_ratio_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_pairs", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 775, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_pairs", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_88line_pairs(__pyx_self, __pyx_v_h_single_lines, __pyx_v_v_single_lines, __pyx_v_distance_threshold, __pyx_v_ratio_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_88line_pairs(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_single_lines, PyObject *__pyx_v_v_single_lines, PyObject *__pyx_v_distance_threshold, PyObject *__pyx_v_ratio_threshold) {
  PyObject *__pyx_v_h_line_pairs = NULL;
  PyObject *__pyx_v_v_line_pairs = NULL;
  PyObject *__pyx_v_line_pair = NULL;
  PyObject *__pyx_v_a_line = NULL;
  PyObject *__pyx_v_b_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *(*__pyx_t_7)(PyObject *);
  int __pyx_t_8;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("line_pairs", 0);

  /* "table_extraction/utils_table_extraction.pyx":796
 *                 |             |
 *         """
 *         h_line_pairs = []             # <<<<<<<<<<<<<<
 *         v_line_pairs = []
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 796, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_h_line_pairs = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":797
 *         """
 *         h_line_pairs = []
 *         v_line_pairs = []             # <<<<<<<<<<<<<<
 * 
 *         for line_pair in itertools.combinations(h_single_lines, r=2):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 797, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_v_line_pairs = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":799
 *         v_line_pairs = []
 * 
 *         for line_pair in itertools.combinations(h_single_lines, r=2):             # <<<<<<<<<<<<<<
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 */
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_itertools); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_combinations); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_single_lines);
  __Pyx_GIVEREF(__pyx_v_h_single_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_single_lines);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_r, __pyx_int_2) < 0) __PYX_ERR(0, 799, __pyx_L1_error)
  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
    __pyx_t_3 = __pyx_t_4; __Pyx_INCREF(__pyx_t_3); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 799, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 799, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_4); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 799, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 799, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_5); __Pyx_INCREF(__pyx_t_4); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 799, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_3, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 799, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_6(__pyx_t_3);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 799, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line_pair, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":800
 * 
 *         for line_pair in itertools.combinations(h_single_lines, r=2):
 *             a_line, b_line = line_pair             # <<<<<<<<<<<<<<
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 if a_line.start_point[1] < b_line.start_point[1]:
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_line_pair))) || (PyList_CheckExact(__pyx_v_line_pair))) {
      PyObject* sequence = __pyx_v_line_pair;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 800, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_1 = PyTuple_GET_ITEM(sequence, 1); 
      } else {
        __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_1 = PyList_GET_ITEM(sequence, 1); 
      }
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      #else
      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 800, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_1 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 800, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      #endif
    } else {
      Py_ssize_t index = -1;
      __pyx_t_2 = PyObject_GetIter(__pyx_v_line_pair); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 800, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_7 = Py_TYPE(__pyx_t_2)->tp_iternext;
      index = 0; __pyx_t_4 = __pyx_t_7(__pyx_t_2); if (unlikely(!__pyx_t_4)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_4);
      index = 1; __pyx_t_1 = __pyx_t_7(__pyx_t_2); if (unlikely(!__pyx_t_1)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_1);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_2), 2) < 0) __PYX_ERR(0, 800, __pyx_L1_error)
      __pyx_t_7 = NULL;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L6_unpacking_done;
      __pyx_L5_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_7 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 800, __pyx_L1_error)
      __pyx_L6_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_a_line, __pyx_t_4);
    __pyx_t_4 = 0;
    __Pyx_XDECREF_SET(__pyx_v_b_line, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":801
 *         for line_pair in itertools.combinations(h_single_lines, r=2):
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:             # <<<<<<<<<<<<<<
 *                 if a_line.start_point[1] < b_line.start_point[1]:
 *                     h_line_pairs.append((a_line, b_line))
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Subtract(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_distance_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_9) {
    } else {
      __pyx_t_8 = __pyx_t_9;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_length); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_length); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_10 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_10)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_10);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_2 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyInt_SubtractObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_ratio_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 801, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_8 = __pyx_t_9;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_8) {

      /* "table_extraction/utils_table_extraction.pyx":802
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 if a_line.start_point[1] < b_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     h_line_pairs.append((a_line, b_line))
 *                 else:
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_1, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 802, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":803
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 if a_line.start_point[1] < b_line.start_point[1]:
 *                     h_line_pairs.append((a_line, b_line))             # <<<<<<<<<<<<<<
 *                 else:
 *                     h_line_pairs.append((b_line, a_line))
 */
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 803, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_a_line);
        __Pyx_GIVEREF(__pyx_v_a_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_a_line);
        __Pyx_INCREF(__pyx_v_b_line);
        __Pyx_GIVEREF(__pyx_v_b_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_b_line);
        __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_h_line_pairs, __pyx_t_2); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 803, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":802
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 if a_line.start_point[1] < b_line.start_point[1]:             # <<<<<<<<<<<<<<
 *                     h_line_pairs.append((a_line, b_line))
 *                 else:
 */
        goto __pyx_L10;
      }

      /* "table_extraction/utils_table_extraction.pyx":805
 *                     h_line_pairs.append((a_line, b_line))
 *                 else:
 *                     h_line_pairs.append((b_line, a_line))             # <<<<<<<<<<<<<<
 * 
 *         for line_pair in itertools.combinations(v_single_lines, r=2):
 */
      /*else*/ {
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 805, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_b_line);
        __Pyx_GIVEREF(__pyx_v_b_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_b_line);
        __Pyx_INCREF(__pyx_v_a_line);
        __Pyx_GIVEREF(__pyx_v_a_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_a_line);
        __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_h_line_pairs, __pyx_t_2); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 805, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L10:;

      /* "table_extraction/utils_table_extraction.pyx":801
 *         for line_pair in itertools.combinations(h_single_lines, r=2):
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:             # <<<<<<<<<<<<<<
 *                 if a_line.start_point[1] < b_line.start_point[1]:
 *                     h_line_pairs.append((a_line, b_line))
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":799
 *         v_line_pairs = []
 * 
 *         for line_pair in itertools.combinations(h_single_lines, r=2):             # <<<<<<<<<<<<<<
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":807
 *                     h_line_pairs.append((b_line, a_line))
 * 
 *         for line_pair in itertools.combinations(v_single_lines, r=2):             # <<<<<<<<<<<<<<
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_itertools); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_combinations); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_v_single_lines);
  __Pyx_GIVEREF(__pyx_v_v_single_lines);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_v_single_lines);
  __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_r, __pyx_int_2) < 0) __PYX_ERR(0, 807, __pyx_L1_error)
  __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 807, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
    __pyx_t_1 = __pyx_t_4; __Pyx_INCREF(__pyx_t_1); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 807, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_6 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 807, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_5); __Pyx_INCREF(__pyx_t_4); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 807, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 807, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_5); __Pyx_INCREF(__pyx_t_4); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 807, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 807, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_6(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 807, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line_pair, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":808
 * 
 *         for line_pair in itertools.combinations(v_single_lines, r=2):
 *             a_line, b_line = line_pair             # <<<<<<<<<<<<<<
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 v_line_pairs.append((a_line, b_line))
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_line_pair))) || (PyList_CheckExact(__pyx_v_line_pair))) {
      PyObject* sequence = __pyx_v_line_pair;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 808, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      } else {
        __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      }
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_3);
      #else
      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 808, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 808, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      #endif
    } else {
      Py_ssize_t index = -1;
      __pyx_t_2 = PyObject_GetIter(__pyx_v_line_pair); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 808, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_7 = Py_TYPE(__pyx_t_2)->tp_iternext;
      index = 0; __pyx_t_4 = __pyx_t_7(__pyx_t_2); if (unlikely(!__pyx_t_4)) goto __pyx_L13_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_4);
      index = 1; __pyx_t_3 = __pyx_t_7(__pyx_t_2); if (unlikely(!__pyx_t_3)) goto __pyx_L13_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_3);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_2), 2) < 0) __PYX_ERR(0, 808, __pyx_L1_error)
      __pyx_t_7 = NULL;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L14_unpacking_done;
      __pyx_L13_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_7 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 808, __pyx_L1_error)
      __pyx_L14_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_a_line, __pyx_t_4);
    __pyx_t_4 = 0;
    __Pyx_XDECREF_SET(__pyx_v_b_line, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":809
 *         for line_pair in itertools.combinations(v_single_lines, r=2):
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:             # <<<<<<<<<<<<<<
 *                 v_line_pairs.append((a_line, b_line))
 *                 if a_line.start_point[0] < b_line.start_point[0]:
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_distance_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_9) {
    } else {
      __pyx_t_8 = __pyx_t_9;
      goto __pyx_L16_bool_binop_done;
    }
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_length); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_length); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_10 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_10)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_10);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_2 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyInt_SubtractObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_ratio_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_8 = __pyx_t_9;
    __pyx_L16_bool_binop_done:;
    if (__pyx_t_8) {

      /* "table_extraction/utils_table_extraction.pyx":810
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 v_line_pairs.append((a_line, b_line))             # <<<<<<<<<<<<<<
 *                 if a_line.start_point[0] < b_line.start_point[0]:
 *                     v_line_pairs.append((a_line, b_line))
 */
      __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 810, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_v_a_line);
      __Pyx_GIVEREF(__pyx_v_a_line);
      PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_a_line);
      __Pyx_INCREF(__pyx_v_b_line);
      __Pyx_GIVEREF(__pyx_v_b_line);
      PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_b_line);
      __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_v_line_pairs, __pyx_t_2); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 810, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":811
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 v_line_pairs.append((a_line, b_line))
 *                 if a_line.start_point[0] < b_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     v_line_pairs.append((a_line, b_line))
 *                 else:
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 811, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_8) {

        /* "table_extraction/utils_table_extraction.pyx":812
 *                 v_line_pairs.append((a_line, b_line))
 *                 if a_line.start_point[0] < b_line.start_point[0]:
 *                     v_line_pairs.append((a_line, b_line))             # <<<<<<<<<<<<<<
 *                 else:
 *                     v_line_pairs.append((b_line, a_line))
 */
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_a_line);
        __Pyx_GIVEREF(__pyx_v_a_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_a_line);
        __Pyx_INCREF(__pyx_v_b_line);
        __Pyx_GIVEREF(__pyx_v_b_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_b_line);
        __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_v_line_pairs, __pyx_t_2); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 812, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "table_extraction/utils_table_extraction.pyx":811
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 *                 v_line_pairs.append((a_line, b_line))
 *                 if a_line.start_point[0] < b_line.start_point[0]:             # <<<<<<<<<<<<<<
 *                     v_line_pairs.append((a_line, b_line))
 *                 else:
 */
        goto __pyx_L18;
      }

      /* "table_extraction/utils_table_extraction.pyx":814
 *                     v_line_pairs.append((a_line, b_line))
 *                 else:
 *                     v_line_pairs.append((b_line, a_line))             # <<<<<<<<<<<<<<
 * 
 *         return h_line_pairs, v_line_pairs
 */
      /*else*/ {
        __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 814, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_INCREF(__pyx_v_b_line);
        __Pyx_GIVEREF(__pyx_v_b_line);
        PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_b_line);
        __Pyx_INCREF(__pyx_v_a_line);
        __Pyx_GIVEREF(__pyx_v_a_line);
        PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_a_line);
        __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_v_line_pairs, __pyx_t_2); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 814, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __pyx_L18:;

      /* "table_extraction/utils_table_extraction.pyx":809
 *         for line_pair in itertools.combinations(v_single_lines, r=2):
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:             # <<<<<<<<<<<<<<
 *                 v_line_pairs.append((a_line, b_line))
 *                 if a_line.start_point[0] < b_line.start_point[0]:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":807
 *                     h_line_pairs.append((b_line, a_line))
 * 
 *         for line_pair in itertools.combinations(v_single_lines, r=2):             # <<<<<<<<<<<<<<
 *             a_line, b_line = line_pair
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) <= distance_threshold and abs(a_line.length() / b_line.length() - 1) <= ratio_threshold:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":816
 *                     v_line_pairs.append((b_line, a_line))
 * 
 *         return h_line_pairs, v_line_pairs             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 816, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_line_pairs);
  __Pyx_GIVEREF(__pyx_v_h_line_pairs);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_line_pairs);
  __Pyx_INCREF(__pyx_v_v_line_pairs);
  __Pyx_GIVEREF(__pyx_v_v_line_pairs);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_v_line_pairs);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":775
 * 
 *     @staticmethod
 *     def line_pairs(h_single_lines, v_single_lines, distance_threshold=20, ratio_threshold=0.1):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_single_lines: the list of horizontal lines
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_pairs", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_line_pairs);
  __Pyx_XDECREF(__pyx_v_v_line_pairs);
  __Pyx_XDECREF(__pyx_v_line_pair);
  __Pyx_XDECREF(__pyx_v_a_line);
  __Pyx_XDECREF(__pyx_v_b_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":819
 * 
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):             # <<<<<<<<<<<<<<
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_91connect_at_corner(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_91connect_at_corner = {"connect_at_corner", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_91connect_at_corner, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_91connect_at_corner(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_line = 0;
  PyObject *__pyx_v_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("connect_at_corner (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_line,&__pyx_n_s_v_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_60));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("connect_at_corner", 0, 2, 3, 1); __PYX_ERR(0, 819, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "connect_at_corner") < 0)) __PYX_ERR(0, 819, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_line = values[0];
    __pyx_v_v_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("connect_at_corner", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 819, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.connect_at_corner", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_90connect_at_corner(__pyx_self, __pyx_v_h_line, __pyx_v_v_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_90connect_at_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_line, PyObject *__pyx_v_v_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("connect_at_corner", 0);

  /* "table_extraction/utils_table_extraction.pyx":820
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \
 */
  __Pyx_XDECREF(__pyx_r);

  /* "table_extraction/utils_table_extraction.pyx":821
 *     def connect_at_corner(h_line, v_line, threshold=60):
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \             # <<<<<<<<<<<<<<
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.end_point) <= threshold
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 820, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":820
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \
 */
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 820, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 820, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 820, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_5};
    __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 820, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_3, __pyx_t_5};
    __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 820, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 820, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_6) {
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_5);
    __pyx_t_3 = 0;
    __pyx_t_5 = 0;
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_8, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 820, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 820, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 820, __pyx_L1_error)
  if (!__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L3_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":821
 *     def connect_at_corner(h_line, v_line, threshold=60):
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \             # <<<<<<<<<<<<<<
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.end_point) <= threshold
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 821, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 821, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 821, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 821, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_3 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_8);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_8, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_2, __pyx_t_5};
    __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 821, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_2, __pyx_t_5};
    __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 821, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 821, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_6, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 821, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 821, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 821, __pyx_L1_error)
  if (!__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_8);
    __pyx_t_1 = __pyx_t_8;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    goto __pyx_L3_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":822
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \             # <<<<<<<<<<<<<<
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.end_point) <= threshold
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 822, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 822, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 822, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 822, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_2 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 822, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 822, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 822, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 822, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_8, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 822, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 822, __pyx_L1_error)
  if (!__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_1 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L3_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":823
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.end_point) <= threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_8, __pyx_t_5};
    __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 823, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_8, __pyx_t_5};
    __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 823, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 823, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_8);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_7, __pyx_t_8);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_7, __pyx_t_5);
    __pyx_t_8 = 0;
    __pyx_t_5 = 0;
    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_2, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 823, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_6, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 823, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_1 = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":819
 * 
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):             # <<<<<<<<<<<<<<
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.connect_at_corner", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":826
 * 
 *     @staticmethod
 *     def stop_point_at_top(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the top
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_93stop_point_at_top(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_92stop_point_at_top[] = "Find the stop point for divider line at the top\n        If the divider line cut a column, the stop point will be the point with the neast table horizontal line,\n        otherwise the stop point will be at the table top border\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_93stop_point_at_top = {"stop_point_at_top", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_93stop_point_at_top, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_92stop_point_at_top};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_93stop_point_at_top(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_table = 0;
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("stop_point_at_top (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_table,&__pyx_n_s_point,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_table)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("stop_point_at_top", 1, 2, 2, 1); __PYX_ERR(0, 826, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "stop_point_at_top") < 0)) __PYX_ERR(0, 826, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_table = values[0];
    __pyx_v_point = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("stop_point_at_top", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 826, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_92stop_point_at_top(__pyx_self, __pyx_v_table, __pyx_v_point);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":833
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_lambda8(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_lambda8 = {"lambda8", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_lambda8, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_lambda8(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda8 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda8(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda8(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda8", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top.lambda8", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":839
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] > rect[1]]
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()             # <<<<<<<<<<<<<<
 * 
 *                 # Create a temp line list to keep all lines above/below point (Y postion)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_1lambda9(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_1lambda9 = {"lambda9", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_1lambda9, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_1lambda9(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda9 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda9(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda9(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda9", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 839, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 839, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top.lambda9", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":851
 * 
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_2lambda10(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_2lambda10 = {"lambda10", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_2lambda10, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_2lambda10(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda10 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda10(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda10(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda10", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 851, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 851, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top.lambda10", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":859
 * 
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_3lambda11(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_3lambda11 = {"lambda11", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_3lambda11, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_3lambda11(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda11 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda11(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda11(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda11", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 859, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 859, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top.lambda11", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":826
 * 
 *     @staticmethod
 *     def stop_point_at_top(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the top
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_92stop_point_at_top(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point) {
  PyObject *__pyx_v_threshold = NULL;
  PyObject *__pyx_v_content_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_h_lines = NULL;
  PyObject *__pyx_v_upper_lines = NULL;
  PyObject *__pyx_v_lower_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_lines = NULL;
  PyObject *__pyx_v_top_point = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("stop_point_at_top", 0);

  /* "table_extraction/utils_table_extraction.pyx":831
 *         otherwise the stop point will be at the table top border
 *         """
 *         threshold = 5             # <<<<<<<<<<<<<<
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)
 */
  __Pyx_INCREF(__pyx_int_5);
  __pyx_v_threshold = __pyx_int_5;

  /* "table_extraction/utils_table_extraction.pyx":832
 *         """
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]             # <<<<<<<<<<<<<<
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)
 *         for rect in content_rects:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 832, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_content_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 832, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 832, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 832, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 832, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 832, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 832, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 832, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 832, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 832, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 832, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_content_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":833
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_rects, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_lambda8, 0, __pyx_n_s_Utils_stop_point_at_top_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 833, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 833, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":834
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and rect[1] + rect[3] - threshold <= point[1]:
 */
  __pyx_t_2 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 834, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 834, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":836
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and rect[1] + rect[3] - threshold <= point[1]:             # <<<<<<<<<<<<<<
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] > rect[1]]
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 836, __pyx_L1_error)
    if (__Pyx_PyObject_IsTrue(__pyx_t_7)) {
      __Pyx_DECREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 836, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 836, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = PyNumber_Add(__pyx_t_8, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 836, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyNumber_Subtract(__pyx_t_10, __pyx_v_threshold); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 836, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_9, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 836, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_11) {
    } else {
      __pyx_t_6 = __pyx_t_11;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_7, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_1, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 836, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __pyx_t_11;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":838
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and rect[1] + rect[3] - threshold <= point[1]:
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] > rect[1]]             # <<<<<<<<<<<<<<
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()
 * 
 */
      __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 838, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_horizontal_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 838, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
        __pyx_t_3 = __pyx_t_1; __Pyx_INCREF(__pyx_t_3); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 838, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_3))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 838, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 838, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 838, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 838, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          }
        } else {
          __pyx_t_1 = __pyx_t_5(__pyx_t_3);
          if (unlikely(!__pyx_t_1)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 838, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_1);
        }
        __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_1);
        __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_10 = PyObject_RichCompare(__pyx_t_9, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 838, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {
          if (unlikely(__Pyx_ListComp_Append(__pyx_t_7, (PyObject*)__pyx_v_h_line))) __PYX_ERR(0, 838, __pyx_L1_error)
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_h_lines = __pyx_t_7;
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":839
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] > rect[1]]
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()             # <<<<<<<<<<<<<<
 * 
 *                 # Create a temp line list to keep all lines above/below point (Y postion)
 */
      __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_h_lines);
      __Pyx_GIVEREF(__pyx_v_h_lines);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_h_lines);
      __pyx_t_10 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_1lambda9, 0, __pyx_n_s_Utils_stop_point_at_top_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_key, __pyx_t_1) < 0) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_3, __pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_copy); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_10);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_10, function);
        }
      }
      __pyx_t_7 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 839, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":842
 * 
 *                 # Create a temp line list to keep all lines above/below point (Y postion)
 *                 upper_lines = []             # <<<<<<<<<<<<<<
 *                 lower_lines = []
 *                 for line in h_lines:
 */
      __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 842, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_v_upper_lines = ((PyObject*)__pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":843
 *                 # Create a temp line list to keep all lines above/below point (Y postion)
 *                 upper_lines = []
 *                 lower_lines = []             # <<<<<<<<<<<<<<
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:
 */
      __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 843, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_v_lower_lines = ((PyObject*)__pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":844
 *                 upper_lines = []
 *                 lower_lines = []
 *                 for line in h_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)
 */
      if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
        __pyx_t_7 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_7); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 844, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_5 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 844, __pyx_L1_error)
      }
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_7))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_12); __Pyx_INCREF(__pyx_t_10); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 844, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_7, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 844, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_12); __Pyx_INCREF(__pyx_t_10); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 844, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_7, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 844, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          }
        } else {
          __pyx_t_10 = __pyx_t_5(__pyx_t_7);
          if (unlikely(!__pyx_t_10)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 844, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_10);
        }
        __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":845
 *                 lower_lines = []
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:             # <<<<<<<<<<<<<<
 *                         upper_lines.append(line)
 *                     else:
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 845, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_10, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 845, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 845, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_10, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 845, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 845, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":846
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)             # <<<<<<<<<<<<<<
 *                     else:
 *                         lower_lines.append(line)
 */
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_upper_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 846, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":845
 *                 lower_lines = []
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:             # <<<<<<<<<<<<<<
 *                         upper_lines.append(line)
 *                     else:
 */
          goto __pyx_L15;
        }

        /* "table_extraction/utils_table_extraction.pyx":848
 *                         upper_lines.append(line)
 *                     else:
 *                         lower_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *                 if len(upper_lines) > 0:
 */
        /*else*/ {
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_lower_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 848, __pyx_L1_error)
        }
        __pyx_L15:;

        /* "table_extraction/utils_table_extraction.pyx":844
 *                 upper_lines = []
 *                 lower_lines = []
 *                 for line in h_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)
 */
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":850
 *                         lower_lines.append(line)
 * 
 *                 if len(upper_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_upper_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 850, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":851
 * 
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 */
        __pyx_t_7 = PyTuple_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 851, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_INCREF(__pyx_v_upper_lines);
        __Pyx_GIVEREF(__pyx_v_upper_lines);
        PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_upper_lines);
        __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 851, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_10 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_2lambda10, 0, __pyx_n_s_Utils_stop_point_at_top_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 851, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_10) < 0) __PYX_ERR(0, 851, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_7, __pyx_t_3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 851, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_v_lines = __pyx_t_10;
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":852
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 *                         return top_point
 */
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_7, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 852, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_3);
        __pyx_t_10 = 0;
        __pyx_t_3 = 0;
        __pyx_v_top_point = ((PyObject*)__pyx_t_7);
        __pyx_t_7 = 0;

        /* "table_extraction/utils_table_extraction.pyx":853
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):             # <<<<<<<<<<<<<<
 *                         return top_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 853, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 853, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 853, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_1 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_10);
          if (likely(__pyx_t_1)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
            __Pyx_INCREF(__pyx_t_1);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_10, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_top_point, __pyx_t_3};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 853, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_top_point, __pyx_t_3};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 853, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 853, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_1) {
            __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_1); __pyx_t_1 = NULL;
          }
          __Pyx_INCREF(__pyx_v_top_point);
          __Pyx_GIVEREF(__pyx_v_top_point);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_14, __pyx_v_top_point);
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_14, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_9, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 853, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 853, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":854
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 *                         return top_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_top_point);
          __pyx_r = __pyx_v_top_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":853
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):             # <<<<<<<<<<<<<<
 *                         return top_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":856
 *                         return top_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 if len(lower_lines) > 0:
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":850
 *                         lower_lines.append(line)
 * 
 *                 if len(upper_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":858
 *                         return None
 * 
 *                 if len(lower_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_lower_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 858, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":859
 * 
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 */
        __pyx_t_7 = PyTuple_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 859, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_INCREF(__pyx_v_lower_lines);
        __Pyx_GIVEREF(__pyx_v_lower_lines);
        PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_lower_lines);
        __pyx_t_10 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 859, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_9 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17stop_point_at_top_3lambda11, 0, __pyx_n_s_Utils_stop_point_at_top_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 859, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_key, __pyx_t_9) < 0) __PYX_ERR(0, 859, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_7, __pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 859, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_v_lines = __pyx_t_9;
        __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":860
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 *                         return top_point
 */
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 860, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 860, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 860, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_7, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 860, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 860, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_GIVEREF(__pyx_t_9);
        PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_10);
        __pyx_t_9 = 0;
        __pyx_t_10 = 0;
        __pyx_v_top_point = ((PyObject*)__pyx_t_7);
        __pyx_t_7 = 0;

        /* "table_extraction/utils_table_extraction.pyx":861
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):             # <<<<<<<<<<<<<<
 *                         return top_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_Utils); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 861, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 861, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 861, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_3)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_3);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_top_point, __pyx_t_10};
          __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 861, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_top_point, __pyx_t_10};
          __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 861, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        {
          __pyx_t_1 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 861, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          if (__pyx_t_3) {
            __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3); __pyx_t_3 = NULL;
          }
          __Pyx_INCREF(__pyx_v_top_point);
          __Pyx_GIVEREF(__pyx_v_top_point);
          PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_14, __pyx_v_top_point);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_14, __pyx_t_10);
          __pyx_t_10 = 0;
          __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_1, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 861, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 861, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":862
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):
 *                         return top_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_top_point);
          __pyx_r = __pyx_v_top_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":861
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 *                     if Utils.is_point_in_line(top_point, lines[0]):             # <<<<<<<<<<<<<<
 *                         return top_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":864
 *                         return top_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 # do not have stop point
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":858
 *                         return None
 * 
 *                 if len(lower_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     top_point = (point[0], lines[0].start_point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":867
 * 
 *                 # do not have stop point
 *                 return None             # <<<<<<<<<<<<<<
 * 
 *         # In case no block lines, just connect to the top border
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":836
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and rect[1] + rect[3] - threshold <= point[1]:             # <<<<<<<<<<<<<<
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] > rect[1]]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":834
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1] + rect[3], reverse=True)
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and rect[1] + rect[3] - threshold <= point[1]:
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":870
 * 
 *         # In case no block lines, just connect to the top border
 *         return (point[0], table.top_border.start_point[1])             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_top_border); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_9, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_7);
  PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_7);
  __pyx_t_2 = 0;
  __pyx_t_7 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":826
 * 
 *     @staticmethod
 *     def stop_point_at_top(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the top
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_top", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_threshold);
  __Pyx_XDECREF(__pyx_v_content_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_upper_lines);
  __Pyx_XDECREF(__pyx_v_lower_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_lines);
  __Pyx_XDECREF(__pyx_v_top_point);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":873
 * 
 *     @staticmethod
 *     def stop_point_at_bottom(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the bottom
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_95stop_point_at_bottom(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_94stop_point_at_bottom[] = "Find the stop point for divider line at the bottom\n        If the divider line cut a column, the stop point will be the point with the neast table horizontal line,\n        otherwise the stop point will be at the table bottom border\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_95stop_point_at_bottom = {"stop_point_at_bottom", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_95stop_point_at_bottom, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_94stop_point_at_bottom};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_95stop_point_at_bottom(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_table = 0;
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("stop_point_at_bottom (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_table,&__pyx_n_s_point,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_table)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("stop_point_at_bottom", 1, 2, 2, 1); __PYX_ERR(0, 873, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "stop_point_at_bottom") < 0)) __PYX_ERR(0, 873, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_table = values[0];
    __pyx_v_point = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("stop_point_at_bottom", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 873, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_94stop_point_at_bottom(__pyx_self, __pyx_v_table, __pyx_v_point);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":880
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1])             # <<<<<<<<<<<<<<
 * 
 *         for rect in content_rects:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_lambda12(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_lambda12 = {"lambda12", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_lambda12, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_lambda12(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda12 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda12(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda12(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda12", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom.lambda12", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":887
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] < rect[1] + rect[3]]
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (Y postion)
 *                 upper_lines = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_1lambda13(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_1lambda13 = {"lambda13", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_1lambda13, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_1lambda13(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda13 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda13(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda13(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda13", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 887, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 887, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom.lambda13", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":898
 * 
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_2lambda14(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_2lambda14 = {"lambda14", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_2lambda14, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_2lambda14(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda14 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda14(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda14(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda14", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 898, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 898, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom.lambda14", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":906
 * 
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_3lambda15(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_3lambda15 = {"lambda15", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_3lambda15, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_3lambda15(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda15 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda15(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda15(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda15", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 906, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 906, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom.lambda15", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":873
 * 
 *     @staticmethod
 *     def stop_point_at_bottom(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the bottom
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_94stop_point_at_bottom(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point) {
  PyObject *__pyx_v_threshold = NULL;
  PyObject *__pyx_v_content_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_h_lines = NULL;
  PyObject *__pyx_v_upper_lines = NULL;
  PyObject *__pyx_v_lower_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_lines = NULL;
  PyObject *__pyx_v_bottom_point = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("stop_point_at_bottom", 0);

  /* "table_extraction/utils_table_extraction.pyx":878
 *         otherwise the stop point will be at the table bottom border
 *         """
 *         threshold = 5             # <<<<<<<<<<<<<<
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1])
 */
  __Pyx_INCREF(__pyx_int_5);
  __pyx_v_threshold = __pyx_int_5;

  /* "table_extraction/utils_table_extraction.pyx":879
 *         """
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]             # <<<<<<<<<<<<<<
 *         content_rects.sort(key=lambda rect: rect[1])
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 879, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_content_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 879, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 879, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 879, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 879, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 879, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 879, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 879, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 879, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 879, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 879, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_content_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":880
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[1])             # <<<<<<<<<<<<<<
 * 
 *         for rect in content_rects:
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_rects, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_lambda12, 0, __pyx_n_s_Utils_stop_point_at_bottom_local, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":882
 *         content_rects.sort(key=lambda rect: rect[1])
 * 
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and point[1] <= rect[1] + threshold:
 */
  __pyx_t_2 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 882, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 882, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":884
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and point[1] <= rect[1] + threshold:             # <<<<<<<<<<<<<<
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] < rect[1] + rect[3]]
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 884, __pyx_L1_error)
    if (__Pyx_PyObject_IsTrue(__pyx_t_7)) {
      __Pyx_DECREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 884, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 884, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = PyNumber_Add(__pyx_t_8, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 884, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyNumber_Subtract(__pyx_t_10, __pyx_v_threshold); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 884, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_9, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 884, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_11) {
    } else {
      __pyx_t_6 = __pyx_t_11;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_7, __pyx_t_1, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 884, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = __pyx_t_11;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":886
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and point[1] <= rect[1] + threshold:
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] < rect[1] + rect[3]]             # <<<<<<<<<<<<<<
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()
 *                 # Create a temp line list to keep all lines above point (Y postion)
 */
      __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 886, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_horizontal_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 886, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
        __pyx_t_7 = __pyx_t_1; __Pyx_INCREF(__pyx_t_7); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_5 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 886, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_7))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 886, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_7, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 886, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 886, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_7, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 886, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          }
        } else {
          __pyx_t_1 = __pyx_t_5(__pyx_t_7);
          if (unlikely(!__pyx_t_1)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 886, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_1);
        }
        __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_1);
        __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_8 = PyNumber_Add(__pyx_t_1, __pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = PyObject_RichCompare(__pyx_t_9, __pyx_t_8, Py_LT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 886, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {
          if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_v_h_line))) __PYX_ERR(0, 886, __pyx_L1_error)
        }
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_h_lines = __pyx_t_3;
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":887
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] < rect[1] + rect[3]]
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (Y postion)
 *                 upper_lines = []
 */
      __pyx_t_7 = PyTuple_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_INCREF(__pyx_v_h_lines);
      __Pyx_GIVEREF(__pyx_v_h_lines);
      PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_h_lines);
      __pyx_t_10 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_8 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_1lambda13, 0, __pyx_n_s_Utils_stop_point_at_bottom_local, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_key, __pyx_t_8) < 0) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_7, __pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_copy); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_10);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_10, function);
        }
      }
      __pyx_t_3 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 887, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_DECREF_SET(__pyx_v_h_lines, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":889
 *                 h_lines = sorted(h_lines, key=lambda line: line.start_point[1]).copy()
 *                 # Create a temp line list to keep all lines above point (Y postion)
 *                 upper_lines = []             # <<<<<<<<<<<<<<
 *                 lower_lines = []
 *                 for line in h_lines:
 */
      __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 889, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_v_upper_lines = ((PyObject*)__pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":890
 *                 # Create a temp line list to keep all lines above point (Y postion)
 *                 upper_lines = []
 *                 lower_lines = []             # <<<<<<<<<<<<<<
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:
 */
      __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 890, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_v_lower_lines = ((PyObject*)__pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":891
 *                 upper_lines = []
 *                 lower_lines = []
 *                 for line in h_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)
 */
      if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
        __pyx_t_3 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_3); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 891, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 891, __pyx_L1_error)
      }
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_3))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_10); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 891, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 891, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_10); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 891, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 891, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          }
        } else {
          __pyx_t_10 = __pyx_t_5(__pyx_t_3);
          if (unlikely(!__pyx_t_10)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 891, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_10);
        }
        __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":892
 *                 lower_lines = []
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:             # <<<<<<<<<<<<<<
 *                         upper_lines.append(line)
 *                     else:
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 892, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_10, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 892, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 892, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = PyObject_RichCompare(__pyx_t_8, __pyx_t_10, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 892, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 892, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":893
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)             # <<<<<<<<<<<<<<
 *                     else:
 *                         lower_lines.append(line)
 */
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_upper_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 893, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":892
 *                 lower_lines = []
 *                 for line in h_lines:
 *                     if line.start_point[1] < point[1]:             # <<<<<<<<<<<<<<
 *                         upper_lines.append(line)
 *                     else:
 */
          goto __pyx_L15;
        }

        /* "table_extraction/utils_table_extraction.pyx":895
 *                         upper_lines.append(line)
 *                     else:
 *                         lower_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *                 if len(lower_lines) > 0:
 */
        /*else*/ {
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_lower_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 895, __pyx_L1_error)
        }
        __pyx_L15:;

        /* "table_extraction/utils_table_extraction.pyx":891
 *                 upper_lines = []
 *                 lower_lines = []
 *                 for line in h_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[1] < point[1]:
 *                         upper_lines.append(line)
 */
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":897
 *                         lower_lines.append(line)
 * 
 *                 if len(lower_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_lower_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 897, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":898
 * 
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 */
        __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 898, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_INCREF(__pyx_v_lower_lines);
        __Pyx_GIVEREF(__pyx_v_lower_lines);
        PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_lower_lines);
        __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 898, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_10 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_2lambda14, 0, __pyx_n_s_Utils_stop_point_at_bottom_local, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 898, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_key, __pyx_t_10) < 0) __PYX_ERR(0, 898, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_3, __pyx_t_7); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 898, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_v_lines = __pyx_t_10;
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":899
 *                 if len(lower_lines) > 0:
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 *                         return bottom_point
 */
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 899, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_lines, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 899, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 899, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 899, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 899, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_7);
        PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_7);
        __pyx_t_10 = 0;
        __pyx_t_7 = 0;
        __pyx_v_bottom_point = ((PyObject*)__pyx_t_3);
        __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":900
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):             # <<<<<<<<<<<<<<
 *                         return bottom_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 900, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 900, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_lines, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 900, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_8 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_10);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_10, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_bottom_point, __pyx_t_7};
          __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 900, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_bottom_point, __pyx_t_7};
          __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 900, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 900, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_INCREF(__pyx_v_bottom_point);
          __Pyx_GIVEREF(__pyx_v_bottom_point);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_14, __pyx_v_bottom_point);
          __Pyx_GIVEREF(__pyx_t_7);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_14, __pyx_t_7);
          __pyx_t_7 = 0;
          __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_9, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 900, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 900, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":901
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 *                         return bottom_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_bottom_point);
          __pyx_r = __pyx_v_bottom_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":900
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):             # <<<<<<<<<<<<<<
 *                         return bottom_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":903
 *                         return bottom_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 if len(upper_lines) > 0:
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":897
 *                         lower_lines.append(line)
 * 
 *                 if len(lower_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(lower_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":905
 *                         return None
 * 
 *                 if len(upper_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_upper_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 905, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":906
 * 
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 */
        __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 906, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_INCREF(__pyx_v_upper_lines);
        __Pyx_GIVEREF(__pyx_v_upper_lines);
        PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_upper_lines);
        __pyx_t_10 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 906, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_9 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_20stop_point_at_bottom_3lambda15, 0, __pyx_n_s_Utils_stop_point_at_bottom_local, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 906, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_key, __pyx_t_9) < 0) __PYX_ERR(0, 906, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_3, __pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 906, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_v_lines = __pyx_t_9;
        __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":907
 *                 if len(upper_lines) > 0:
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 *                         return bottom_point
 */
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 907, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_lines, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 907, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 907, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 907, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 907, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_9);
        PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_10);
        __pyx_t_9 = 0;
        __pyx_t_10 = 0;
        __pyx_v_bottom_point = ((PyObject*)__pyx_t_3);
        __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":908
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):             # <<<<<<<<<<<<<<
 *                         return bottom_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_Utils); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 908, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 908, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_lines, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 908, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_7)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_7);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_bottom_point, __pyx_t_10};
          __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 908, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_bottom_point, __pyx_t_10};
          __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 908, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else
        #endif
        {
          __pyx_t_8 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 908, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          if (__pyx_t_7) {
            __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_7); __pyx_t_7 = NULL;
          }
          __Pyx_INCREF(__pyx_v_bottom_point);
          __Pyx_GIVEREF(__pyx_v_bottom_point);
          PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_14, __pyx_v_bottom_point);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_14, __pyx_t_10);
          __pyx_t_10 = 0;
          __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_8, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 908, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 908, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":909
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):
 *                         return bottom_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_bottom_point);
          __pyx_r = __pyx_v_bottom_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":908
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 *                     if Utils.is_point_in_line(bottom_point, lines[-1]):             # <<<<<<<<<<<<<<
 *                         return bottom_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":911
 *                         return bottom_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 return None
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":905
 *                         return None
 * 
 *                 if len(upper_lines) > 0:             # <<<<<<<<<<<<<<
 *                     lines = sorted(upper_lines, key=lambda line: line.start_point[1])
 *                     bottom_point = (point[0], lines[-1].start_point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":913
 *                         return None
 * 
 *                 return None             # <<<<<<<<<<<<<<
 * 
 *         # In case no block lines, just connect to the bottom border
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":884
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and point[1] <= rect[1] + threshold:             # <<<<<<<<<<<<<<
 *                 # Loop all table hozirontal lines to find nearest horizontal line at top
 *                 h_lines = [h_line for h_line in table.horizontal_lines if h_line.start_point[1] < rect[1] + rect[3]]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":882
 *         content_rects.sort(key=lambda rect: rect[1])
 * 
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a column content
 *             if rect[0] + threshold <= point[0] <= rect[0] + rect[2] - threshold and point[1] <= rect[1] + threshold:
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":916
 * 
 *         # In case no block lines, just connect to the bottom border
 *         return (point[0], table.bottom_border.start_point[1])             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_bottom_border); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_9, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 916, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_3);
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":873
 * 
 *     @staticmethod
 *     def stop_point_at_bottom(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the bottom
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_bottom", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_threshold);
  __Pyx_XDECREF(__pyx_v_content_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_h_lines);
  __Pyx_XDECREF(__pyx_v_upper_lines);
  __Pyx_XDECREF(__pyx_v_lower_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_lines);
  __Pyx_XDECREF(__pyx_v_bottom_point);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":919
 * 
 *     @staticmethod
 *     def stop_point_at_left(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the left
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_97stop_point_at_left(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_96stop_point_at_left[] = "Find the stop point for divider line at the left\n        If the divider line cut a row, the stop point will be the point with the neast table vertical line,\n        otherwise the stop point will be at the table left border\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_97stop_point_at_left = {"stop_point_at_left", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_97stop_point_at_left, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_96stop_point_at_left};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_97stop_point_at_left(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_table = 0;
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("stop_point_at_left (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_table,&__pyx_n_s_point,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_table)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("stop_point_at_left", 1, 2, 2, 1); __PYX_ERR(0, 919, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "stop_point_at_left") < 0)) __PYX_ERR(0, 919, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_table = values[0];
    __pyx_v_point = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("stop_point_at_left", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 919, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_96stop_point_at_left(__pyx_self, __pyx_v_table, __pyx_v_point);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":926
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_lambda16(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_lambda16 = {"lambda16", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_lambda16, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_lambda16(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda16 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda16(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda16(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda16", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left.lambda16", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":932
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] > rect[0] + rect[2]]
 *                 v_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_1lambda17(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_1lambda17 = {"lambda17", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_1lambda17, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_1lambda17(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda17 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda17(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda17(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda17", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 932, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 932, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left.lambda17", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":943
 * 
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     left_point = (left_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_2lambda18(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_2lambda18 = {"lambda18", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_2lambda18, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_2lambda18(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda18 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda18(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda18(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda18", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 943, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 943, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left.lambda18", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":950
 *                         return None
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     right_point = (right_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_3lambda19(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_3lambda19 = {"lambda19", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_3lambda19, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_3lambda19(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda19 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda19(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda19(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda19", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 950, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 950, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left.lambda19", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":919
 * 
 *     @staticmethod
 *     def stop_point_at_left(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the left
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_96stop_point_at_left(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point) {
  PyObject *__pyx_v_threshold = NULL;
  PyObject *__pyx_v_content_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_v_lines = NULL;
  PyObject *__pyx_v_left_lines = NULL;
  PyObject *__pyx_v_right_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_left_point = NULL;
  PyObject *__pyx_v_right_point = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("stop_point_at_left", 0);

  /* "table_extraction/utils_table_extraction.pyx":924
 *         otherwise the stop point will be at the table left border
 *         """
 *         threshold = 5             # <<<<<<<<<<<<<<
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)
 */
  __Pyx_INCREF(__pyx_int_5);
  __pyx_v_threshold = __pyx_int_5;

  /* "table_extraction/utils_table_extraction.pyx":925
 *         """
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]             # <<<<<<<<<<<<<<
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)
 *         for rect in content_rects:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 925, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_content_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 925, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 925, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 925, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 925, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 925, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 925, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 925, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 925, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 925, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 925, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_content_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":926
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_rects, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_lambda16, 0, __pyx_n_s_Utils_stop_point_at_left_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 926, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":927
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + rect[2] - threshold <= point[0]:
 */
  __pyx_t_2 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 927, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 927, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":929
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + rect[2] - threshold <= point[0]:             # <<<<<<<<<<<<<<
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] > rect[0] + rect[2]]
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 929, __pyx_L1_error)
    if (__Pyx_PyObject_IsTrue(__pyx_t_7)) {
      __Pyx_DECREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 929, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 929, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = PyNumber_Add(__pyx_t_8, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 929, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyNumber_Subtract(__pyx_t_10, __pyx_v_threshold); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 929, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_9, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 929, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_11) {
    } else {
      __pyx_t_6 = __pyx_t_11;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_7, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_1, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 929, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __pyx_t_11;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":931
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + rect[2] - threshold <= point[0]:
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] > rect[0] + rect[2]]             # <<<<<<<<<<<<<<
 *                 v_lines.sort(key=lambda line: line.start_point[0])
 *                 # Create a temp line list to keep all lines above point (X postion)
 */
      __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 931, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_vertical_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 931, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
        __pyx_t_3 = __pyx_t_1; __Pyx_INCREF(__pyx_t_3); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 931, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_3))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 931, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 931, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_1); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 931, __pyx_L1_error)
            #else
            __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 931, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            #endif
          }
        } else {
          __pyx_t_1 = __pyx_t_5(__pyx_t_3);
          if (unlikely(!__pyx_t_1)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 931, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_1);
        }
        __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_1);
        __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_8 = PyNumber_Add(__pyx_t_1, __pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = PyObject_RichCompare(__pyx_t_9, __pyx_t_8, Py_GT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 931, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {
          if (unlikely(__Pyx_ListComp_Append(__pyx_t_7, (PyObject*)__pyx_v_v_line))) __PYX_ERR(0, 931, __pyx_L1_error)
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_v_lines = ((PyObject*)__pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":932
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] > rect[0] + rect[2]]
 *                 v_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 */
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 932, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 932, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_10 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_1lambda17, 0, __pyx_n_s_Utils_stop_point_at_left_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 932, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_10) < 0) __PYX_ERR(0, 932, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 932, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":934
 *                 v_lines.sort(key=lambda line: line.start_point[0])
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []             # <<<<<<<<<<<<<<
 *                 right_lines = []
 *                 for line in v_lines:
 */
      __pyx_t_10 = PyList_New(0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 934, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_v_left_lines = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":935
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 *                 right_lines = []             # <<<<<<<<<<<<<<
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:
 */
      __pyx_t_10 = PyList_New(0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 935, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_v_right_lines = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":936
 *                 left_lines = []
 *                 right_lines = []
 *                 for line in v_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)
 */
      __pyx_t_10 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_10); __pyx_t_12 = 0;
      for (;;) {
        if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_10)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_12); __Pyx_INCREF(__pyx_t_3); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 936, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_10, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
        __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":937
 *                 right_lines = []
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:             # <<<<<<<<<<<<<<
 *                         left_lines.append(line)
 *                     else:
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 937, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 937, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 937, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_8 = PyObject_RichCompare(__pyx_t_7, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 937, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 937, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":938
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)             # <<<<<<<<<<<<<<
 *                     else:
 *                         right_lines.append(line)
 */
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 938, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":937
 *                 right_lines = []
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:             # <<<<<<<<<<<<<<
 *                         left_lines.append(line)
 *                     else:
 */
          goto __pyx_L15;
        }

        /* "table_extraction/utils_table_extraction.pyx":940
 *                         left_lines.append(line)
 *                     else:
 *                         right_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *                 if len(left_lines) > 0:
 */
        /*else*/ {
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 940, __pyx_L1_error)
        }
        __pyx_L15:;

        /* "table_extraction/utils_table_extraction.pyx":936
 *                 left_lines = []
 *                 right_lines = []
 *                 for line in v_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)
 */
      }
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":942
 *                         right_lines.append(line)
 * 
 *                 if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[0].start_point[0], point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 942, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":943
 * 
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     left_point = (left_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_left_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 943, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 943, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_2lambda18, 0, __pyx_n_s_Utils_stop_point_at_left_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 943, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 943, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_empty_tuple, __pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 943, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":944
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[0].start_point[0], point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):
 *                         return left_point
 */
        __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_8);
        __pyx_t_3 = 0;
        __pyx_t_8 = 0;
        __pyx_v_left_point = ((PyObject*)__pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":945
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):             # <<<<<<<<<<<<<<
 *                         return left_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 945, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 945, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = __Pyx_GetItemInt_List(__pyx_v_left_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 945, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_7 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_7)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_7);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_left_point, __pyx_t_8};
          __pyx_t_10 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 945, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_left_point, __pyx_t_8};
          __pyx_t_10 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 945, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 945, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_7) {
            __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_7); __pyx_t_7 = NULL;
          }
          __Pyx_INCREF(__pyx_v_left_point);
          __Pyx_GIVEREF(__pyx_v_left_point);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_14, __pyx_v_left_point);
          __Pyx_GIVEREF(__pyx_t_8);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_14, __pyx_t_8);
          __pyx_t_8 = 0;
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_9, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 945, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 945, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":946
 *                     left_point = (left_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):
 *                         return left_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_left_point);
          __pyx_r = __pyx_v_left_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":945
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[0]):             # <<<<<<<<<<<<<<
 *                         return left_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":948
 *                         return left_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":942
 *                         right_lines.append(line)
 * 
 *                 if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[0].start_point[0], point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":949
 *                     else:
 *                         return None
 *                 if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[0].start_point[0], point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 949, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":950
 *                         return None
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     right_point = (right_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_right_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_9 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_18stop_point_at_left_3lambda19, 0, __pyx_n_s_Utils_stop_point_at_left_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_9) < 0) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 950, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":951
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[0].start_point[0], point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):
 *                         return right_point
 */
        __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_right_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 951, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 951, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 951, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 951, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 951, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_9);
        PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_3);
        __pyx_t_9 = 0;
        __pyx_t_3 = 0;
        __pyx_v_right_point = ((PyObject*)__pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":952
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):             # <<<<<<<<<<<<<<
 *                         return right_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 952, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 952, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_right_lines, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 952, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_8 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_right_point, __pyx_t_3};
          __pyx_t_10 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 952, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_right_point, __pyx_t_3};
          __pyx_t_10 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 952, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_7 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 952, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_INCREF(__pyx_v_right_point);
          __Pyx_GIVEREF(__pyx_v_right_point);
          PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_14, __pyx_v_right_point);
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_14, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_7, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 952, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 952, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":953
 *                     right_point = (right_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):
 *                         return right_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_right_point);
          __pyx_r = __pyx_v_right_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":952
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[0].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[0]):             # <<<<<<<<<<<<<<
 *                         return right_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":955
 *                         return right_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 return None
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":949
 *                     else:
 *                         return None
 *                 if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[0].start_point[0], point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":957
 *                         return None
 * 
 *                 return None             # <<<<<<<<<<<<<<
 * 
 *         # In case no block lines, just connect to the left border
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":929
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + rect[2] - threshold <= point[0]:             # <<<<<<<<<<<<<<
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] > rect[0] + rect[2]]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":927
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0] + rect[2], reverse=True)
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + rect[2] - threshold <= point[0]:
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":960
 * 
 *         # In case no block lines, just connect to the left border
 *         return (table.left_border.start_point[0], point[1])             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_left_border); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_10, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_10);
  PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_10);
  __pyx_t_2 = 0;
  __pyx_t_10 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":919
 * 
 *     @staticmethod
 *     def stop_point_at_left(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the left
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_left", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_threshold);
  __Pyx_XDECREF(__pyx_v_content_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XDECREF(__pyx_v_left_lines);
  __Pyx_XDECREF(__pyx_v_right_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_left_point);
  __Pyx_XDECREF(__pyx_v_right_point);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":963
 * 
 *     @staticmethod
 *     def stop_point_at_right(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the right
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_99stop_point_at_right(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_98stop_point_at_right[] = "Find the stop point for divider line at the right\n        If the divider line cut a row, the stop point will be the point with the neast table vertical line,\n        otherwise the stop point will be at the table right border\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_99stop_point_at_right = {"stop_point_at_right", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_99stop_point_at_right, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_98stop_point_at_right};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_99stop_point_at_right(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_table = 0;
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("stop_point_at_right (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_table,&__pyx_n_s_point,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_table)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("stop_point_at_right", 1, 2, 2, 1); __PYX_ERR(0, 963, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "stop_point_at_right") < 0)) __PYX_ERR(0, 963, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_table = values[0];
    __pyx_v_point = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("stop_point_at_right", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 963, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_98stop_point_at_right(__pyx_self, __pyx_v_table, __pyx_v_point);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":970
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0])             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_lambda20(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_lambda20 = {"lambda20", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_lambda20, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_lambda20(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda20 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda20(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda20(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda20", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right.lambda20", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":976
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] < rect[0]]
 *                 v_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_1lambda21(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_1lambda21 = {"lambda21", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_1lambda21, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_1lambda21(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda21 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda21(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda21(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda21", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 976, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 976, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right.lambda21", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":987
 * 
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_2lambda22(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_2lambda22 = {"lambda22", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_2lambda22, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_2lambda22(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda22 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda22(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda22(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda22", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 987, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 987, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right.lambda22", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":995
 * 
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_3lambda23(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_3lambda23 = {"lambda23", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_3lambda23, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_3lambda23(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda23 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda23(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda23(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda23", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 995, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 995, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right.lambda23", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":963
 * 
 *     @staticmethod
 *     def stop_point_at_right(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the right
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_98stop_point_at_right(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_table, PyObject *__pyx_v_point) {
  PyObject *__pyx_v_threshold = NULL;
  PyObject *__pyx_v_content_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_v_lines = NULL;
  PyObject *__pyx_v_left_lines = NULL;
  PyObject *__pyx_v_right_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_right_point = NULL;
  PyObject *__pyx_v_left_point = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("stop_point_at_right", 0);

  /* "table_extraction/utils_table_extraction.pyx":968
 *         otherwise the stop point will be at the table right border
 *         """
 *         threshold = 5             # <<<<<<<<<<<<<<
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0])
 */
  __Pyx_INCREF(__pyx_int_5);
  __pyx_v_threshold = __pyx_int_5;

  /* "table_extraction/utils_table_extraction.pyx":969
 *         """
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]             # <<<<<<<<<<<<<<
 *         content_rects.sort(key=lambda rect: rect[0])
 *         for rect in content_rects:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_content_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_3 = __pyx_t_2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 969, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 969, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 969, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 969, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 969, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 969, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_2))) __PYX_ERR(0, 969, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_content_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":970
 *         threshold = 5
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0])             # <<<<<<<<<<<<<<
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_rects, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_lambda20, 0, __pyx_n_s_Utils_stop_point_at_right_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_2) < 0) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 970, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":971
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0])
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + threshold >= point[0]:
 */
  __pyx_t_2 = __pyx_v_content_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 971, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 971, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":973
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + threshold >= point[0]:             # <<<<<<<<<<<<<<
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] < rect[0]]
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 973, __pyx_L1_error)
    if (__Pyx_PyObject_IsTrue(__pyx_t_7)) {
      __Pyx_DECREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 973, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 973, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = PyNumber_Add(__pyx_t_8, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 973, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyNumber_Subtract(__pyx_t_10, __pyx_v_threshold); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 973, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_9, Py_LE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 973, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_11) {
    } else {
      __pyx_t_6 = __pyx_t_11;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = PyNumber_Add(__pyx_t_7, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_t_7, Py_GE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 973, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_6 = __pyx_t_11;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":975
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + threshold >= point[0]:
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] < rect[0]]             # <<<<<<<<<<<<<<
 *                 v_lines.sort(key=lambda line: line.start_point[0])
 *                 # Create a temp line list to keep all lines above point (X postion)
 */
      __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 975, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_vertical_lines); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 975, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (likely(PyList_CheckExact(__pyx_t_7)) || PyTuple_CheckExact(__pyx_t_7)) {
        __pyx_t_3 = __pyx_t_7; __Pyx_INCREF(__pyx_t_3); __pyx_t_12 = 0;
        __pyx_t_5 = NULL;
      } else {
        __pyx_t_12 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 975, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      for (;;) {
        if (likely(!__pyx_t_5)) {
          if (likely(PyList_CheckExact(__pyx_t_3))) {
            if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_7 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_7); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 975, __pyx_L1_error)
            #else
            __pyx_t_7 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 975, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_7);
            #endif
          } else {
            if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_12); __Pyx_INCREF(__pyx_t_7); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 975, __pyx_L1_error)
            #else
            __pyx_t_7 = PySequence_ITEM(__pyx_t_3, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 975, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_7);
            #endif
          }
        } else {
          __pyx_t_7 = __pyx_t_5(__pyx_t_3);
          if (unlikely(!__pyx_t_7)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 975, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_7);
        }
        __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_7);
        __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_10 = PyObject_RichCompare(__pyx_t_9, __pyx_t_7, Py_LT); __Pyx_XGOTREF(__pyx_t_10); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 975, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {
          if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_v_line))) __PYX_ERR(0, 975, __pyx_L1_error)
        }
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_v_lines = ((PyObject*)__pyx_t_1);
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":976
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] < rect[0]]
 *                 v_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 976, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 976, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_10 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_1lambda21, 0, __pyx_n_s_Utils_stop_point_at_right_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 976, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_10) < 0) __PYX_ERR(0, 976, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 976, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":978
 *                 v_lines.sort(key=lambda line: line.start_point[0])
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []             # <<<<<<<<<<<<<<
 *                 right_lines = []
 *                 for line in v_lines:
 */
      __pyx_t_10 = PyList_New(0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 978, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_v_left_lines = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":979
 *                 # Create a temp line list to keep all lines above point (X postion)
 *                 left_lines = []
 *                 right_lines = []             # <<<<<<<<<<<<<<
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:
 */
      __pyx_t_10 = PyList_New(0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 979, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_v_right_lines = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":980
 *                 left_lines = []
 *                 right_lines = []
 *                 for line in v_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)
 */
      __pyx_t_10 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_10); __pyx_t_12 = 0;
      for (;;) {
        if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_10)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_12); __Pyx_INCREF(__pyx_t_3); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 980, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_10, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 980, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
        __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":981
 *                 right_lines = []
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:             # <<<<<<<<<<<<<<
 *                         left_lines.append(line)
 *                     else:
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 981, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 981, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 981, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 981, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 981, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":982
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)             # <<<<<<<<<<<<<<
 *                     else:
 *                         right_lines.append(line)
 */
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_left_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 982, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":981
 *                 right_lines = []
 *                 for line in v_lines:
 *                     if line.start_point[0] < point[0]:             # <<<<<<<<<<<<<<
 *                         left_lines.append(line)
 *                     else:
 */
          goto __pyx_L15;
        }

        /* "table_extraction/utils_table_extraction.pyx":984
 *                         left_lines.append(line)
 *                     else:
 *                         right_lines.append(line)             # <<<<<<<<<<<<<<
 * 
 *                 if len(right_lines) > 0:
 */
        /*else*/ {
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_right_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 984, __pyx_L1_error)
        }
        __pyx_L15:;

        /* "table_extraction/utils_table_extraction.pyx":980
 *                 left_lines = []
 *                 right_lines = []
 *                 for line in v_lines:             # <<<<<<<<<<<<<<
 *                     if line.start_point[0] < point[0]:
 *                         left_lines.append(line)
 */
      }
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "table_extraction/utils_table_extraction.pyx":986
 *                         right_lines.append(line)
 * 
 *                 if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_right_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 986, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":987
 * 
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_right_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 987, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 987, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_2lambda22, 0, __pyx_n_s_Utils_stop_point_at_right_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 987, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 987, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_empty_tuple, __pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 987, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "table_extraction/utils_table_extraction.pyx":988
 *                 if len(right_lines) > 0:
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[-1].start_point[0], point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):
 *                         return right_point
 */
        __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_7);
        PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_7);
        __pyx_t_3 = 0;
        __pyx_t_7 = 0;
        __pyx_v_right_point = ((PyObject*)__pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":989
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):             # <<<<<<<<<<<<<<
 *                         return right_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 989, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 989, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_GetItemInt_List(__pyx_v_right_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 989, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_1 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_1)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_1);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_right_point, __pyx_t_7};
          __pyx_t_10 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 989, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_right_point, __pyx_t_7};
          __pyx_t_10 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 989, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 989, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_1) {
            __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_1); __pyx_t_1 = NULL;
          }
          __Pyx_INCREF(__pyx_v_right_point);
          __Pyx_GIVEREF(__pyx_v_right_point);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_14, __pyx_v_right_point);
          __Pyx_GIVEREF(__pyx_t_7);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_14, __pyx_t_7);
          __pyx_t_7 = 0;
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_9, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 989, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 989, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":990
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):
 *                         return right_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_right_point);
          __pyx_r = __pyx_v_right_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":989
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(right_point, right_lines[-1]):             # <<<<<<<<<<<<<<
 *                         return right_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":992
 *                         return right_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 if len(left_lines) > 0:
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":986
 *                         right_lines.append(line)
 * 
 *                 if len(right_lines) > 0:             # <<<<<<<<<<<<<<
 *                     right_lines.sort(key=lambda line: line.start_point[0])
 *                     right_point = (right_lines[-1].start_point[0], point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":994
 *                         return None
 * 
 *                 if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 */
      __pyx_t_12 = PyList_GET_SIZE(__pyx_v_left_lines); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 994, __pyx_L1_error)
      __pyx_t_6 = ((__pyx_t_12 > 0) != 0);
      if (__pyx_t_6) {

        /* "table_extraction/utils_table_extraction.pyx":995
 * 
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):
 */
        __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_left_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 995, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 995, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_9 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19stop_point_at_right_3lambda23, 0, __pyx_n_s_Utils_stop_point_at_right_locals, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 995, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_key, __pyx_t_9) < 0) __PYX_ERR(0, 995, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_empty_tuple, __pyx_t_3); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 995, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":996
 *                 if len(left_lines) > 0:
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[-1].start_point[0], point[1])             # <<<<<<<<<<<<<<
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):
 *                         return left_point
 */
        __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_left_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 996, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 996, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 996, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 996, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 996, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_GIVEREF(__pyx_t_9);
        PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_3);
        __pyx_t_9 = 0;
        __pyx_t_3 = 0;
        __pyx_v_left_point = ((PyObject*)__pyx_t_10);
        __pyx_t_10 = 0;

        /* "table_extraction/utils_table_extraction.pyx":997
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):             # <<<<<<<<<<<<<<
 *                         return left_point
 *                     else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 997, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_is_point_in_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 997, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_left_lines, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 997, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_7 = NULL;
        __pyx_t_14 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_7)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_7);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_14 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_left_point, __pyx_t_3};
          __pyx_t_10 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 997, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_left_point, __pyx_t_3};
          __pyx_t_10 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_14, 2+__pyx_t_14); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 997, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_1 = PyTuple_New(2+__pyx_t_14); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 997, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          if (__pyx_t_7) {
            __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_7); __pyx_t_7 = NULL;
          }
          __Pyx_INCREF(__pyx_v_left_point);
          __Pyx_GIVEREF(__pyx_v_left_point);
          PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_14, __pyx_v_left_point);
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_14, __pyx_t_3);
          __pyx_t_3 = 0;
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_1, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 997, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 997, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":998
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):
 *                         return left_point             # <<<<<<<<<<<<<<
 *                     else:
 *                         return None
 */
          __Pyx_XDECREF(__pyx_r);
          __Pyx_INCREF(__pyx_v_left_point);
          __pyx_r = __pyx_v_left_point;
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;

          /* "table_extraction/utils_table_extraction.pyx":997
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 *                     if Utils.is_point_in_line(left_point, left_lines[-1]):             # <<<<<<<<<<<<<<
 *                         return left_point
 *                     else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1000
 *                         return left_point
 *                     else:
 *                         return None             # <<<<<<<<<<<<<<
 * 
 *                 return None
 */
        /*else*/ {
          __Pyx_XDECREF(__pyx_r);
          __pyx_r = Py_None; __Pyx_INCREF(Py_None);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L0;
        }

        /* "table_extraction/utils_table_extraction.pyx":994
 *                         return None
 * 
 *                 if len(left_lines) > 0:             # <<<<<<<<<<<<<<
 *                     left_lines.sort(key=lambda line: line.start_point[0])
 *                     left_point = (left_lines[-1].start_point[0], point[1])
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1002
 *                         return None
 * 
 *                 return None             # <<<<<<<<<<<<<<
 * 
 *         # In case no block lines, just connect to the left border
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":973
 *         for rect in content_rects:
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + threshold >= point[0]:             # <<<<<<<<<<<<<<
 *                 # Loop all table vertical lines to find nearest vertical line at left
 *                 v_lines = [v_line for v_line in table.vertical_lines if v_line.start_point[0] < rect[0]]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":971
 *         content_rects = [content_block.bounding_rect for content_block in table.content_blocks]
 *         content_rects.sort(key=lambda rect: rect[0])
 *         for rect in content_rects:             # <<<<<<<<<<<<<<
 *             # In case the divider line is blocked by a row content
 *             if rect[1] + threshold <= point[1] <= rect[1] + rect[3] - threshold and rect[0] + threshold >= point[0]:
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1005
 * 
 *         # In case no block lines, just connect to the left border
 *         return (table.right_border.start_point[0], point[1])             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_right_border); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1005, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_start_point); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1005, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_10, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1005, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1005, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1005, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_10);
  PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_10);
  __pyx_t_2 = 0;
  __pyx_t_10 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":963
 * 
 *     @staticmethod
 *     def stop_point_at_right(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the right
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.stop_point_at_right", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_threshold);
  __Pyx_XDECREF(__pyx_v_content_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_v_lines);
  __Pyx_XDECREF(__pyx_v_left_lines);
  __Pyx_XDECREF(__pyx_v_right_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_right_point);
  __Pyx_XDECREF(__pyx_v_left_point);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1008
 * 
 *     @staticmethod
 *     def single_text_blocks(boxes, text_blocks, expand=0):             # <<<<<<<<<<<<<<
 *         """Find all single text blocks (text block not in a box)
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_101single_text_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_100single_text_blocks[] = "Find all single text blocks (text block not in a box)\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_101single_text_blocks = {"single_text_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_101single_text_blocks, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_100single_text_blocks};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_101single_text_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_text_blocks = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("single_text_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_boxes,&__pyx_n_s_text_blocks,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("single_text_blocks", 0, 2, 3, 1); __PYX_ERR(0, 1008, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "single_text_blocks") < 0)) __PYX_ERR(0, 1008, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_boxes = values[0];
    __pyx_v_text_blocks = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("single_text_blocks", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1008, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.single_text_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_100single_text_blocks(__pyx_self, __pyx_v_boxes, __pyx_v_text_blocks, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_100single_text_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_text_blocks, PyObject *__pyx_v_expand) {
  PyObject *__pyx_v_single_text_blocks = NULL;
  PyObject *__pyx_v_box = NULL;
  PyObject *__pyx_v_text_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  int __pyx_t_13;
  __Pyx_RefNannySetupContext("single_text_blocks", 0);

  /* "table_extraction/utils_table_extraction.pyx":1011
 *         """Find all single text blocks (text block not in a box)
 *         """
 *         single_text_blocks = []             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             box = Utils.expand_rect(box, expand)
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1011, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_single_text_blocks = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1012
 *         """
 *         single_text_blocks = []
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:
 */
  if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
    __pyx_t_1 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1012, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1012, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1012, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1012, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1012, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1012, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1012, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1013
 *         single_text_blocks = []
 *         for box in boxes:
 *             box = Utils.expand_rect(box, expand)             # <<<<<<<<<<<<<<
 *             for text_block in text_blocks:
 *                 if Utils.rect_inside_rect(box, text_block):
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_box, __pyx_v_expand};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1013, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_v_box, __pyx_v_expand};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1013, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1013, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_box);
      __Pyx_GIVEREF(__pyx_v_box);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_box);
      __Pyx_INCREF(__pyx_v_expand);
      __Pyx_GIVEREF(__pyx_v_expand);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_expand);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1013, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF_SET(__pyx_v_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1014
 *         for box in boxes:
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_inside_rect(box, text_block):
 *                     single_text_blocks.append(text_block)
 */
    if (likely(PyList_CheckExact(__pyx_v_text_blocks)) || PyTuple_CheckExact(__pyx_v_text_blocks)) {
      __pyx_t_4 = __pyx_v_text_blocks; __Pyx_INCREF(__pyx_t_4); __pyx_t_9 = 0;
      __pyx_t_10 = NULL;
    } else {
      __pyx_t_9 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_text_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1014, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_10 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1014, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_10)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1014, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1014, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        } else {
          if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1014, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1014, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        }
      } else {
        __pyx_t_6 = __pyx_t_10(__pyx_t_4);
        if (unlikely(!__pyx_t_6)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1014, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_6);
      }
      __Pyx_XDECREF_SET(__pyx_v_text_block, __pyx_t_6);
      __pyx_t_6 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1015
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:
 *                 if Utils.rect_inside_rect(box, text_block):             # <<<<<<<<<<<<<<
 *                     single_text_blocks.append(text_block)
 *         return list(set(text_blocks)-set(single_text_blocks))
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1015, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1015, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_box, __pyx_v_text_block};
        __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1015, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_box, __pyx_v_text_block};
        __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1015, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1015, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_box);
        __Pyx_GIVEREF(__pyx_v_box);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_7, __pyx_v_box);
        __Pyx_INCREF(__pyx_v_text_block);
        __Pyx_GIVEREF(__pyx_v_text_block);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_7, __pyx_v_text_block);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_11, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1015, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1015, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_12) {

        /* "table_extraction/utils_table_extraction.pyx":1016
 *             for text_block in text_blocks:
 *                 if Utils.rect_inside_rect(box, text_block):
 *                     single_text_blocks.append(text_block)             # <<<<<<<<<<<<<<
 *         return list(set(text_blocks)-set(single_text_blocks))
 * 
 */
        __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_single_text_blocks, __pyx_v_text_block); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 1016, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":1015
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:
 *                 if Utils.rect_inside_rect(box, text_block):             # <<<<<<<<<<<<<<
 *                     single_text_blocks.append(text_block)
 *         return list(set(text_blocks)-set(single_text_blocks))
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1014
 *         for box in boxes:
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_inside_rect(box, text_block):
 *                     single_text_blocks.append(text_block)
 */
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1012
 *         """
 *         single_text_blocks = []
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             box = Utils.expand_rect(box, expand)
 *             for text_block in text_blocks:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1017
 *                 if Utils.rect_inside_rect(box, text_block):
 *                     single_text_blocks.append(text_block)
 *         return list(set(text_blocks)-set(single_text_blocks))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PySet_New(__pyx_v_text_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1017, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PySet_New(__pyx_v_single_text_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1017, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = PyNumber_Subtract(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1017, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PySequence_List(__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1017, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1008
 * 
 *     @staticmethod
 *     def single_text_blocks(boxes, text_blocks, expand=0):             # <<<<<<<<<<<<<<
 *         """Find all single text blocks (text block not in a box)
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.single_text_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_single_text_blocks);
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XDECREF(__pyx_v_text_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1020
 * 
 *     @staticmethod
 *     def single_lines(boxes, lines):             # <<<<<<<<<<<<<<
 *         """Find all single lines (line not in a box)
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_103single_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_102single_lines[] = "Find all single lines (line not in a box)\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_103single_lines = {"single_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_103single_lines, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_102single_lines};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_103single_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("single_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_boxes,&__pyx_n_s_lines,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("single_lines", 1, 2, 2, 1); __PYX_ERR(0, 1020, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "single_lines") < 0)) __PYX_ERR(0, 1020, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_boxes = values[0];
    __pyx_v_lines = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("single_lines", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1020, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.single_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_102single_lines(__pyx_self, __pyx_v_boxes, __pyx_v_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_102single_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_lines) {
  PyObject *__pyx_v_box_lines = NULL;
  PyObject *__pyx_v_box = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  int __pyx_t_13;
  __Pyx_RefNannySetupContext("single_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":1023
 *         """Find all single lines (line not in a box)
 *         """
 *         box_lines = []             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             for line in lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1023, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_box_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1024
 *         """
 *         box_lines = []
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             for line in lines:
 *                 if Utils.line_inside_box(box, line, 0):
 */
  if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
    __pyx_t_1 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1024, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1024, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1024, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1024, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1024, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1024, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1024, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1025
 *         box_lines = []
 *         for box in boxes:
 *             for line in lines:             # <<<<<<<<<<<<<<
 *                 if Utils.line_inside_box(box, line, 0):
 *                     box_lines.append(line)
 */
    if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
      __pyx_t_4 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_5 = 0;
      __pyx_t_6 = NULL;
    } else {
      __pyx_t_5 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1025, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1025, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_6)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1025, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1025, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        } else {
          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1025, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1025, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        }
      } else {
        __pyx_t_7 = __pyx_t_6(__pyx_t_4);
        if (unlikely(!__pyx_t_7)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1025, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_7);
      }
      __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1026
 *         for box in boxes:
 *             for line in lines:
 *                 if Utils.line_inside_box(box, line, 0):             # <<<<<<<<<<<<<<
 *                     box_lines.append(line)
 *         return list(set(lines) - set(box_lines))
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1026, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1026, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_box, __pyx_v_line, __pyx_int_0};
        __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1026, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_box, __pyx_v_line, __pyx_int_0};
        __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1026, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(3+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1026, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_box);
        __Pyx_GIVEREF(__pyx_v_box);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_box);
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_line);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_11, 2+__pyx_t_10, __pyx_int_0);
        __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1026, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1026, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (__pyx_t_12) {

        /* "table_extraction/utils_table_extraction.pyx":1027
 *             for line in lines:
 *                 if Utils.line_inside_box(box, line, 0):
 *                     box_lines.append(line)             # <<<<<<<<<<<<<<
 *         return list(set(lines) - set(box_lines))
 * 
 */
        __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_box_lines, __pyx_v_line); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 1027, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":1026
 *         for box in boxes:
 *             for line in lines:
 *                 if Utils.line_inside_box(box, line, 0):             # <<<<<<<<<<<<<<
 *                     box_lines.append(line)
 *         return list(set(lines) - set(box_lines))
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1025
 *         box_lines = []
 *         for box in boxes:
 *             for line in lines:             # <<<<<<<<<<<<<<
 *                 if Utils.line_inside_box(box, line, 0):
 *                     box_lines.append(line)
 */
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1024
 *         """
 *         box_lines = []
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             for line in lines:
 *                 if Utils.line_inside_box(box, line, 0):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1028
 *                 if Utils.line_inside_box(box, line, 0):
 *                     box_lines.append(line)
 *         return list(set(lines) - set(box_lines))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PySet_New(__pyx_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1028, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PySet_New(__pyx_v_box_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1028, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_7 = PyNumber_Subtract(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1028, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PySequence_List(__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1028, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1020
 * 
 *     @staticmethod
 *     def single_lines(boxes, lines):             # <<<<<<<<<<<<<<
 *         """Find all single lines (line not in a box)
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.single_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box_lines);
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1031
 * 
 *     @staticmethod
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):             # <<<<<<<<<<<<<<
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_105lines_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_105lines_inside_box = {"lines_inside_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_105lines_inside_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_105lines_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_v_return_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lines_inside_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_lines,&__pyx_n_s_threshold,&__pyx_n_s_return_lines,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    values[3] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lines_inside_box", 0, 2, 4, 1); __PYX_ERR(0, 1031, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_return_lines);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lines_inside_box") < 0)) __PYX_ERR(0, 1031, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = values[0];
    __pyx_v_lines = values[1];
    __pyx_v_threshold = values[2];
    __pyx_v_return_lines = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lines_inside_box", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1031, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_104lines_inside_box(__pyx_self, __pyx_v_box, __pyx_v_lines, __pyx_v_threshold, __pyx_v_return_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_104lines_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_lines, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_lines) {
  PyObject *__pyx_v_inside_lines = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("lines_inside_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1032
 *     @staticmethod
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]             # <<<<<<<<<<<<<<
 *         if return_lines:
 *             return inside_lines
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1032, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_2 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1032, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1032, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1032, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1032, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1032, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1032, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1032, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_box, __pyx_v_line, __pyx_v_threshold};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_box, __pyx_v_line, __pyx_v_threshold};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(3+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_INCREF(__pyx_v_box);
      __Pyx_GIVEREF(__pyx_v_box);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_box);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_v_line);
      __Pyx_INCREF(__pyx_v_threshold);
      __Pyx_GIVEREF(__pyx_v_threshold);
      PyTuple_SET_ITEM(__pyx_t_9, 2+__pyx_t_8, __pyx_v_threshold);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1032, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1032, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_10) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_v_line))) __PYX_ERR(0, 1032, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_inside_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1033
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:             # <<<<<<<<<<<<<<
 *             return inside_lines
 *         else:
 */
  __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_v_return_lines); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1033, __pyx_L1_error)
  if (__pyx_t_10) {

    /* "table_extraction/utils_table_extraction.pyx":1034
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:
 *             return inside_lines             # <<<<<<<<<<<<<<
 *         else:
 *             return True if inside_lines else False
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_inside_lines);
    __pyx_r = __pyx_v_inside_lines;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1033
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:             # <<<<<<<<<<<<<<
 *             return inside_lines
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1036
 *             return inside_lines
 *         else:
 *             return True if inside_lines else False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_10 = (PyList_GET_SIZE(__pyx_v_inside_lines) != 0);
    if (__pyx_t_10) {
      __Pyx_INCREF(Py_True);
      __pyx_t_1 = Py_True;
    } else {
      __Pyx_INCREF(Py_False);
      __pyx_t_1 = Py_False;
    }
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1031
 * 
 *     @staticmethod
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):             # <<<<<<<<<<<<<<
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_inside_lines);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1039
 * 
 *     @staticmethod
 *     def line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param box: the box's position
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_107line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_106line_inside_box[] = "\n        :param box: the box's position\n        :param line:\n        :param threshold: the line insides a box with error number, which is this parameter\n        :return: True: if the line insides the box\n                 False: Otherwise\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_107line_inside_box = {"line_inside_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_107line_inside_box, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_106line_inside_box};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_107line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_inside_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_inside_box", 0, 2, 3, 1); __PYX_ERR(0, 1039, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_inside_box") < 0)) __PYX_ERR(0, 1039, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = values[0];
    __pyx_v_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_inside_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1039, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_106line_inside_box(__pyx_self, __pyx_v_box, __pyx_v_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_106line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_box_x = NULL;
  PyObject *__pyx_v_box_y = NULL;
  PyObject *__pyx_v_box_w = NULL;
  PyObject *__pyx_v_box_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("line_inside_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1047
 *                  False: Otherwise
 *         """
 *         box_x, box_y, box_w, box_h = box             # <<<<<<<<<<<<<<
 *         return line.start_point[0] >= box_x - threshold and line.end_point[0] <= box_x + box_w + threshold \
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1047, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1047, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1047, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1047, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1047, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_box_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_box_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_box_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_box_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1048
 *         """
 *         box_x, box_y, box_w, box_h = box
 *         return line.start_point[0] >= box_x - threshold and line.end_point[0] <= box_x + box_w + threshold \             # <<<<<<<<<<<<<<
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Subtract(__pyx_v_box_x, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1048, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    goto __pyx_L5_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":1049
 *         box_x, box_y, box_w, box_h = box
 *         return line.start_point[0] >= box_x - threshold and line.end_point[0] <= box_x + box_w + threshold \
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);

  /* "table_extraction/utils_table_extraction.pyx":1048
 *         """
 *         box_x, box_y, box_w, box_h = box
 *         return line.start_point[0] >= box_x - threshold and line.end_point[0] <= box_x + box_w + threshold \             # <<<<<<<<<<<<<<
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold
 * 
 */
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Add(__pyx_v_box_x, __pyx_v_box_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1048, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1048, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    goto __pyx_L5_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":1049
 *         box_x, box_y, box_w, box_h = box
 *         return line.start_point[0] >= box_x - threshold and line.end_point[0] <= box_x + box_w + threshold \
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_box_y, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_1, Py_GE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1049, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Add(__pyx_v_box_y, __pyx_v_box_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1049, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_4 = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_L5_bool_binop_done:;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1039
 * 
 *     @staticmethod
 *     def line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param box: the box's position
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box_x);
  __Pyx_XDECREF(__pyx_v_box_y);
  __Pyx_XDECREF(__pyx_v_box_w);
  __Pyx_XDECREF(__pyx_v_box_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1052
 * 
 *     @staticmethod
 *     def v_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_109v_line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_109v_line_inside_box = {"v_line_inside_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_109v_line_inside_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_109v_line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("v_line_inside_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("v_line_inside_box", 0, 2, 3, 1); __PYX_ERR(0, 1052, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "v_line_inside_box") < 0)) __PYX_ERR(0, 1052, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = values[0];
    __pyx_v_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("v_line_inside_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1052, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.v_line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_108v_line_inside_box(__pyx_self, __pyx_v_box, __pyx_v_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_108v_line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("v_line_inside_box", 0);
  __Pyx_INCREF(__pyx_v_box);

  /* "table_extraction/utils_table_extraction.pyx":1053
 *     @staticmethod
 *     def v_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, threshold)             # <<<<<<<<<<<<<<
 *         box = Utils.expand_width_rect(box, -threshold)
 *         return Utils.line_inside_box(box, line, 0)
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1053, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_height_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1053, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_v_threshold};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_v_threshold};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_box);
    __Pyx_INCREF(__pyx_v_threshold);
    __Pyx_GIVEREF(__pyx_v_threshold);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_threshold);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1053, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_box, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1054
 *     def v_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)             # <<<<<<<<<<<<<<
 *         return Utils.line_inside_box(box, line, 0)
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1054, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_expand_width_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1054, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Negative(__pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1054, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_5);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_5, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1054, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1054, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1054, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_4, __pyx_v_box);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_4, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1054, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF_SET(__pyx_v_box, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1055
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)
 *         return Utils.line_inside_box(box, line, 0)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1055, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1055, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_box, __pyx_v_line, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_4, 3+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_box, __pyx_v_line, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_4, 3+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_3 = PyTuple_New(3+__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (__pyx_t_5) {
      __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_4, __pyx_v_box);
    __Pyx_INCREF(__pyx_v_line);
    __Pyx_GIVEREF(__pyx_v_line);
    PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_4, __pyx_v_line);
    __Pyx_INCREF(__pyx_int_0);
    __Pyx_GIVEREF(__pyx_int_0);
    PyTuple_SET_ITEM(__pyx_t_3, 2+__pyx_t_4, __pyx_int_0);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1055, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1052
 * 
 *     @staticmethod
 *     def v_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.v_line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1058
 * 
 *     @staticmethod
 *     def h_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_111h_line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_111h_line_inside_box = {"h_line_inside_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_111h_line_inside_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_111h_line_inside_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("h_line_inside_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("h_line_inside_box", 0, 2, 3, 1); __PYX_ERR(0, 1058, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "h_line_inside_box") < 0)) __PYX_ERR(0, 1058, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = values[0];
    __pyx_v_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("h_line_inside_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1058, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.h_line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_110h_line_inside_box(__pyx_self, __pyx_v_box, __pyx_v_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_110h_line_inside_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("h_line_inside_box", 0);
  __Pyx_INCREF(__pyx_v_box);

  /* "table_extraction/utils_table_extraction.pyx":1059
 *     @staticmethod
 *     def h_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, -threshold)             # <<<<<<<<<<<<<<
 *         box = Utils.expand_width_rect(box, threshold)
 *         return Utils.line_inside_box(box, line, 0)
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_height_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Negative(__pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1059, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_box, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1059, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_box, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1059, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1059, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_box);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1059, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_box, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1060
 *     def h_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)             # <<<<<<<<<<<<<<
 *         return Utils.line_inside_box(box, line, 0)
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1060, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_expand_width_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1060, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_box, __pyx_v_threshold};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1060, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_box, __pyx_v_threshold};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1060, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1060, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_5, __pyx_v_box);
    __Pyx_INCREF(__pyx_v_threshold);
    __Pyx_GIVEREF(__pyx_v_threshold);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_5, __pyx_v_threshold);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1060, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF_SET(__pyx_v_box, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1061
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)
 *         return Utils.line_inside_box(box, line, 0)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1061, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_box, __pyx_v_line, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1061, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_box, __pyx_v_line, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1061, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_3 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1061, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (__pyx_t_6) {
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_5, __pyx_v_box);
    __Pyx_INCREF(__pyx_v_line);
    __Pyx_GIVEREF(__pyx_v_line);
    PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_5, __pyx_v_line);
    __Pyx_INCREF(__pyx_int_0);
    __Pyx_GIVEREF(__pyx_int_0);
    PyTuple_SET_ITEM(__pyx_t_3, 2+__pyx_t_5, __pyx_int_0);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1061, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1058
 * 
 *     @staticmethod
 *     def h_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.h_line_inside_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1064
 * 
 *     @staticmethod
 *     def expand_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add padding to the rect
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_113expand_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_112expand_rect[] = "\n        :return: add padding to the rect\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_113expand_rect = {"expand_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_113expand_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_112expand_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_113expand_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_expand,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_rect", 1, 2, 2, 1); __PYX_ERR(0, 1064, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_rect") < 0)) __PYX_ERR(0, 1064, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_expand = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1064, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_112expand_rect(__pyx_self, __pyx_v_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_112expand_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("expand_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1068
 *         :return: add padding to the rect
 *         """
 *         return rect[0] - expand, rect[1] - expand, rect[2] + 2 * expand, rect[3] + 2 * expand             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_v_expand); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_expand); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_1 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_6 = PyNumber_Add(__pyx_t_4, __pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyTuple_New(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1068, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_6);
  PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_6);
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1064
 * 
 *     @staticmethod
 *     def expand_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add padding to the rect
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1071
 * 
 *     @staticmethod
 *     def expand_width_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add horizontal padding to the rect only.
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_115expand_width_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_114expand_width_rect[] = "\n        :return: add horizontal padding to the rect only.\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_115expand_width_rect = {"expand_width_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_115expand_width_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_114expand_width_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_115expand_width_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_width_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_expand,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_width_rect", 1, 2, 2, 1); __PYX_ERR(0, 1071, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_width_rect") < 0)) __PYX_ERR(0, 1071, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_expand = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_width_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1071, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_width_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_114expand_width_rect(__pyx_self, __pyx_v_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_114expand_width_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("expand_width_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1075
 *         :return: add horizontal padding to the rect only.
 *         """
 *         return rect[0] - expand, rect[1], rect[2] + 2 * expand, rect[3]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_v_expand); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Add(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyTuple_New(4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_4);
  __pyx_t_2 = 0;
  __pyx_t_1 = 0;
  __pyx_t_5 = 0;
  __pyx_t_4 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1071
 * 
 *     @staticmethod
 *     def expand_width_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add horizontal padding to the rect only.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_width_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1078
 * 
 *     @staticmethod
 *     def expand_height_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add vertical padding to the rect only
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_117expand_height_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_116expand_height_rect[] = "\n        :return: add vertical padding to the rect only\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_117expand_height_rect = {"expand_height_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_117expand_height_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_116expand_height_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_117expand_height_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_height_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_expand,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_height_rect", 1, 2, 2, 1); __PYX_ERR(0, 1078, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_height_rect") < 0)) __PYX_ERR(0, 1078, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_expand = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_height_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1078, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_height_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_116expand_height_rect(__pyx_self, __pyx_v_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_116expand_height_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("expand_height_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1082
 *         :return: add vertical padding to the rect only
 *         """
 *         return rect[0], rect[1] - expand, rect[2], rect[3] + 2 * expand             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_v_expand); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = PyNumber_Add(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = PyTuple_New(4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1082, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_6);
  PyTuple_SET_ITEM(__pyx_t_5, 3, __pyx_t_6);
  __pyx_t_1 = 0;
  __pyx_t_3 = 0;
  __pyx_t_2 = 0;
  __pyx_t_6 = 0;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1078
 * 
 *     @staticmethod
 *     def expand_height_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add vertical padding to the rect only
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_height_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1085
 * 
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_119line_inside_table_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_119line_inside_table_box = {"line_inside_table_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_119line_inside_table_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_119line_inside_table_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_inside_table_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_line,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_inside_table_box", 1, 3, 3, 1); __PYX_ERR(0, 1085, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_inside_table_box", 1, 3, 3, 2); __PYX_ERR(0, 1085, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_inside_table_box") < 0)) __PYX_ERR(0, 1085, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_rect = values[0];
    __pyx_v_line = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_inside_table_box", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1085, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_table_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_118line_inside_table_box(__pyx_self, __pyx_v_rect, __pyx_v_line, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_118line_inside_table_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_line, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("line_inside_table_box", 0);
  __Pyx_INCREF(__pyx_v_rect);

  /* "table_extraction/utils_table_extraction.pyx":1086
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):
 *         if line.orientation == 'h':             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_width_rect(rect, expand)
 *             return Utils.line_inside_box(rect, line, 0)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1086, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1086, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1087
 *     def line_inside_table_box(rect, line, expand):
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)             # <<<<<<<<<<<<<<
 *             return Utils.line_inside_box(rect, line, 0)
 *         else:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1087, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_expand_width_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1087, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_rect, __pyx_v_expand};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1087, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_v_rect, __pyx_v_expand};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1087, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1087, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_expand);
      __Pyx_GIVEREF(__pyx_v_expand);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_expand);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1087, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_rect, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1088
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)
 *             return Utils.line_inside_box(rect, line, 0)             # <<<<<<<<<<<<<<
 *         else:
 *             rect = Utils.expand_height_rect(rect, expand)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_v_rect, __pyx_v_line, __pyx_int_0};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1088, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_v_rect, __pyx_v_line, __pyx_int_0};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1088, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1088, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_5, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_5, __pyx_v_line);
      __Pyx_INCREF(__pyx_int_0);
      __Pyx_GIVEREF(__pyx_int_0);
      PyTuple_SET_ITEM(__pyx_t_3, 2+__pyx_t_5, __pyx_int_0);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_3, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1088, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1086
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):
 *         if line.orientation == 'h':             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_width_rect(rect, expand)
 *             return Utils.line_inside_box(rect, line, 0)
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1090
 *             return Utils.line_inside_box(rect, line, 0)
 *         else:
 *             rect = Utils.expand_height_rect(rect, expand)             # <<<<<<<<<<<<<<
 *             return Utils.line_inside_box(rect, line, 0)
 * 
 */
  /*else*/ {
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_expand_height_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_rect, __pyx_v_expand};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1090, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_rect, __pyx_v_expand};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1090, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1090, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_5, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_expand);
      __Pyx_GIVEREF(__pyx_v_expand);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_5, __pyx_v_expand);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1090, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_rect, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1091
 *         else:
 *             rect = Utils.expand_height_rect(rect, expand)
 *             return Utils.line_inside_box(rect, line, 0)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_rect, __pyx_v_line, __pyx_int_0};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1091, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_rect, __pyx_v_line, __pyx_int_0};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1091, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1091, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_line);
      __Pyx_INCREF(__pyx_int_0);
      __Pyx_GIVEREF(__pyx_int_0);
      PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_5, __pyx_int_0);
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1091, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1085
 * 
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_table_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1094
 * 
 *     @staticmethod
 *     def rect_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect inside a_rect
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_121rect_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_120rect_inside_rect[] = "Check if b_rect inside a_rect\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_121rect_inside_rect = {"rect_inside_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_121rect_inside_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_120rect_inside_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_121rect_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_inside_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_inside_rect", 0, 2, 3, 1); __PYX_ERR(0, 1094, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_inside_rect") < 0)) __PYX_ERR(0, 1094, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_inside_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1094, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_120rect_inside_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_120rect_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_v_a_x = NULL;
  PyObject *__pyx_v_a_y = NULL;
  PyObject *__pyx_v_a_w = NULL;
  PyObject *__pyx_v_a_h = NULL;
  PyObject *__pyx_v_b_x = NULL;
  PyObject *__pyx_v_b_y = NULL;
  PyObject *__pyx_v_b_w = NULL;
  PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *(*__pyx_t_8)(PyObject *);
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("rect_inside_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1097
 *         """Check if b_rect inside a_rect
 *         """
 *         a_x, a_y, a_w, a_h = Utils.expand_rect(a_rect, expand)             # <<<<<<<<<<<<<<
 *         b_x, b_y, b_w, b_h = b_rect
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1097, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1097, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1097, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1097, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1097, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_a_rect);
    __Pyx_GIVEREF(__pyx_v_a_rect);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_a_rect);
    __Pyx_INCREF(__pyx_v_expand);
    __Pyx_GIVEREF(__pyx_v_expand);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_expand);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1097, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1097, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_6);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1097, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
    __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1097, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = Py_TYPE(__pyx_t_7)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_7); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_7), 4) < 0) __PYX_ERR(0, 1097, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1097, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_x = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_y = __pyx_t_5;
  __pyx_t_5 = 0;
  __pyx_v_a_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_h = __pyx_t_6;
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1098
 *         """
 *         a_x, a_y, a_w, a_h = Utils.expand_rect(a_rect, expand)
 *         b_x, b_y, b_w, b_h = b_rect             # <<<<<<<<<<<<<<
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1098, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_5);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1098, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
    __pyx_t_3 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1098, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_3); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_3), 4) < 0) __PYX_ERR(0, 1098, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1098, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_b_y = __pyx_t_6;
  __pyx_t_6 = 0;
  __pyx_v_b_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_h = __pyx_t_5;
  __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1099
 *         a_x, a_y, a_w, a_h = Utils.expand_rect(a_rect, expand)
 *         b_x, b_y, b_w, b_h = b_rect
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_b_x, __pyx_v_a_x); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_2, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1099, __pyx_L1_error)
  if (__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_5 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_6 = PyNumber_Subtract(__pyx_v_b_y, __pyx_v_a_y); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_6, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1099, __pyx_L1_error)
  if (__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_5 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = PyNumber_Add(__pyx_v_a_x, __pyx_v_a_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_1, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1099, __pyx_L1_error)
  if (__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_5 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_6 = PyNumber_Add(__pyx_v_a_y, __pyx_v_a_h); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_1 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_6, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1099, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_5 = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_L7_bool_binop_done:;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1094
 * 
 *     @staticmethod
 *     def rect_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect inside a_rect
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1102
 * 
 *     @staticmethod
 *     def rect_horizontal_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect horizontaly inside a_rect
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_123rect_horizontal_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_122rect_horizontal_inside_rect[] = "Check if b_rect horizontaly inside a_rect\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_123rect_horizontal_inside_rect = {"rect_horizontal_inside_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_123rect_horizontal_inside_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_122rect_horizontal_inside_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_123rect_horizontal_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_horizontal_inside_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_horizontal_inside_rect", 0, 2, 3, 1); __PYX_ERR(0, 1102, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_horizontal_inside_rect") < 0)) __PYX_ERR(0, 1102, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_horizontal_inside_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1102, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_122rect_horizontal_inside_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_122rect_horizontal_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_v_a_x = NULL;
  CYTHON_UNUSED PyObject *__pyx_v__ = NULL;
  PyObject *__pyx_v_a_w = NULL;
  PyObject *__pyx_v_b_x = NULL;
  PyObject *__pyx_v_b_w = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *(*__pyx_t_8)(PyObject *);
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("rect_horizontal_inside_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1105
 *         """Check if b_rect horizontaly inside a_rect
 *         """
 *         a_x, _, a_w, _ = Utils.expand_rect(a_rect, expand)             # <<<<<<<<<<<<<<
 *         b_x, _, b_w, _ = b_rect
 *         return b_x - a_x >= 0 and (a_x + a_w) - (b_x + b_w) >= 0
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1105, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1105, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1105, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1105, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1105, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_a_rect);
    __Pyx_GIVEREF(__pyx_v_a_rect);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_a_rect);
    __Pyx_INCREF(__pyx_v_expand);
    __Pyx_GIVEREF(__pyx_v_expand);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_expand);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1105, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1105, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_6);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1105, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
    __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1105, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = Py_TYPE(__pyx_t_7)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_7); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_7), 4) < 0) __PYX_ERR(0, 1105, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1105, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_x = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v__ = __pyx_t_5;
  __pyx_t_5 = 0;
  __pyx_v_a_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_6);
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1106
 *         """
 *         a_x, _, a_w, _ = Utils.expand_rect(a_rect, expand)
 *         b_x, _, b_w, _ = b_rect             # <<<<<<<<<<<<<<
 *         return b_x - a_x >= 0 and (a_x + a_w) - (b_x + b_w) >= 0
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1106, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_5);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1106, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
    __pyx_t_3 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1106, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_3); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_3), 4) < 0) __PYX_ERR(0, 1106, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1106, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_6);
  __pyx_t_6 = 0;
  __pyx_v_b_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_5);
  __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1107
 *         a_x, _, a_w, _ = Utils.expand_rect(a_rect, expand)
 *         b_x, _, b_w, _ = b_rect
 *         return b_x - a_x >= 0 and (a_x + a_w) - (b_x + b_w) >= 0             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_b_x, __pyx_v_a_x); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_2, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1107, __pyx_L1_error)
  if (__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_5 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_6 = PyNumber_Add(__pyx_v_a_x, __pyx_v_a_w); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_2 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_6, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1107, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_5 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L7_bool_binop_done:;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1102
 * 
 *     @staticmethod
 *     def rect_horizontal_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect horizontaly inside a_rect
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v__);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1110
 * 
 *     @staticmethod
 *     def rect_vertical_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect verticaly inside a_rect
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_125rect_vertical_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_124rect_vertical_inside_rect[] = "Check if b_rect verticaly inside a_rect\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_125rect_vertical_inside_rect = {"rect_vertical_inside_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_125rect_vertical_inside_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_124rect_vertical_inside_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_125rect_vertical_inside_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_vertical_inside_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_vertical_inside_rect", 0, 2, 3, 1); __PYX_ERR(0, 1110, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_vertical_inside_rect") < 0)) __PYX_ERR(0, 1110, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_vertical_inside_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1110, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_124rect_vertical_inside_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_124rect_vertical_inside_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_expand) {
  CYTHON_UNUSED PyObject *__pyx_v__ = NULL;
  PyObject *__pyx_v_a_y = NULL;
  PyObject *__pyx_v_a_h = NULL;
  PyObject *__pyx_v_b_y = NULL;
  PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *(*__pyx_t_8)(PyObject *);
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("rect_vertical_inside_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1113
 *         """Check if b_rect verticaly inside a_rect
 *         """
 *         _, a_y, _, a_h = Utils.expand_rect(a_rect, expand)             # <<<<<<<<<<<<<<
 *         _, b_y, _, b_h = b_rect
 *         return b_y - a_y >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1113, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1113, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1113, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_expand};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1113, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1113, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_a_rect);
    __Pyx_GIVEREF(__pyx_v_a_rect);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_a_rect);
    __Pyx_INCREF(__pyx_v_expand);
    __Pyx_GIVEREF(__pyx_v_expand);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_expand);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1113, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1113, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_6);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1113, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_5,&__pyx_t_2,&__pyx_t_6};
    __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1113, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = Py_TYPE(__pyx_t_7)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_7); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_7), 4) < 0) __PYX_ERR(0, 1113, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1113, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v__ = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_y = __pyx_t_5;
  __pyx_t_5 = 0;
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_v_a_h = __pyx_t_6;
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1114
 *         """
 *         _, a_y, _, a_h = Utils.expand_rect(a_rect, expand)
 *         _, b_y, _, b_h = b_rect             # <<<<<<<<<<<<<<
 *         return b_y - a_y >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1114, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_6 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_5);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1114, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_6,&__pyx_t_2,&__pyx_t_5};
    __pyx_t_3 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1114, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_8(__pyx_t_3); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_3), 4) < 0) __PYX_ERR(0, 1114, __pyx_L1_error)
    __pyx_t_8 = NULL;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1114, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_v_b_y = __pyx_t_6;
  __pyx_t_6 = 0;
  __Pyx_DECREF_SET(__pyx_v__, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_v_b_h = __pyx_t_5;
  __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1115
 *         _, a_y, _, a_h = Utils.expand_rect(a_rect, expand)
 *         _, b_y, _, b_h = b_rect
 *         return b_y - a_y >= 0 and (a_y + a_h) - (b_y + b_h) >= 0             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_b_y, __pyx_v_a_y); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_2, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1115, __pyx_L1_error)
  if (__pyx_t_9) {
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_5 = __pyx_t_6;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_6 = PyNumber_Add(__pyx_v_a_y, __pyx_v_a_h); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_2 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_6, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_5 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L7_bool_binop_done:;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1110
 * 
 *     @staticmethod
 *     def rect_vertical_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect verticaly inside a_rect
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_inside_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v__);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1118
 * 
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_127is_rect_contains_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_127is_rect_contains_rects = {"is_rect_contains_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_127is_rect_contains_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_127is_rect_contains_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_reverse = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_rect_contains_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_rects,&__pyx_n_s_reverse,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_rect_contains_rects", 0, 2, 3, 1); __PYX_ERR(0, 1118, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_reverse);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_rect_contains_rects") < 0)) __PYX_ERR(0, 1118, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_rects = values[1];
    __pyx_v_reverse = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_rect_contains_rects", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1118, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_contains_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_126is_rect_contains_rects(__pyx_self, __pyx_v_a_rect, __pyx_v_rects, __pyx_v_reverse);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_126is_rect_contains_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_reverse) {
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  __Pyx_RefNannySetupContext("is_rect_contains_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1119
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 return True
 */
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1119, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1119, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1119, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1119, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1119, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1119, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1119, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1120
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 return True
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1120, __pyx_L1_error)
    __pyx_t_7 = ((!__pyx_t_6) != 0);
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L6_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1120, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1120, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_9)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1120, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1120, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1120, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_rect);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1120, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    }
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1120, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1121
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 return True             # <<<<<<<<<<<<<<
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 return True
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1120
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 return True
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1122
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 return True
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1122, __pyx_L1_error)
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L8_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1122, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1122, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_11);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_11, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1122, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1122, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1122, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_9) {
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_9); __pyx_t_9 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_10, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_10, __pyx_v_a_rect);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1122, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1122, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1123
 *                 return True
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1122
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 return True
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1119
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 return True
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1124
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1118
 * 
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_contains_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1127
 * 
 *     @staticmethod
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         ret_rects = []
 *         for rect in rects:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_129get_rect_contains_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_129get_rect_contains_rects = {"get_rect_contains_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_129get_rect_contains_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_129get_rect_contains_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_reverse = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_rect_contains_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_rects,&__pyx_n_s_reverse,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("get_rect_contains_rects", 0, 2, 3, 1); __PYX_ERR(0, 1127, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_reverse);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_rect_contains_rects") < 0)) __PYX_ERR(0, 1127, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_rects = values[1];
    __pyx_v_reverse = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_rect_contains_rects", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1127, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rect_contains_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_128get_rect_contains_rects(__pyx_self, __pyx_v_a_rect, __pyx_v_rects, __pyx_v_reverse);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_128get_rect_contains_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_reverse) {
  PyObject *__pyx_v_ret_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("get_rect_contains_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1128
 *     @staticmethod
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):
 *         ret_rects = []             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1128, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ret_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1129
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):
 *         ret_rects = []
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_rects.append(rect)
 */
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1129, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1129, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1129, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1129, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1129, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1129, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1129, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1130
 *         ret_rects = []
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 ret_rects.append(rect)
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1130, __pyx_L1_error)
    __pyx_t_7 = ((!__pyx_t_6) != 0);
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L6_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1130, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1130, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_9)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1130, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
      PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1130, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1130, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_rect);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1130, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    }
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1130, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1131
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_rects.append(rect)             # <<<<<<<<<<<<<<
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_rects.append(rect)
 */
      __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_ret_rects, __pyx_v_rect); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 1131, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1130
 *         ret_rects = []
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 ret_rects.append(rect)
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
      goto __pyx_L5;
    }

    /* "table_extraction/utils_table_extraction.pyx":1132
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_rects.append(rect)
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 ret_rects.append(rect)
 *         return ret_rects
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1132, __pyx_L1_error)
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L8_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = NULL;
    __pyx_t_10 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_11);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_11, function);
        __pyx_t_10 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1132, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1132, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1132, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_9) {
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_9); __pyx_t_9 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_10, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_10, __pyx_v_a_rect);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1132, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1132, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1133
 *                 ret_rects.append(rect)
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_rects.append(rect)             # <<<<<<<<<<<<<<
 *         return ret_rects
 * 
 */
      __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_ret_rects, __pyx_v_rect); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 1133, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1132
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_rects.append(rect)
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 ret_rects.append(rect)
 *         return ret_rects
 */
    }
    __pyx_L5:;

    /* "table_extraction/utils_table_extraction.pyx":1129
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):
 *         ret_rects = []
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_rects.append(rect)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1134
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_rects.append(rect)
 *         return ret_rects             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_ret_rects);
  __pyx_r = __pyx_v_ret_rects;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1127
 * 
 *     @staticmethod
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         ret_rects = []
 *         for rect in rects:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rect_contains_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ret_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1137
 * 
 *     @staticmethod
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):             # <<<<<<<<<<<<<<
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_131get_rect_contains_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_131get_rect_contains_blocks = {"get_rect_contains_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_131get_rect_contains_blocks, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_131get_rect_contains_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_blocks = 0;
  PyObject *__pyx_v_reverse = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_rect_contains_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_blocks,&__pyx_n_s_reverse,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("get_rect_contains_blocks", 0, 2, 3, 1); __PYX_ERR(0, 1137, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_reverse);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_rect_contains_blocks") < 0)) __PYX_ERR(0, 1137, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_blocks = values[1];
    __pyx_v_reverse = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_rect_contains_blocks", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1137, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rect_contains_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_130get_rect_contains_blocks(__pyx_self, __pyx_v_a_rect, __pyx_v_blocks, __pyx_v_reverse);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_130get_rect_contains_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_blocks, PyObject *__pyx_v_reverse) {
  PyObject *__pyx_v_rects = NULL;
  PyObject *__pyx_v_ret_blocks = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  __Pyx_RefNannySetupContext("get_rect_contains_blocks", 0);

  /* "table_extraction/utils_table_extraction.pyx":1138
 *     @staticmethod
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):
 *         rects = [block.bounding_rect for block in blocks]             # <<<<<<<<<<<<<<
 *         ret_blocks = []
 *         for i, rect in enumerate(rects):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_blocks)) || PyTuple_CheckExact(__pyx_v_blocks)) {
    __pyx_t_2 = __pyx_v_blocks; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_blocks); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1138, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1138, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1138, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1138, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1138, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1138, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1138, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_block, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1138, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_5))) __PYX_ERR(0, 1138, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1139
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []             # <<<<<<<<<<<<<<
 *         for i, rect in enumerate(rects):
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ret_blocks = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1140
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 *         for i, rect in enumerate(rects):             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_blocks.append(blocks[i])
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_1 = __pyx_int_0;
  __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1140, __pyx_L1_error)
    #else
    __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1140, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_5 = __Pyx_PyInt_AddObjC(__pyx_t_1, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1140, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1);
    __pyx_t_1 = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1141
 *         ret_blocks = []
 *         for i, rect in enumerate(rects):
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 ret_blocks.append(blocks[i])
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1141, __pyx_L1_error)
    __pyx_t_8 = ((!__pyx_t_7) != 0);
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L8_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1141, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1141, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = NULL;
    __pyx_t_11 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_10, function);
        __pyx_t_11 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_10)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1141, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
      PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_a_rect, __pyx_v_rect};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1141, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_12 = PyTuple_New(2+__pyx_t_11); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1141, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      if (__pyx_t_9) {
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_9); __pyx_t_9 = NULL;
      }
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_11, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_11, __pyx_v_rect);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_12, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1141, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    }
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __pyx_t_8;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1142
 *         for i, rect in enumerate(rects):
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_blocks.append(blocks[i])             # <<<<<<<<<<<<<<
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_blocks.append(blocks[i])
 */
      __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_v_blocks, __pyx_v_i); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1142, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_ret_blocks, __pyx_t_5); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 1142, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1141
 *         ret_blocks = []
 *         for i, rect in enumerate(rects):
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):             # <<<<<<<<<<<<<<
 *                 ret_blocks.append(blocks[i])
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 */
      goto __pyx_L7;
    }

    /* "table_extraction/utils_table_extraction.pyx":1143
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_blocks.append(blocks[i])
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 ret_blocks.append(blocks[i])
 *         return ret_blocks
 */
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_v_reverse); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1143, __pyx_L1_error)
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L10_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_Utils); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1143, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1143, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __pyx_t_10 = NULL;
    __pyx_t_11 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
      __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_12);
      if (likely(__pyx_t_10)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
        __Pyx_INCREF(__pyx_t_10);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_12, function);
        __pyx_t_11 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_12)) {
      PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1143, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_12)) {
      PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_rect, __pyx_v_a_rect};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1143, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(2+__pyx_t_11); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1143, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_10) {
        __Pyx_GIVEREF(__pyx_t_10); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_10); __pyx_t_10 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_11, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_11, __pyx_v_a_rect);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_12, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1143, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1143, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __pyx_t_8;
    __pyx_L10_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1144
 *                 ret_blocks.append(blocks[i])
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_blocks.append(blocks[i])             # <<<<<<<<<<<<<<
 *         return ret_blocks
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_GetItem(__pyx_v_blocks, __pyx_v_i); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1144, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_ret_blocks, __pyx_t_5); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 1144, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1143
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_blocks.append(blocks[i])
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):             # <<<<<<<<<<<<<<
 *                 ret_blocks.append(blocks[i])
 *         return ret_blocks
 */
    }
    __pyx_L7:;

    /* "table_extraction/utils_table_extraction.pyx":1140
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 *         for i, rect in enumerate(rects):             # <<<<<<<<<<<<<<
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 *                 ret_blocks.append(blocks[i])
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1145
 *             elif reverse and Utils.rect_inside_rect(rect, a_rect):
 *                 ret_blocks.append(blocks[i])
 *         return ret_blocks             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_ret_blocks);
  __pyx_r = __pyx_v_ret_blocks;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1137
 * 
 *     @staticmethod
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):             # <<<<<<<<<<<<<<
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rect_contains_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XDECREF(__pyx_v_ret_blocks);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1149
 * 
 *     @staticmethod
 *     def lines_over_line(line, lines, direction="left"):             # <<<<<<<<<<<<<<
 *         """
 *         Get lines over line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_133lines_over_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_132lines_over_line[] = "\n        Get lines over line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_133lines_over_line = {"lines_over_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_133lines_over_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_132lines_over_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_133lines_over_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_direction = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lines_over_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_lines,&__pyx_n_s_direction,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_left));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lines_over_line", 0, 2, 3, 1); __PYX_ERR(0, 1149, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_direction);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lines_over_line") < 0)) __PYX_ERR(0, 1149, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_lines = values[1];
    __pyx_v_direction = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lines_over_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1149, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_132lines_over_line(__pyx_self, __pyx_v_line, __pyx_v_lines, __pyx_v_direction);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1156
 * 
 *         if direction=="top":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]             # <<<<<<<<<<<<<<
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_lambda24(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_lambda24 = {"lambda24", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_lambda24, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_lambda24(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda24 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda24", 1, 2, 2, 1); __PYX_ERR(0, 1156, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda24") < 0)) __PYX_ERR(0, 1156, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda24", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1156, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda24", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda24(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda24(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("lambda24", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1156, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1156, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda24", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1158
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]             # <<<<<<<<<<<<<<
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_1lambda25(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_1lambda25 = {"lambda25", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_1lambda25, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_1lambda25(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda25 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda25", 1, 2, 2, 1); __PYX_ERR(0, 1158, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda25") < 0)) __PYX_ERR(0, 1158, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda25", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1158, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda25", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda25(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda25(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("lambda25", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1158, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1158, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda25", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1160
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]             # <<<<<<<<<<<<<<
 *         elif direction=="right":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_2lambda26(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_2lambda26 = {"lambda26", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_2lambda26, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_2lambda26(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda26 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda26", 1, 2, 2, 1); __PYX_ERR(0, 1160, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda26") < 0)) __PYX_ERR(0, 1160, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda26", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1160, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda26", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda26(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda26(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("lambda26", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1160, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1160, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda26", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1162
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]             # <<<<<<<<<<<<<<
 *         else:
 *             return over_lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_3lambda27(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_3lambda27 = {"lambda27", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_3lambda27, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_3lambda27(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda27 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda27", 1, 2, 2, 1); __PYX_ERR(0, 1162, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda27") < 0)) __PYX_ERR(0, 1162, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda27", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1162, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda27", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda27(__pyx_self, __pyx_v_a_line, __pyx_v_b_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda27(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("lambda27", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1162, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1162, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line.lambda27", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1149
 * 
 *     @staticmethod
 *     def lines_over_line(line, lines, direction="left"):             # <<<<<<<<<<<<<<
 *         """
 *         Get lines over line
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_132lines_over_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_lines, PyObject *__pyx_v_direction) {
  PyObject *__pyx_v_over_lines = NULL;
  PyObject *__pyx_v_over_f = NULL;
  PyObject *__pyx_v_other_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("lines_over_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1153
 *         Get lines over line
 *         """
 *         over_lines = []             # <<<<<<<<<<<<<<
 * 
 *         if direction=="top":
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1153, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_over_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1155
 *         over_lines = []
 * 
 *         if direction=="top":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_top, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1155, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1156
 * 
 *         if direction=="top":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]             # <<<<<<<<<<<<<<
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 */
    __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_lambda24, 0, __pyx_n_s_Utils_lines_over_line_locals_lam, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1156, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_over_f = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1155
 *         over_lines = []
 * 
 *         if direction=="top":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1157
 *         if direction=="top":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_bottom, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1157, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1158
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]             # <<<<<<<<<<<<<<
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 */
    __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_1lambda25, 0, __pyx_n_s_Utils_lines_over_line_locals_lam, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1158, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_over_f = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1157
 *         if direction=="top":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]<=b_line.start_point[1] and a_line.end_point[1]<=b_line.end_point[1]
 *         elif direction=="bottom":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1159
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_left, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1159, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1160
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]             # <<<<<<<<<<<<<<
 *         elif direction=="right":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]
 */
    __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_2lambda26, 0, __pyx_n_s_Utils_lines_over_line_locals_lam, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1160, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_over_f = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1159
 *         elif direction=="bottom":
 *             over_f = lambda a_line, b_line:a_line.start_point[1]>=b_line.start_point[1] and a_line.end_point[1]>=b_line.end_point[1]
 *         elif direction=="left":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1161
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]
 *         else:
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_direction, __pyx_n_s_right, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1161, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1162
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]             # <<<<<<<<<<<<<<
 *         else:
 *             return over_lines
 */
    __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_over_line_3lambda27, 0, __pyx_n_s_Utils_lines_over_line_locals_lam, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1162, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_over_f = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1161
 *         elif direction=="left":
 *             over_f = lambda a_line, b_line:a_line.start_point[0]<=b_line.start_point[0] and a_line.end_point[0]<=b_line.end_point[0]
 *         elif direction=="right":             # <<<<<<<<<<<<<<
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]
 *         else:
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1164
 *             over_f = lambda a_line, b_line:a_line.start_point[0]>=b_line.start_point[0] and a_line.end_point[0]>=b_line.end_point[0]
 *         else:
 *             return over_lines             # <<<<<<<<<<<<<<
 * 
 *         for other_line in lines:
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_over_lines);
    __pyx_r = __pyx_v_over_lines;
    goto __pyx_L0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":1166
 *             return over_lines
 * 
 *         for other_line in lines:             # <<<<<<<<<<<<<<
 *             if line!=other_line and over_f(other_line, line):
 *                 over_lines.append(other_line)
 */
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_1 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1166, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1166, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1166, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_1, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1166, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1166, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_1, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1166, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_1);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1166, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_other_line, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1167
 * 
 *         for other_line in lines:
 *             if line!=other_line and over_f(other_line, line):             # <<<<<<<<<<<<<<
 *                 over_lines.append(other_line)
 *         return over_lines
 */
    __pyx_t_5 = PyObject_RichCompare(__pyx_v_line, __pyx_v_other_line, Py_NE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1167, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1167, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_2 = __pyx_t_6;
      goto __pyx_L7_bool_binop_done;
    }
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1167, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_other_line);
    __Pyx_GIVEREF(__pyx_v_other_line);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_other_line);
    __Pyx_INCREF(__pyx_v_line);
    __Pyx_GIVEREF(__pyx_v_line);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_line);
    __pyx_t_7 = __Pyx_PyObject_Call(__pyx_v_over_f, __pyx_t_5, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1167, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1167, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_2 = __pyx_t_6;
    __pyx_L7_bool_binop_done:;
    if (__pyx_t_2) {

      /* "table_extraction/utils_table_extraction.pyx":1168
 *         for other_line in lines:
 *             if line!=other_line and over_f(other_line, line):
 *                 over_lines.append(other_line)             # <<<<<<<<<<<<<<
 *         return over_lines
 * 
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_over_lines, __pyx_v_other_line); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 1168, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1167
 * 
 *         for other_line in lines:
 *             if line!=other_line and over_f(other_line, line):             # <<<<<<<<<<<<<<
 *                 over_lines.append(other_line)
 *         return over_lines
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1166
 *             return over_lines
 * 
 *         for other_line in lines:             # <<<<<<<<<<<<<<
 *             if line!=other_line and over_f(other_line, line):
 *                 over_lines.append(other_line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1169
 *             if line!=other_line and over_f(other_line, line):
 *                 over_lines.append(other_line)
 *         return over_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_over_lines);
  __pyx_r = __pyx_v_over_lines;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1149
 * 
 *     @staticmethod
 *     def lines_over_line(line, lines, direction="left"):             # <<<<<<<<<<<<<<
 *         """
 *         Get lines over line
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.lines_over_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_over_lines);
  __Pyx_XDECREF(__pyx_v_over_f);
  __Pyx_XDECREF(__pyx_v_other_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1172
 * 
 *     @staticmethod
 *     def line_inside_text_block(text_block, line, expand=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_block: the text block's position
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_135line_inside_text_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_134line_inside_text_block[] = "\n        :param text_block: the text block's position\n        :param line: the line's position\n        :param expand: maximum text_block is added more padding\n        :return: whether or not line is inside text block\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_135line_inside_text_block = {"line_inside_text_block", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_135line_inside_text_block, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_134line_inside_text_block};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_135line_inside_text_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_text_block = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_inside_text_block (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text_block,&__pyx_n_s_line,&__pyx_n_s_expand,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_block)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_inside_text_block", 0, 2, 3, 1); __PYX_ERR(0, 1172, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_inside_text_block") < 0)) __PYX_ERR(0, 1172, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_text_block = values[0];
    __pyx_v_line = values[1];
    __pyx_v_expand = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_inside_text_block", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1172, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_134line_inside_text_block(__pyx_self, __pyx_v_text_block, __pyx_v_line, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1180
 *         """
 *         # padding rect. it's depend on
 *         def expand_with_horizontal_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check horizontal line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_1expand_with_horizontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line[] = "\n            :return: add more padding for text block to check horizontal line\n            ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_1expand_with_horizontal_line = {"expand_with_horizontal_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_1expand_with_horizontal_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_1expand_with_horizontal_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_with_horizontal_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_expand,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_with_horizontal_line", 1, 2, 2, 1); __PYX_ERR(0, 1180, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_with_horizontal_line") < 0)) __PYX_ERR(0, 1180, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_expand = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_with_horizontal_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1180, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block.expand_with_horizontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line(__pyx_self, __pyx_v_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("expand_with_horizontal_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1184
 *             :return: add more padding for text block to check horizontal line
 *             """
 *             return rect[0] - expand / 2, rect[1] - expand / 2, rect[2] + expand, rect[3] + expand             # <<<<<<<<<<<<<<
 * 
 *         def expand_with_vertical_line(rect, expand):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Divide(__pyx_v_expand, __pyx_int_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_expand, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Subtract(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_v_expand); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_v_expand); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyTuple_New(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1184, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_t_2 = 0;
  __pyx_t_5 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1180
 *         """
 *         # padding rect. it's depend on
 *         def expand_with_horizontal_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check horizontal line
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block.expand_with_horizontal_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1186
 *             return rect[0] - expand / 2, rect[1] - expand / 2, rect[2] + expand, rect[3] + expand
 * 
 *         def expand_with_vertical_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check vertical line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_3expand_with_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line[] = "\n            :return: add more padding for text block to check vertical line\n            ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_3expand_with_vertical_line = {"expand_with_vertical_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_3expand_with_vertical_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_3expand_with_vertical_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_expand = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_with_vertical_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_expand,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_with_vertical_line", 1, 2, 2, 1); __PYX_ERR(0, 1186, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_with_vertical_line") < 0)) __PYX_ERR(0, 1186, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_expand = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_with_vertical_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1186, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block.expand_with_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line(__pyx_self, __pyx_v_rect, __pyx_v_expand);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_expand) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("expand_with_vertical_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1190
 *             :return: add more padding for text block to check vertical line
 *             """
 *             return rect[0] - expand / 3, rect[1] - expand, rect[2] + 2 * expand / 3, rect[3] + 2 * expand             # <<<<<<<<<<<<<<
 * 
 *         b_x, b_y, b_w, b_h = line
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Divide(__pyx_v_expand, __pyx_int_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_v_expand); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_int_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyNumber_Add(__pyx_t_2, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_2 = PyNumber_Multiply(__pyx_int_2, __pyx_v_expand); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_t_2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyTuple_New(4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_6);
  PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_6);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_4 = 0;
  __pyx_t_6 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1186
 *             return rect[0] - expand / 2, rect[1] - expand / 2, rect[2] + expand, rect[3] + expand
 * 
 *         def expand_with_vertical_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check vertical line
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block.expand_with_vertical_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1172
 * 
 *     @staticmethod
 *     def line_inside_text_block(text_block, line, expand=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_block: the text block's position
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_134line_inside_text_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_block, PyObject *__pyx_v_line, PyObject *__pyx_v_expand) {
  PyObject *__pyx_v_expand_with_horizontal_line = 0;
  PyObject *__pyx_v_expand_with_vertical_line = 0;
  PyObject *__pyx_v_b_x = NULL;
  PyObject *__pyx_v_b_y = NULL;
  PyObject *__pyx_v_b_w = NULL;
  PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_v_a_x = NULL;
  PyObject *__pyx_v_a_y = NULL;
  PyObject *__pyx_v_a_w = NULL;
  PyObject *__pyx_v_a_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("line_inside_text_block", 0);

  /* "table_extraction/utils_table_extraction.pyx":1180
 *         """
 *         # padding rect. it's depend on
 *         def expand_with_horizontal_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check horizontal line
 */
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_1expand_with_horizontal_line, 0, __pyx_n_s_Utils_line_inside_text_block_loc, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__6)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1180, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_expand_with_horizontal_line = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1186
 *             return rect[0] - expand / 2, rect[1] - expand / 2, rect[2] + expand, rect[3] + expand
 * 
 *         def expand_with_vertical_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check vertical line
 */
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_3expand_with_vertical_line, 0, __pyx_n_s_Utils_line_inside_text_block_loc_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__8)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1186, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_expand_with_vertical_line = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1192
 *             return rect[0] - expand / 3, rect[1] - expand, rect[2] + 2 * expand / 3, rect[3] + 2 * expand
 * 
 *         b_x, b_y, b_w, b_h = line             # <<<<<<<<<<<<<<
 *         if b_w > b_h:
 *             a_x, a_y, a_w, a_h = expand_with_horizontal_line(text_block, expand)
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_line))) || (PyList_CheckExact(__pyx_v_line))) {
    PyObject* sequence = __pyx_v_line;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1192, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1192, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_line); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1192, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1192, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1192, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_b_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1193
 * 
 *         b_x, b_y, b_w, b_h = line
 *         if b_w > b_h:             # <<<<<<<<<<<<<<
 *             a_x, a_y, a_w, a_h = expand_with_horizontal_line(text_block, expand)
 *         else:
 */
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_b_w, __pyx_v_b_h, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1193, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1193, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1194
 *         b_x, b_y, b_w, b_h = line
 *         if b_w > b_h:
 *             a_x, a_y, a_w, a_h = expand_with_horizontal_line(text_block, expand)             # <<<<<<<<<<<<<<
 *         else:
 *             a_x, a_y, a_w, a_h = expand_with_vertical_line(text_block, expand)
 */
    __pyx_t_4 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_expand_with_horizontal_line(__pyx_v_expand_with_horizontal_line, __pyx_v_text_block, __pyx_v_expand); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1194, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if ((likely(PyTuple_CheckExact(__pyx_t_4))) || (PyList_CheckExact(__pyx_t_4))) {
      PyObject* sequence = __pyx_t_4;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 4)) {
        if (size > 4) __Pyx_RaiseTooManyValuesError(4);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1194, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_1 = PyTuple_GET_ITEM(sequence, 2); 
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 3); 
      } else {
        __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_1 = PyList_GET_ITEM(sequence, 2); 
        __pyx_t_5 = PyList_GET_ITEM(sequence, 3); 
      }
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_5);
      #else
      {
        Py_ssize_t i;
        PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_2,&__pyx_t_1,&__pyx_t_5};
        for (i=0; i < 4; i++) {
          PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1194, __pyx_L1_error)
          __Pyx_GOTREF(item);
          *(temps[i]) = item;
        }
      }
      #endif
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      Py_ssize_t index = -1;
      PyObject** temps[4] = {&__pyx_t_3,&__pyx_t_2,&__pyx_t_1,&__pyx_t_5};
      __pyx_t_8 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1194, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_6 = Py_TYPE(__pyx_t_8)->tp_iternext;
      for (index=0; index < 4; index++) {
        PyObject* item = __pyx_t_6(__pyx_t_8); if (unlikely(!item)) goto __pyx_L6_unpacking_failed;
        __Pyx_GOTREF(item);
        *(temps[index]) = item;
      }
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_8), 4) < 0) __PYX_ERR(0, 1194, __pyx_L1_error)
      __pyx_t_6 = NULL;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      goto __pyx_L7_unpacking_done;
      __pyx_L6_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_6 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1194, __pyx_L1_error)
      __pyx_L7_unpacking_done:;
    }
    __pyx_v_a_x = __pyx_t_3;
    __pyx_t_3 = 0;
    __pyx_v_a_y = __pyx_t_2;
    __pyx_t_2 = 0;
    __pyx_v_a_w = __pyx_t_1;
    __pyx_t_1 = 0;
    __pyx_v_a_h = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1193
 * 
 *         b_x, b_y, b_w, b_h = line
 *         if b_w > b_h:             # <<<<<<<<<<<<<<
 *             a_x, a_y, a_w, a_h = expand_with_horizontal_line(text_block, expand)
 *         else:
 */
    goto __pyx_L5;
  }

  /* "table_extraction/utils_table_extraction.pyx":1196
 *             a_x, a_y, a_w, a_h = expand_with_horizontal_line(text_block, expand)
 *         else:
 *             a_x, a_y, a_w, a_h = expand_with_vertical_line(text_block, expand)             # <<<<<<<<<<<<<<
 * 
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 */
  /*else*/ {
    __pyx_t_4 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_22line_inside_text_block_2expand_with_vertical_line(__pyx_v_expand_with_vertical_line, __pyx_v_text_block, __pyx_v_expand); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1196, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if ((likely(PyTuple_CheckExact(__pyx_t_4))) || (PyList_CheckExact(__pyx_t_4))) {
      PyObject* sequence = __pyx_t_4;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 4)) {
        if (size > 4) __Pyx_RaiseTooManyValuesError(4);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1196, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_1 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
        __pyx_t_3 = PyTuple_GET_ITEM(sequence, 3); 
      } else {
        __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_1 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
        __pyx_t_3 = PyList_GET_ITEM(sequence, 3); 
      }
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      #else
      {
        Py_ssize_t i;
        PyObject** temps[4] = {&__pyx_t_5,&__pyx_t_1,&__pyx_t_2,&__pyx_t_3};
        for (i=0; i < 4; i++) {
          PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1196, __pyx_L1_error)
          __Pyx_GOTREF(item);
          *(temps[i]) = item;
        }
      }
      #endif
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else {
      Py_ssize_t index = -1;
      PyObject** temps[4] = {&__pyx_t_5,&__pyx_t_1,&__pyx_t_2,&__pyx_t_3};
      __pyx_t_8 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1196, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_6 = Py_TYPE(__pyx_t_8)->tp_iternext;
      for (index=0; index < 4; index++) {
        PyObject* item = __pyx_t_6(__pyx_t_8); if (unlikely(!item)) goto __pyx_L8_unpacking_failed;
        __Pyx_GOTREF(item);
        *(temps[index]) = item;
      }
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_8), 4) < 0) __PYX_ERR(0, 1196, __pyx_L1_error)
      __pyx_t_6 = NULL;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      goto __pyx_L9_unpacking_done;
      __pyx_L8_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_6 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1196, __pyx_L1_error)
      __pyx_L9_unpacking_done:;
    }
    __pyx_v_a_x = __pyx_t_5;
    __pyx_t_5 = 0;
    __pyx_v_a_y = __pyx_t_1;
    __pyx_t_1 = 0;
    __pyx_v_a_w = __pyx_t_2;
    __pyx_t_2 = 0;
    __pyx_v_a_h = __pyx_t_3;
    __pyx_t_3 = 0;
  }
  __pyx_L5:;

  /* "table_extraction/utils_table_extraction.pyx":1198
 *             a_x, a_y, a_w, a_h = expand_with_vertical_line(text_block, expand)
 * 
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = PyNumber_Subtract(__pyx_v_b_x, __pyx_v_a_x); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1198, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_b_y, __pyx_v_a_y); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1198, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_3 = PyNumber_Add(__pyx_v_a_x, __pyx_v_a_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1198, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_2 = PyNumber_Add(__pyx_v_a_y, __pyx_v_a_h); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_int_0, Py_GE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1198, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_4 = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_L10_bool_binop_done:;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1172
 * 
 *     @staticmethod
 *     def line_inside_text_block(text_block, line, expand=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_block: the text block's position
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_inside_text_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_expand_with_horizontal_line);
  __Pyx_XDECREF(__pyx_v_expand_with_vertical_line);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1201
 * 
 *     @staticmethod
 *     def rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are overlapping
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_137rect_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_136rect_overlap_rect[] = "Check if two rectangles are overlapping\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_137rect_overlap_rect = {"rect_overlap_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_137rect_overlap_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_136rect_overlap_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_137rect_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_overlap_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_rect", 1, 2, 2, 1); __PYX_ERR(0, 1201, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_overlap_rect") < 0)) __PYX_ERR(0, 1201, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_overlap_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1201, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_136rect_overlap_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_136rect_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("rect_overlap_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1206
 *         # a_x, a_y, a_w, a_h = a_rect
 *         # b_x, b_y, b_w, b_h = b_rect
 *         x = max(a_rect[0], b_rect[0])             # <<<<<<<<<<<<<<
 *         y = max(a_rect[1], b_rect[1])
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1206, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1206, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1206, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1206, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1207
 *         # b_x, b_y, b_w, b_h = b_rect
 *         x = max(a_rect[0], b_rect[0])
 *         y = max(a_rect[1], b_rect[1])             # <<<<<<<<<<<<<<
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1207, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1207, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1207, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1207, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_2 = __pyx_t_3;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_2;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_y = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1208
 *         x = max(a_rect[0], b_rect[0])
 *         y = max(a_rect[1], b_rect[1])
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x             # <<<<<<<<<<<<<<
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if w < 0 or h < 0:
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Add(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_x); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1209
 *         y = max(a_rect[1], b_rect[1])
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y             # <<<<<<<<<<<<<<
 *         if w < 0 or h < 0:
 *             return False
 */
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_4, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_3 = __pyx_t_4;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_v_y); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1210
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if w < 0 or h < 0:             # <<<<<<<<<<<<<<
 *             return False
 *         return True
 */
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_w, __pyx_int_0, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1210, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1210, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (!__pyx_t_6) {
  } else {
    __pyx_t_5 = __pyx_t_6;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_h, __pyx_int_0, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1210, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1210, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __pyx_t_6;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_5) {

    /* "table_extraction/utils_table_extraction.pyx":1211
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if w < 0 or h < 0:
 *             return False             # <<<<<<<<<<<<<<
 *         return True
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1210
 *         w = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if w < 0 or h < 0:             # <<<<<<<<<<<<<<
 *             return False
 *         return True
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1212
 *         if w < 0 or h < 0:
 *             return False
 *         return True             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_True);
  __pyx_r = Py_True;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1201
 * 
 *     @staticmethod
 *     def rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are overlapping
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1215
 * 
 *     @staticmethod
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are horizontal overlapping
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_139rect_horizontal_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_138rect_horizontal_overlap_rect[] = "Check if two rectangles are horizontal overlapping\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_139rect_horizontal_overlap_rect = {"rect_horizontal_overlap_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_139rect_horizontal_overlap_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_138rect_horizontal_overlap_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_139rect_horizontal_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_thresh = 0;
  PyObject *__pyx_v_inside_box = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_horizontal_overlap_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_thresh,&__pyx_n_s_inside_box,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    values[3] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_horizontal_overlap_rect", 0, 2, 4, 1); __PYX_ERR(0, 1215, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thresh);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_inside_box);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_horizontal_overlap_rect") < 0)) __PYX_ERR(0, 1215, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_thresh = values[2];
    __pyx_v_inside_box = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_horizontal_overlap_rect", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1215, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_138rect_horizontal_overlap_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_thresh, __pyx_v_inside_box);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1218
 *         """Check if two rectangles are horizontal overlapping
 *         """
 *         max_h_rect = max(a_rect, b_rect, key=lambda rect:rect[3])             # <<<<<<<<<<<<<<
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])
 *         x          = max(a_rect[0], b_rect[0])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_lambda28(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_lambda28 = {"lambda28", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_lambda28, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_lambda28(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda28 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda28(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda28(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda28", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_overlap_rect.lambda28", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1219
 *         """
 *         max_h_rect = max(a_rect, b_rect, key=lambda rect:rect[3])
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])             # <<<<<<<<<<<<<<
 *         x          = max(a_rect[0], b_rect[0])
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_1lambda29(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_1lambda29 = {"lambda29", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_1lambda29, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_1lambda29(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda29 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda29(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda29(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda29", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_overlap_rect.lambda29", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1215
 * 
 *     @staticmethod
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are horizontal overlapping
 *         """
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_138rect_horizontal_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh, PyObject *__pyx_v_inside_box) {
  PyObject *__pyx_v_max_h_rect = NULL;
  PyObject *__pyx_v_min_h_rect = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("rect_horizontal_overlap_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1218
 *         """Check if two rectangles are horizontal overlapping
 *         """
 *         max_h_rect = max(a_rect, b_rect, key=lambda rect:rect[3])             # <<<<<<<<<<<<<<
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])
 *         x          = max(a_rect[0], b_rect[0])
 */
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_a_rect);
  __Pyx_GIVEREF(__pyx_v_a_rect);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_a_rect);
  __Pyx_INCREF(__pyx_v_b_rect);
  __Pyx_GIVEREF(__pyx_v_b_rect);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_b_rect);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_lambda28, 0, __pyx_n_s_Utils_rect_horizontal_overlap_re, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_max, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_max_h_rect = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1219
 *         """
 *         max_h_rect = max(a_rect, b_rect, key=lambda rect:rect[3])
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])             # <<<<<<<<<<<<<<
 *         x          = max(a_rect[0], b_rect[0])
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 */
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_a_rect);
  __Pyx_GIVEREF(__pyx_v_a_rect);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_a_rect);
  __Pyx_INCREF(__pyx_v_b_rect);
  __Pyx_GIVEREF(__pyx_v_b_rect);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_b_rect);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_28rect_horizontal_overlap_rect_1lambda29, 0, __pyx_n_s_Utils_rect_horizontal_overlap_re, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_1) < 0) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_min, __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_min_h_rect = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1220
 *         max_h_rect = max(a_rect, b_rect, key=lambda rect:rect[3])
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])
 *         x          = max(a_rect[0], b_rect[0])             # <<<<<<<<<<<<<<
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         if inside_box:
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1220, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1220, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1221
 *         min_h_rect = min(a_rect, b_rect, key=lambda rect:rect[3])
 *         x          = max(a_rect[0], b_rect[0])
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x             # <<<<<<<<<<<<<<
 *         if inside_box:
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_v_x); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_w = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1222
 *         x          = max(a_rect[0], b_rect[0])
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         if inside_box:             # <<<<<<<<<<<<<<
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814
 *                 return False
 */
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_inside_box); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1222, __pyx_L1_error)
  if (__pyx_t_5) {

    /* "table_extraction/utils_table_extraction.pyx":1223
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         if inside_box:
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_w, __pyx_v_thresh, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1223, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1223, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L5_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Utils); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_rect_vertical_inside_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_max_h_rect, __pyx_v_min_h_rect};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1223, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_max_h_rect, __pyx_v_min_h_rect};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1223, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1223, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_1) {
        __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      __Pyx_INCREF(__pyx_v_max_h_rect);
      __Pyx_GIVEREF(__pyx_v_max_h_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_v_max_h_rect);
      __Pyx_INCREF(__pyx_v_min_h_rect);
      __Pyx_GIVEREF(__pyx_v_min_h_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_v_min_h_rect);
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1223, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1223, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_8 = ((!__pyx_t_6) != 0);
    __pyx_t_5 = __pyx_t_8;
    __pyx_L5_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1224
 *         if inside_box:
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814
 *                 return False             # <<<<<<<<<<<<<<
 *             return True
 *         else:
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1223
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         if inside_box:
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1225
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814
 *                 return False
 *             return True             # <<<<<<<<<<<<<<
 *         else:
 *             if w < thresh:
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1222
 *         x          = max(a_rect[0], b_rect[0])
 *         w          = min(a_rect[0] + a_rect[2], b_rect[0] + b_rect[2]) - x
 *         if inside_box:             # <<<<<<<<<<<<<<
 *             if w < thresh or not Utils.rect_vertical_inside_rect(max_h_rect, min_h_rect): #14814
 *                 return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1227
 *             return True
 *         else:
 *             if w < thresh:             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
  /*else*/ {
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_w, __pyx_v_thresh, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1227, __pyx_L1_error)
    __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1227, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1228
 *         else:
 *             if w < thresh:
 *                 return False             # <<<<<<<<<<<<<<
 *             return True
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1227
 *             return True
 *         else:
 *             if w < thresh:             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1229
 *             if w < thresh:
 *                 return False
 *             return True             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1215
 * 
 *     @staticmethod
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are horizontal overlapping
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_horizontal_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_max_h_rect);
  __Pyx_XDECREF(__pyx_v_min_h_rect);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1232
 * 
 *     @staticmethod
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are vertical overlapping
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_141rect_vertical_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_140rect_vertical_overlap_rect[] = "Check if two rectangles are vertical overlapping\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_141rect_vertical_overlap_rect = {"rect_vertical_overlap_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_141rect_vertical_overlap_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_140rect_vertical_overlap_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_141rect_vertical_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_thresh = 0;
  PyObject *__pyx_v_inside_box = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_vertical_overlap_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_thresh,&__pyx_n_s_inside_box,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    values[3] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_vertical_overlap_rect", 0, 2, 4, 1); __PYX_ERR(0, 1232, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thresh);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_inside_box);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_vertical_overlap_rect") < 0)) __PYX_ERR(0, 1232, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_thresh = values[2];
    __pyx_v_inside_box = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_vertical_overlap_rect", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1232, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_140rect_vertical_overlap_rect(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_thresh, __pyx_v_inside_box);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1235
 *         """Check if two rectangles are vertical overlapping
 *         """
 *         max_w_rect = max(a_rect, b_rect, key=lambda rect:rect[2])             # <<<<<<<<<<<<<<
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])
 *         y = max(a_rect[1], b_rect[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_lambda30(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_lambda30 = {"lambda30", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_lambda30, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_lambda30(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda30 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda30(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda30(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda30", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_overlap_rect.lambda30", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1236
 *         """
 *         max_w_rect = max(a_rect, b_rect, key=lambda rect:rect[2])
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])             # <<<<<<<<<<<<<<
 *         y = max(a_rect[1], b_rect[1])
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_1lambda31(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_1lambda31 = {"lambda31", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_1lambda31, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_1lambda31(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda31 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda31(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda31(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda31", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_overlap_rect.lambda31", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1232
 * 
 *     @staticmethod
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are vertical overlapping
 *         """
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_140rect_vertical_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_thresh, PyObject *__pyx_v_inside_box) {
  PyObject *__pyx_v_max_w_rect = NULL;
  PyObject *__pyx_v_min_w_rect = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("rect_vertical_overlap_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1235
 *         """Check if two rectangles are vertical overlapping
 *         """
 *         max_w_rect = max(a_rect, b_rect, key=lambda rect:rect[2])             # <<<<<<<<<<<<<<
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])
 *         y = max(a_rect[1], b_rect[1])
 */
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_a_rect);
  __Pyx_GIVEREF(__pyx_v_a_rect);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_a_rect);
  __Pyx_INCREF(__pyx_v_b_rect);
  __Pyx_GIVEREF(__pyx_v_b_rect);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_b_rect);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_lambda30, 0, __pyx_n_s_Utils_rect_vertical_overlap_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_max, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_max_w_rect = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1236
 *         """
 *         max_w_rect = max(a_rect, b_rect, key=lambda rect:rect[2])
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])             # <<<<<<<<<<<<<<
 *         y = max(a_rect[1], b_rect[1])
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 */
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_a_rect);
  __Pyx_GIVEREF(__pyx_v_a_rect);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_a_rect);
  __Pyx_INCREF(__pyx_v_b_rect);
  __Pyx_GIVEREF(__pyx_v_b_rect);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_b_rect);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_26rect_vertical_overlap_rect_1lambda31, 0, __pyx_n_s_Utils_rect_vertical_overlap_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_1) < 0) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_min, __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_min_w_rect = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1237
 *         max_w_rect = max(a_rect, b_rect, key=lambda rect:rect[2])
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])
 *         y = max(a_rect[1], b_rect[1])             # <<<<<<<<<<<<<<
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if inside_box:
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1237, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_y = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1238
 *         min_w_rect = min(a_rect, b_rect, key=lambda rect:rect[2])
 *         y = max(a_rect[1], b_rect[1])
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y             # <<<<<<<<<<<<<<
 *         if inside_box:
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_5) {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_v_y); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_h = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1239
 *         y = max(a_rect[1], b_rect[1])
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if inside_box:             # <<<<<<<<<<<<<<
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814
 *                 return False
 */
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_inside_box); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1239, __pyx_L1_error)
  if (__pyx_t_5) {

    /* "table_extraction/utils_table_extraction.pyx":1240
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if inside_box:
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_h, __pyx_v_thresh, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1240, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1240, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L5_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Utils); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1240, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_rect_horizontal_inside_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1240, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_max_w_rect, __pyx_v_min_w_rect};
      __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1240, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_max_w_rect, __pyx_v_min_w_rect};
      __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1240, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_2);
    } else
    #endif
    {
      __pyx_t_3 = PyTuple_New(2+__pyx_t_7); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1240, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (__pyx_t_1) {
        __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      __Pyx_INCREF(__pyx_v_max_w_rect);
      __Pyx_GIVEREF(__pyx_v_max_w_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_7, __pyx_v_max_w_rect);
      __Pyx_INCREF(__pyx_v_min_w_rect);
      __Pyx_GIVEREF(__pyx_v_min_w_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_7, __pyx_v_min_w_rect);
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_3, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1240, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1240, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_8 = ((!__pyx_t_6) != 0);
    __pyx_t_5 = __pyx_t_8;
    __pyx_L5_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1241
 *         if inside_box:
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814
 *                 return False             # <<<<<<<<<<<<<<
 *             return True
 *         else:
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1240
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if inside_box:
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1242
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814
 *                 return False
 *             return True             # <<<<<<<<<<<<<<
 *         else:
 *             if h < thresh:
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1239
 *         y = max(a_rect[1], b_rect[1])
 *         h = min(a_rect[1] + a_rect[3], b_rect[1] + b_rect[3]) - y
 *         if inside_box:             # <<<<<<<<<<<<<<
 *             if h < thresh or not Utils.rect_horizontal_inside_rect(max_w_rect, min_w_rect): #14814
 *                 return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1244
 *             return True
 *         else:
 *             if h < thresh:             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
  /*else*/ {
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_h, __pyx_v_thresh, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1244, __pyx_L1_error)
    __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1244, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1245
 *         else:
 *             if h < thresh:
 *                 return False             # <<<<<<<<<<<<<<
 *             return True
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1244
 *             return True
 *         else:
 *             if h < thresh:             # <<<<<<<<<<<<<<
 *                 return False
 *             return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1246
 *             if h < thresh:
 *                 return False
 *             return True             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1232
 * 
 *     @staticmethod
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are vertical overlapping
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_vertical_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_max_w_rect);
  __Pyx_XDECREF(__pyx_v_min_w_rect);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1249
 * 
 *     @staticmethod
 *     def line_overlap_rects(line, rects, orientation, percent=50, shrink_size=0): #12585             # <<<<<<<<<<<<<<
 *         """Check line overlap rect
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_143line_overlap_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_142line_overlap_rects[] = "Check line overlap rect\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_143line_overlap_rects = {"line_overlap_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_143line_overlap_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_142line_overlap_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_143line_overlap_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_percent = 0;
  PyObject *__pyx_v_shrink_size = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_overlap_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_rects,&__pyx_n_s_orientation,&__pyx_n_s_percent,&__pyx_n_s_shrink_size,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[3] = ((PyObject *)((PyObject *)__pyx_int_50));
    values[4] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_overlap_rects", 0, 3, 5, 1); __PYX_ERR(0, 1249, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_overlap_rects", 0, 3, 5, 2); __PYX_ERR(0, 1249, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_percent);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_shrink_size);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_overlap_rects") < 0)) __PYX_ERR(0, 1249, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_rects = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_percent = values[3];
    __pyx_v_shrink_size = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_overlap_rects", 0, 3, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1249, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_142line_overlap_rects(__pyx_self, __pyx_v_line, __pyx_v_rects, __pyx_v_orientation, __pyx_v_percent, __pyx_v_shrink_size);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_142line_overlap_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_percent, PyObject *__pyx_v_shrink_size) {
  PyObject *__pyx_v_line_overlap_box_f = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("line_overlap_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1252
 *         """Check line overlap rect
 *         """
 *         line_overlap_box_f = Utils.h_line_overlap_rect if orientation=="h" else Utils.v_line_overlap_rect             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, shrink_size)
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1252, __pyx_L1_error)
  if (__pyx_t_2) {
    __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1252, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_h_line_overlap_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1252, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_1 = __pyx_t_4;
    __pyx_t_4 = 0;
  } else {
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1252, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_v_line_overlap_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1252, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_1 = __pyx_t_3;
    __pyx_t_3 = 0;
  }
  __pyx_v_line_overlap_box_f = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1253
 *         """
 *         line_overlap_box_f = Utils.h_line_overlap_rect if orientation=="h" else Utils.v_line_overlap_rect
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_rect(rect, shrink_size)
 *             if line_overlap_box_f(line, rect, percent):
 */
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1253, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_6 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1253, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1253, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1253, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1253, __pyx_L1_error)
        #else
        __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1253, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        #endif
      }
    } else {
      __pyx_t_3 = __pyx_t_6(__pyx_t_1);
      if (unlikely(!__pyx_t_3)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1253, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_3);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1254
 *         line_overlap_box_f = Utils.h_line_overlap_rect if orientation=="h" else Utils.v_line_overlap_rect
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, shrink_size)             # <<<<<<<<<<<<<<
 *             if line_overlap_box_f(line, rect, percent):
 *                 return True
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1254, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1254, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_rect, __pyx_v_shrink_size};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1254, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_rect, __pyx_v_shrink_size};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1254, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1254, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_shrink_size);
      __Pyx_GIVEREF(__pyx_v_shrink_size);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_v_shrink_size);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_9, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1254, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF_SET(__pyx_v_rect, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1255
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, shrink_size)
 *             if line_overlap_box_f(line, rect, percent):             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __Pyx_INCREF(__pyx_v_line_overlap_box_f);
    __pyx_t_7 = __pyx_v_line_overlap_box_f; __pyx_t_9 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_9, __pyx_v_line, __pyx_v_rect, __pyx_v_percent};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1255, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_9, __pyx_v_line, __pyx_v_rect, __pyx_v_percent};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1255, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GOTREF(__pyx_t_3);
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(3+__pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1255, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_9) {
        __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_9); __pyx_t_9 = NULL;
      }
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_8, __pyx_v_line);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_8, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_percent);
      __Pyx_GIVEREF(__pyx_v_percent);
      PyTuple_SET_ITEM(__pyx_t_4, 2+__pyx_t_8, __pyx_v_percent);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_4, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1255, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1255, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_2) {

      /* "table_extraction/utils_table_extraction.pyx":1256
 *             rect = Utils.expand_rect(rect, shrink_size)
 *             if line_overlap_box_f(line, rect, percent):
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1255
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, shrink_size)
 *             if line_overlap_box_f(line, rect, percent):             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1253
 *         """
 *         line_overlap_box_f = Utils.h_line_overlap_rect if orientation=="h" else Utils.v_line_overlap_rect
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             rect = Utils.expand_rect(rect, shrink_size)
 *             if line_overlap_box_f(line, rect, percent):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1257
 *             if line_overlap_box_f(line, rect, percent):
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1249
 * 
 *     @staticmethod
 *     def line_overlap_rects(line, rects, orientation, percent=50, shrink_size=0): #12585             # <<<<<<<<<<<<<<
 *         """Check line overlap rect
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line_overlap_box_f);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1260
 * 
 *     @staticmethod
 *     def is_rect_divide_content(bounding_rect, content_blocks, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally content
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_145is_rect_divide_content(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_144is_rect_divide_content[] = " \n        Check rect divide horizontally content\n\n        :param bounding_rect:\n        :param content_blocks:\n        :return: True if divide, otherwise False\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_145is_rect_divide_content = {"is_rect_divide_content", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_145is_rect_divide_content, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_144is_rect_divide_content};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_145is_rect_divide_content(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_bounding_rect = 0;
  PyObject *__pyx_v_content_blocks = 0;
  PyObject *__pyx_v_expand_size = 0;
  PyObject *__pyx_v_overlap_percent = 0;
  PyObject *__pyx_v_cnt = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_rect_divide_content (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_bounding_rect,&__pyx_n_s_content_blocks,&__pyx_n_s_expand_size,&__pyx_n_s_overlap_percent,&__pyx_n_s_cnt,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_10));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_30));
    values[4] = ((PyObject *)((PyObject *)__pyx_int_3));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_bounding_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_rect_divide_content", 0, 2, 5, 1); __PYX_ERR(0, 1260, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand_size);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_overlap_percent);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_cnt);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_rect_divide_content") < 0)) __PYX_ERR(0, 1260, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_bounding_rect = values[0];
    __pyx_v_content_blocks = values[1];
    __pyx_v_expand_size = values[2];
    __pyx_v_overlap_percent = values[3];
    __pyx_v_cnt = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_rect_divide_content", 0, 2, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1260, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_divide_content", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_144is_rect_divide_content(__pyx_self, __pyx_v_bounding_rect, __pyx_v_content_blocks, __pyx_v_expand_size, __pyx_v_overlap_percent, __pyx_v_cnt);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_144is_rect_divide_content(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_bounding_rect, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_expand_size, PyObject *__pyx_v_overlap_percent, PyObject *__pyx_v_cnt) {
  PyObject *__pyx_v_OVERLAP_SIZE = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_content_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("is_rect_divide_content", 0);
  __Pyx_INCREF(__pyx_v_cnt);

  /* "table_extraction/utils_table_extraction.pyx":1268
 *         :return: True if divide, otherwise False
 *         """
 *         OVERLAP_SIZE = expand_size             # <<<<<<<<<<<<<<
 *         cnt = cnt #14560
 *         for content_block in content_blocks:
 */
  __Pyx_INCREF(__pyx_v_expand_size);
  __pyx_v_OVERLAP_SIZE = __pyx_v_expand_size;

  /* "table_extraction/utils_table_extraction.pyx":1269
 *         """
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             content_rect = content_block.bounding_rect
 */
  __Pyx_INCREF(__pyx_v_cnt);
  __Pyx_DECREF_SET(__pyx_v_cnt, __pyx_v_cnt);

  /* "table_extraction/utils_table_extraction.pyx":1270
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \
 */
  if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
    __pyx_t_1 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1270, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1270, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1270, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1270, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1270, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1270, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1270, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1271
 *         cnt = cnt #14560
 *         for content_block in content_blocks:
 *             content_rect = content_block.bounding_rect             # <<<<<<<<<<<<<<
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1271, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_XDECREF_SET(__pyx_v_content_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1272
 *         for content_block in content_blocks:
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_content_rect);
    __Pyx_GIVEREF(__pyx_v_content_rect);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_content_rect);
    __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_expand, __pyx_v_expand_size) < 0) __PYX_ERR(0, 1272, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_4, __pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1272, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = ((!__pyx_t_9) != 0);
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1273
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560
 */
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_overlap_rect_with_percent); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_content_rect);
    __Pyx_GIVEREF(__pyx_v_content_rect);
    PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_content_rect);
    __pyx_t_4 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_threshold, __pyx_v_overlap_percent) < 0) __PYX_ERR(0, 1273, __pyx_L1_error)
    if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_min_rect, Py_True) < 0) __PYX_ERR(0, 1273, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1273, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1274
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 */
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_rect_horizontal_overlap_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_content_rect);
    __Pyx_GIVEREF(__pyx_v_content_rect);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_content_rect);
    __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_thresh, __pyx_v_OVERLAP_SIZE) < 0) __PYX_ERR(0, 1274, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1274, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1275
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560             # <<<<<<<<<<<<<<
 *                 cnt -= 1
 *                 if cnt<=0:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_rect_vertical_overlap_rect); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_content_rect);
    __Pyx_GIVEREF(__pyx_v_content_rect);
    PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_content_rect);
    __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_thresh, __pyx_v_OVERLAP_SIZE) < 0) __PYX_ERR(0, 1275, __pyx_L1_error)
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_7, __pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1275, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_10;
    __pyx_L6_bool_binop_done:;

    /* "table_extraction/utils_table_extraction.pyx":1272
 *         for content_block in content_blocks:
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 */
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1276
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1             # <<<<<<<<<<<<<<
 *                 if cnt<=0:
 *                     return True
 */
      __pyx_t_4 = __Pyx_PyInt_SubtractObjC(__pyx_v_cnt, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1276, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF_SET(__pyx_v_cnt, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1277
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 *                 if cnt<=0:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      __pyx_t_4 = PyObject_RichCompare(__pyx_v_cnt, __pyx_int_0, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1277, __pyx_L1_error)
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1277, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":1278
 *                 cnt -= 1
 *                 if cnt<=0:
 *                     return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1277
 *                Utils.rect_vertical_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 *                 if cnt<=0:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1272
 *         for content_block in content_blocks:
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, content_rect, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, content_rect, thresh=OVERLAP_SIZE) and \
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1270
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             content_rect = content_block.bounding_rect
 *             if not Utils.rect_inside_rect(bounding_rect, content_rect, expand=expand_size) and \
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1279
 *                 if cnt<=0:
 *                     return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1260
 * 
 *     @staticmethod
 *     def is_rect_divide_content(bounding_rect, content_blocks, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally content
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_divide_content", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_OVERLAP_SIZE);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_content_rect);
  __Pyx_XDECREF(__pyx_v_cnt);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1282
 * 
 *     @staticmethod
 *     def is_rect_divide_text_boxes(bounding_rect, text_boxes, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally text boxes
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_147is_rect_divide_text_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_146is_rect_divide_text_boxes[] = " \n        Check rect divide horizontally text boxes\n\n        :param bounding_rect:\n        :param text_boxes: => [[x,y,w,h], ...]\n        :return: True if divide, otherwise False\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_147is_rect_divide_text_boxes = {"is_rect_divide_text_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_147is_rect_divide_text_boxes, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_146is_rect_divide_text_boxes};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_147is_rect_divide_text_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_bounding_rect = 0;
  PyObject *__pyx_v_text_boxes = 0;
  PyObject *__pyx_v_expand_size = 0;
  PyObject *__pyx_v_overlap_percent = 0;
  PyObject *__pyx_v_cnt = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_rect_divide_text_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_bounding_rect,&__pyx_n_s_text_boxes,&__pyx_n_s_expand_size,&__pyx_n_s_overlap_percent,&__pyx_n_s_cnt,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_10));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_30));
    values[4] = ((PyObject *)((PyObject *)__pyx_int_3));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_bounding_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_boxes)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_rect_divide_text_boxes", 0, 2, 5, 1); __PYX_ERR(0, 1282, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_expand_size);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_overlap_percent);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_cnt);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_rect_divide_text_boxes") < 0)) __PYX_ERR(0, 1282, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_bounding_rect = values[0];
    __pyx_v_text_boxes = values[1];
    __pyx_v_expand_size = values[2];
    __pyx_v_overlap_percent = values[3];
    __pyx_v_cnt = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_rect_divide_text_boxes", 0, 2, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1282, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_divide_text_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_146is_rect_divide_text_boxes(__pyx_self, __pyx_v_bounding_rect, __pyx_v_text_boxes, __pyx_v_expand_size, __pyx_v_overlap_percent, __pyx_v_cnt);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_146is_rect_divide_text_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_bounding_rect, PyObject *__pyx_v_text_boxes, PyObject *__pyx_v_expand_size, PyObject *__pyx_v_overlap_percent, PyObject *__pyx_v_cnt) {
  PyObject *__pyx_v_OVERLAP_SIZE = NULL;
  PyObject *__pyx_v_text_box = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("is_rect_divide_text_boxes", 0);
  __Pyx_INCREF(__pyx_v_cnt);

  /* "table_extraction/utils_table_extraction.pyx":1290
 *         :return: True if divide, otherwise False
 *         """
 *         OVERLAP_SIZE = expand_size             # <<<<<<<<<<<<<<
 *         cnt = cnt #14560
 *         for text_box in text_boxes:
 */
  __Pyx_INCREF(__pyx_v_expand_size);
  __pyx_v_OVERLAP_SIZE = __pyx_v_expand_size;

  /* "table_extraction/utils_table_extraction.pyx":1291
 *         """
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560             # <<<<<<<<<<<<<<
 *         for text_box in text_boxes:
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \
 */
  __Pyx_INCREF(__pyx_v_cnt);
  __Pyx_DECREF_SET(__pyx_v_cnt, __pyx_v_cnt);

  /* "table_extraction/utils_table_extraction.pyx":1292
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560
 *         for text_box in text_boxes:             # <<<<<<<<<<<<<<
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 */
  if (likely(PyList_CheckExact(__pyx_v_text_boxes)) || PyTuple_CheckExact(__pyx_v_text_boxes)) {
    __pyx_t_1 = __pyx_v_text_boxes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_text_boxes); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1292, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1292, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1292, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1292, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1292, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1292, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1292, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_text_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1293
 *         cnt = cnt #14560
 *         for text_box in text_boxes:
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_text_box);
    __Pyx_GIVEREF(__pyx_v_text_box);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_text_box);
    __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_expand, __pyx_v_expand_size) < 0) __PYX_ERR(0, 1293, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_4, __pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1293, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = ((!__pyx_t_9) != 0);
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1294
 *         for text_box in text_boxes:
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560
 */
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_overlap_rect_with_percent); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_text_box);
    __Pyx_GIVEREF(__pyx_v_text_box);
    PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_text_box);
    __pyx_t_4 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_threshold, __pyx_v_overlap_percent) < 0) __PYX_ERR(0, 1294, __pyx_L1_error)
    if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_min_rect, Py_True) < 0) __PYX_ERR(0, 1294, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_8, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1294, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1295
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 */
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_rect_horizontal_overlap_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_text_box);
    __Pyx_GIVEREF(__pyx_v_text_box);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_text_box);
    __pyx_t_8 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (PyDict_SetItem(__pyx_t_8, __pyx_n_s_thresh, __pyx_v_OVERLAP_SIZE) < 0) __PYX_ERR(0, 1295, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_6, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1295, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_10) {
    } else {
      __pyx_t_5 = __pyx_t_10;
      goto __pyx_L6_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1296
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560             # <<<<<<<<<<<<<<
 *                 cnt -= 1
 *                 if cnt<=0:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_rect_vertical_overlap_rect); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_bounding_rect);
    __Pyx_INCREF(__pyx_v_text_box);
    __Pyx_GIVEREF(__pyx_v_text_box);
    PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_text_box);
    __pyx_t_6 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_thresh, __pyx_v_OVERLAP_SIZE) < 0) __PYX_ERR(0, 1296, __pyx_L1_error)
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_7, __pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1296, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_10;
    __pyx_L6_bool_binop_done:;

    /* "table_extraction/utils_table_extraction.pyx":1293
 *         cnt = cnt #14560
 *         for text_box in text_boxes:
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 */
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1297
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1             # <<<<<<<<<<<<<<
 *                 if cnt<=0:
 *                     return True
 */
      __pyx_t_4 = __Pyx_PyInt_SubtractObjC(__pyx_v_cnt, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1297, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF_SET(__pyx_v_cnt, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1298
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 *                 if cnt<=0:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      __pyx_t_4 = PyObject_RichCompare(__pyx_v_cnt, __pyx_int_0, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1298, __pyx_L1_error)
      __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1298, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_5) {

        /* "table_extraction/utils_table_extraction.pyx":1299
 *                 cnt -= 1
 *                 if cnt<=0:
 *                     return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1298
 *                Utils.rect_vertical_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE): #14560
 *                 cnt -= 1
 *                 if cnt<=0:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1293
 *         cnt = cnt #14560
 *         for text_box in text_boxes:
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \             # <<<<<<<<<<<<<<
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 *                Utils.rect_horizontal_overlap_rect(bounding_rect, text_box, thresh=OVERLAP_SIZE) and \
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1292
 *         OVERLAP_SIZE = expand_size
 *         cnt = cnt #14560
 *         for text_box in text_boxes:             # <<<<<<<<<<<<<<
 *             if not Utils.rect_inside_rect(bounding_rect, text_box, expand=expand_size) and \
 *                Utils.rect_overlap_rect_with_percent(bounding_rect, text_box, threshold=overlap_percent, min_rect=True) and \
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1300
 *                 if cnt<=0:
 *                     return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1282
 * 
 *     @staticmethod
 *     def is_rect_divide_text_boxes(bounding_rect, text_boxes, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally text boxes
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_rect_divide_text_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_OVERLAP_SIZE);
  __Pyx_XDECREF(__pyx_v_text_box);
  __Pyx_XDECREF(__pyx_v_cnt);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1303
 * 
 *     @staticmethod
 *     def h_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_149h_line_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_148h_line_overlap_rect[] = "\n        v_line overlap rect\n        \n        :param line:\n        :param rect:\n        :param percent: degree of overlap\n        :return: True if overlaped else False\n\n        ---------             ---------               ---------           \n        |       |             |       |               |       |           \n      *-----------* => True   |       |   => False  ------*   | => True or False (depend on degree of overlap)\n        |       |             |       |               |       |           \n        ---------           *-----------*             ---------         \n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_149h_line_overlap_rect = {"h_line_overlap_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_149h_line_overlap_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_148h_line_overlap_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_149h_line_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_percent = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("h_line_overlap_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_rect,&__pyx_n_s_percent,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_50));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("h_line_overlap_rect", 0, 2, 3, 1); __PYX_ERR(0, 1303, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_percent);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "h_line_overlap_rect") < 0)) __PYX_ERR(0, 1303, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_rect = values[1];
    __pyx_v_percent = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("h_line_overlap_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1303, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.h_line_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_148h_line_overlap_rect(__pyx_self, __pyx_v_line, __pyx_v_rect, __pyx_v_percent);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_148h_line_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rect, PyObject *__pyx_v_percent) {
  PyObject *__pyx_v_line_start_x = NULL;
  PyObject *__pyx_v_line_start_y = NULL;
  PyObject *__pyx_v_line_end_x = NULL;
  PyObject *__pyx_v_line_end_y = NULL;
  PyObject *__pyx_v_rect_start_x = NULL;
  PyObject *__pyx_v_rect_end_x = NULL;
  PyObject *__pyx_v_rect_start_y = NULL;
  PyObject *__pyx_v_rect_end_y = NULL;
  PyObject *__pyx_v_rect_w = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_rect_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("h_line_overlap_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1318
 *         ---------           *-----------*             ---------
 *         """
 *         line_start_x, line_start_y = line.start_point             # <<<<<<<<<<<<<<
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1318, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1318, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1318, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1318, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1318, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1318, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1318, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_line_start_x = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_line_start_y = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1319
 *         """
 *         line_start_x, line_start_y = line.start_point
 *         line_end_x,   line_end_y   = line.end_point             # <<<<<<<<<<<<<<
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1319, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1319, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1319, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1319, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1319, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    index = 1; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1319, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1319, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_line_end_x = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_line_end_y = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1320
 *         line_start_x, line_start_y = line.start_point
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)             # <<<<<<<<<<<<<<
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 */
  __Pyx_INCREF(__pyx_v_line_end_x);
  __pyx_t_1 = __pyx_v_line_end_x;
  __Pyx_INCREF(__pyx_v_line_start_x);
  __pyx_t_2 = __pyx_v_line_start_x;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1320, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1320, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_v_line_end_x);
  __pyx_t_3 = __pyx_v_line_end_x;
  __Pyx_INCREF(__pyx_v_line_start_x);
  __pyx_t_2 = __pyx_v_line_start_x;
  __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1320, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1320, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_4;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_start_x, __pyx_t_1);
  __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_end_x, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1321
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)             # <<<<<<<<<<<<<<
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 */
  __Pyx_INCREF(__pyx_v_line_end_y);
  __pyx_t_3 = __pyx_v_line_end_y;
  __Pyx_INCREF(__pyx_v_line_start_y);
  __pyx_t_1 = __pyx_v_line_start_y;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_1, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1321, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1321, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_4;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_INCREF(__pyx_v_line_end_y);
  __pyx_t_4 = __pyx_v_line_end_y;
  __Pyx_INCREF(__pyx_v_line_start_y);
  __pyx_t_1 = __pyx_v_line_start_y;
  __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1321, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1321, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_2 = __pyx_t_4;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __pyx_t_2;
  __Pyx_INCREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_start_y, __pyx_t_3);
  __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_end_y, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1322
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]             # <<<<<<<<<<<<<<
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 */
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1322, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1322, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1322, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1322, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_rect_start_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_rect_end_x = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1323
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]             # <<<<<<<<<<<<<<
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1323, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1323, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1323, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1323, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_rect_start_y = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_rect_end_y = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1324
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]             # <<<<<<<<<<<<<<
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_t_1, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1324, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  } else {
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  }
  __pyx_v_rect_w = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1325
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]             # <<<<<<<<<<<<<<
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_t_1, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1325, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1325, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1325, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  } else {
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1325, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  }
  __pyx_v_rect_h = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1327
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y             # <<<<<<<<<<<<<<
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 */
  __pyx_t_3 = PyObject_RichCompare(__pyx_v_rect_start_y, __pyx_v_line_start_y, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1327, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_start_y, __pyx_v_rect_end_y, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1327, __pyx_L1_error)
  }
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1327, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_6 = __pyx_t_8;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_3 = PyObject_RichCompare(__pyx_v_rect_start_y, __pyx_v_line_end_y, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1327, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_end_y, __pyx_v_rect_end_y, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1327, __pyx_L1_error)
  }
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1327, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __pyx_t_8;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":1328
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and             # <<<<<<<<<<<<<<
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 *                 return True
 */
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_start_x, __pyx_v_rect_end_x, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1328, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1328, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_end_x, __pyx_v_rect_start_x, Py_GE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1328, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1328, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1329
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __pyx_t_3 = PyNumber_Subtract(__pyx_v_rect_end_x, __pyx_v_line_start_x); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Multiply(__pyx_t_3, __pyx_int_100); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_v_rect_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_percent, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }
    __pyx_t_1 = PyNumber_Subtract(__pyx_v_line_end_x, __pyx_v_rect_start_x); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = PyNumber_Multiply(__pyx_t_1, __pyx_int_100); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_3, __pyx_v_rect_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_v_percent, Py_GT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1329, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = __pyx_t_8;
    __pyx_L11_bool_binop_done:;

    /* "table_extraction/utils_table_extraction.pyx":1328
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and             # <<<<<<<<<<<<<<
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 *                 return True
 */
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1330
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1328
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and             # <<<<<<<<<<<<<<
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 *                 return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1327
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 *         if rect_start_y<line_start_y<rect_end_y and rect_start_y<line_end_y<rect_end_y: # line y inside rect y             # <<<<<<<<<<<<<<
 *             if (line_start_x<=rect_end_x and line_end_x>=rect_start_x and
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1331
 *                 (rect_end_x-line_start_x)*100/rect_w>percent and (line_end_x-rect_start_x)*100/rect_w>percent): # line overlap rect by percent
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1303
 * 
 *     @staticmethod
 *     def h_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.h_line_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line_start_x);
  __Pyx_XDECREF(__pyx_v_line_start_y);
  __Pyx_XDECREF(__pyx_v_line_end_x);
  __Pyx_XDECREF(__pyx_v_line_end_y);
  __Pyx_XDECREF(__pyx_v_rect_start_x);
  __Pyx_XDECREF(__pyx_v_rect_end_x);
  __Pyx_XDECREF(__pyx_v_rect_start_y);
  __Pyx_XDECREF(__pyx_v_rect_end_y);
  __Pyx_XDECREF(__pyx_v_rect_w);
  __Pyx_XDECREF(__pyx_v_rect_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1334
 * 
 *     @staticmethod
 *     def v_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_151v_line_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_150v_line_overlap_rect[] = "\n        v_line overlap rect\n        \n        :param line:\n        :param rect:\n        :param percent: degree of overlap\n        :return: True if overlaped else False\n\n            *                       *                 |             \n        ----|----           --------|             ----|----         \n        |   |   |           |       |             |   |   |         \n        |   |   | => True   |       | => False    |   *   | => True or False (depend on degree of overlap)\n        |   |   |           |       |             |       |         \n        ----|----           --------|             ---------         \n            *                       *                              \n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_151v_line_overlap_rect = {"v_line_overlap_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_151v_line_overlap_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_150v_line_overlap_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_151v_line_overlap_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_percent = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("v_line_overlap_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_rect,&__pyx_n_s_percent,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_50));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("v_line_overlap_rect", 0, 2, 3, 1); __PYX_ERR(0, 1334, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_percent);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "v_line_overlap_rect") < 0)) __PYX_ERR(0, 1334, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_rect = values[1];
    __pyx_v_percent = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("v_line_overlap_rect", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1334, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.v_line_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_150v_line_overlap_rect(__pyx_self, __pyx_v_line, __pyx_v_rect, __pyx_v_percent);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_150v_line_overlap_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_rect, PyObject *__pyx_v_percent) {
  PyObject *__pyx_v_line_start_x = NULL;
  PyObject *__pyx_v_line_start_y = NULL;
  PyObject *__pyx_v_line_end_x = NULL;
  PyObject *__pyx_v_line_end_y = NULL;
  PyObject *__pyx_v_rect_start_x = NULL;
  PyObject *__pyx_v_rect_end_x = NULL;
  PyObject *__pyx_v_rect_start_y = NULL;
  PyObject *__pyx_v_rect_end_y = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_rect_w = NULL;
  PyObject *__pyx_v_rect_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("v_line_overlap_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1351
 *             *                       *
 *         """
 *         line_start_x, line_start_y = line.start_point             # <<<<<<<<<<<<<<
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1351, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1351, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1351, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1351, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1351, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1351, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1351, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_line_start_x = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_line_start_y = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1352
 *         """
 *         line_start_x, line_start_y = line.start_point
 *         line_end_x,   line_end_y   = line.end_point             # <<<<<<<<<<<<<<
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1352, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1352, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1352, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    index = 1; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1352, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1352, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_line_end_x = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_line_end_y = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1353
 *         line_start_x, line_start_y = line.start_point
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)             # <<<<<<<<<<<<<<
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 */
  __Pyx_INCREF(__pyx_v_line_end_x);
  __pyx_t_1 = __pyx_v_line_end_x;
  __Pyx_INCREF(__pyx_v_line_start_x);
  __pyx_t_2 = __pyx_v_line_start_x;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1353, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1353, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_v_line_end_x);
  __pyx_t_3 = __pyx_v_line_end_x;
  __Pyx_INCREF(__pyx_v_line_start_x);
  __pyx_t_2 = __pyx_v_line_start_x;
  __pyx_t_7 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1353, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1353, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_4;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_start_x, __pyx_t_1);
  __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_end_x, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1354
 *         line_end_x,   line_end_y   = line.end_point
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)             # <<<<<<<<<<<<<<
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 */
  __Pyx_INCREF(__pyx_v_line_end_y);
  __pyx_t_3 = __pyx_v_line_end_y;
  __Pyx_INCREF(__pyx_v_line_start_y);
  __pyx_t_1 = __pyx_v_line_start_y;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_1, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1354, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1354, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_4;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_INCREF(__pyx_v_line_end_y);
  __pyx_t_4 = __pyx_v_line_end_y;
  __Pyx_INCREF(__pyx_v_line_start_y);
  __pyx_t_1 = __pyx_v_line_start_y;
  __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1354, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1354, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_2 = __pyx_t_4;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __pyx_t_2;
  __Pyx_INCREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_start_y, __pyx_t_3);
  __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_line_end_y, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1355
 *         line_start_x, line_end_x   = min(line_start_x, line_end_x), max(line_start_x, line_end_x)
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]             # <<<<<<<<<<<<<<
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 */
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_rect_start_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_rect_end_x = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1356
 *         line_start_y, line_end_y   = min(line_start_y, line_end_y), max(line_start_y, line_end_y)
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]             # <<<<<<<<<<<<<<
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_rect_start_y = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_rect_end_y = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1357
 *         rect_start_x, rect_end_x   = rect[0], rect[0]+rect[2]
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]             # <<<<<<<<<<<<<<
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_t_1, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1357, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1357, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  } else {
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1357, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  }
  __pyx_v_rect_w = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1358
 *         rect_start_y, rect_end_y   = rect[1], rect[1]+rect[3]
 *         rect_w                     = rect[2]+1 if rect[2]==0 else rect[2]
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]             # <<<<<<<<<<<<<<
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1358, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_t_1, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1358, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1358, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_6) {
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1358, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_2, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1358, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  } else {
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1358, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;
  }
  __pyx_v_rect_h = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1360
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x             # <<<<<<<<<<<<<<
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 */
  __pyx_t_3 = PyObject_RichCompare(__pyx_v_rect_start_x, __pyx_v_line_start_x, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1360, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_start_x, __pyx_v_rect_end_x, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1360, __pyx_L1_error)
  }
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1360, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_6 = __pyx_t_8;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_3 = PyObject_RichCompare(__pyx_v_rect_start_x, __pyx_v_line_end_x, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1360, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_3)) {
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_end_x, __pyx_v_rect_end_x, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1360, __pyx_L1_error)
  }
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1360, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __pyx_t_8;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":1361
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and             # <<<<<<<<<<<<<<
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 *                 return True
 */
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_start_y, __pyx_v_rect_end_y, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_line_end_y, __pyx_v_rect_start_y, Py_GE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1361, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":1362
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __pyx_t_3 = PyNumber_Subtract(__pyx_v_rect_end_y, __pyx_v_line_start_y); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Multiply(__pyx_t_3, __pyx_int_100); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_v_rect_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_percent, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L11_bool_binop_done;
    }
    __pyx_t_1 = PyNumber_Subtract(__pyx_v_line_end_y, __pyx_v_rect_start_y); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = PyNumber_Multiply(__pyx_t_1, __pyx_int_100); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_t_3, __pyx_v_rect_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_v_percent, Py_GT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1362, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = __pyx_t_8;
    __pyx_L11_bool_binop_done:;

    /* "table_extraction/utils_table_extraction.pyx":1361
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and             # <<<<<<<<<<<<<<
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 *                 return True
 */
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1363
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1361
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and             # <<<<<<<<<<<<<<
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 *                 return True
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1360
 *         rect_h                     = rect[3]+1 if rect[3]==0 else rect[3]
 * 
 *         if rect_start_x<line_start_x<rect_end_x and rect_start_x<line_end_x<rect_end_x: # line x inside rect x             # <<<<<<<<<<<<<<
 *             if (line_start_y<=rect_end_y and line_end_y>=rect_start_y and
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1364
 *                 (rect_end_y-line_start_y)*100/rect_h>percent and (line_end_y-rect_start_y)*100/rect_h>percent): # line overlap rect by percent
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1334
 * 
 *     @staticmethod
 *     def v_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.v_line_overlap_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line_start_x);
  __Pyx_XDECREF(__pyx_v_line_start_y);
  __Pyx_XDECREF(__pyx_v_line_end_x);
  __Pyx_XDECREF(__pyx_v_line_end_y);
  __Pyx_XDECREF(__pyx_v_rect_start_x);
  __Pyx_XDECREF(__pyx_v_rect_end_x);
  __Pyx_XDECREF(__pyx_v_rect_start_y);
  __Pyx_XDECREF(__pyx_v_rect_end_y);
  __Pyx_XDECREF(__pyx_v_rect_w);
  __Pyx_XDECREF(__pyx_v_rect_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1367
 * 
 *     @staticmethod
 *     def rect_overlap_two_rects(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Get rect overlap two rects
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_153rect_overlap_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_152rect_overlap_two_rects[] = "Get rect overlap two rects\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_153rect_overlap_two_rects = {"rect_overlap_two_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_153rect_overlap_two_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_152rect_overlap_two_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_153rect_overlap_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_overlap_two_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_two_rects", 1, 2, 2, 1); __PYX_ERR(0, 1367, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_overlap_two_rects") < 0)) __PYX_ERR(0, 1367, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_overlap_two_rects", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1367, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_152rect_overlap_two_rects(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_152rect_overlap_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("rect_overlap_two_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1370
 *         """Get rect overlap two rects
 *         """
 *         if Utils.rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *             x = max(a_rect[0], b_rect[0])
 *             y = max(a_rect[1], b_rect[1])
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1370, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_b_rect};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1370, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_a_rect, __pyx_v_b_rect};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1370, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1370, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_a_rect);
    __Pyx_GIVEREF(__pyx_v_a_rect);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_a_rect);
    __Pyx_INCREF(__pyx_v_b_rect);
    __Pyx_GIVEREF(__pyx_v_b_rect);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_b_rect);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1370, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1370, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":1371
 *         """
 *         if Utils.rect_overlap_rect(a_rect, b_rect):
 *             x = max(a_rect[0], b_rect[0])             # <<<<<<<<<<<<<<
 *             y = max(a_rect[1], b_rect[1])
 *             return x, y, min(a_rect[0]+a_rect[2], b_rect[0]+b_rect[2])-x, min(a_rect[1]+a_rect[3], b_rect[1]+b_rect[3])-y
 */
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1371, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1371, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1371, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1371, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_5 = __pyx_t_1;
    } else {
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_5 = __pyx_t_3;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __pyx_t_5;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_x = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1372
 *         if Utils.rect_overlap_rect(a_rect, b_rect):
 *             x = max(a_rect[0], b_rect[0])
 *             y = max(a_rect[1], b_rect[1])             # <<<<<<<<<<<<<<
 *             return x, y, min(a_rect[0]+a_rect[2], b_rect[0]+b_rect[2])-x, min(a_rect[1]+a_rect[3], b_rect[1]+b_rect[3])-y
 *         else:
 */
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1372, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1372, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_5, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1372, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1372, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_1);
      __pyx_t_3 = __pyx_t_1;
    } else {
      __Pyx_INCREF(__pyx_t_5);
      __pyx_t_3 = __pyx_t_5;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __pyx_t_3;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_y = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1373
 *             x = max(a_rect[0], b_rect[0])
 *             y = max(a_rect[1], b_rect[1])
 *             return x, y, min(a_rect[0]+a_rect[2], b_rect[0]+b_rect[2])-x, min(a_rect[1]+a_rect[3], b_rect[1]+b_rect[3])-y             # <<<<<<<<<<<<<<
 *         else:
 *             return None
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_5, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_5);
      __pyx_t_1 = __pyx_t_5;
    } else {
      __Pyx_INCREF(__pyx_t_2);
      __pyx_t_1 = __pyx_t_2;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyNumber_Subtract(__pyx_t_1, __pyx_v_x); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_7 = PyNumber_Add(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_7, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_6) {
      __Pyx_INCREF(__pyx_t_3);
      __pyx_t_1 = __pyx_t_3;
    } else {
      __Pyx_INCREF(__pyx_t_7);
      __pyx_t_1 = __pyx_t_7;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_y); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1373, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_3);
    __pyx_t_5 = 0;
    __pyx_t_3 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1370
 *         """Get rect overlap two rects
 *         """
 *         if Utils.rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *             x = max(a_rect[0], b_rect[0])
 *             y = max(a_rect[1], b_rect[1])
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1375
 *             return x, y, min(a_rect[0]+a_rect[2], b_rect[0]+b_rect[2])-x, min(a_rect[1]+a_rect[3], b_rect[1]+b_rect[3])-y
 *         else:
 *             return None             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1367
 * 
 *     @staticmethod
 *     def rect_overlap_two_rects(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Get rect overlap two rects
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1378
 * 
 *     @staticmethod
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):             # <<<<<<<<<<<<<<
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_155line_overlap_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_154line_overlap_line[] = "Check if two lines near enought both vertical and horizontal\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_155line_overlap_line = {"line_overlap_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_155line_overlap_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_154line_overlap_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_155line_overlap_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_overlap_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[3] = ((PyObject *)((PyObject *)__pyx_int_10));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_overlap_line", 0, 3, 4, 1); __PYX_ERR(0, 1378, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_overlap_line", 0, 3, 4, 2); __PYX_ERR(0, 1378, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_overlap_line") < 0)) __PYX_ERR(0, 1378, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_overlap_line", 0, 3, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1378, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_154line_overlap_line(__pyx_self, __pyx_v_a_line, __pyx_v_b_line, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1385
 *                 return False
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 * 
 *             return lines[0].end_point[0] + threshold > lines[1].start_point[0]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_lambda32(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_lambda32 = {"lambda32", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_lambda32, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_lambda32(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda32 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda32(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda32(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda32", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1385, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1385, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_line.lambda32", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1392
 *                 return False
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 * 
 *             return lines[0].end_point[1] + threshold > lines[1].start_point[1]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_1lambda33(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_1lambda33 = {"lambda33", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_1lambda33, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_1lambda33(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda33 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda33(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda33(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda33", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1392, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1392, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_line.lambda33", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1378
 * 
 *     @staticmethod
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):             # <<<<<<<<<<<<<<
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_154line_overlap_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_lines = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("line_overlap_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1381
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 *         if orientation == "h":             # <<<<<<<<<<<<<<
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) > threshold:
 *                 return False
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1381, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1382
 *         """
 *         if orientation == "h":
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) > threshold:             # <<<<<<<<<<<<<<
 *                 return False
 * 
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1382, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_1) {

      /* "table_extraction/utils_table_extraction.pyx":1383
 *         if orientation == "h":
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) > threshold:
 *                 return False             # <<<<<<<<<<<<<<
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[0])
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1382
 *         """
 *         if orientation == "h":
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) > threshold:             # <<<<<<<<<<<<<<
 *                 return False
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1385
 *                 return False
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 * 
 *             return lines[0].end_point[0] + threshold > lines[1].start_point[0]
 */
    __pyx_t_2 = PyList_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_a_line);
    __Pyx_GIVEREF(__pyx_v_a_line);
    PyList_SET_ITEM(__pyx_t_2, 0, __pyx_v_a_line);
    __Pyx_INCREF(__pyx_v_b_line);
    __Pyx_GIVEREF(__pyx_v_b_line);
    PyList_SET_ITEM(__pyx_t_2, 1, __pyx_v_b_line);
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_lambda32, 0, __pyx_n_s_Utils_line_overlap_line_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_lines = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1387
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[0])
 * 
 *             return lines[0].end_point[0] + threshold > lines[1].start_point[0]             # <<<<<<<<<<<<<<
 *         else:
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) > threshold:
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1387, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1381
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 *         if orientation == "h":             # <<<<<<<<<<<<<<
 *             if abs(a_line.start_point[1] - b_line.start_point[1]) > threshold:
 *                 return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1389
 *             return lines[0].end_point[0] + threshold > lines[1].start_point[0]
 *         else:
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) > threshold:             # <<<<<<<<<<<<<<
 *                 return False
 * 
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_1) {

      /* "table_extraction/utils_table_extraction.pyx":1390
 *         else:
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) > threshold:
 *                 return False             # <<<<<<<<<<<<<<
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[1])
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1389
 *             return lines[0].end_point[0] + threshold > lines[1].start_point[0]
 *         else:
 *             if abs(a_line.start_point[0] - b_line.start_point[0]) > threshold:             # <<<<<<<<<<<<<<
 *                 return False
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1392
 *                 return False
 * 
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 * 
 *             return lines[0].end_point[1] + threshold > lines[1].start_point[1]
 */
    __pyx_t_4 = PyList_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_a_line);
    __Pyx_GIVEREF(__pyx_v_a_line);
    PyList_SET_ITEM(__pyx_t_4, 0, __pyx_v_a_line);
    __Pyx_INCREF(__pyx_v_b_line);
    __Pyx_GIVEREF(__pyx_v_b_line);
    PyList_SET_ITEM(__pyx_t_4, 1, __pyx_v_b_line);
    __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_overlap_line_1lambda33, 0, __pyx_n_s_Utils_line_overlap_line_locals_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_lines = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1394
 *             lines = sorted([a_line, b_line], key=lambda line: line.start_point[1])
 * 
 *             return lines[0].end_point[1] + threshold > lines[1].start_point[1]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_lines, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1394, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1378
 * 
 *     @staticmethod
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):             # <<<<<<<<<<<<<<
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_overlap_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_lines);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1397
 * 
 *     @staticmethod
 *     def bounding_rect(rects):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains all rects
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_157bounding_rect(PyObject *__pyx_self, PyObject *__pyx_v_rects); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_156bounding_rect[] = "Get the biggest rect contains all rects\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_157bounding_rect = {"bounding_rect", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_157bounding_rect, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_156bounding_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_157bounding_rect(PyObject *__pyx_self, PyObject *__pyx_v_rects) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("bounding_rect (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_156bounding_rect(__pyx_self, ((PyObject *)__pyx_v_rects));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_156bounding_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects) {
  PyObject *__pyx_v_points = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *(*__pyx_t_9)(PyObject *);
  int __pyx_t_10;
  int __pyx_t_11;
  PyObject *__pyx_t_12 = NULL;
  __Pyx_RefNannySetupContext("bounding_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1400
 *         """Get the biggest rect contains all rects
 *         """
 *         points = []             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             x, y, w, h = rect
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1400, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_points = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1401
 *         """
 *         points = []
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             points.append((x, y))
 */
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1401, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1401, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1401, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1401, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1401, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1401, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1401, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1402
 *         points = []
 *         for rect in rects:
 *             x, y, w, h = rect             # <<<<<<<<<<<<<<
 *             points.append((x, y))
 *             points.append((x + w, y + h))
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
      PyObject* sequence = __pyx_v_rect;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 4)) {
        if (size > 4) __Pyx_RaiseTooManyValuesError(4);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1402, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_6 = PyTuple_GET_ITEM(sequence, 2); 
        __pyx_t_7 = PyTuple_GET_ITEM(sequence, 3); 
      } else {
        __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_5 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_6 = PyList_GET_ITEM(sequence, 2); 
        __pyx_t_7 = PyList_GET_ITEM(sequence, 3); 
      }
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_7);
      #else
      {
        Py_ssize_t i;
        PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_5,&__pyx_t_6,&__pyx_t_7};
        for (i=0; i < 4; i++) {
          PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1402, __pyx_L1_error)
          __Pyx_GOTREF(item);
          *(temps[i]) = item;
        }
      }
      #endif
    } else {
      Py_ssize_t index = -1;
      PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_5,&__pyx_t_6,&__pyx_t_7};
      __pyx_t_8 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1402, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = Py_TYPE(__pyx_t_8)->tp_iternext;
      for (index=0; index < 4; index++) {
        PyObject* item = __pyx_t_9(__pyx_t_8); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
        __Pyx_GOTREF(item);
        *(temps[index]) = item;
      }
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_9(__pyx_t_8), 4) < 0) __PYX_ERR(0, 1402, __pyx_L1_error)
      __pyx_t_9 = NULL;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      goto __pyx_L6_unpacking_done;
      __pyx_L5_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1402, __pyx_L1_error)
      __pyx_L6_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_4);
    __pyx_t_4 = 0;
    __Pyx_XDECREF_SET(__pyx_v_y, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_XDECREF_SET(__pyx_v_w, __pyx_t_6);
    __pyx_t_6 = 0;
    __Pyx_XDECREF_SET(__pyx_v_h, __pyx_t_7);
    __pyx_t_7 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1403
 *         for rect in rects:
 *             x, y, w, h = rect
 *             points.append((x, y))             # <<<<<<<<<<<<<<
 *             points.append((x + w, y + h))
 *         return cv2.boundingRect(np.array(points, np.float32))
 */
    __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1403, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_y);
    __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_7); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1403, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1404
 *             x, y, w, h = rect
 *             points.append((x, y))
 *             points.append((x + w, y + h))             # <<<<<<<<<<<<<<
 *         return cv2.boundingRect(np.array(points, np.float32))
 * 
 */
    __pyx_t_7 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1404, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_6 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1404, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1404, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_7);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_6);
    __pyx_t_7 = 0;
    __pyx_t_6 = 0;
    __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1404, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1401
 *         """
 *         points = []
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             points.append((x, y))
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1405
 *             points.append((x, y))
 *             points.append((x + w, y + h))
 *         return cv2.boundingRect(np.array(points, np.float32))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_np); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_array); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_np); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_float32); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  __pyx_t_11 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
      __pyx_t_11 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_points, __pyx_t_8};
    __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1405, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_points, __pyx_t_8};
    __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1405, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  {
    __pyx_t_12 = PyTuple_New(2+__pyx_t_11); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1405, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    if (__pyx_t_7) {
      __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_7); __pyx_t_7 = NULL;
    }
    __Pyx_INCREF(__pyx_v_points);
    __Pyx_GIVEREF(__pyx_v_points);
    PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_11, __pyx_v_points);
    __Pyx_GIVEREF(__pyx_t_8);
    PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_11, __pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_12, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1405, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_5);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1405, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1397
 * 
 *     @staticmethod
 *     def bounding_rect(rects):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains all rects
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.bounding_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_points);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1408
 * 
 *     @staticmethod
 *     def bounding_rect_lines(rect, lines):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains rect and all lines
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_159bounding_rect_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_158bounding_rect_lines[] = "Get the biggest rect contains rect and all lines\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_159bounding_rect_lines = {"bounding_rect_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_159bounding_rect_lines, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_158bounding_rect_lines};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_159bounding_rect_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("bounding_rect_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_lines,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("bounding_rect_lines", 1, 2, 2, 1); __PYX_ERR(0, 1408, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "bounding_rect_lines") < 0)) __PYX_ERR(0, 1408, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_lines = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("bounding_rect_lines", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1408, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.bounding_rect_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_158bounding_rect_lines(__pyx_self, __pyx_v_rect, __pyx_v_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_158bounding_rect_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_lines) {
  PyObject *__pyx_v_points = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *(*__pyx_t_8)(PyObject *);
  int __pyx_t_9;
  Py_ssize_t __pyx_t_10;
  PyObject *(*__pyx_t_11)(PyObject *);
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("bounding_rect_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":1411
 *         """Get the biggest rect contains rect and all lines
 *         """
 *         points = []             # <<<<<<<<<<<<<<
 *         if rect is not None:
 *             x, y, w, h = rect
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_points = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1412
 *         """
 *         points = []
 *         if rect is not None:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             points.append((x, y))
 */
  __pyx_t_2 = (__pyx_v_rect != Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":1413
 *         points = []
 *         if rect is not None:
 *             x, y, w, h = rect             # <<<<<<<<<<<<<<
 *             points.append((x, y))
 *             points.append((x + w, y + h))
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
      PyObject* sequence = __pyx_v_rect;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 4)) {
        if (size > 4) __Pyx_RaiseTooManyValuesError(4);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1413, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 2); 
        __pyx_t_6 = PyTuple_GET_ITEM(sequence, 3); 
      } else {
        __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_4 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_5 = PyList_GET_ITEM(sequence, 2); 
        __pyx_t_6 = PyList_GET_ITEM(sequence, 3); 
      }
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_6);
      #else
      {
        Py_ssize_t i;
        PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_4,&__pyx_t_5,&__pyx_t_6};
        for (i=0; i < 4; i++) {
          PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1413, __pyx_L1_error)
          __Pyx_GOTREF(item);
          *(temps[i]) = item;
        }
      }
      #endif
    } else {
      Py_ssize_t index = -1;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_4,&__pyx_t_5,&__pyx_t_6};
      __pyx_t_7 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_8 = Py_TYPE(__pyx_t_7)->tp_iternext;
      for (index=0; index < 4; index++) {
        PyObject* item = __pyx_t_8(__pyx_t_7); if (unlikely(!item)) goto __pyx_L4_unpacking_failed;
        __Pyx_GOTREF(item);
        *(temps[index]) = item;
      }
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_8(__pyx_t_7), 4) < 0) __PYX_ERR(0, 1413, __pyx_L1_error)
      __pyx_t_8 = NULL;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L5_unpacking_done;
      __pyx_L4_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_8 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1413, __pyx_L1_error)
      __pyx_L5_unpacking_done:;
    }
    __pyx_v_x = __pyx_t_1;
    __pyx_t_1 = 0;
    __pyx_v_y = __pyx_t_4;
    __pyx_t_4 = 0;
    __pyx_v_w = __pyx_t_5;
    __pyx_t_5 = 0;
    __pyx_v_h = __pyx_t_6;
    __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1414
 *         if rect is not None:
 *             x, y, w, h = rect
 *             points.append((x, y))             # <<<<<<<<<<<<<<
 *             points.append((x + w, y + h))
 * 
 */
    __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_y);
    __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_6); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 1414, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1415
 *             x, y, w, h = rect
 *             points.append((x, y))
 *             points.append((x + w, y + h))             # <<<<<<<<<<<<<<
 * 
 *         for line in lines:
 */
    __pyx_t_6 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1415, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1415, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1415, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
    __pyx_t_6 = 0;
    __pyx_t_5 = 0;
    __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_4); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 1415, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1412
 *         """
 *         points = []
 *         if rect is not None:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             points.append((x, y))
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1417
 *             points.append((x + w, y + h))
 * 
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             points.append(line.start_point)
 *             points.append(line.end_point)
 */
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_4 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_4); __pyx_t_10 = 0;
    __pyx_t_11 = NULL;
  } else {
    __pyx_t_10 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1417, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_11 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1417, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_11)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_10); __Pyx_INCREF(__pyx_t_5); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 1417, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1417, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_10 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_10); __Pyx_INCREF(__pyx_t_5); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 1417, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1417, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_11(__pyx_t_4);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1417, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1418
 * 
 *         for line in lines:
 *             points.append(line.start_point)             # <<<<<<<<<<<<<<
 *             points.append(line.end_point)
 * 
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1418, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_5); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 1418, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1419
 *         for line in lines:
 *             points.append(line.start_point)
 *             points.append(line.end_point)             # <<<<<<<<<<<<<<
 * 
 *         return cv2.boundingRect(np.array(points, np.float32))
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1419, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_5); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 1419, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1417
 *             points.append((x + w, y + h))
 * 
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             points.append(line.start_point)
 *             points.append(line.end_point)
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1421
 *             points.append(line.end_point)
 * 
 *         return cv2.boundingRect(np.array(points, np.float32))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_np); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_array); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_np); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_float32); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_12);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  __pyx_t_13 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_7);
    if (likely(__pyx_t_1)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_7, function);
      __pyx_t_13 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_points, __pyx_t_12};
    __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1421, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_points, __pyx_t_12};
    __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1421, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
  } else
  #endif
  {
    __pyx_t_14 = PyTuple_New(2+__pyx_t_13); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 1421, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_14);
    if (__pyx_t_1) {
      __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_1); __pyx_t_1 = NULL;
    }
    __Pyx_INCREF(__pyx_v_points);
    __Pyx_GIVEREF(__pyx_v_points);
    PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_13, __pyx_v_points);
    __Pyx_GIVEREF(__pyx_t_12);
    PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_13, __pyx_t_12);
    __pyx_t_12 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_14, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1421, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
    }
  }
  __pyx_t_4 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_7, __pyx_t_5) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1421, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1408
 * 
 *     @staticmethod
 *     def bounding_rect_lines(rect, lines):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains rect and all lines
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.bounding_rect_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_points);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1424
 * 
 *     @staticmethod
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):             # <<<<<<<<<<<<<<
 *         points = []
 *         points.append(virtual_line.start_point)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_161bounding_lines_virtual_line_real_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_161bounding_lines_virtual_line_real_line = {"bounding_lines_virtual_line_real_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_161bounding_lines_virtual_line_real_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_161bounding_lines_virtual_line_real_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_virtual_line = 0;
  PyObject *__pyx_v_real_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("bounding_lines_virtual_line_real_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_virtual_line,&__pyx_n_s_real_line,&__pyx_n_s_orientation,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_virtual_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_real_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("bounding_lines_virtual_line_real_line", 0, 2, 3, 1); __PYX_ERR(0, 1424, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "bounding_lines_virtual_line_real_line") < 0)) __PYX_ERR(0, 1424, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_virtual_line = values[0];
    __pyx_v_real_line = values[1];
    __pyx_v_orientation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("bounding_lines_virtual_line_real_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1424, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.bounding_lines_virtual_line_real_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_160bounding_lines_virtual_line_real_line(__pyx_self, __pyx_v_virtual_line, __pyx_v_real_line, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_160bounding_lines_virtual_line_real_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_virtual_line, PyObject *__pyx_v_real_line, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_points = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  __Pyx_RefNannySetupContext("bounding_lines_virtual_line_real_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1425
 *     @staticmethod
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):
 *         points = []             # <<<<<<<<<<<<<<
 *         points.append(virtual_line.start_point)
 *         points.append(virtual_line.end_point)
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1425, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_points = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1426
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):
 *         points = []
 *         points.append(virtual_line.start_point)             # <<<<<<<<<<<<<<
 *         points.append(virtual_line.end_point)
 *         if orientation == 'v':
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1426, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1426, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1427
 *         points = []
 *         points.append(virtual_line.start_point)
 *         points.append(virtual_line.end_point)             # <<<<<<<<<<<<<<
 *         if orientation == 'v':
 *             points.append((real_line.start_point[0], virtual_line.start_point[1]))
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1427, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1427, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1428
 *         points.append(virtual_line.start_point)
 *         points.append(virtual_line.end_point)
 *         if orientation == 'v':             # <<<<<<<<<<<<<<
 *             points.append((real_line.start_point[0], virtual_line.start_point[1]))
 *             points.append((real_line.end_point[0], virtual_line.end_point[1]))
 */
  __pyx_t_3 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1428, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":1429
 *         points.append(virtual_line.end_point)
 *         if orientation == 'v':
 *             points.append((real_line.start_point[0], virtual_line.start_point[1]))             # <<<<<<<<<<<<<<
 *             points.append((real_line.end_point[0], virtual_line.end_point[1]))
 *         else:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_real_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1429, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1430
 *         if orientation == 'v':
 *             points.append((real_line.start_point[0], virtual_line.start_point[1]))
 *             points.append((real_line.end_point[0], virtual_line.end_point[1]))             # <<<<<<<<<<<<<<
 *         else:
 *             points.append((virtual_line.start_point[0], real_line.start_point[1]))
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_real_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
    __pyx_t_5 = 0;
    __pyx_t_4 = 0;
    __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1430, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1428
 *         points.append(virtual_line.start_point)
 *         points.append(virtual_line.end_point)
 *         if orientation == 'v':             # <<<<<<<<<<<<<<
 *             points.append((real_line.start_point[0], virtual_line.start_point[1]))
 *             points.append((real_line.end_point[0], virtual_line.end_point[1]))
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1432
 *             points.append((real_line.end_point[0], virtual_line.end_point[1]))
 *         else:
 *             points.append((virtual_line.start_point[0], real_line.start_point[1]))             # <<<<<<<<<<<<<<
 *             points.append((virtual_line.end_point[0], real_line.end_point[1]))
 * 
 */
  /*else*/ {
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_real_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1432, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1433
 *         else:
 *             points.append((virtual_line.start_point[0], real_line.start_point[1]))
 *             points.append((virtual_line.end_point[0], real_line.end_point[1]))             # <<<<<<<<<<<<<<
 * 
 *         return cv2.boundingRect(np.array(points, np.float32))
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_virtual_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_real_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
    __pyx_t_5 = 0;
    __pyx_t_4 = 0;
    __pyx_t_2 = __Pyx_PyList_Append(__pyx_v_points, __pyx_t_1); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1433, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":1435
 *             points.append((virtual_line.end_point[0], real_line.end_point[1]))
 * 
 *         return cv2.boundingRect(np.array(points, np.float32))             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_np); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_array); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_np); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_float32); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = NULL;
  __pyx_t_9 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
    __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
    if (likely(__pyx_t_6)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_7, function);
      __pyx_t_9 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_points, __pyx_t_8};
    __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_points, __pyx_t_8};
    __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  {
    __pyx_t_10 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    if (__pyx_t_6) {
      __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    __Pyx_INCREF(__pyx_v_points);
    __Pyx_GIVEREF(__pyx_v_points);
    PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_9, __pyx_v_points);
    __Pyx_GIVEREF(__pyx_t_8);
    PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_9, __pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_10, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1435, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
    __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
    if (likely(__pyx_t_7)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_7);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_5, function);
    }
  }
  __pyx_t_1 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_7, __pyx_t_4) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1424
 * 
 *     @staticmethod
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):             # <<<<<<<<<<<<<<
 *         points = []
 *         points.append(virtual_line.start_point)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.bounding_lines_virtual_line_real_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_points);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1439
 * 
 *     @staticmethod
 *     def external_rects(image_size, rects):             # <<<<<<<<<<<<<<
 *         """Group overlapping boxes and return all external rects
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_163external_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_162external_rects[] = "Group overlapping boxes and return all external rects\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_163external_rects = {"external_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_163external_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_162external_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_163external_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image_size = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("external_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image_size,&__pyx_n_s_rects,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image_size)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("external_rects", 1, 2, 2, 1); __PYX_ERR(0, 1439, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "external_rects") < 0)) __PYX_ERR(0, 1439, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_image_size = values[0];
    __pyx_v_rects = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("external_rects", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1439, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.external_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_162external_rects(__pyx_self, __pyx_v_image_size, __pyx_v_rects);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_162external_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image_size, PyObject *__pyx_v_rects) {
  PyObject *__pyx_v_blank_image = NULL;
  PyObject *__pyx_v_contours = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  __Pyx_RefNannySetupContext("external_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1443
 *         """
 *         # Create a empty image with the input size
 *         blank_image = np.zeros((image_size[0], image_size[1], 1), np.uint8)             # <<<<<<<<<<<<<<
 * 
 *         # Draw all rects
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_np); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_zeros); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_image_size, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_image_size, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
  __Pyx_INCREF(__pyx_int_1);
  __Pyx_GIVEREF(__pyx_int_1);
  PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_int_1);
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_np); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_uint8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1443, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_5, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1443, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_5, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1443, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_7 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1443, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_t_2);
    __pyx_t_5 = 0;
    __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1443, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_blank_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1446
 * 
 *         # Draw all rects
 *         Utils.fill_boxes(blank_image, rects, (255, 255, 255))             # <<<<<<<<<<<<<<
 * 
 *         # Fill all external rects
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_fill_boxes); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_7);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_blank_image, __pyx_v_rects, __pyx_tuple__9};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1446, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_blank_image, __pyx_v_rects, __pyx_tuple__9};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1446, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(3+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1446, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_v_blank_image);
    __Pyx_GIVEREF(__pyx_v_blank_image);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_6, __pyx_v_blank_image);
    __Pyx_INCREF(__pyx_v_rects);
    __Pyx_GIVEREF(__pyx_v_rects);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_6, __pyx_v_rects);
    __Pyx_INCREF(__pyx_tuple__9);
    __Pyx_GIVEREF(__pyx_tuple__9);
    PyTuple_SET_ITEM(__pyx_t_2, 2+__pyx_t_6, __pyx_tuple__9);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1446, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1449
 * 
 *         # Fill all external rects
 *         contours = cv2.findContours(blank_image.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)[1]             # <<<<<<<<<<<<<<
 * 
 *         return [cv2.boundingRect(c) for c in contours]
 */
  __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_cv2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_findContours); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_blank_image, __pyx_n_s_copy); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_7 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_RETR_EXTERNAL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_CHAIN_APPROX_SIMPLE); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_7, __pyx_t_5, __pyx_t_4};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1449, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_7, __pyx_t_5, __pyx_t_4};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1449, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(3+__pyx_t_6); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1449, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_6, __pyx_t_7);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_6, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_6, __pyx_t_4);
    __pyx_t_7 = 0;
    __pyx_t_5 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1449, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_contours = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1451
 *         contours = cv2.findContours(blank_image.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)[1]
 * 
 *         return [cv2.boundingRect(c) for c in contours]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1451, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (likely(PyList_CheckExact(__pyx_v_contours)) || PyTuple_CheckExact(__pyx_v_contours)) {
    __pyx_t_1 = __pyx_v_contours; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_contours); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1451, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_10 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1451, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1451, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1451, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1451, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      }
    } else {
      __pyx_t_8 = __pyx_t_10(__pyx_t_1);
      if (unlikely(!__pyx_t_8)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1451, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_8);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1451, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1451, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_8 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_4, __pyx_v_c) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_c);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1451, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_2, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 1451, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1439
 * 
 *     @staticmethod
 *     def external_rects(image_size, rects):             # <<<<<<<<<<<<<<
 *         """Group overlapping boxes and return all external rects
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.external_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_blank_image);
  __Pyx_XDECREF(__pyx_v_contours);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1454
 * 
 *     @staticmethod
 *     def outside_rects(rects):             # <<<<<<<<<<<<<<
 *         """Get outside rects
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_165outside_rects(PyObject *__pyx_self, PyObject *__pyx_v_rects); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_164outside_rects[] = "Get outside rects\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_165outside_rects = {"outside_rects", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_165outside_rects, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_164outside_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_165outside_rects(PyObject *__pyx_self, PyObject *__pyx_v_rects) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("outside_rects (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_164outside_rects(__pyx_self, ((PyObject *)__pyx_v_rects));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1457
 *         """Get outside rects
 *         """
 *         def max_sort_f(rect):             # <<<<<<<<<<<<<<
 *             return rect[2]*rect[3]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_1max_sort_f(PyObject *__pyx_self, PyObject *__pyx_v_rect); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_1max_sort_f = {"max_sort_f", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_1max_sort_f, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_1max_sort_f(PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("max_sort_f (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_max_sort_f(__pyx_self, ((PyObject *)__pyx_v_rect));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_max_sort_f(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("max_sort_f", 0);

  /* "table_extraction/utils_table_extraction.pyx":1458
 *         """
 *         def max_sort_f(rect):
 *             return rect[2]*rect[3]             # <<<<<<<<<<<<<<
 * 
 *         rects         = sorted(rects, key=max_sort_f, reverse=True)
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1458, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1458, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Multiply(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1458, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1457
 *         """Get outside rects
 *         """
 *         def max_sort_f(rect):             # <<<<<<<<<<<<<<
 *             return rect[2]*rect[3]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.outside_rects.max_sort_f", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1454
 * 
 *     @staticmethod
 *     def outside_rects(rects):             # <<<<<<<<<<<<<<
 *         """Get outside rects
 *         """
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_164outside_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects) {
  PyObject *__pyx_v_max_sort_f = 0;
  PyObject *__pyx_v_outside_boxes = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_src_rect = NULL;
  PyObject *__pyx_v_dst_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  PyObject *__pyx_t_6 = NULL;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("outside_rects", 0);
  __Pyx_INCREF(__pyx_v_rects);

  /* "table_extraction/utils_table_extraction.pyx":1457
 *         """Get outside rects
 *         """
 *         def max_sort_f(rect):             # <<<<<<<<<<<<<<
 *             return rect[2]*rect[3]
 * 
 */
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_13outside_rects_1max_sort_f, 0, __pyx_n_s_Utils_outside_rects_locals_max_s, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__11)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1457, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_max_sort_f = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1460
 *             return rect[2]*rect[3]
 * 
 *         rects         = sorted(rects, key=max_sort_f, reverse=True)             # <<<<<<<<<<<<<<
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):
 */
  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1460, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_rects);
  __Pyx_GIVEREF(__pyx_v_rects);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_rects);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1460, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_v_max_sort_f) < 0) __PYX_ERR(0, 1460, __pyx_L1_error)
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_reverse, Py_True) < 0) __PYX_ERR(0, 1460, __pyx_L1_error)
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1460, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_rects, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1461
 * 
 *         rects         = sorted(rects, key=max_sort_f, reverse=True)
 *         outside_boxes = []             # <<<<<<<<<<<<<<
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1461, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_outside_boxes = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1462
 *         rects         = sorted(rects, key=max_sort_f, reverse=True)
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):             # <<<<<<<<<<<<<<
 *             for dst_rect in rects[:i]:
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_3 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1462, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1462, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1462, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1462, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1462, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1462, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_5(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1462, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_src_rect, __pyx_t_1);
    __pyx_t_1 = 0;
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_3, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1462, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1463
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 *                     break
 */
    __pyx_t_1 = __Pyx_PyObject_GetSlice(__pyx_v_rects, 0, 0, NULL, &__pyx_v_i, NULL, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1463, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
      __pyx_t_6 = __pyx_t_1; __Pyx_INCREF(__pyx_t_6); __pyx_t_7 = 0;
      __pyx_t_8 = NULL;
    } else {
      __pyx_t_7 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1463, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_8 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1463, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    for (;;) {
      if (likely(!__pyx_t_8)) {
        if (likely(PyList_CheckExact(__pyx_t_6))) {
          if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_6)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_1 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1463, __pyx_L1_error)
          #else
          __pyx_t_1 = PySequence_ITEM(__pyx_t_6, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1463, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          #endif
        } else {
          if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_7); __Pyx_INCREF(__pyx_t_1); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 1463, __pyx_L1_error)
          #else
          __pyx_t_1 = PySequence_ITEM(__pyx_t_6, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1463, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          #endif
        }
      } else {
        __pyx_t_1 = __pyx_t_8(__pyx_t_6);
        if (unlikely(!__pyx_t_1)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1463, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_1);
      }
      __Pyx_XDECREF_SET(__pyx_v_dst_rect, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1464
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     break
 *             else:
 */
      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1464, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_rect_inside_rect); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1464, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = NULL;
      __pyx_t_11 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_10, function);
          __pyx_t_11 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_10)) {
        PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_src_rect, __pyx_v_dst_rect};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1464, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_10)) {
        PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_src_rect, __pyx_v_dst_rect};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_10, __pyx_temp+1-__pyx_t_11, 2+__pyx_t_11); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1464, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      {
        __pyx_t_12 = PyTuple_New(2+__pyx_t_11); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1464, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        if (__pyx_t_9) {
          __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_9); __pyx_t_9 = NULL;
        }
        __Pyx_INCREF(__pyx_v_src_rect);
        __Pyx_GIVEREF(__pyx_v_src_rect);
        PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_11, __pyx_v_src_rect);
        __Pyx_INCREF(__pyx_v_dst_rect);
        __Pyx_GIVEREF(__pyx_v_dst_rect);
        PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_11, __pyx_v_dst_rect);
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_10, __pyx_t_12, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1464, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      }
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1464, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_13) {

        /* "table_extraction/utils_table_extraction.pyx":1465
 *             for dst_rect in rects[:i]:
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 *                     break             # <<<<<<<<<<<<<<
 *             else:
 *                 outside_boxes.append(src_rect)
 */
        goto __pyx_L6_break;

        /* "table_extraction/utils_table_extraction.pyx":1464
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     break
 *             else:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1463
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 *                     break
 */
    }
    /*else*/ {

      /* "table_extraction/utils_table_extraction.pyx":1467
 *                     break
 *             else:
 *                 outside_boxes.append(src_rect)             # <<<<<<<<<<<<<<
 *         return outside_boxes
 * 
 */
      __pyx_t_14 = __Pyx_PyList_Append(__pyx_v_outside_boxes, __pyx_v_src_rect); if (unlikely(__pyx_t_14 == ((int)-1))) __PYX_ERR(0, 1467, __pyx_L1_error)
    }

    /* "table_extraction/utils_table_extraction.pyx":1463
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):
 *             for dst_rect in rects[:i]:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 *                     break
 */
    __pyx_L6_break:;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1462
 *         rects         = sorted(rects, key=max_sort_f, reverse=True)
 *         outside_boxes = []
 *         for i, src_rect in enumerate(rects):             # <<<<<<<<<<<<<<
 *             for dst_rect in rects[:i]:
 *                 if Utils.rect_inside_rect(src_rect, dst_rect):
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1468
 *             else:
 *                 outside_boxes.append(src_rect)
 *         return outside_boxes             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_outside_boxes);
  __pyx_r = __pyx_v_outside_boxes;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1454
 * 
 *     @staticmethod
 *     def outside_rects(rects):             # <<<<<<<<<<<<<<
 *         """Get outside rects
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.outside_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_max_sort_f);
  __Pyx_XDECREF(__pyx_v_outside_boxes);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_src_rect);
  __Pyx_XDECREF(__pyx_v_dst_rect);
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1471
 * 
 *     @staticmethod
 *     def convert_box_to_line(box):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_167convert_box_to_line(PyObject *__pyx_self, PyObject *__pyx_v_box); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_167convert_box_to_line = {"convert_box_to_line", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_167convert_box_to_line, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_167convert_box_to_line(PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("convert_box_to_line (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_166convert_box_to_line(__pyx_self, ((PyObject *)__pyx_v_box));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_166convert_box_to_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_v_Line = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_width = NULL;
  PyObject *__pyx_v_orientation = NULL;
  PyObject *__pyx_v_start_point = NULL;
  PyObject *__pyx_v_end_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("convert_box_to_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1472
 *     @staticmethod
 *     def convert_box_to_line(box):
 *         from table_extraction.line import Line             # <<<<<<<<<<<<<<
 *         x, y, w, h = box
 *         if w > h:
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Line);
  __Pyx_GIVEREF(__pyx_n_s_Line);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Line);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_extraction_line, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Line); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1472, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_Line = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1473
 *     def convert_box_to_line(box):
 *         from table_extraction.line import Line
 *         x, y, w, h = box             # <<<<<<<<<<<<<<
 *         if w > h:
 *             width = h
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1473, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_2,&__pyx_t_1,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1473, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_2,&__pyx_t_1,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1473, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1473, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1473, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_y = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1474
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 *         if w > h:             # <<<<<<<<<<<<<<
 *             width = h
 *             orientation = "h"
 */
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_w, __pyx_v_h, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1474, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1474, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1475
 *         x, y, w, h = box
 *         if w > h:
 *             width = h             # <<<<<<<<<<<<<<
 *             orientation = "h"
 *             start_point = (x, y + int(h / 2))
 */
    __Pyx_INCREF(__pyx_v_h);
    __pyx_v_width = __pyx_v_h;

    /* "table_extraction/utils_table_extraction.pyx":1476
 *         if w > h:
 *             width = h
 *             orientation = "h"             # <<<<<<<<<<<<<<
 *             start_point = (x, y + int(h / 2))
 *             end_point = (x + w, y + int(h / 2))
 */
    __Pyx_INCREF(__pyx_n_s_h);
    __pyx_v_orientation = __pyx_n_s_h;

    /* "table_extraction/utils_table_extraction.pyx":1477
 *             width = h
 *             orientation = "h"
 *             start_point = (x, y + int(h / 2))             # <<<<<<<<<<<<<<
 *             end_point = (x + w, y + int(h / 2))
 *         else:
 */
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_h, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1477, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1477, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Add(__pyx_v_y, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1477, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1477, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_x);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_v_start_point = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1478
 *             orientation = "h"
 *             start_point = (x, y + int(h / 2))
 *             end_point = (x + w, y + int(h / 2))             # <<<<<<<<<<<<<<
 *         else:
 *             width = w
 */
    __pyx_t_3 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1478, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_h, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1478, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1478, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Add(__pyx_v_y, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1478, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1478, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_v_end_point = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1474
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 *         if w > h:             # <<<<<<<<<<<<<<
 *             width = h
 *             orientation = "h"
 */
    goto __pyx_L5;
  }

  /* "table_extraction/utils_table_extraction.pyx":1480
 *             end_point = (x + w, y + int(h / 2))
 *         else:
 *             width = w             # <<<<<<<<<<<<<<
 *             orientation = "v"
 *             start_point = (x + int(w / 2), y)
 */
  /*else*/ {
    __Pyx_INCREF(__pyx_v_w);
    __pyx_v_width = __pyx_v_w;

    /* "table_extraction/utils_table_extraction.pyx":1481
 *         else:
 *             width = w
 *             orientation = "v"             # <<<<<<<<<<<<<<
 *             start_point = (x + int(w / 2), y)
 *             end_point = (x + int(w / 2), y + h)
 */
    __Pyx_INCREF(__pyx_n_s_v);
    __pyx_v_orientation = __pyx_n_s_v;

    /* "table_extraction/utils_table_extraction.pyx":1482
 *             width = w
 *             orientation = "v"
 *             start_point = (x + int(w / 2), y)             # <<<<<<<<<<<<<<
 *             end_point = (x + int(w / 2), y + h)
 *         return Line(start_point, end_point, width, orientation)
 */
    __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_w, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1482, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1482, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Add(__pyx_v_x, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1482, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1482, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_y);
    __pyx_t_1 = 0;
    __pyx_v_start_point = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1483
 *             orientation = "v"
 *             start_point = (x + int(w / 2), y)
 *             end_point = (x + int(w / 2), y + h)             # <<<<<<<<<<<<<<
 *         return Line(start_point, end_point, width, orientation)
 * 
 */
    __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_v_w, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1483, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1483, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Add(__pyx_v_x, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1483, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1483, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1483, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_v_end_point = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;
  }
  __pyx_L5:;

  /* "table_extraction/utils_table_extraction.pyx":1484
 *             start_point = (x + int(w / 2), y)
 *             end_point = (x + int(w / 2), y + h)
 *         return Line(start_point, end_point, width, orientation)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_Line);
  __pyx_t_1 = __pyx_v_Line; __pyx_t_4 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_1)) {
    PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_start_point, __pyx_v_end_point, __pyx_v_width, __pyx_v_orientation};
    __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_8, 4+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_3);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
    PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_start_point, __pyx_v_end_point, __pyx_v_width, __pyx_v_orientation};
    __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_8, 4+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_3);
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(4+__pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_v_start_point);
    __Pyx_GIVEREF(__pyx_v_start_point);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_8, __pyx_v_start_point);
    __Pyx_INCREF(__pyx_v_end_point);
    __Pyx_GIVEREF(__pyx_v_end_point);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_8, __pyx_v_end_point);
    __Pyx_INCREF(__pyx_v_width);
    __Pyx_GIVEREF(__pyx_v_width);
    PyTuple_SET_ITEM(__pyx_t_2, 2+__pyx_t_8, __pyx_v_width);
    __Pyx_INCREF(__pyx_v_orientation);
    __Pyx_GIVEREF(__pyx_v_orientation);
    PyTuple_SET_ITEM(__pyx_t_2, 3+__pyx_t_8, __pyx_v_orientation);
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1484, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1471
 * 
 *     @staticmethod
 *     def convert_box_to_line(box):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_box_to_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_Line);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_width);
  __Pyx_XDECREF(__pyx_v_orientation);
  __Pyx_XDECREF(__pyx_v_start_point);
  __Pyx_XDECREF(__pyx_v_end_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1487
 * 
 *     @staticmethod
 *     def convert_line_to_box(line, threshold=1, orientation='v'):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_169convert_line_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_169convert_line_to_box = {"convert_line_to_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_169convert_line_to_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_169convert_line_to_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("convert_line_to_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_threshold,&__pyx_n_s_orientation,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject *)__pyx_int_1));
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "convert_line_to_box") < 0)) __PYX_ERR(0, 1487, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_threshold = values[1];
    __pyx_v_orientation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("convert_line_to_box", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1487, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_line_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_168convert_line_to_box(__pyx_self, __pyx_v_line, __pyx_v_threshold, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_168convert_line_to_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_x1 = NULL;
  PyObject *__pyx_v_y1 = NULL;
  PyObject *__pyx_v_x2 = NULL;
  PyObject *__pyx_v_y2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("convert_line_to_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1488
 *     @staticmethod
 *     def convert_line_to_box(line, threshold=1, orientation='v'):
 *         x1, y1 = line.start_point             # <<<<<<<<<<<<<<
 *         x2, y2 = line.end_point
 *         if orientation == 'h':
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1488, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1488, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    #else
    __pyx_t_2 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1488, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1488, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1488, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    index = 1; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L3_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1488, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1488, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x1 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_y1 = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1489
 *     def convert_line_to_box(line, threshold=1, orientation='v'):
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point             # <<<<<<<<<<<<<<
 *         if orientation == 'h':
 *             return (x1, y1 - threshold, x2 - x1, 2 * threshold)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1489, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 2)) {
      if (size > 2) __Pyx_RaiseTooManyValuesError(2);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1489, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
    } else {
      __pyx_t_3 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
    }
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    #else
    __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_4 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext;
    index = 0; __pyx_t_3 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_3)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_3);
    index = 1; __pyx_t_2 = __pyx_t_5(__pyx_t_4); if (unlikely(!__pyx_t_2)) goto __pyx_L5_unpacking_failed;
    __Pyx_GOTREF(__pyx_t_2);
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_5(__pyx_t_4), 2) < 0) __PYX_ERR(0, 1489, __pyx_L1_error)
    __pyx_t_5 = NULL;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1489, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_x2 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_y2 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1490
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 *         if orientation == 'h':             # <<<<<<<<<<<<<<
 *             return (x1, y1 - threshold, x2 - x1, 2 * threshold)
 *         else:
 */
  __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1490, __pyx_L1_error)
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":1491
 *         x2, y2 = line.end_point
 *         if orientation == 'h':
 *             return (x1, y1 - threshold, x2 - x1, 2 * threshold)             # <<<<<<<<<<<<<<
 *         else:
 *             return (x1 - threshold, y1, 2 * threshold, y2 - y1)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = PyNumber_Subtract(__pyx_v_y1, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1491, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1491, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyNumber_Multiply(__pyx_int_2, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1491, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyTuple_New(4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1491, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_x1);
    __Pyx_GIVEREF(__pyx_v_x1);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_x1);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_4, 3, __pyx_t_3);
    __pyx_t_1 = 0;
    __pyx_t_2 = 0;
    __pyx_t_3 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1490
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 *         if orientation == 'h':             # <<<<<<<<<<<<<<
 *             return (x1, y1 - threshold, x2 - x1, 2 * threshold)
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1493
 *             return (x1, y1 - threshold, x2 - x1, 2 * threshold)
 *         else:
 *             return (x1 - threshold, y1, 2 * threshold, y2 - y1)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = PyNumber_Subtract(__pyx_v_x1, __pyx_v_threshold); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1493, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = PyNumber_Multiply(__pyx_int_2, __pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1493, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1493, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = PyTuple_New(4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1493, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_4);
    __Pyx_INCREF(__pyx_v_y1);
    __Pyx_GIVEREF(__pyx_v_y1);
    PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_y1);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_1, 2, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_1, 3, __pyx_t_2);
    __pyx_t_4 = 0;
    __pyx_t_3 = 0;
    __pyx_t_2 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1487
 * 
 *     @staticmethod
 *     def convert_line_to_box(line, threshold=1, orientation='v'):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_line_to_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x1);
  __Pyx_XDECREF(__pyx_v_y1);
  __Pyx_XDECREF(__pyx_v_x2);
  __Pyx_XDECREF(__pyx_v_y2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1496
 * 
 *     @staticmethod
 *     def fill_rects(image, color=(255, 255, 255)):             # <<<<<<<<<<<<<<
 *         """Fill all rects in the input image with the color
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_171fill_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_170fill_rects[] = "Fill all rects in the input image with the color\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_171fill_rects = {"fill_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_171fill_rects, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_170fill_rects};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_171fill_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("fill_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_color,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject*)__pyx_tuple__9));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "fill_rects") < 0)) __PYX_ERR(0, 1496, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_color = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("fill_rects", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1496, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_170fill_rects(__pyx_self, __pyx_v_image, __pyx_v_color);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_170fill_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_color) {
  PyObject *__pyx_v_contours = NULL;
  PyObject *__pyx_v_rects = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  int __pyx_t_11;
  int __pyx_t_12;
  PyObject *(*__pyx_t_13)(PyObject *);
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("fill_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1499
 *         """Fill all rects in the input image with the color
 *         """
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]             # <<<<<<<<<<<<<<
 *         rects = [cv2.boundingRect(c) for c in contours]
 *         rects = [rect for rect in rects if rect[2] < 10 or rect[3] < 10]
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_findContours); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_copy); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  __pyx_t_2 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_RETR_TREE); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_CHAIN_APPROX_SIMPLE); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_t_2, __pyx_t_5, __pyx_t_6};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1499, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[4] = {__pyx_t_4, __pyx_t_2, __pyx_t_5, __pyx_t_6};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1499, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(3+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1499, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_t_6);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_6 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1499, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_contours = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1500
 *         """
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]             # <<<<<<<<<<<<<<
 *         rects = [rect for rect in rects if rect[2] < 10 or rect[3] < 10]
 * 
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1500, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (likely(PyList_CheckExact(__pyx_v_contours)) || PyTuple_CheckExact(__pyx_v_contours)) {
    __pyx_t_1 = __pyx_v_contours; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_contours); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1500, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_10 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1500, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1500, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1500, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1500, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1500, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      }
    } else {
      __pyx_t_8 = __pyx_t_10(__pyx_t_1);
      if (unlikely(!__pyx_t_8)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1500, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_8);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_cv2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1500, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1500, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_8 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_c) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_c);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1500, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 1500, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_rects = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1501
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 *         rects = [rect for rect in rects if rect[2] < 10 or rect[3] < 10]             # <<<<<<<<<<<<<<
 * 
 *         for rect in rects:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1501, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
  for (;;) {
    if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1501, __pyx_L1_error)
    #else
    __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_8, __pyx_int_10, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (!__pyx_t_12) {
    } else {
      __pyx_t_11 = __pyx_t_12;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = PyObject_RichCompare(__pyx_t_5, __pyx_int_10, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1501, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_11 = __pyx_t_12;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_11) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_v_rect))) __PYX_ERR(0, 1501, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_rects, ((PyObject*)__pyx_t_3));
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1503
 *         rects = [rect for rect in rects if rect[2] < 10 or rect[3] < 10]
 * 
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 */
  __pyx_t_3 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_3); __pyx_t_9 = 0;
  for (;;) {
    if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_1 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_9); __Pyx_INCREF(__pyx_t_1); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1503, __pyx_L1_error)
    #else
    __pyx_t_1 = PySequence_ITEM(__pyx_t_3, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1503, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1504
 * 
 *         for rect in rects:
 *             x, y, w, h = rect             # <<<<<<<<<<<<<<
 *             cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 *         return image
 */
    if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
      PyObject* sequence = __pyx_v_rect;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 4)) {
        if (size > 4) __Pyx_RaiseTooManyValuesError(4);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1504, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_8 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_5 = PyTuple_GET_ITEM(sequence, 2); 
        __pyx_t_6 = PyTuple_GET_ITEM(sequence, 3); 
      } else {
        __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_8 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_5 = PyList_GET_ITEM(sequence, 2); 
        __pyx_t_6 = PyList_GET_ITEM(sequence, 3); 
      }
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_8);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_6);
      #else
      {
        Py_ssize_t i;
        PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_8,&__pyx_t_5,&__pyx_t_6};
        for (i=0; i < 4; i++) {
          PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1504, __pyx_L1_error)
          __Pyx_GOTREF(item);
          *(temps[i]) = item;
        }
      }
      #endif
    } else {
      Py_ssize_t index = -1;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_8,&__pyx_t_5,&__pyx_t_6};
      __pyx_t_2 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1504, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_13 = Py_TYPE(__pyx_t_2)->tp_iternext;
      for (index=0; index < 4; index++) {
        PyObject* item = __pyx_t_13(__pyx_t_2); if (unlikely(!item)) goto __pyx_L12_unpacking_failed;
        __Pyx_GOTREF(item);
        *(temps[index]) = item;
      }
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_13(__pyx_t_2), 4) < 0) __PYX_ERR(0, 1504, __pyx_L1_error)
      __pyx_t_13 = NULL;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L13_unpacking_done;
      __pyx_L12_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_13 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 1504, __pyx_L1_error)
      __pyx_L13_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_1);
    __pyx_t_1 = 0;
    __Pyx_XDECREF_SET(__pyx_v_y, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_XDECREF_SET(__pyx_v_w, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_XDECREF_SET(__pyx_v_h, __pyx_t_6);
    __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1505
 *         for rect in rects:
 *             x, y, w, h = rect
 *             cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_rectangle); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_x);
    __Pyx_GIVEREF(__pyx_v_x);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_x);
    __Pyx_INCREF(__pyx_v_y);
    __Pyx_GIVEREF(__pyx_v_y);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_y);
    __pyx_t_1 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_2);
    __pyx_t_1 = 0;
    __pyx_t_2 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_FILLED); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1505, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_8);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_8, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[6] = {__pyx_t_2, __pyx_v_image, __pyx_t_5, __pyx_t_4, __pyx_v_color, __pyx_t_1};
      __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 5+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[6] = {__pyx_t_2, __pyx_v_image, __pyx_t_5, __pyx_t_4, __pyx_v_color, __pyx_t_1};
      __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 5+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    {
      __pyx_t_14 = PyTuple_New(5+__pyx_t_7); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      if (__pyx_t_2) {
        __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_2); __pyx_t_2 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_7, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_14, 2+__pyx_t_7, __pyx_t_4);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_14, 3+__pyx_t_7, __pyx_v_color);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_14, 4+__pyx_t_7, __pyx_t_1);
      __pyx_t_5 = 0;
      __pyx_t_4 = 0;
      __pyx_t_1 = 0;
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_14, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1505, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
    }
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1503
 *         rects = [rect for rect in rects if rect[2] < 10 or rect[3] < 10]
 * 
 *         for rect in rects:             # <<<<<<<<<<<<<<
 *             x, y, w, h = rect
 *             cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1506
 *             x, y, w, h = rect
 *             cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1496
 * 
 *     @staticmethod
 *     def fill_rects(image, color=(255, 255, 255)):             # <<<<<<<<<<<<<<
 *         """Fill all rects in the input image with the color
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_contours);
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1509
 * 
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):             # <<<<<<<<<<<<<<
 *         for rects in all_rects:
 *             if rect in rects:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_173rect_in_list(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_173rect_in_list = {"rect_in_list", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_173rect_in_list, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_173rect_in_list(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_all_rects = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_in_list (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_all_rects,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_all_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_in_list", 1, 2, 2, 1); __PYX_ERR(0, 1509, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_in_list") < 0)) __PYX_ERR(0, 1509, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_rect = values[0];
    __pyx_v_all_rects = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_in_list", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1509, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_in_list", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_172rect_in_list(__pyx_self, __pyx_v_rect, __pyx_v_all_rects);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_172rect_in_list(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_all_rects) {
  PyObject *__pyx_v_rects = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("rect_in_list", 0);

  /* "table_extraction/utils_table_extraction.pyx":1510
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):
 *         for rects in all_rects:             # <<<<<<<<<<<<<<
 *             if rect in rects:
 *                 return True
 */
  if (likely(PyList_CheckExact(__pyx_v_all_rects)) || PyTuple_CheckExact(__pyx_v_all_rects)) {
    __pyx_t_1 = __pyx_v_all_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_all_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1510, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1510, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1510, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1510, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1510, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1510, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1510, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_rects, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1511
 *     def rect_in_list(rect, all_rects):
 *         for rects in all_rects:
 *             if rect in rects:             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_rect, __pyx_v_rects, Py_EQ)); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1511, __pyx_L1_error)
    __pyx_t_6 = (__pyx_t_5 != 0);
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1512
 *         for rects in all_rects:
 *             if rect in rects:
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1511
 *     def rect_in_list(rect, all_rects):
 *         for rects in all_rects:
 *             if rect in rects:             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1510
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):
 *         for rects in all_rects:             # <<<<<<<<<<<<<<
 *             if rect in rects:
 *                 return True
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1513
 *             if rect in rects:
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1509
 * 
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):             # <<<<<<<<<<<<<<
 *         for rects in all_rects:
 *             if rect in rects:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_in_list", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1516
 * 
 *     @staticmethod
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):             # <<<<<<<<<<<<<<
 *         line_list = []
 *         for line in lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_175line_between_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_175line_between_two_rects = {"line_between_two_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_175line_between_two_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_175line_between_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_between_two_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_lines,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[3] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[4] = ((PyObject *)((PyObject *)__pyx_int_15));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_between_two_rects", 0, 3, 5, 1); __PYX_ERR(0, 1516, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_between_two_rects", 0, 3, 5, 2); __PYX_ERR(0, 1516, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_between_two_rects") < 0)) __PYX_ERR(0, 1516, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_lines = values[2];
    __pyx_v_orientation = values[3];
    __pyx_v_threshold = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_between_two_rects", 0, 3, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1516, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_between_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_174line_between_two_rects(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_lines, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_174line_between_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_lines, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_line_list = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("line_between_two_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":1517
 *     @staticmethod
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):
 *         line_list = []             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1517, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_line_list = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1518
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):
 *         line_list = []
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 *                 line_list.append(line)
 */
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_1 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1518, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1518, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1518, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1518, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1518, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1518, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1518, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1519
 *         line_list = []
 *         for line in lines:
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:             # <<<<<<<<<<<<<<
 *                 line_list.append(line)
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:
 */
    __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1519, __pyx_L1_error)
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_4, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_9 = PyNumber_Add(__pyx_t_4, __pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PyNumber_Subtract(__pyx_t_9, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_GE); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_9, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_7 = PyNumber_Add(__pyx_t_9, __pyx_v_threshold); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = PyObject_RichCompare(__pyx_t_8, __pyx_t_7, Py_LE); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1519, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1520
 *         for line in lines:
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 *                 line_list.append(line)             # <<<<<<<<<<<<<<
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:
 *                 line_list.append(line)
 */
      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_line_list, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1520, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1519
 *         line_list = []
 *         for line in lines:
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:             # <<<<<<<<<<<<<<
 *                 line_list.append(line)
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:
 */
      goto __pyx_L5;
    }

    /* "table_extraction/utils_table_extraction.pyx":1521
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 *                 line_list.append(line)
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:             # <<<<<<<<<<<<<<
 *                 line_list.append(line)
 *         return line_list
 */
    __pyx_t_6 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1521, __pyx_L1_error)
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L9_bool_binop_done;
    }
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_9, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_4 = PyNumber_Add(__pyx_t_9, __pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PyNumber_Subtract(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_8, Py_GE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_6) {
    } else {
      __pyx_t_5 = __pyx_t_6;
      goto __pyx_L9_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = PyNumber_Add(__pyx_t_4, __pyx_v_threshold); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_8, __pyx_t_7, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_6;
    __pyx_L9_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1522
 *                 line_list.append(line)
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:
 *                 line_list.append(line)             # <<<<<<<<<<<<<<
 *         return line_list
 * 
 */
      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_line_list, __pyx_v_line); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1522, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1521
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 *                 line_list.append(line)
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:             # <<<<<<<<<<<<<<
 *                 line_list.append(line)
 *         return line_list
 */
    }
    __pyx_L5:;

    /* "table_extraction/utils_table_extraction.pyx":1518
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):
 *         line_list = []
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             if orientation == "v" and line.start_point[0] >= a_rect[0] + a_rect[2] - threshold and line.start_point[0] <= b_rect[0] + threshold:
 *                 line_list.append(line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1523
 *             elif orientation == "h" and line.start_point[1] >= a_rect[1] + a_rect[3] - threshold and line.start_point[1] <= b_rect[1] + threshold:
 *                 line_list.append(line)
 *         return line_list             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_line_list);
  __pyx_r = __pyx_v_line_list;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1516
 * 
 *     @staticmethod
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):             # <<<<<<<<<<<<<<
 *         line_list = []
 *         for line in lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_between_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line_list);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_177rect_between_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_177rect_between_two_rects = {"rect_between_two_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_177rect_between_two_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_177rect_between_two_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_v_return_rects = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_between_two_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_rects,&__pyx_n_s_orientation,&__pyx_n_s_threshold,&__pyx_n_s_return_rects,0};
    PyObject* values[6] = {0,0,0,0,0,0};
    values[3] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[4] = ((PyObject *)((PyObject *)__pyx_int_0));
    values[5] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_between_two_rects", 0, 3, 6, 1); __PYX_ERR(0, 1526, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_between_two_rects", 0, 3, 6, 2); __PYX_ERR(0, 1526, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_return_rects);
          if (value) { values[5] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_between_two_rects") < 0)) __PYX_ERR(0, 1526, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_rects = values[2];
    __pyx_v_orientation = values[3];
    __pyx_v_threshold = values[4];
    __pyx_v_return_rects = values[5];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_between_two_rects", 0, 3, 6, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1526, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_176rect_between_two_rects(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_rects, __pyx_v_orientation, __pyx_v_threshold, __pyx_v_return_rects);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1529
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold             # <<<<<<<<<<<<<<
 *         else:
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_lambda34(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_lambda34 = {"lambda34", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_lambda34, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_lambda34(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda34 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_rect,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda34", 1, 3, 3, 1); __PYX_ERR(0, 1529, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda34", 1, 3, 3, 2); __PYX_ERR(0, 1529, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda34") < 0)) __PYX_ERR(0, 1529, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_rect = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda34", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1529, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects.lambda34", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda34(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda34(PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rect) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_cur_scope;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_outer_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("lambda34", 0);
  __pyx_outer_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *) __Pyx_CyFunction_GetClosure(__pyx_self);
  __pyx_cur_scope = __pyx_outer_scope;
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Add(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1529, __pyx_L1_error) }
  __pyx_t_4 = PyNumber_Subtract(__pyx_t_5, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1529, __pyx_L1_error)
  if (__pyx_t_6) {
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_5);
    __pyx_t_1 = __pyx_t_5;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PyNumber_Add(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1529, __pyx_L1_error) }
  __pyx_t_5 = PyNumber_Add(__pyx_t_4, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_5, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1529, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_1 = __pyx_t_4;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects.lambda34", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1532
 *         else:
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold             # <<<<<<<<<<<<<<
 *         if return_rects: #13968
 *             rect_list = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_1lambda35(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_1lambda35 = {"lambda35", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_1lambda35, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_1lambda35(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda35 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_rect,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda35", 1, 3, 3, 1); __PYX_ERR(0, 1532, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda35", 1, 3, 3, 2); __PYX_ERR(0, 1532, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda35") < 0)) __PYX_ERR(0, 1532, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_rect = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda35", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1532, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects.lambda35", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda35(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda35(PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rect) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_cur_scope;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_outer_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("lambda35", 0);
  __pyx_outer_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *) __Pyx_CyFunction_GetClosure(__pyx_self);
  __pyx_cur_scope = __pyx_outer_scope;
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Add(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1532, __pyx_L1_error) }
  __pyx_t_4 = PyNumber_Subtract(__pyx_t_5, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1532, __pyx_L1_error)
  if (__pyx_t_6) {
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_5);
    __pyx_t_1 = __pyx_t_5;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = PyNumber_Add(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1532, __pyx_L1_error) }
  __pyx_t_5 = PyNumber_Add(__pyx_t_4, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_5, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1532, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_1 = __pyx_t_4;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects.lambda35", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_176rect_between_two_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_rects) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_cur_scope;
  PyObject *__pyx_v_f_between = NULL;
  PyObject *__pyx_v_rect_list = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("rect_between_two_rects", 0);
  __pyx_cur_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(__pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects, __pyx_empty_tuple, NULL);
  if (unlikely(!__pyx_cur_scope)) {
    __pyx_cur_scope = ((struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)Py_None);
    __Pyx_INCREF(Py_None);
    __PYX_ERR(0, 1526, __pyx_L1_error)
  } else {
    __Pyx_GOTREF(__pyx_cur_scope);
  }
  __pyx_cur_scope->__pyx_v_threshold = __pyx_v_threshold;
  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_threshold);
  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_threshold);
  __Pyx_INCREF(__pyx_v_a_rect);
  __Pyx_INCREF(__pyx_v_b_rect);

  /* "table_extraction/utils_table_extraction.pyx":1527
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":             # <<<<<<<<<<<<<<
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1527, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1528
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)             # <<<<<<<<<<<<<<
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold
 *         else:
 */
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1528, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1528, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_3, __pyx_t_4, Py_LE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1528, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1528, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_1) {
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1528, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_b_rect);
      __pyx_t_2 = __pyx_t_5;
      __pyx_t_5 = 0;
    } else {
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1528, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_b_rect);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_a_rect);
      __pyx_t_2 = __pyx_t_5;
      __pyx_t_5 = 0;
    }
    if (likely(__pyx_t_2 != Py_None)) {
      PyObject* sequence = __pyx_t_2;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1528, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 1); 
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_4);
      #else
      __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1528, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_4 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1528, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      #endif
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else {
      __Pyx_RaiseNoneNotIterableError(); __PYX_ERR(0, 1528, __pyx_L1_error)
    }
    __Pyx_DECREF_SET(__pyx_v_a_rect, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_DECREF_SET(__pyx_v_b_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1529
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold             # <<<<<<<<<<<<<<
 *         else:
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 */
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_lambda34, 0, __pyx_n_s_Utils_rect_between_two_rects_loc, ((PyObject*)__pyx_cur_scope), __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1529, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_f_between = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1527
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":             # <<<<<<<<<<<<<<
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1531
 *             f_between = lambda a_rect, b_rect, rect: rect[0]>=a_rect[0]+a_rect[2]-threshold and rect[0]+rect[2]<=b_rect[0]+threshold
 *         else:
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)             # <<<<<<<<<<<<<<
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold
 *         if return_rects: #13968
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1531, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1531, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_t_5, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1531, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1531, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_1) {
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1531, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_b_rect);
      __pyx_t_2 = __pyx_t_3;
      __pyx_t_3 = 0;
    } else {
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1531, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_b_rect);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_a_rect);
      __pyx_t_2 = __pyx_t_3;
      __pyx_t_3 = 0;
    }
    if (likely(__pyx_t_2 != Py_None)) {
      PyObject* sequence = __pyx_t_2;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 1531, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 1); 
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_5);
      #else
      __pyx_t_3 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1531, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1531, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      #endif
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    } else {
      __Pyx_RaiseNoneNotIterableError(); __PYX_ERR(0, 1531, __pyx_L1_error)
    }
    __Pyx_DECREF_SET(__pyx_v_a_rect, __pyx_t_3);
    __pyx_t_3 = 0;
    __Pyx_DECREF_SET(__pyx_v_b_rect, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1532
 *         else:
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold             # <<<<<<<<<<<<<<
 *         if return_rects: #13968
 *             rect_list = []
 */
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_22rect_between_two_rects_1lambda35, 0, __pyx_n_s_Utils_rect_between_two_rects_loc, ((PyObject*)__pyx_cur_scope), __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1532, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_f_between = __pyx_t_2;
    __pyx_t_2 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":1533
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold
 *         if return_rects: #13968             # <<<<<<<<<<<<<<
 *             rect_list = []
 *             for rect in rects:
 */
  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_return_rects); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1533, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1534
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold
 *         if return_rects: #13968
 *             rect_list = []             # <<<<<<<<<<<<<<
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1534, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_rect_list = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1535
 *         if return_rects: #13968
 *             rect_list = []
 *             for rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_between(a_rect, b_rect, rect):
 *                     rect_list.append(rect)
 */
    if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
      __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1535, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_7 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1535, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_2))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1535, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1535, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1535, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1535, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        }
      } else {
        __pyx_t_5 = __pyx_t_7(__pyx_t_2);
        if (unlikely(!__pyx_t_5)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1535, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_5);
      }
      __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1536
 *             rect_list = []
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):             # <<<<<<<<<<<<<<
 *                     rect_list.append(rect)
 *             return rect_list
 */
      __pyx_t_5 = PyTuple_New(3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_b_rect);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 2, __pyx_v_rect);
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_v_f_between, __pyx_t_5, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1536, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      if (__pyx_t_1) {

        /* "table_extraction/utils_table_extraction.pyx":1537
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):
 *                     rect_list.append(rect)             # <<<<<<<<<<<<<<
 *             return rect_list
 *         else:
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_rect_list, __pyx_v_rect); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 1537, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":1536
 *             rect_list = []
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):             # <<<<<<<<<<<<<<
 *                     rect_list.append(rect)
 *             return rect_list
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1535
 *         if return_rects: #13968
 *             rect_list = []
 *             for rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_between(a_rect, b_rect, rect):
 *                     rect_list.append(rect)
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1538
 *                 if f_between(a_rect, b_rect, rect):
 *                     rect_list.append(rect)
 *             return rect_list             # <<<<<<<<<<<<<<
 *         else:
 *             for rect in rects:
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_rect_list);
    __pyx_r = __pyx_v_rect_list;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1533
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[1]<=b_rect[1] else (b_rect, a_rect)
 *             f_between = lambda a_rect, b_rect, rect: rect[1]>=a_rect[1]+a_rect[3]-threshold and rect[1]+rect[3]<=b_rect[1]+threshold
 *         if return_rects: #13968             # <<<<<<<<<<<<<<
 *             rect_list = []
 *             for rect in rects:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1540
 *             return rect_list
 *         else:
 *             for rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_between(a_rect, b_rect, rect):
 *                     return True
 */
  /*else*/ {
    if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
      __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1540, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_7 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1540, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_2))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1540, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1540, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1540, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1540, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_7(__pyx_t_2);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1540, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1541
 *         else:
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):             # <<<<<<<<<<<<<<
 *                     return True
 *             return False
 */
      __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_a_rect);
      __Pyx_GIVEREF(__pyx_v_a_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_a_rect);
      __Pyx_INCREF(__pyx_v_b_rect);
      __Pyx_GIVEREF(__pyx_v_b_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_b_rect);
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_v_rect);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_v_f_between, __pyx_t_3, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1541, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1541, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (__pyx_t_1) {

        /* "table_extraction/utils_table_extraction.pyx":1542
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):
 *                     return True             # <<<<<<<<<<<<<<
 *             return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1541
 *         else:
 *             for rect in rects:
 *                 if f_between(a_rect, b_rect, rect):             # <<<<<<<<<<<<<<
 *                     return True
 *             return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1540
 *             return rect_list
 *         else:
 *             for rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_between(a_rect, b_rect, rect):
 *                     return True
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1543
 *                 if f_between(a_rect, b_rect, rect):
 *                     return True
 *             return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_between_two_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_f_between);
  __Pyx_XDECREF(__pyx_v_rect_list);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_a_rect);
  __Pyx_XDECREF(__pyx_v_b_rect);
  __Pyx_DECREF(((PyObject *)__pyx_cur_scope));
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_179rects_under_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_179rects_under_rect = {"rects_under_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_179rects_under_rect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_179rects_under_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_src_rect = 0;
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_v_return_rects = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rects_under_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_src_rect,&__pyx_n_s_rects,&__pyx_n_s_orientation,&__pyx_n_s_threshold,&__pyx_n_s_return_rects,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_0));
    values[4] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_src_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rects_under_rect", 0, 2, 5, 1); __PYX_ERR(0, 1546, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_return_rects);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rects_under_rect") < 0)) __PYX_ERR(0, 1546, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_src_rect = values[0];
    __pyx_v_rects = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_threshold = values[3];
    __pyx_v_return_rects = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rects_under_rect", 0, 2, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1546, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_178rects_under_rect(__pyx_self, __pyx_v_src_rect, __pyx_v_rects, __pyx_v_orientation, __pyx_v_threshold, __pyx_v_return_rects);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1548
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]             # <<<<<<<<<<<<<<
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_lambda36(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_lambda36 = {"lambda36", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_lambda36, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_lambda36(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_src_rect = 0;
  PyObject *__pyx_v_dst_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda36 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_src_rect,&__pyx_n_s_dst_rect,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_src_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_dst_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda36", 1, 2, 2, 1); __PYX_ERR(0, 1548, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda36") < 0)) __PYX_ERR(0, 1548, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_src_rect = values[0];
    __pyx_v_dst_rect = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda36", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1548, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect.lambda36", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda36(__pyx_self, __pyx_v_src_rect, __pyx_v_dst_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda36(PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_dst_rect) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_cur_scope;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_outer_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda36", 0);
  __pyx_outer_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *) __Pyx_CyFunction_GetClosure(__pyx_self);
  __pyx_cur_scope = __pyx_outer_scope;
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_src_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_src_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1548, __pyx_L1_error) }
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_dst_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1548, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect.lambda36", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1550
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]             # <<<<<<<<<<<<<<
 *         if return_rects:
 *             rect_list = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_1lambda37(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_1lambda37 = {"lambda37", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_1lambda37, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_1lambda37(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_src_rect = 0;
  PyObject *__pyx_v_dst_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda37 (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_src_rect,&__pyx_n_s_dst_rect,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_src_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_dst_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("lambda37", 1, 2, 2, 1); __PYX_ERR(0, 1550, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lambda37") < 0)) __PYX_ERR(0, 1550, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_src_rect = values[0];
    __pyx_v_dst_rect = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("lambda37", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1550, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect.lambda37", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_lambda_funcdef_lambda37(__pyx_self, __pyx_v_src_rect, __pyx_v_dst_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda37(PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_dst_rect) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_cur_scope;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_outer_scope;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda37", 0);
  __pyx_outer_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *) __Pyx_CyFunction_GetClosure(__pyx_self);
  __pyx_cur_scope = __pyx_outer_scope;
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_src_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_src_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_cur_scope->__pyx_v_threshold)) { __Pyx_RaiseClosureNameError("threshold"); __PYX_ERR(0, 1550, __pyx_L1_error) }
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_cur_scope->__pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_dst_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1550, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect.lambda37", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_178rects_under_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_src_rect, PyObject *__pyx_v_rects, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold, PyObject *__pyx_v_return_rects) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_cur_scope;
  PyObject *__pyx_v_f_under = NULL;
  PyObject *__pyx_v_rect_list = NULL;
  PyObject *__pyx_v_dst_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("rects_under_rect", 0);
  __pyx_cur_scope = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(__pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect, __pyx_empty_tuple, NULL);
  if (unlikely(!__pyx_cur_scope)) {
    __pyx_cur_scope = ((struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)Py_None);
    __Pyx_INCREF(Py_None);
    __PYX_ERR(0, 1546, __pyx_L1_error)
  } else {
    __Pyx_GOTREF(__pyx_cur_scope);
  }
  __pyx_cur_scope->__pyx_v_threshold = __pyx_v_threshold;
  __Pyx_INCREF(__pyx_cur_scope->__pyx_v_threshold);
  __Pyx_GIVEREF(__pyx_cur_scope->__pyx_v_threshold);

  /* "table_extraction/utils_table_extraction.pyx":1547
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":             # <<<<<<<<<<<<<<
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 *         else:
 */
  __pyx_t_1 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1547, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1548
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]             # <<<<<<<<<<<<<<
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]
 */
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_lambda36, 0, __pyx_n_s_Utils_rects_under_rect_locals_la, ((PyObject*)__pyx_cur_scope), __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1548, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_f_under = __pyx_t_2;
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1547
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":             # <<<<<<<<<<<<<<
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 *         else:
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1550
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]             # <<<<<<<<<<<<<<
 *         if return_rects:
 *             rect_list = []
 */
  /*else*/ {
    __pyx_t_2 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_16rects_under_rect_1lambda37, 0, __pyx_n_s_Utils_rects_under_rect_locals_la, ((PyObject*)__pyx_cur_scope), __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1550, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_f_under = __pyx_t_2;
    __pyx_t_2 = 0;
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":1551
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]
 *         if return_rects:             # <<<<<<<<<<<<<<
 *             rect_list = []
 *             for dst_rect in rects:
 */
  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_return_rects); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1551, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1552
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]
 *         if return_rects:
 *             rect_list = []             # <<<<<<<<<<<<<<
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_rect_list = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1553
 *         if return_rects:
 *             rect_list = []
 *             for dst_rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_under(src_rect, dst_rect):
 *                     rect_list.append(dst_rect)
 */
    if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
      __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
      __pyx_t_4 = NULL;
    } else {
      __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1553, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1553, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_4)) {
        if (likely(PyList_CheckExact(__pyx_t_2))) {
          if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1553, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1553, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        } else {
          if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1553, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1553, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        }
      } else {
        __pyx_t_5 = __pyx_t_4(__pyx_t_2);
        if (unlikely(!__pyx_t_5)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1553, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_5);
      }
      __Pyx_XDECREF_SET(__pyx_v_dst_rect, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1554
 *             rect_list = []
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     rect_list.append(dst_rect)
 *             return rect_list
 */
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_src_rect);
      __Pyx_GIVEREF(__pyx_v_src_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_src_rect);
      __Pyx_INCREF(__pyx_v_dst_rect);
      __Pyx_GIVEREF(__pyx_v_dst_rect);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_dst_rect);
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_v_f_under, __pyx_t_5, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1554, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (__pyx_t_1) {

        /* "table_extraction/utils_table_extraction.pyx":1555
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):
 *                     rect_list.append(dst_rect)             # <<<<<<<<<<<<<<
 *             return rect_list
 *         else:
 */
        __pyx_t_7 = __Pyx_PyList_Append(__pyx_v_rect_list, __pyx_v_dst_rect); if (unlikely(__pyx_t_7 == ((int)-1))) __PYX_ERR(0, 1555, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":1554
 *             rect_list = []
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     rect_list.append(dst_rect)
 *             return rect_list
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1553
 *         if return_rects:
 *             rect_list = []
 *             for dst_rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_under(src_rect, dst_rect):
 *                     rect_list.append(dst_rect)
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1556
 *                 if f_under(src_rect, dst_rect):
 *                     rect_list.append(dst_rect)
 *             return rect_list             # <<<<<<<<<<<<<<
 *         else:
 *             for dst_rect in rects:
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_rect_list);
    __pyx_r = __pyx_v_rect_list;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1551
 *         else:
 *             f_under = lambda src_rect, dst_rect: src_rect[1]+src_rect[3]-threshold<=dst_rect[1]
 *         if return_rects:             # <<<<<<<<<<<<<<
 *             rect_list = []
 *             for dst_rect in rects:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1558
 *             return rect_list
 *         else:
 *             for dst_rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_under(src_rect, dst_rect):
 *                     return True
 */
  /*else*/ {
    if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
      __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
      __pyx_t_4 = NULL;
    } else {
      __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1558, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1558, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_4)) {
        if (likely(PyList_CheckExact(__pyx_t_2))) {
          if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_6); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1558, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1558, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        } else {
          if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_6); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 1558, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1558, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        }
      } else {
        __pyx_t_6 = __pyx_t_4(__pyx_t_2);
        if (unlikely(!__pyx_t_6)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1558, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_6);
      }
      __Pyx_XDECREF_SET(__pyx_v_dst_rect, __pyx_t_6);
      __pyx_t_6 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1559
 *         else:
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     return True
 *             return False
 */
      __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1559, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_INCREF(__pyx_v_src_rect);
      __Pyx_GIVEREF(__pyx_v_src_rect);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_src_rect);
      __Pyx_INCREF(__pyx_v_dst_rect);
      __Pyx_GIVEREF(__pyx_v_dst_rect);
      PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_dst_rect);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_v_f_under, __pyx_t_6, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1559, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1559, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (__pyx_t_1) {

        /* "table_extraction/utils_table_extraction.pyx":1560
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):
 *                     return True             # <<<<<<<<<<<<<<
 *             return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1559
 *         else:
 *             for dst_rect in rects:
 *                 if f_under(src_rect, dst_rect):             # <<<<<<<<<<<<<<
 *                     return True
 *             return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1558
 *             return rect_list
 *         else:
 *             for dst_rect in rects:             # <<<<<<<<<<<<<<
 *                 if f_under(src_rect, dst_rect):
 *                     return True
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1561
 *                 if f_under(src_rect, dst_rect):
 *                     return True
 *             return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rects_under_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_f_under);
  __Pyx_XDECREF(__pyx_v_rect_list);
  __Pyx_XDECREF(__pyx_v_dst_rect);
  __Pyx_DECREF(((PyObject *)__pyx_cur_scope));
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1564
 * 
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):             # <<<<<<<<<<<<<<
 *         for alignment in alignments:
 *             if alignment in col_alignments:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_181alignments_contain(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_181alignments_contain = {"alignments_contain", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_181alignments_contain, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_181alignments_contain(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_col_alignments = 0;
  PyObject *__pyx_v_alignments = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("alignments_contain (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_col_alignments,&__pyx_n_s_alignments,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_col_alignments)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_alignments)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("alignments_contain", 1, 2, 2, 1); __PYX_ERR(0, 1564, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "alignments_contain") < 0)) __PYX_ERR(0, 1564, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_col_alignments = values[0];
    __pyx_v_alignments = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("alignments_contain", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1564, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.alignments_contain", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_180alignments_contain(__pyx_self, __pyx_v_col_alignments, __pyx_v_alignments);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_180alignments_contain(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_col_alignments, PyObject *__pyx_v_alignments) {
  PyObject *__pyx_v_alignment = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("alignments_contain", 0);

  /* "table_extraction/utils_table_extraction.pyx":1565
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):
 *         for alignment in alignments:             # <<<<<<<<<<<<<<
 *             if alignment in col_alignments:
 *                 return True
 */
  if (likely(PyList_CheckExact(__pyx_v_alignments)) || PyTuple_CheckExact(__pyx_v_alignments)) {
    __pyx_t_1 = __pyx_v_alignments; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_alignments); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1565, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1565, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1565, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1565, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1565, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1565, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1565, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_alignment, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1566
 *     def alignments_contain(col_alignments, alignments):
 *         for alignment in alignments:
 *             if alignment in col_alignments:             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_alignment, __pyx_v_col_alignments, Py_EQ)); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 1566, __pyx_L1_error)
    __pyx_t_6 = (__pyx_t_5 != 0);
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1567
 *         for alignment in alignments:
 *             if alignment in col_alignments:
 *                 return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_True);
      __pyx_r = Py_True;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;

      /* "table_extraction/utils_table_extraction.pyx":1566
 *     def alignments_contain(col_alignments, alignments):
 *         for alignment in alignments:
 *             if alignment in col_alignments:             # <<<<<<<<<<<<<<
 *                 return True
 *         return False
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1565
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):
 *         for alignment in alignments:             # <<<<<<<<<<<<<<
 *             if alignment in col_alignments:
 *                 return True
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1568
 *             if alignment in col_alignments:
 *                 return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1564
 * 
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):             # <<<<<<<<<<<<<<
 *         for alignment in alignments:
 *             if alignment in col_alignments:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.alignments_contain", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_alignment);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1571
 * 
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_183remove_content_block_by_id(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_183remove_content_block_by_id = {"remove_content_block_by_id", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_183remove_content_block_by_id, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_183remove_content_block_by_id(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_idx = 0;
  PyObject *__pyx_v_content_blocks = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_content_block_by_id (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_idx,&__pyx_n_s_content_blocks,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_idx)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_content_block_by_id", 1, 2, 2, 1); __PYX_ERR(0, 1571, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_content_block_by_id") < 0)) __PYX_ERR(0, 1571, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_idx = values[0];
    __pyx_v_content_blocks = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_content_block_by_id", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1571, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_content_block_by_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_182remove_content_block_by_id(__pyx_self, __pyx_v_idx, __pyx_v_content_blocks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_182remove_content_block_by_id(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_idx, PyObject *__pyx_v_content_blocks) {
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("remove_content_block_by_id", 0);

  /* "table_extraction/utils_table_extraction.pyx":1572
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             if content_block.idx == idx:
 *                 content_blocks.remove(content_block)
 */
  if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
    __pyx_t_1 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1572, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1572, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1572, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1572, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1572, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1572, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1572, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1573
 *     def remove_content_block_by_id(idx, content_blocks):
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:             # <<<<<<<<<<<<<<
 *                 content_blocks.remove(content_block)
 * 
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_idx); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1573, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_4, __pyx_v_idx, Py_EQ); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1573, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1573, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":1574
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:
 *                 content_blocks.remove(content_block)             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_blocks, __pyx_n_s_remove); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1574, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_7)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_7);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_5 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_7, __pyx_v_content_block) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_content_block);
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1574, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1573
 *     def remove_content_block_by_id(idx, content_blocks):
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:             # <<<<<<<<<<<<<<
 *                 content_blocks.remove(content_block)
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1572
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             if content_block.idx == idx:
 *                 content_blocks.remove(content_block)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1571
 * 
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_content_block_by_id", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1577
 * 
 *     @staticmethod
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625             # <<<<<<<<<<<<<<
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_185remove_noise_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_185remove_noise_content_blocks = {"remove_noise_content_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_185remove_noise_content_blocks, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_185remove_noise_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_content_blocks = 0;
  PyObject *__pyx_v_text_stats_dict = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_noise_content_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_content_blocks,&__pyx_n_s_text_stats_dict,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_blocks)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_stats_dict)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_noise_content_blocks", 1, 2, 2, 1); __PYX_ERR(0, 1577, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_noise_content_blocks") < 0)) __PYX_ERR(0, 1577, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_content_blocks = values[0];
    __pyx_v_text_stats_dict = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_noise_content_blocks", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1577, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_noise_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_184remove_noise_content_blocks(__pyx_self, __pyx_v_content_blocks, __pyx_v_text_stats_dict);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_184remove_noise_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_text_stats_dict) {
  PyObject *__pyx_v_ave_area = NULL;
  PyObject *__pyx_v_ave_w = NULL;
  PyObject *__pyx_v_ave_h = NULL;
  PyObject *__pyx_v_noise_blocks = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("remove_noise_content_blocks", 0);

  /* "table_extraction/utils_table_extraction.pyx":1578
 *     @staticmethod
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625
 *         ave_area = text_stats_dict["ave_area"]             # <<<<<<<<<<<<<<
 *         ave_w    = text_stats_dict["ave_w"]
 *         ave_h    = text_stats_dict["ave_h"]
 */
  __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_text_stats_dict, __pyx_n_s_ave_area); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1578, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ave_area = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1579
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]             # <<<<<<<<<<<<<<
 *         ave_h    = text_stats_dict["ave_h"]
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_text_stats_dict, __pyx_n_s_ave_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1579, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ave_w = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1580
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]
 *         ave_h    = text_stats_dict["ave_h"]             # <<<<<<<<<<<<<<
 * 
 *         noise_blocks = []
 */
  __pyx_t_1 = __Pyx_PyObject_Dict_GetItem(__pyx_v_text_stats_dict, __pyx_n_s_ave_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1580, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_ave_h = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1582
 *         ave_h    = text_stats_dict["ave_h"]
 * 
 *         noise_blocks = []             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             rect = content_block.bounding_rect
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1582, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_noise_blocks = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1583
 * 
 *         noise_blocks = []
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             rect = content_block.bounding_rect
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802
 */
  if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
    __pyx_t_1 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1583, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1583, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1583, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1583, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1583, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1583, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1583, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1584
 *         noise_blocks = []
 *         for content_block in content_blocks:
 *             rect = content_block.bounding_rect             # <<<<<<<<<<<<<<
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802
 *                 noise_blocks.append(content_block)
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1584, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1585
 *         for content_block in content_blocks:
 *             rect = content_block.bounding_rect
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802             # <<<<<<<<<<<<<<
 *                 noise_blocks.append(content_block)
 *         return list(set(content_blocks)-set(noise_blocks))
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_area); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    __pyx_t_4 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_6);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyInt_FloorDivideObjC(__pyx_v_ave_area, __pyx_int_2, 2, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_5 = __pyx_t_8;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_6 = __Pyx_PyInt_FloorDivideObjC(__pyx_v_ave_w, __pyx_int_2, 2, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (!__pyx_t_8) {
    } else {
      __pyx_t_5 = __pyx_t_8;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = __Pyx_PyInt_FloorDivideObjC(__pyx_v_ave_h, __pyx_int_2, 2, 0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, __pyx_t_6, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1585, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_5 = __pyx_t_8;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":1586
 *             rect = content_block.bounding_rect
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802
 *                 noise_blocks.append(content_block)             # <<<<<<<<<<<<<<
 *         return list(set(content_blocks)-set(noise_blocks))
 * 
 */
      __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_noise_blocks, __pyx_v_content_block); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 1586, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":1585
 *         for content_block in content_blocks:
 *             rect = content_block.bounding_rect
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802             # <<<<<<<<<<<<<<
 *                 noise_blocks.append(content_block)
 *         return list(set(content_blocks)-set(noise_blocks))
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1583
 * 
 *         noise_blocks = []
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             rect = content_block.bounding_rect
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1587
 *             if content_block.area()<ave_area//2 and (rect[2]<ave_w//2 or rect[3]<ave_h//2): #14802
 *                 noise_blocks.append(content_block)
 *         return list(set(content_blocks)-set(noise_blocks))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PySet_New(__pyx_v_content_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1587, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_7 = PySet_New(__pyx_v_noise_blocks); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1587, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_6 = PyNumber_Subtract(__pyx_t_1, __pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1587, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = PySequence_List(__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1587, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_r = __pyx_t_7;
  __pyx_t_7 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1577
 * 
 *     @staticmethod
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625             # <<<<<<<<<<<<<<
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_noise_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ave_area);
  __Pyx_XDECREF(__pyx_v_ave_w);
  __Pyx_XDECREF(__pyx_v_ave_h);
  __Pyx_XDECREF(__pyx_v_noise_blocks);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1590
 * 
 *     @staticmethod
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_187has_box_between_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_186has_box_between_content_blocks[] = "Check if between two content blocks exist at least a content block or a table bouding box\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_187has_box_between_content_blocks = {"has_box_between_content_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_187has_box_between_content_blocks, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_186has_box_between_content_blocks};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_187has_box_between_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_content_block = 0;
  PyObject *__pyx_v_b_content_block = 0;
  PyObject *__pyx_v_content_blocks = 0;
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("has_box_between_content_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_content_block,&__pyx_n_s_b_content_block,&__pyx_n_s_content_blocks,&__pyx_n_s_boxes,&__pyx_n_s_orientation,0};
    PyObject* values[5] = {0,0,0,0,0};
    values[4] = ((PyObject *)((PyObject*)__pyx_n_s_horizontal));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_content_block)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_content_block)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("has_box_between_content_blocks", 0, 4, 5, 1); __PYX_ERR(0, 1590, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("has_box_between_content_blocks", 0, 4, 5, 2); __PYX_ERR(0, 1590, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("has_box_between_content_blocks", 0, 4, 5, 3); __PYX_ERR(0, 1590, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[4] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "has_box_between_content_blocks") < 0)) __PYX_ERR(0, 1590, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_content_block = values[0];
    __pyx_v_b_content_block = values[1];
    __pyx_v_content_blocks = values[2];
    __pyx_v_boxes = values[3];
    __pyx_v_orientation = values[4];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("has_box_between_content_blocks", 0, 4, 5, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1590, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.has_box_between_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_186has_box_between_content_blocks(__pyx_self, __pyx_v_a_content_block, __pyx_v_b_content_block, __pyx_v_content_blocks, __pyx_v_boxes, __pyx_v_orientation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1607
 * 
 *             # Sort all content blocks by Y position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[1])             # <<<<<<<<<<<<<<
 *             for content_block in content_blocks:
 *                 rect = content_block.bounding_rect
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_lambda38(PyObject *__pyx_self, PyObject *__pyx_v_content_block); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_lambda38 = {"lambda38", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_lambda38, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_lambda38(PyObject *__pyx_self, PyObject *__pyx_v_content_block) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda38 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda38(__pyx_self, ((PyObject *)__pyx_v_content_block));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda38(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_block) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda38", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1607, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1607, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.has_box_between_content_blocks.lambda38", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1629
 * 
 *             # Sort all content blocks by X position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[0])             # <<<<<<<<<<<<<<
 *             for content_block in content_blocks:
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_1lambda39(PyObject *__pyx_self, PyObject *__pyx_v_content_block); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_1lambda39 = {"lambda39", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_1lambda39, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_1lambda39(PyObject *__pyx_self, PyObject *__pyx_v_content_block) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda39 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda39(__pyx_self, ((PyObject *)__pyx_v_content_block));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda39(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_block) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda39", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1629, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1629, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.has_box_between_content_blocks.lambda39", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1590
 * 
 *     @staticmethod
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_186has_box_between_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_content_block, PyObject *__pyx_v_b_content_block, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_boxes, PyObject *__pyx_v_orientation) {
  PyObject *__pyx_v_threshold = NULL;
  PyObject *__pyx_v_bounding_rect = NULL;
  PyObject *__pyx_v_a_rect = NULL;
  PyObject *__pyx_v_b_rect = NULL;
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_v_box = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  Py_ssize_t __pyx_t_8;
  PyObject *(*__pyx_t_9)(PyObject *);
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *__pyx_t_13 = NULL;
  __Pyx_RefNannySetupContext("has_box_between_content_blocks", 0);
  __Pyx_INCREF(__pyx_v_content_blocks);

  /* "table_extraction/utils_table_extraction.pyx":1593
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 *         threshold = 5             # <<<<<<<<<<<<<<
 * 
 *         bounding_rect = Utils.bounding_rect([a_content_block.bounding_rect, b_content_block.bounding_rect])
 */
  __Pyx_INCREF(__pyx_int_5);
  __pyx_v_threshold = __pyx_int_5;

  /* "table_extraction/utils_table_extraction.pyx":1595
 *         threshold = 5
 * 
 *         bounding_rect = Utils.bounding_rect([a_content_block.bounding_rect, b_content_block.bounding_rect])             # <<<<<<<<<<<<<<
 *         bounding_rect = Utils.expand_rect(bounding_rect, -threshold)
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyList_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_2);
  PyList_SET_ITEM(__pyx_t_5, 0, __pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_4);
  PyList_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_5);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1595, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_bounding_rect = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1596
 * 
 *         bounding_rect = Utils.bounding_rect([a_content_block.bounding_rect, b_content_block.bounding_rect])
 *         bounding_rect = Utils.expand_rect(bounding_rect, -threshold)             # <<<<<<<<<<<<<<
 * 
 *         if orientation == "vertical":
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1596, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1596, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Negative(__pyx_v_threshold); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1596, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_5, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_bounding_rect, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1596, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_bounding_rect, __pyx_t_3};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1596, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_v_bounding_rect);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_6, __pyx_v_bounding_rect);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_6, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1596, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF_SET(__pyx_v_bounding_rect, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1598
 *         bounding_rect = Utils.expand_rect(bounding_rect, -threshold)
 * 
 *         if orientation == "vertical":             # <<<<<<<<<<<<<<
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:
 *                 a_rect = a_content_block.bounding_rect
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_vertical, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1598, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1599
 * 
 *         if orientation == "vertical":
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:             # <<<<<<<<<<<<<<
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_5, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1599, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":1600
 *         if orientation == "vertical":
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:
 *                 a_rect = a_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *                 b_rect = b_content_block.bounding_rect
 *             else:
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1600, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_v_a_rect = __pyx_t_1;
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1601
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *             else:
 *                 a_rect = b_content_block.bounding_rect
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1601, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_v_b_rect = __pyx_t_1;
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1599
 * 
 *         if orientation == "vertical":
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:             # <<<<<<<<<<<<<<
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect
 */
      goto __pyx_L4;
    }

    /* "table_extraction/utils_table_extraction.pyx":1603
 *                 b_rect = b_content_block.bounding_rect
 *             else:
 *                 a_rect = b_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *                 b_rect = a_content_block.bounding_rect
 * 
 */
    /*else*/ {
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1603, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_v_a_rect = __pyx_t_1;
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1604
 *             else:
 *                 a_rect = b_content_block.bounding_rect
 *                 b_rect = a_content_block.bounding_rect             # <<<<<<<<<<<<<<
 * 
 *             # Sort all content blocks by Y position
 */
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1604, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_v_b_rect = __pyx_t_1;
      __pyx_t_1 = 0;
    }
    __pyx_L4:;

    /* "table_extraction/utils_table_extraction.pyx":1607
 * 
 *             # Sort all content blocks by Y position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[1])             # <<<<<<<<<<<<<<
 *             for content_block in content_blocks:
 *                 rect = content_block.bounding_rect
 */
    __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_content_blocks);
    __Pyx_GIVEREF(__pyx_v_content_blocks);
    PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_content_blocks);
    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_lambda38, 0, __pyx_n_s_Utils_has_box_between_content_bl, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_5) < 0) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1607, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF_SET(__pyx_v_content_blocks, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1608
 *             # Sort all content blocks by Y position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[1])
 *             for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 */
    if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
      __pyx_t_5 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_5); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
    } else {
      __pyx_t_8 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1608, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_9 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1608, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_9)) {
        if (likely(PyList_CheckExact(__pyx_t_5))) {
          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_2 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_2); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1608, __pyx_L1_error)
          #else
          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1608, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          #endif
        } else {
          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_2); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1608, __pyx_L1_error)
          #else
          __pyx_t_2 = PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1608, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          #endif
        }
      } else {
        __pyx_t_2 = __pyx_t_9(__pyx_t_5);
        if (unlikely(!__pyx_t_2)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1608, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_2);
      }
      __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_2);
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1609
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[1])
 *             for content_block in content_blocks:
 *                 rect = content_block.bounding_rect             # <<<<<<<<<<<<<<
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \
 */
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1609, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_2);
      __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1611
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):
 *                     return True
 */
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_a_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_3 = PyNumber_Add(__pyx_t_2, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_7 = __pyx_t_10;
        goto __pyx_L8_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":1612
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);

      /* "table_extraction/utils_table_extraction.pyx":1611
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):
 *                     return True
 */
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_1 = PyNumber_Add(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_b_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_2 = PyNumber_Add(__pyx_t_3, __pyx_v_threshold); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1611, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_7 = __pyx_t_10;
        goto __pyx_L8_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":1612
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyNumber_Negative(__pyx_v_threshold); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_12 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
        __pyx_t_12 = PyMethod_GET_SELF(__pyx_t_11);
        if (likely(__pyx_t_12)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
          __Pyx_INCREF(__pyx_t_12);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_11, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_12, __pyx_v_bounding_rect, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_12, __pyx_v_bounding_rect, __pyx_t_4};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_13 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        if (__pyx_t_12) {
          __Pyx_GIVEREF(__pyx_t_12); PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_12); __pyx_t_12 = NULL;
        }
        __Pyx_INCREF(__pyx_v_bounding_rect);
        __Pyx_GIVEREF(__pyx_v_bounding_rect);
        PyTuple_SET_ITEM(__pyx_t_13, 0+__pyx_t_6, __pyx_v_bounding_rect);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_13, 1+__pyx_t_6, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_13, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      }
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_11 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
        __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_1);
        if (likely(__pyx_t_11)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_1, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_2, __pyx_v_rect};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_2, __pyx_v_rect};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_13 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        if (__pyx_t_11) {
          __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_11); __pyx_t_11 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_13, 0+__pyx_t_6, __pyx_t_2);
        __Pyx_INCREF(__pyx_v_rect);
        __Pyx_GIVEREF(__pyx_v_rect);
        PyTuple_SET_ITEM(__pyx_t_13, 1+__pyx_t_6, __pyx_v_rect);
        __pyx_t_2 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_13, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1612, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1612, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_7 = __pyx_t_10;
      __pyx_L8_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":1611
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):
 *                     return True
 */
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":1613
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):
 *                     return True             # <<<<<<<<<<<<<<
 * 
 *             for box in boxes:
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1611
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 *                 if a_rect[1] + a_rect[3] - threshold <= rect[1] and rect[1] + rect[3] <= b_rect[1] + threshold \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(Utils.expand_rect(bounding_rect, -threshold), rect):
 *                     return True
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1608
 *             # Sort all content blocks by Y position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[1])
 *             for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *                 rect = content_block.bounding_rect
 *                 #13652 add threshold
 */
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1615
 *                     return True
 * 
 *             for box in boxes:             # <<<<<<<<<<<<<<
 *                 # if a_rect[1] + a_rect[3] <= box[1] and box[1] + box[3] <= b_rect[1] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 */
    if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
      __pyx_t_5 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_5); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
    } else {
      __pyx_t_8 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1615, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_9 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1615, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_9)) {
        if (likely(PyList_CheckExact(__pyx_t_5))) {
          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1615, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1615, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1615, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_5, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1615, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_9(__pyx_t_5);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1615, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1617
 *             for box in boxes:
 *                 # if a_rect[1] + a_rect[3] <= box[1] and box[1] + box[3] <= b_rect[1] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Utils); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1617, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1617, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_13);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_13, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_13)) {
        PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_bounding_rect, __pyx_v_box};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1617, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_13)) {
        PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_v_bounding_rect, __pyx_v_box};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_13, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1617, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1617, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        if (__pyx_t_1) {
          __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1); __pyx_t_1 = NULL;
        }
        __Pyx_INCREF(__pyx_v_bounding_rect);
        __Pyx_GIVEREF(__pyx_v_bounding_rect);
        PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_6, __pyx_v_bounding_rect);
        __Pyx_INCREF(__pyx_v_box);
        __Pyx_GIVEREF(__pyx_v_box);
        PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_6, __pyx_v_box);
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_13, __pyx_t_2, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1617, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1617, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":1618
 *                 # if a_rect[1] + a_rect[3] <= box[1] and box[1] + box[3] <= b_rect[1] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 *                     return True             # <<<<<<<<<<<<<<
 * 
 *         elif orientation == "horizontal":
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1617
 *             for box in boxes:
 *                 # if a_rect[1] + a_rect[3] <= box[1] and box[1] + box[3] <= b_rect[1] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1615
 *                     return True
 * 
 *             for box in boxes:             # <<<<<<<<<<<<<<
 *                 # if a_rect[1] + a_rect[3] <= box[1] and box[1] + box[3] <= b_rect[1] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 */
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1598
 *         bounding_rect = Utils.expand_rect(bounding_rect, -threshold)
 * 
 *         if orientation == "vertical":             # <<<<<<<<<<<<<<
 *             if a_content_block.bounding_rect[1] < b_content_block.bounding_rect[1]:
 *                 a_rect = a_content_block.bounding_rect
 */
    goto __pyx_L3;
  }

  /* "table_extraction/utils_table_extraction.pyx":1620
 *                     return True
 * 
 *         elif orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:
 *                 a_rect = a_content_block.bounding_rect
 */
  __pyx_t_7 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1620, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1621
 * 
 *         elif orientation == "horizontal":
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:             # <<<<<<<<<<<<<<
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_13 = __Pyx_GetItemInt(__pyx_t_5, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_3, __pyx_t_13, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1621, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":1622
 *         elif orientation == "horizontal":
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:
 *                 a_rect = a_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *                 b_rect = b_content_block.bounding_rect
 *             else:
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1622, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_v_a_rect = __pyx_t_5;
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1623
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *             else:
 *                 a_rect = b_content_block.bounding_rect
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1623, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_v_b_rect = __pyx_t_5;
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1621
 * 
 *         elif orientation == "horizontal":
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:             # <<<<<<<<<<<<<<
 *                 a_rect = a_content_block.bounding_rect
 *                 b_rect = b_content_block.bounding_rect
 */
      goto __pyx_L14;
    }

    /* "table_extraction/utils_table_extraction.pyx":1625
 *                 b_rect = b_content_block.bounding_rect
 *             else:
 *                 a_rect = b_content_block.bounding_rect             # <<<<<<<<<<<<<<
 *                 b_rect = a_content_block.bounding_rect
 * 
 */
    /*else*/ {
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1625, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_v_a_rect = __pyx_t_5;
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1626
 *             else:
 *                 a_rect = b_content_block.bounding_rect
 *                 b_rect = a_content_block.bounding_rect             # <<<<<<<<<<<<<<
 * 
 *             # Sort all content blocks by X position
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1626, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_v_b_rect = __pyx_t_5;
      __pyx_t_5 = 0;
    }
    __pyx_L14:;

    /* "table_extraction/utils_table_extraction.pyx":1629
 * 
 *             # Sort all content blocks by X position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[0])             # <<<<<<<<<<<<<<
 *             for content_block in content_blocks:
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 */
    __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1629, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_v_content_blocks);
    __Pyx_GIVEREF(__pyx_v_content_blocks);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_content_blocks);
    __pyx_t_13 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1629, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30has_box_between_content_blocks_1lambda39, 0, __pyx_n_s_Utils_has_box_between_content_bl, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1629, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (PyDict_SetItem(__pyx_t_13, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1629, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_5, __pyx_t_13); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1629, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __Pyx_DECREF_SET(__pyx_v_content_blocks, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1630
 *             # Sort all content blocks by X position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[0])
 *             for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 */
    if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
      __pyx_t_3 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_3); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
    } else {
      __pyx_t_8 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1630, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1630, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_9)) {
        if (likely(PyList_CheckExact(__pyx_t_3))) {
          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_13 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_13); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1630, __pyx_L1_error)
          #else
          __pyx_t_13 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1630, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          #endif
        } else {
          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_13 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_13); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1630, __pyx_L1_error)
          #else
          __pyx_t_13 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1630, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          #endif
        }
      } else {
        __pyx_t_13 = __pyx_t_9(__pyx_t_3);
        if (unlikely(!__pyx_t_13)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1630, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_13);
      }
      __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_13);
      __pyx_t_13 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1631
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[0])
 *             for content_block in content_blocks:
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)             # <<<<<<<<<<<<<<
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \
 */
      __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1631, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1631, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1631, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_1 = PyNumber_Negative(__pyx_v_threshold); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1631, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_11 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
        __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_2);
        if (likely(__pyx_t_11)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_2, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_5, __pyx_t_1};
        __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1631, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_5, __pyx_t_1};
        __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1631, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      } else
      #endif
      {
        __pyx_t_4 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1631, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        if (__pyx_t_11) {
          __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_11); __pyx_t_11 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_6, __pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_6, __pyx_t_1);
        __pyx_t_5 = 0;
        __pyx_t_1 = 0;
        __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1631, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      }
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_13);
      __pyx_t_13 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1633
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):
 *                     return True
 */
      __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_a_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_a_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = PyNumber_Add(__pyx_t_13, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_13 = PyObject_RichCompare(__pyx_t_4, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_13); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_7 = __pyx_t_10;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":1634
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __pyx_t_13 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);

      /* "table_extraction/utils_table_extraction.pyx":1633
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):
 *                     return True
 */
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = PyNumber_Add(__pyx_t_13, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_b_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_13 = PyObject_RichCompare(__pyx_t_4, __pyx_t_2, Py_LE); __Pyx_XGOTREF(__pyx_t_13); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1633, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_7 = __pyx_t_10;
        goto __pyx_L18_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":1634
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1634, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1634, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_2)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_2);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_bounding_rect, __pyx_v_rect};
        __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1634, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_bounding_rect, __pyx_v_rect};
        __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1634, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      {
        __pyx_t_1 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1634, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        if (__pyx_t_2) {
          __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_2); __pyx_t_2 = NULL;
        }
        __Pyx_INCREF(__pyx_v_bounding_rect);
        __Pyx_GIVEREF(__pyx_v_bounding_rect);
        PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_6, __pyx_v_bounding_rect);
        __Pyx_INCREF(__pyx_v_rect);
        __Pyx_GIVEREF(__pyx_v_rect);
        PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_6, __pyx_v_rect);
        __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_1, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1634, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 1634, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __pyx_t_7 = __pyx_t_10;
      __pyx_L18_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":1633
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):
 *                     return True
 */
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":1635
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):
 *                     return True             # <<<<<<<<<<<<<<
 * 
 *             for box in boxes:
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1633
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 *                 if a_rect[0] + a_rect[2] <= rect[0] and rect[0] + rect[2] <= b_rect[0] \             # <<<<<<<<<<<<<<
 *                     and Utils.rect_overlap_rect(bounding_rect, rect):
 *                     return True
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1630
 *             # Sort all content blocks by X position
 *             content_blocks = sorted(content_blocks, key=lambda content_block: content_block.bounding_rect[0])
 *             for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *                 rect = Utils.expand_rect(content_block.bounding_rect, -threshold)
 * 
 */
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1637
 *                     return True
 * 
 *             for box in boxes:             # <<<<<<<<<<<<<<
 *                 # if a_rect[0] + a_rect[2] <= box[0] and box[0] + box[2] <= b_rect[0] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 */
    if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
      __pyx_t_3 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_3); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
    } else {
      __pyx_t_8 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1637, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1637, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_9)) {
        if (likely(PyList_CheckExact(__pyx_t_3))) {
          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_13 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_13); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1637, __pyx_L1_error)
          #else
          __pyx_t_13 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1637, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          #endif
        } else {
          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_13 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_13); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 1637, __pyx_L1_error)
          #else
          __pyx_t_13 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1637, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_13);
          #endif
        }
      } else {
        __pyx_t_13 = __pyx_t_9(__pyx_t_3);
        if (unlikely(!__pyx_t_13)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1637, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_13);
      }
      __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_13);
      __pyx_t_13 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1639
 *             for box in boxes:
 *                 # if a_rect[0] + a_rect[2] <= box[0] and box[0] + box[2] <= b_rect[0] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1639, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1639, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_1, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_bounding_rect, __pyx_v_box};
        __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1639, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_bounding_rect, __pyx_v_box};
        __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1639, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      {
        __pyx_t_2 = PyTuple_New(2+__pyx_t_6); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1639, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_INCREF(__pyx_v_bounding_rect);
        __Pyx_GIVEREF(__pyx_v_bounding_rect);
        PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_6, __pyx_v_bounding_rect);
        __Pyx_INCREF(__pyx_v_box);
        __Pyx_GIVEREF(__pyx_v_box);
        PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_6, __pyx_v_box);
        __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1639, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      }
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_13); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1639, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":1640
 *                 # if a_rect[0] + a_rect[2] <= box[0] and box[0] + box[2] <= b_rect[0] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 *                     return True             # <<<<<<<<<<<<<<
 * 
 *         return False
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":1639
 *             for box in boxes:
 *                 # if a_rect[0] + a_rect[2] <= box[0] and box[0] + box[2] <= b_rect[0] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):             # <<<<<<<<<<<<<<
 *                     return True
 * 
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1637
 *                     return True
 * 
 *             for box in boxes:             # <<<<<<<<<<<<<<
 *                 # if a_rect[0] + a_rect[2] <= box[0] and box[0] + box[2] <= b_rect[0] and Utils.rect_overlap_rect(bounding_rect, box):
 *                 if Utils.rect_overlap_rect(bounding_rect, box):
 */
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1620
 *                     return True
 * 
 *         elif orientation == "horizontal":             # <<<<<<<<<<<<<<
 *             if a_content_block.bounding_rect[0] < b_content_block.bounding_rect[0]:
 *                 a_rect = a_content_block.bounding_rect
 */
  }
  __pyx_L3:;

  /* "table_extraction/utils_table_extraction.pyx":1642
 *                     return True
 * 
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1590
 * 
 *     @staticmethod
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.has_box_between_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_threshold);
  __Pyx_XDECREF(__pyx_v_bounding_rect);
  __Pyx_XDECREF(__pyx_v_a_rect);
  __Pyx_XDECREF(__pyx_v_b_rect);
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XDECREF(__pyx_v_content_blocks);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1644
 *         return False
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_189draw_group(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_188draw_group[] = "\n        Draw content block bounding box and id\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_189draw_group = {"draw_group", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_189draw_group, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_188draw_group};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_189draw_group(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_group = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_group (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_group,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_group)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_group", 0, 2, 4, 1); __PYX_ERR(0, 1644, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_group") < 0)) __PYX_ERR(0, 1644, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_group = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_group", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1644, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_group", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_188draw_group(__pyx_self, __pyx_v_image, __pyx_v_group, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_188draw_group(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_group, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("draw_group", 0);

  /* "table_extraction/utils_table_extraction.pyx":1648
 *         Draw content block bounding box and id
 *         """
 *         Utils.draw_box(image, group.bounding_rect(), color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1648, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_draw_box); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1648, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_group, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1648, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  __pyx_t_2 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1648, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_t_2, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1648, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_t_2, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 4+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1648, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(4+__pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1648, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_6, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_6, __pyx_t_2);
    __Pyx_INCREF(__pyx_v_color);
    __Pyx_GIVEREF(__pyx_v_color);
    PyTuple_SET_ITEM(__pyx_t_5, 2+__pyx_t_6, __pyx_v_color);
    __Pyx_INCREF(__pyx_v_thickness);
    __Pyx_GIVEREF(__pyx_v_thickness);
    PyTuple_SET_ITEM(__pyx_t_5, 3+__pyx_t_6, __pyx_v_thickness);
    __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1648, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1649
 *         """
 *         Utils.draw_box(image, group.bounding_rect(), color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1644
 *         return False
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_group", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1652
 * 
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_191draw_groups(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_191draw_groups = {"draw_groups", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_191draw_groups, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_191draw_groups(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_groups = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_groups (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_groups,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_groups)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_groups", 0, 2, 4, 1); __PYX_ERR(0, 1652, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_groups") < 0)) __PYX_ERR(0, 1652, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_groups = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_groups", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1652, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_groups", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_190draw_groups(__pyx_self, __pyx_v_image, __pyx_v_groups, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_190draw_groups(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_groups, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_group = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("draw_groups", 0);

  /* "table_extraction/utils_table_extraction.pyx":1653
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):
 *         for group in groups:             # <<<<<<<<<<<<<<
 *             Utils.draw_group(image, group, color, thickness)
 *         return image
 */
  if (likely(PyList_CheckExact(__pyx_v_groups)) || PyTuple_CheckExact(__pyx_v_groups)) {
    __pyx_t_1 = __pyx_v_groups; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_groups); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1653, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1653, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1653, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1653, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1653, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_group, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1654
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1654, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_group); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1654, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_group, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1654, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_group, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1654, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_group);
      __Pyx_GIVEREF(__pyx_v_group);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_group);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1653
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):
 *         for group in groups:             # <<<<<<<<<<<<<<
 *             Utils.draw_group(image, group, color, thickness)
 *         return image
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1655
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1652
 * 
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_groups", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_group);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1658
 * 
 *     @staticmethod
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_193draw_content_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_192draw_content_block[] = "\n        Draw content block bounding box and id\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_193draw_content_block = {"draw_content_block", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_193draw_content_block, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_192draw_content_block};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_193draw_content_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_content_block = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_content_block (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_content_block,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_block)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_content_block", 0, 2, 4, 1); __PYX_ERR(0, 1658, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_content_block") < 0)) __PYX_ERR(0, 1658, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_content_block = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_content_block", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1658, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_content_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_192draw_content_block(__pyx_self, __pyx_v_image, __pyx_v_content_block, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_192draw_content_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_content_block, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_w = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *(*__pyx_t_7)(PyObject *);
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("draw_content_block", 0);

  /* "table_extraction/utils_table_extraction.pyx":1662
 *         Draw content block bounding box and id
 *         """
 *         x, y, w, h = content_block.bounding_rect             # <<<<<<<<<<<<<<
 *         Utils.draw_box(image, content_block.bounding_rect, color, thickness)
 *         cv2.putText(image, str(content_block.idx), (x, y), cv2.FONT_HERSHEY_COMPLEX, 0.5, 0)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1662, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1662, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_2 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_5 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_5);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_2,&__pyx_t_3,&__pyx_t_4,&__pyx_t_5};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1662, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_2,&__pyx_t_3,&__pyx_t_4,&__pyx_t_5};
    __pyx_t_6 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1662, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_7 = Py_TYPE(__pyx_t_6)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_7(__pyx_t_6); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_7(__pyx_t_6), 4) < 0) __PYX_ERR(0, 1662, __pyx_L1_error)
    __pyx_t_7 = NULL;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1662, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_y = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_w = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_h = __pyx_t_5;
  __pyx_t_5 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1663
 *         """
 *         x, y, w, h = content_block.bounding_rect
 *         Utils.draw_box(image, content_block.bounding_rect, color, thickness)             # <<<<<<<<<<<<<<
 *         cv2.putText(image, str(content_block.idx), (x, y), cv2.FONT_HERSHEY_COMPLEX, 0.5, 0)
 *         return image
 */
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1663, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_box); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1663, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1663, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_3 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[5] = {__pyx_t_3, __pyx_v_image, __pyx_t_5, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_8, 4+__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1663, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
    PyObject *__pyx_temp[5] = {__pyx_t_3, __pyx_v_image, __pyx_t_5, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_8, 4+__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1663, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_2 = PyTuple_New(4+__pyx_t_8); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1663, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_8, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_8, __pyx_t_5);
    __Pyx_INCREF(__pyx_v_color);
    __Pyx_GIVEREF(__pyx_v_color);
    PyTuple_SET_ITEM(__pyx_t_2, 2+__pyx_t_8, __pyx_v_color);
    __Pyx_INCREF(__pyx_v_thickness);
    __Pyx_GIVEREF(__pyx_v_thickness);
    PyTuple_SET_ITEM(__pyx_t_2, 3+__pyx_t_8, __pyx_v_thickness);
    __pyx_t_5 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1663, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1664
 *         x, y, w, h = content_block.bounding_rect
 *         Utils.draw_box(image, content_block.bounding_rect, color, thickness)
 *         cv2.putText(image, str(content_block.idx), (x, y), cv2.FONT_HERSHEY_COMPLEX, 0.5, 0)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_cv2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_putText); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_idx); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_v_x);
  __Pyx_GIVEREF(__pyx_v_x);
  PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_x);
  __Pyx_INCREF(__pyx_v_y);
  __Pyx_GIVEREF(__pyx_v_y);
  PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_y);
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_FONT_HERSHEY_COMPLEX); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1664, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[7] = {__pyx_t_3, __pyx_v_image, __pyx_t_5, __pyx_t_4, __pyx_t_6, __pyx_float_0_5, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 6+__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1664, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[7] = {__pyx_t_3, __pyx_v_image, __pyx_t_5, __pyx_t_4, __pyx_t_6, __pyx_float_0_5, __pyx_int_0};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 6+__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1664, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  {
    __pyx_t_9 = PyTuple_New(6+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1664, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    if (__pyx_t_3) {
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_9, 2+__pyx_t_8, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_9, 3+__pyx_t_8, __pyx_t_6);
    __Pyx_INCREF(__pyx_float_0_5);
    __Pyx_GIVEREF(__pyx_float_0_5);
    PyTuple_SET_ITEM(__pyx_t_9, 4+__pyx_t_8, __pyx_float_0_5);
    __Pyx_INCREF(__pyx_int_0);
    __Pyx_GIVEREF(__pyx_int_0);
    PyTuple_SET_ITEM(__pyx_t_9, 5+__pyx_t_8, __pyx_int_0);
    __pyx_t_5 = 0;
    __pyx_t_4 = 0;
    __pyx_t_6 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_9, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1664, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1665
 *         Utils.draw_box(image, content_block.bounding_rect, color, thickness)
 *         cv2.putText(image, str(content_block.idx), (x, y), cv2.FONT_HERSHEY_COMPLEX, 0.5, 0)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1658
 * 
 *     @staticmethod
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_content_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1668
 * 
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_195draw_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_195draw_content_blocks = {"draw_content_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_195draw_content_blocks, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_195draw_content_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_content_blocks = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_content_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_content_blocks,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_content_blocks", 0, 2, 4, 1); __PYX_ERR(0, 1668, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_content_blocks") < 0)) __PYX_ERR(0, 1668, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_content_blocks = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_content_blocks", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1668, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_194draw_content_blocks(__pyx_self, __pyx_v_image, __pyx_v_content_blocks, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_194draw_content_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_content_blocks, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_content_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("draw_content_blocks", 0);

  /* "table_extraction/utils_table_extraction.pyx":1669
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             Utils.draw_content_block(image, content_block, color, thickness)
 *         return image
 */
  if (likely(PyList_CheckExact(__pyx_v_content_blocks)) || PyTuple_CheckExact(__pyx_v_content_blocks)) {
    __pyx_t_1 = __pyx_v_content_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_content_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1669, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1669, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1669, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1669, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1669, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1669, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1669, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_content_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1670
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1670, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_content_block); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1670, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_content_block, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1670, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_content_block, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1670, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1670, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_content_block);
      __Pyx_GIVEREF(__pyx_v_content_block);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_content_block);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1670, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1669
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):
 *         for content_block in content_blocks:             # <<<<<<<<<<<<<<
 *             Utils.draw_content_block(image, content_block, color, thickness)
 *         return image
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1671
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1668
 * 
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_content_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_content_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1674
 * 
 *     @staticmethod
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_197draw_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_196draw_box[] = "\n        Draw bounding box for debugging\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_197draw_box = {"draw_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_197draw_box, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_196draw_box};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_197draw_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_box,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_box", 0, 2, 4, 1); __PYX_ERR(0, 1674, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_box") < 0)) __PYX_ERR(0, 1674, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_box = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_box", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1674, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_196draw_box(__pyx_self, __pyx_v_image, __pyx_v_box, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_196draw_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_box, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("draw_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1678
 *         Draw bounding box for debugging
 *         '''
 *         x, y, w, h = box             # <<<<<<<<<<<<<<
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, thickness)
 *         return image
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1678, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1678, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1678, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1678, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1678, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1679
 *         '''
 *         x, y, w, h = box
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_rectangle); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_x);
  __Pyx_GIVEREF(__pyx_v_x);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_x);
  __Pyx_INCREF(__pyx_v_y);
  __Pyx_GIVEREF(__pyx_v_y);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_y);
  __pyx_t_1 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_5);
  __pyx_t_1 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_3, __pyx_t_7, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 5+__pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1679, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_3, __pyx_t_7, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 5+__pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1679, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else
  #endif
  {
    __pyx_t_1 = PyTuple_New(5+__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1679, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (__pyx_t_5) {
      __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_8, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_8, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_1, 2+__pyx_t_8, __pyx_t_7);
    __Pyx_INCREF(__pyx_v_color);
    __Pyx_GIVEREF(__pyx_v_color);
    PyTuple_SET_ITEM(__pyx_t_1, 3+__pyx_t_8, __pyx_v_color);
    __Pyx_INCREF(__pyx_v_thickness);
    __Pyx_GIVEREF(__pyx_v_thickness);
    PyTuple_SET_ITEM(__pyx_t_1, 4+__pyx_t_8, __pyx_v_thickness);
    __pyx_t_3 = 0;
    __pyx_t_7 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_1, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1679, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1680
 *         x, y, w, h = box
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1674
 * 
 *     @staticmethod
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1683
 * 
 *     @staticmethod
 *     def fill_box(image, box, color=(255, 0, 255)):             # <<<<<<<<<<<<<<
 *         '''
 *         fill bounding box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_199fill_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_198fill_box[] = "\n        fill bounding box\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_199fill_box = {"fill_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_199fill_box, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_198fill_box};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_199fill_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("fill_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_box,&__pyx_n_s_color,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("fill_box", 0, 2, 3, 1); __PYX_ERR(0, 1683, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "fill_box") < 0)) __PYX_ERR(0, 1683, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_box = values[1];
    __pyx_v_color = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("fill_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1683, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_198fill_box(__pyx_self, __pyx_v_image, __pyx_v_box, __pyx_v_color);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_198fill_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_box, PyObject *__pyx_v_color) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("fill_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1687
 *         fill bounding box
 *         '''
 *         x, y, w, h = box             # <<<<<<<<<<<<<<
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 *         return image
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_box))) || (PyList_CheckExact(__pyx_v_box))) {
    PyObject* sequence = __pyx_v_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1687, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1687, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1687, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1687, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1687, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1688
 *         '''
 *         x, y, w, h = box
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_rectangle); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_x);
  __Pyx_GIVEREF(__pyx_v_x);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_x);
  __Pyx_INCREF(__pyx_v_y);
  __Pyx_GIVEREF(__pyx_v_y);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_y);
  __pyx_t_1 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_5);
  PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_5);
  __pyx_t_1 = 0;
  __pyx_t_5 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_cv2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_FILLED); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1688, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_8 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_8 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_3, __pyx_t_7, __pyx_v_color, __pyx_t_1};
    __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 5+__pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1688, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_3, __pyx_t_7, __pyx_v_color, __pyx_t_1};
    __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_8, 5+__pyx_t_8); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1688, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  } else
  #endif
  {
    __pyx_t_9 = PyTuple_New(5+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1688, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    if (__pyx_t_5) {
      __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_9, 2+__pyx_t_8, __pyx_t_7);
    __Pyx_INCREF(__pyx_v_color);
    __Pyx_GIVEREF(__pyx_v_color);
    PyTuple_SET_ITEM(__pyx_t_9, 3+__pyx_t_8, __pyx_v_color);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_9, 4+__pyx_t_8, __pyx_t_1);
    __pyx_t_3 = 0;
    __pyx_t_7 = 0;
    __pyx_t_1 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_9, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1688, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1689
 *         x, y, w, h = box
 *         cv2.rectangle(image, (x, y), (x + w, y + h), color, cv2.FILLED)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1683
 * 
 *     @staticmethod
 *     def fill_box(image, box, color=(255, 0, 255)):             # <<<<<<<<<<<<<<
 *         '''
 *         fill bounding box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1692
 * 
 *     @staticmethod
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_201draw_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_200draw_boxes[] = "\n        Draw bounding box for debugging\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_201draw_boxes = {"draw_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_201draw_boxes, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_200draw_boxes};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_201draw_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_boxes,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_boxes", 0, 2, 4, 1); __PYX_ERR(0, 1692, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_boxes") < 0)) __PYX_ERR(0, 1692, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_boxes = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_boxes", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1692, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_200draw_boxes(__pyx_self, __pyx_v_image, __pyx_v_boxes, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_200draw_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_boxes, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_box = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("draw_boxes", 0);

  /* "table_extraction/utils_table_extraction.pyx":1696
 *         Draw bounding box for debugging
 *         '''
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             Utils.draw_box(image, box, color, thickness)
 *         return image
 */
  if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
    __pyx_t_1 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1696, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1696, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1696, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1696, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1696, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1696, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1696, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1697
 *         '''
 *         for box in boxes:
 *             Utils.draw_box(image, box, color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1697, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_box); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1697, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_box, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1697, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_box, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1697, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1697, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_box);
      __Pyx_GIVEREF(__pyx_v_box);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_box);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1697, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1696
 *         Draw bounding box for debugging
 *         '''
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             Utils.draw_box(image, box, color, thickness)
 *         return image
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1698
 *         for box in boxes:
 *             Utils.draw_box(image, box, color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1692
 * 
 *     @staticmethod
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1701
 * 
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_203fill_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_203fill_boxes = {"fill_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_203fill_boxes, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_203fill_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("fill_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_boxes,&__pyx_n_s_color,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__13));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("fill_boxes", 0, 2, 3, 1); __PYX_ERR(0, 1701, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "fill_boxes") < 0)) __PYX_ERR(0, 1701, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_boxes = values[1];
    __pyx_v_color = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("fill_boxes", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1701, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_202fill_boxes(__pyx_self, __pyx_v_image, __pyx_v_boxes, __pyx_v_color);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_202fill_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_boxes, PyObject *__pyx_v_color) {
  PyObject *__pyx_v_box = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("fill_boxes", 0);

  /* "table_extraction/utils_table_extraction.pyx":1702
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             Utils.fill_box(image, box, color)
 *         return image
 */
  if (likely(PyList_CheckExact(__pyx_v_boxes)) || PyTuple_CheckExact(__pyx_v_boxes)) {
    __pyx_t_1 = __pyx_v_boxes; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_boxes); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1702, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1702, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1702, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1702, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1702, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1702, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1702, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_box, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1703
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1703, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_fill_box); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1703, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_image, __pyx_v_box, __pyx_v_color};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1703, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[4] = {__pyx_t_5, __pyx_v_image, __pyx_v_box, __pyx_v_color};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1703, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(3+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1703, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_box);
      __Pyx_GIVEREF(__pyx_v_box);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_box);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_color);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1703, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1702
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):
 *         for box in boxes:             # <<<<<<<<<<<<<<
 *             Utils.fill_box(image, box, color)
 *         return image
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1704
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1701
 * 
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.fill_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_box);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1707
 * 
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_205draw_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_205draw_line = {"draw_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_205draw_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_205draw_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_line,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_line", 0, 2, 4, 1); __PYX_ERR(0, 1707, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_line") < 0)) __PYX_ERR(0, 1707, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_line = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_line", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1707, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_204draw_line(__pyx_self, __pyx_v_image, __pyx_v_line, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_204draw_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_line, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("draw_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1708
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1708, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1708, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1708, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1708, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_2, __pyx_t_4, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 5+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1708, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[6] = {__pyx_t_5, __pyx_v_image, __pyx_t_2, __pyx_t_4, __pyx_v_color, __pyx_v_thickness};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 5+__pyx_t_6); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1708, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = PyTuple_New(5+__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1708, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (__pyx_t_5) {
      __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_6, __pyx_v_image);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_6, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_7, 2+__pyx_t_6, __pyx_t_4);
    __Pyx_INCREF(__pyx_v_color);
    __Pyx_GIVEREF(__pyx_v_color);
    PyTuple_SET_ITEM(__pyx_t_7, 3+__pyx_t_6, __pyx_v_color);
    __Pyx_INCREF(__pyx_v_thickness);
    __Pyx_GIVEREF(__pyx_v_thickness);
    PyTuple_SET_ITEM(__pyx_t_7, 4+__pyx_t_6, __pyx_v_thickness);
    __pyx_t_2 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1708, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1709
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1707
 * 
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1712
 * 
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_207draw_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_207draw_lines = {"draw_lines", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_207draw_lines, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_207draw_lines(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_lines (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_lines,&__pyx_n_s_color,&__pyx_n_s_thickness,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__12));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_lines", 0, 2, 4, 1); __PYX_ERR(0, 1712, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_lines") < 0)) __PYX_ERR(0, 1712, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_lines = values[1];
    __pyx_v_color = values[2];
    __pyx_v_thickness = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_lines", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1712, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_206draw_lines(__pyx_self, __pyx_v_image, __pyx_v_lines, __pyx_v_color, __pyx_v_thickness);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_206draw_lines(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_lines, PyObject *__pyx_v_color, PyObject *__pyx_v_thickness) {
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  __Pyx_RefNannySetupContext("draw_lines", 0);

  /* "table_extraction/utils_table_extraction.pyx":1713
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, line, color, thickness)
 *         return image
 */
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_1 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1713, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1713, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1713, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1713, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1713, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1713, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1713, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1714
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)             # <<<<<<<<<<<<<<
 *         return image
 * 
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1714, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1714, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_line, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1714, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_v_line, __pyx_v_color, __pyx_v_thickness};
      __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1714, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_4);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1714, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_line);
      __Pyx_INCREF(__pyx_v_color);
      __Pyx_GIVEREF(__pyx_v_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1714, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1713
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, line, color, thickness)
 *         return image
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1715
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1712
 * 
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_lines", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1718
 * 
 *     @staticmethod
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):             # <<<<<<<<<<<<<<
 * 
 *         if table.left_border is not None:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_209draw_table(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_209draw_table = {"draw_table", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_209draw_table, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_209draw_table(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_table = 0;
  PyObject *__pyx_v_border_color = 0;
  PyObject *__pyx_v_line_color = 0;
  PyObject *__pyx_v_divider_line_color = 0;
  PyObject *__pyx_v_thickness = 0;
  PyObject *__pyx_v_draw_virtual_lines = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("draw_table (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_table,&__pyx_n_s_border_color,&__pyx_n_s_line_color,&__pyx_n_s_divider_line_color,&__pyx_n_s_thickness,&__pyx_n_s_draw_virtual_lines,0};
    PyObject* values[7] = {0,0,0,0,0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_tuple__13));
    values[3] = ((PyObject *)((PyObject*)__pyx_tuple__14));
    values[4] = ((PyObject *)((PyObject*)__pyx_tuple__15));
    values[5] = ((PyObject *)((PyObject *)__pyx_int_2));
    values[6] = ((PyObject *)((PyObject *)Py_True));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_table)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("draw_table", 0, 2, 7, 1); __PYX_ERR(0, 1718, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_border_color);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line_color);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_divider_line_color);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_thickness);
          if (value) { values[5] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  6:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_draw_virtual_lines);
          if (value) { values[6] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "draw_table") < 0)) __PYX_ERR(0, 1718, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_table = values[1];
    __pyx_v_border_color = values[2];
    __pyx_v_line_color = values[3];
    __pyx_v_divider_line_color = values[4];
    __pyx_v_thickness = values[5];
    __pyx_v_draw_virtual_lines = values[6];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("draw_table", 0, 2, 7, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1718, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_table", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_208draw_table(__pyx_self, __pyx_v_image, __pyx_v_table, __pyx_v_border_color, __pyx_v_line_color, __pyx_v_divider_line_color, __pyx_v_thickness, __pyx_v_draw_virtual_lines);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_208draw_table(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_table, PyObject *__pyx_v_border_color, PyObject *__pyx_v_line_color, PyObject *__pyx_v_divider_line_color, PyObject *__pyx_v_thickness, PyObject *__pyx_v_draw_virtual_lines) {
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  __Pyx_RefNannySetupContext("draw_table", 0);

  /* "table_extraction/utils_table_extraction.pyx":1720
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):
 * 
 *         if table.left_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.left_border, border_color, thickness)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_left_border); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1720, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__pyx_t_1 != Py_None);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":1721
 * 
 *         if table.left_border is not None:
 *             Utils.draw_line(image, table.left_border, border_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         if table.top_border is not None:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1721, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1721, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_left_border); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1721, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_v_image, __pyx_t_4, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1721, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_5)) {
      PyObject *__pyx_temp[5] = {__pyx_t_6, __pyx_v_image, __pyx_t_4, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1721, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1721, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
      __Pyx_INCREF(__pyx_v_border_color);
      __Pyx_GIVEREF(__pyx_v_border_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_border_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_4 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_5, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1721, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1720
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):
 * 
 *         if table.left_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.left_border, border_color, thickness)
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1723
 *             Utils.draw_line(image, table.left_border, border_color, thickness)
 * 
 *         if table.top_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.top_border, border_color, thickness)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_top_border); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1723, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = (__pyx_t_1 != Py_None);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_2 = (__pyx_t_3 != 0);
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1724
 * 
 *         if table.top_border is not None:
 *             Utils.draw_line(image, table.top_border, border_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         if table.right_border is not None:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_Utils); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1724, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1724, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_top_border); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1724, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_8);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_8, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_t_5, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1724, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_t_5, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1724, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_6 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      if (__pyx_t_4) {
        __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_7, __pyx_t_5);
      __Pyx_INCREF(__pyx_v_border_color);
      __Pyx_GIVEREF(__pyx_v_border_color);
      PyTuple_SET_ITEM(__pyx_t_6, 2+__pyx_t_7, __pyx_v_border_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_6, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_5 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1724, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1723
 *             Utils.draw_line(image, table.left_border, border_color, thickness)
 * 
 *         if table.top_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.top_border, border_color, thickness)
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1726
 *             Utils.draw_line(image, table.top_border, border_color, thickness)
 * 
 *         if table.right_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.right_border, border_color, thickness)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_right_border); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1726, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__pyx_t_1 != Py_None);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "table_extraction/utils_table_extraction.pyx":1727
 * 
 *         if table.right_border is not None:
 *             Utils.draw_line(image, table.right_border, border_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         if table.bottom_border is not None:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1727, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1727, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_right_border); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1727, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_5 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_t_8, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1727, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_5, __pyx_v_image, __pyx_t_8, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1727, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1727, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_4, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_4, 1+__pyx_t_7, __pyx_t_8);
      __Pyx_INCREF(__pyx_v_border_color);
      __Pyx_GIVEREF(__pyx_v_border_color);
      PyTuple_SET_ITEM(__pyx_t_4, 2+__pyx_t_7, __pyx_v_border_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_4, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_8 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1727, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1726
 *             Utils.draw_line(image, table.top_border, border_color, thickness)
 * 
 *         if table.right_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.right_border, border_color, thickness)
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1729
 *             Utils.draw_line(image, table.right_border, border_color, thickness)
 * 
 *         if table.bottom_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.bottom_border, border_color, thickness)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_bottom_border); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1729, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = (__pyx_t_1 != Py_None);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_2 = (__pyx_t_3 != 0);
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1730
 * 
 *         if table.bottom_border is not None:
 *             Utils.draw_line(image, table.bottom_border, border_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         #if draw_virtual_lines == 1:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1730, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1730, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_bottom_border); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1730, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_8 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[5] = {__pyx_t_8, __pyx_v_image, __pyx_t_6, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1730, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[5] = {__pyx_t_8, __pyx_v_image, __pyx_t_6, __pyx_v_border_color, __pyx_v_thickness};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1730, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    } else
    #endif
    {
      __pyx_t_5 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1730, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      if (__pyx_t_8) {
        __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_8); __pyx_t_8 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_7, __pyx_t_6);
      __Pyx_INCREF(__pyx_v_border_color);
      __Pyx_GIVEREF(__pyx_v_border_color);
      PyTuple_SET_ITEM(__pyx_t_5, 2+__pyx_t_7, __pyx_v_border_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_5, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_6 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1730, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1729
 *             Utils.draw_line(image, table.right_border, border_color, thickness)
 * 
 *         if table.bottom_border is not None:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, table.bottom_border, border_color, thickness)
 * 
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1739
 *             #table_divider_vectical_lines = table.divider_vertical_lines
 * 
 *         for line in table.vertical_lines + table.horizontal_lines:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, line, line_color, thickness)
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_vertical_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_horizontal_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Add(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
    __pyx_t_4 = __pyx_t_5; __Pyx_INCREF(__pyx_t_4); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1739, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_10 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1739, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_5); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1739, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1739, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_5); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1739, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1739, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_10(__pyx_t_4);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1739, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1740
 * 
 *         for line in table.vertical_lines + table.horizontal_lines:
 *             Utils.draw_line(image, line, line_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         #for line in table_vertical_lines:
 */
    __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Utils); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1740, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1740, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_v_image, __pyx_v_line, __pyx_v_line_color, __pyx_v_thickness};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1740, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[5] = {__pyx_t_1, __pyx_v_image, __pyx_v_line, __pyx_v_line_color, __pyx_v_thickness};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1740, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_8 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1740, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (__pyx_t_1) {
        __Pyx_GIVEREF(__pyx_t_1); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      __Pyx_INCREF(__pyx_v_image);
      __Pyx_GIVEREF(__pyx_v_image);
      PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_7, __pyx_v_image);
      __Pyx_INCREF(__pyx_v_line);
      __Pyx_GIVEREF(__pyx_v_line);
      PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_7, __pyx_v_line);
      __Pyx_INCREF(__pyx_v_line_color);
      __Pyx_GIVEREF(__pyx_v_line_color);
      PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_7, __pyx_v_line_color);
      __Pyx_INCREF(__pyx_v_thickness);
      __Pyx_GIVEREF(__pyx_v_thickness);
      PyTuple_SET_ITEM(__pyx_t_8, 3+__pyx_t_7, __pyx_v_thickness);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1740, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1739
 *             #table_divider_vectical_lines = table.divider_vertical_lines
 * 
 *         for line in table.vertical_lines + table.horizontal_lines:             # <<<<<<<<<<<<<<
 *             Utils.draw_line(image, line, line_color, thickness)
 * 
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1745
 *         #    Utils.draw_line(image, line, line_color, thickness)
 * 
 *         if draw_virtual_lines == 1:             # <<<<<<<<<<<<<<
 *             for line in table.divider_vertical_lines + table.divider_horizontal_lines:
 *                 Utils.draw_line(image, line, divider_line_color, thickness)
 */
  __pyx_t_4 = __Pyx_PyInt_EqObjC(__pyx_v_draw_virtual_lines, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1745, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1745, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1746
 * 
 *         if draw_virtual_lines == 1:
 *             for line in table.divider_vertical_lines + table.divider_horizontal_lines:             # <<<<<<<<<<<<<<
 *                 Utils.draw_line(image, line, divider_line_color, thickness)
 * 
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_divider_vertical_lines); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1746, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_table, __pyx_n_s_divider_horizontal_lines); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1746, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyNumber_Add(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1746, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (likely(PyList_CheckExact(__pyx_t_6)) || PyTuple_CheckExact(__pyx_t_6)) {
      __pyx_t_5 = __pyx_t_6; __Pyx_INCREF(__pyx_t_5); __pyx_t_9 = 0;
      __pyx_t_10 = NULL;
    } else {
      __pyx_t_9 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1746, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_10 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1746, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    for (;;) {
      if (likely(!__pyx_t_10)) {
        if (likely(PyList_CheckExact(__pyx_t_5))) {
          if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1746, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_5, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1746, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        } else {
          if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 1746, __pyx_L1_error)
          #else
          __pyx_t_6 = PySequence_ITEM(__pyx_t_5, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1746, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          #endif
        }
      } else {
        __pyx_t_6 = __pyx_t_10(__pyx_t_5);
        if (unlikely(!__pyx_t_6)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1746, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_6);
      }
      __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_6);
      __pyx_t_6 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1747
 *         if draw_virtual_lines == 1:
 *             for line in table.divider_vertical_lines + table.divider_horizontal_lines:
 *                 Utils.draw_line(image, line, divider_line_color, thickness)             # <<<<<<<<<<<<<<
 * 
 *         #for line in table_divider_vectical_lines:
 */
      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_draw_line); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1747, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_v_line, __pyx_v_divider_line_color, __pyx_v_thickness};
        __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1747, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
        PyObject *__pyx_temp[5] = {__pyx_t_4, __pyx_v_image, __pyx_v_line, __pyx_v_divider_line_color, __pyx_v_thickness};
        __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 4+__pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1747, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_GOTREF(__pyx_t_6);
      } else
      #endif
      {
        __pyx_t_1 = PyTuple_New(4+__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1747, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        if (__pyx_t_4) {
          __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        __Pyx_INCREF(__pyx_v_image);
        __Pyx_GIVEREF(__pyx_v_image);
        PyTuple_SET_ITEM(__pyx_t_1, 0+__pyx_t_7, __pyx_v_image);
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_1, 1+__pyx_t_7, __pyx_v_line);
        __Pyx_INCREF(__pyx_v_divider_line_color);
        __Pyx_GIVEREF(__pyx_v_divider_line_color);
        PyTuple_SET_ITEM(__pyx_t_1, 2+__pyx_t_7, __pyx_v_divider_line_color);
        __Pyx_INCREF(__pyx_v_thickness);
        __Pyx_GIVEREF(__pyx_v_thickness);
        PyTuple_SET_ITEM(__pyx_t_1, 3+__pyx_t_7, __pyx_v_thickness);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_1, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1747, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      }
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1746
 * 
 *         if draw_virtual_lines == 1:
 *             for line in table.divider_vertical_lines + table.divider_horizontal_lines:             # <<<<<<<<<<<<<<
 *                 Utils.draw_line(image, line, divider_line_color, thickness)
 * 
 */
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1745
 *         #    Utils.draw_line(image, line, line_color, thickness)
 * 
 *         if draw_virtual_lines == 1:             # <<<<<<<<<<<<<<
 *             for line in table.divider_vertical_lines + table.divider_horizontal_lines:
 *                 Utils.draw_line(image, line, divider_line_color, thickness)
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1752
 *         #    Utils.draw_line(image, line, divider_line_color, thickness)
 * 
 *         return image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_image);
  __pyx_r = __pyx_v_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1718
 * 
 *     @staticmethod
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):             # <<<<<<<<<<<<<<
 * 
 *         if table.left_border is not None:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.draw_table", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1755
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_percent(a_rect, b_rect, threshold=2, min_rect=False):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_211rect_overlap_rect_with_percent(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_210rect_overlap_rect_with_percent[] = " calculate overlap percentage between 2 rect\n        params: a_rect coordination, b_rect coordination\n        :returns: True: if overlap ratio between a_rect and b_rect is greater than threshold\n                  False: Otherwise";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_211rect_overlap_rect_with_percent = {"rect_overlap_rect_with_percent", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_211rect_overlap_rect_with_percent, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_210rect_overlap_rect_with_percent};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_211rect_overlap_rect_with_percent(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_v_min_rect = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_overlap_rect_with_percent (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_threshold,&__pyx_n_s_min_rect,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_2));
    values[3] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_percent", 0, 2, 4, 1); __PYX_ERR(0, 1755, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_min_rect);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_overlap_rect_with_percent") < 0)) __PYX_ERR(0, 1755, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_threshold = values[2];
    __pyx_v_min_rect = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_percent", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1755, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect_with_percent", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_210rect_overlap_rect_with_percent(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_threshold, __pyx_v_min_rect);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_210rect_overlap_rect_with_percent(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_threshold, PyObject *__pyx_v_min_rect) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_a_rect_area = NULL;
  PyObject *__pyx_v_a_rect_x1 = NULL;
  PyObject *__pyx_v_a_rect_y1 = NULL;
  PyObject *__pyx_v_a_rect_x2 = NULL;
  PyObject *__pyx_v_a_rect_y2 = NULL;
  PyObject *__pyx_v_b_rect_area = NULL;
  PyObject *__pyx_v_b_rect_x1 = NULL;
  PyObject *__pyx_v_b_rect_y1 = NULL;
  PyObject *__pyx_v_b_rect_x2 = NULL;
  PyObject *__pyx_v_b_rect_y2 = NULL;
  PyObject *__pyx_v_dx = NULL;
  PyObject *__pyx_v_dy = NULL;
  PyObject *__pyx_v_overlap_area = NULL;
  PyObject *__pyx_v_tmp_area = NULL;
  PyObject *__pyx_v_overlap_ratio = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("rect_overlap_rect_with_percent", 0);

  /* "table_extraction/utils_table_extraction.pyx":1760
 *         :returns: True: if overlap ratio between a_rect and b_rect is greater than threshold
 *                   False: Otherwise"""
 *         x, y, w, h = a_rect             # <<<<<<<<<<<<<<
 *         a_rect_area = w * h
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_rect))) || (PyList_CheckExact(__pyx_v_a_rect))) {
    PyObject* sequence = __pyx_v_a_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1760, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1760, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1760, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1760, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1760, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1761
 *                   False: Otherwise"""
 *         x, y, w, h = a_rect
 *         a_rect_area = w * h             # <<<<<<<<<<<<<<
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h
 * 
 */
  __pyx_t_4 = PyNumber_Multiply(__pyx_v_w, __pyx_v_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1761, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_a_rect_area = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1762
 *         x, y, w, h = a_rect
 *         a_rect_area = w * h
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h             # <<<<<<<<<<<<<<
 * 
 *         x, y, w, h = b_rect
 */
  __pyx_t_4 = __pyx_v_x;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_3 = __pyx_v_y;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1762, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1762, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_a_rect_x1 = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_a_rect_y1 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_rect_x2 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_rect_y2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1764
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h
 * 
 *         x, y, w, h = b_rect             # <<<<<<<<<<<<<<
 *         b_rect_area = w * h
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1764, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1764, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1764, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1764, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1764, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __Pyx_DECREF_SET(__pyx_v_x, __pyx_t_1);
  __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_y, __pyx_t_2);
  __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_w, __pyx_t_3);
  __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_h, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1765
 * 
 *         x, y, w, h = b_rect
 *         b_rect_area = w * h             # <<<<<<<<<<<<<<
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h
 * 
 */
  __pyx_t_4 = PyNumber_Multiply(__pyx_v_w, __pyx_v_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1765, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_b_rect_area = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1766
 *         x, y, w, h = b_rect
 *         b_rect_area = w * h
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h             # <<<<<<<<<<<<<<
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)
 */
  __pyx_t_4 = __pyx_v_x;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_3 = __pyx_v_y;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1766, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1766, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_b_rect_x1 = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_rect_y1 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_rect_x2 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_rect_y2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1768
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)             # <<<<<<<<<<<<<<
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)
 * 
 */
  __Pyx_INCREF(__pyx_v_b_rect_x2);
  __pyx_t_1 = __pyx_v_b_rect_x2;
  __Pyx_INCREF(__pyx_v_a_rect_x2);
  __pyx_t_2 = __pyx_v_a_rect_x2;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1768, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1768, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_v_b_rect_x1);
  __pyx_t_1 = __pyx_v_b_rect_x1;
  __Pyx_INCREF(__pyx_v_a_rect_x1);
  __pyx_t_2 = __pyx_v_a_rect_x1;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1768, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1768, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1768, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_dx = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1769
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)             # <<<<<<<<<<<<<<
 * 
 *         if dx > 0 and dy > 0:
 */
  __Pyx_INCREF(__pyx_v_b_rect_y2);
  __pyx_t_1 = __pyx_v_b_rect_y2;
  __Pyx_INCREF(__pyx_v_a_rect_y2);
  __pyx_t_4 = __pyx_v_a_rect_y2;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1769, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1769, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_3 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_v_b_rect_y1);
  __pyx_t_1 = __pyx_v_b_rect_y1;
  __Pyx_INCREF(__pyx_v_a_rect_y1);
  __pyx_t_4 = __pyx_v_a_rect_y1;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_4, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1769, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1769, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_2 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1769, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dy = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1771
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)
 * 
 *         if dx > 0 and dy > 0:             # <<<<<<<<<<<<<<
 *             overlap_area = dx * dy
 *             # calculate overlap ratio
 */
  __pyx_t_1 = PyObject_RichCompare(__pyx_v_dx, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1771, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1771, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_1 = PyObject_RichCompare(__pyx_v_dy, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1771, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1771, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_7 = __pyx_t_8;
  __pyx_L8_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1772
 * 
 *         if dx > 0 and dy > 0:
 *             overlap_area = dx * dy             # <<<<<<<<<<<<<<
 *             # calculate overlap ratio
 *             if min_rect:
 */
    __pyx_t_1 = PyNumber_Multiply(__pyx_v_dx, __pyx_v_dy); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1772, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_v_overlap_area = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1774
 *             overlap_area = dx * dy
 *             # calculate overlap ratio
 *             if min_rect:             # <<<<<<<<<<<<<<
 *                 tmp_area = min(a_rect_area, b_rect_area) - overlap_area
 *             else:
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_min_rect); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1774, __pyx_L1_error)
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":1775
 *             # calculate overlap ratio
 *             if min_rect:
 *                 tmp_area = min(a_rect_area, b_rect_area) - overlap_area             # <<<<<<<<<<<<<<
 *             else:
 *                 tmp_area = a_rect_area + b_rect_area - overlap_area
 */
      __Pyx_INCREF(__pyx_v_b_rect_area);
      __pyx_t_1 = __pyx_v_b_rect_area;
      __Pyx_INCREF(__pyx_v_a_rect_area);
      __pyx_t_2 = __pyx_v_a_rect_area;
      __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1775, __pyx_L1_error)
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1775, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (__pyx_t_7) {
        __Pyx_INCREF(__pyx_t_1);
        __pyx_t_3 = __pyx_t_1;
      } else {
        __Pyx_INCREF(__pyx_t_2);
        __pyx_t_3 = __pyx_t_2;
      }
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_v_overlap_area); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1775, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_tmp_area = __pyx_t_1;
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1774
 *             overlap_area = dx * dy
 *             # calculate overlap ratio
 *             if min_rect:             # <<<<<<<<<<<<<<
 *                 tmp_area = min(a_rect_area, b_rect_area) - overlap_area
 *             else:
 */
      goto __pyx_L10;
    }

    /* "table_extraction/utils_table_extraction.pyx":1777
 *                 tmp_area = min(a_rect_area, b_rect_area) - overlap_area
 *             else:
 *                 tmp_area = a_rect_area + b_rect_area - overlap_area             # <<<<<<<<<<<<<<
 *             if tmp_area<=0:
 *                 tmp_area = overlap_area
 */
    /*else*/ {
      __pyx_t_1 = PyNumber_Add(__pyx_v_a_rect_area, __pyx_v_b_rect_area); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1777, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_overlap_area); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1777, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_v_tmp_area = __pyx_t_3;
      __pyx_t_3 = 0;
    }
    __pyx_L10:;

    /* "table_extraction/utils_table_extraction.pyx":1778
 *             else:
 *                 tmp_area = a_rect_area + b_rect_area - overlap_area
 *             if tmp_area<=0:             # <<<<<<<<<<<<<<
 *                 tmp_area = overlap_area
 *             overlap_ratio = overlap_area / tmp_area * 100
 */
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_tmp_area, __pyx_int_0, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1778, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1778, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":1779
 *                 tmp_area = a_rect_area + b_rect_area - overlap_area
 *             if tmp_area<=0:
 *                 tmp_area = overlap_area             # <<<<<<<<<<<<<<
 *             overlap_ratio = overlap_area / tmp_area * 100
 * 
 */
      __Pyx_INCREF(__pyx_v_overlap_area);
      __Pyx_DECREF_SET(__pyx_v_tmp_area, __pyx_v_overlap_area);

      /* "table_extraction/utils_table_extraction.pyx":1778
 *             else:
 *                 tmp_area = a_rect_area + b_rect_area - overlap_area
 *             if tmp_area<=0:             # <<<<<<<<<<<<<<
 *                 tmp_area = overlap_area
 *             overlap_ratio = overlap_area / tmp_area * 100
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1780
 *             if tmp_area<=0:
 *                 tmp_area = overlap_area
 *             overlap_ratio = overlap_area / tmp_area * 100             # <<<<<<<<<<<<<<
 * 
 *             return overlap_ratio > threshold
 */
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_v_overlap_area, __pyx_v_tmp_area); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1780, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = PyNumber_Multiply(__pyx_t_3, __pyx_int_100); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1780, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_overlap_ratio = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1782
 *             overlap_ratio = overlap_area / tmp_area * 100
 * 
 *             return overlap_ratio > threshold             # <<<<<<<<<<<<<<
 * 
 *         return False
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = PyObject_RichCompare(__pyx_v_overlap_ratio, __pyx_v_threshold, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1782, __pyx_L1_error)
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1771
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)
 * 
 *         if dx > 0 and dy > 0:             # <<<<<<<<<<<<<<
 *             overlap_area = dx * dy
 *             # calculate overlap ratio
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1784
 *             return overlap_ratio > threshold
 * 
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1755
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_percent(a_rect, b_rect, threshold=2, min_rect=False):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect_with_percent", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_a_rect_area);
  __Pyx_XDECREF(__pyx_v_a_rect_x1);
  __Pyx_XDECREF(__pyx_v_a_rect_y1);
  __Pyx_XDECREF(__pyx_v_a_rect_x2);
  __Pyx_XDECREF(__pyx_v_a_rect_y2);
  __Pyx_XDECREF(__pyx_v_b_rect_area);
  __Pyx_XDECREF(__pyx_v_b_rect_x1);
  __Pyx_XDECREF(__pyx_v_b_rect_y1);
  __Pyx_XDECREF(__pyx_v_b_rect_x2);
  __Pyx_XDECREF(__pyx_v_b_rect_y2);
  __Pyx_XDECREF(__pyx_v_dx);
  __Pyx_XDECREF(__pyx_v_dy);
  __Pyx_XDECREF(__pyx_v_overlap_area);
  __Pyx_XDECREF(__pyx_v_tmp_area);
  __Pyx_XDECREF(__pyx_v_overlap_ratio);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1787
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_width_height(a_rect, b_rect, width, height):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_213rect_overlap_rect_with_width_height(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_212rect_overlap_rect_with_width_height[] = " calculate overlap percentage between 2 rect\n        params: a_rect coordination, b_rect coordination\n        :returns: True: if overlap ratio between a_rect and b_rect is greater than threshold\n                  False: Otherwise";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_213rect_overlap_rect_with_width_height = {"rect_overlap_rect_with_width_height", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_213rect_overlap_rect_with_width_height, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_212rect_overlap_rect_with_width_height};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_213rect_overlap_rect_with_width_height(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_width = 0;
  PyObject *__pyx_v_height = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_overlap_rect_with_width_height (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_width,&__pyx_n_s_height,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_width_height", 1, 4, 4, 1); __PYX_ERR(0, 1787, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_width)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_width_height", 1, 4, 4, 2); __PYX_ERR(0, 1787, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_height)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_width_height", 1, 4, 4, 3); __PYX_ERR(0, 1787, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_overlap_rect_with_width_height") < 0)) __PYX_ERR(0, 1787, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 4) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
      values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_width = values[2];
    __pyx_v_height = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_overlap_rect_with_width_height", 1, 4, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1787, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect_with_width_height", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_212rect_overlap_rect_with_width_height(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_width, __pyx_v_height);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_212rect_overlap_rect_with_width_height(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_width, PyObject *__pyx_v_height) {
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_a_rect_x1 = NULL;
  PyObject *__pyx_v_a_rect_y1 = NULL;
  PyObject *__pyx_v_a_rect_x2 = NULL;
  PyObject *__pyx_v_a_rect_y2 = NULL;
  PyObject *__pyx_v_b_rect_x1 = NULL;
  PyObject *__pyx_v_b_rect_y1 = NULL;
  PyObject *__pyx_v_b_rect_x2 = NULL;
  PyObject *__pyx_v_b_rect_y2 = NULL;
  PyObject *__pyx_v_dx = NULL;
  PyObject *__pyx_v_dy = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("rect_overlap_rect_with_width_height", 0);

  /* "table_extraction/utils_table_extraction.pyx":1792
 *         :returns: True: if overlap ratio between a_rect and b_rect is greater than threshold
 *                   False: Otherwise"""
 *         x, y, w, h = a_rect             # <<<<<<<<<<<<<<
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_rect))) || (PyList_CheckExact(__pyx_v_a_rect))) {
    PyObject* sequence = __pyx_v_a_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1792, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1792, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1792, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1792, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1792, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1793
 *                   False: Otherwise"""
 *         x, y, w, h = a_rect
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h             # <<<<<<<<<<<<<<
 * 
 *         x, y, w, h = b_rect
 */
  __pyx_t_4 = __pyx_v_x;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_3 = __pyx_v_y;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1793, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1793, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_a_rect_x1 = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_a_rect_y1 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_rect_x2 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_rect_y2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1795
 *         a_rect_x1, a_rect_y1, a_rect_x2, a_rect_y2 = x, y, x + w, y + h
 * 
 *         x, y, w, h = b_rect             # <<<<<<<<<<<<<<
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h
 * 
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1795, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1795, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1795, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1795, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1795, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __Pyx_DECREF_SET(__pyx_v_x, __pyx_t_1);
  __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_y, __pyx_t_2);
  __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_w, __pyx_t_3);
  __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_h, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1796
 * 
 *         x, y, w, h = b_rect
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h             # <<<<<<<<<<<<<<
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)
 */
  __pyx_t_4 = __pyx_v_x;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_3 = __pyx_v_y;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1796, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1796, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_b_rect_x1 = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_rect_y1 = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_rect_x2 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_rect_y2 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1798
 *         b_rect_x1, b_rect_y1, b_rect_x2, b_rect_y2 = x, y, x + w, y + h
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)             # <<<<<<<<<<<<<<
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)
 * 
 */
  __Pyx_INCREF(__pyx_v_b_rect_x2);
  __pyx_t_1 = __pyx_v_b_rect_x2;
  __Pyx_INCREF(__pyx_v_a_rect_x2);
  __pyx_t_2 = __pyx_v_a_rect_x2;
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1798, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1798, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_3 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_v_b_rect_x1);
  __pyx_t_1 = __pyx_v_b_rect_x1;
  __Pyx_INCREF(__pyx_v_a_rect_x1);
  __pyx_t_2 = __pyx_v_a_rect_x1;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1798, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1798, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_4 = __pyx_t_2;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1798, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_dx = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1799
 * 
 *         dx = min(a_rect_x2, b_rect_x2) - max(a_rect_x1, b_rect_x1)
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)             # <<<<<<<<<<<<<<
 * 
 *         return dx > width and dy > height
 */
  __Pyx_INCREF(__pyx_v_b_rect_y2);
  __pyx_t_1 = __pyx_v_b_rect_y2;
  __Pyx_INCREF(__pyx_v_a_rect_y2);
  __pyx_t_4 = __pyx_v_a_rect_y2;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_t_4, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1799, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1799, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_3 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_v_b_rect_y1);
  __pyx_t_1 = __pyx_v_b_rect_y1;
  __Pyx_INCREF(__pyx_v_a_rect_y1);
  __pyx_t_4 = __pyx_v_a_rect_y1;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_4, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1799, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1799, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_7) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_2 = __pyx_t_4;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1799, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dy = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1801
 *         dy = min(a_rect_y2, b_rect_y2) - max(a_rect_y1, b_rect_y1)
 * 
 *         return dx > width and dy > height             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyObject_RichCompare(__pyx_v_dx, __pyx_v_width, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1801, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 1801, __pyx_L1_error)
  if (__pyx_t_7) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = PyObject_RichCompare(__pyx_v_dy, __pyx_v_height, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1801, __pyx_L1_error)
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L7_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1787
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_width_height(a_rect, b_rect, width, height):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_overlap_rect_with_width_height", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_a_rect_x1);
  __Pyx_XDECREF(__pyx_v_a_rect_y1);
  __Pyx_XDECREF(__pyx_v_a_rect_x2);
  __Pyx_XDECREF(__pyx_v_a_rect_y2);
  __Pyx_XDECREF(__pyx_v_b_rect_x1);
  __Pyx_XDECREF(__pyx_v_b_rect_y1);
  __Pyx_XDECREF(__pyx_v_b_rect_x2);
  __Pyx_XDECREF(__pyx_v_b_rect_y2);
  __Pyx_XDECREF(__pyx_v_dx);
  __Pyx_XDECREF(__pyx_v_dy);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1806
 * 
 *     @staticmethod
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):             # <<<<<<<<<<<<<<
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_215rect_can_be_merged(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_214rect_can_be_merged[] = ":return: whether or not 2 boxes has same position, width or height";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_215rect_can_be_merged = {"rect_can_be_merged", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_215rect_can_be_merged, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_214rect_can_be_merged};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_215rect_can_be_merged(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_rect = 0;
  PyObject *__pyx_v_b_rect = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("rect_can_be_merged (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_rect,&__pyx_n_s_b_rect,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_50));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_rect)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("rect_can_be_merged", 0, 2, 3, 1); __PYX_ERR(0, 1806, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "rect_can_be_merged") < 0)) __PYX_ERR(0, 1806, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_rect = values[0];
    __pyx_v_b_rect = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("rect_can_be_merged", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1806, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_can_be_merged", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_214rect_can_be_merged(__pyx_self, __pyx_v_a_rect, __pyx_v_b_rect, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_214rect_can_be_merged(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_rect, PyObject *__pyx_v_b_rect, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_a_rect_x = NULL;
  PyObject *__pyx_v_a_rect_y = NULL;
  PyObject *__pyx_v_a_rect_w = NULL;
  PyObject *__pyx_v_a_rect_h = NULL;
  PyObject *__pyx_v_b_rect_x = NULL;
  PyObject *__pyx_v_b_rect_y = NULL;
  PyObject *__pyx_v_b_rect_w = NULL;
  PyObject *__pyx_v_b_rect_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("rect_can_be_merged", 0);

  /* "table_extraction/utils_table_extraction.pyx":1808
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect             # <<<<<<<<<<<<<<
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect
 *         if abs(a_rect_w - b_rect_w) < threshold and \
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_rect))) || (PyList_CheckExact(__pyx_v_a_rect))) {
    PyObject* sequence = __pyx_v_a_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1808, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1808, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1808, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1808, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1808, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_rect_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_a_rect_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_rect_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_rect_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1809
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect             # <<<<<<<<<<<<<<
 *         if abs(a_rect_w - b_rect_w) < threshold and \
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_rect))) || (PyList_CheckExact(__pyx_v_b_rect))) {
    PyObject* sequence = __pyx_v_b_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1809, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1809, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1809, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1809, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_rect_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_rect_y = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_rect_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_rect_h = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1810
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect
 *         if abs(a_rect_w - b_rect_w) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 */
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_a_rect_w, __pyx_v_b_rect_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1810, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1810, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1810, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1810, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L8_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":1811
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect
 *         if abs(a_rect_w - b_rect_w) < threshold and \
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):             # <<<<<<<<<<<<<<
 *             return True
 *         if abs(a_rect_h - b_rect_h) < threshold and \
 */
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_a_rect_x, __pyx_v_b_rect_x); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (!__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L8_bool_binop_done;
  }
  __pyx_t_1 = PyNumber_Add(__pyx_v_a_rect_x, __pyx_v_a_rect_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Add(__pyx_v_b_rect_x, __pyx_v_b_rect_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1811, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __pyx_t_8;
  __pyx_L8_bool_binop_done:;

  /* "table_extraction/utils_table_extraction.pyx":1810
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect
 *         if abs(a_rect_w - b_rect_w) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 */
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1812
 *         if abs(a_rect_w - b_rect_w) < threshold and \
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True             # <<<<<<<<<<<<<<
 *         if abs(a_rect_h - b_rect_h) < threshold and \
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1810
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 *         b_rect_x, b_rect_y, b_rect_w, b_rect_h = b_rect
 *         if abs(a_rect_w - b_rect_w) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1813
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 *         if abs(a_rect_h - b_rect_h) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 *             return True
 */
  __pyx_t_3 = PyNumber_Subtract(__pyx_v_a_rect_h, __pyx_v_b_rect_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1813, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1813, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1813, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1813, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L12_bool_binop_done;
  }

  /* "table_extraction/utils_table_extraction.pyx":1814
 *             return True
 *         if abs(a_rect_h - b_rect_h) < threshold and \
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  __pyx_t_3 = PyNumber_Subtract(__pyx_v_a_rect_y, __pyx_v_b_rect_y); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (!__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L12_bool_binop_done;
  }
  __pyx_t_3 = PyNumber_Add(__pyx_v_a_rect_y, __pyx_v_a_rect_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Add(__pyx_v_b_rect_y, __pyx_v_b_rect_h); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1814, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_7 = __pyx_t_8;
  __pyx_L12_bool_binop_done:;

  /* "table_extraction/utils_table_extraction.pyx":1813
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 *         if abs(a_rect_h - b_rect_h) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 *             return True
 */
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1815
 *         if abs(a_rect_h - b_rect_h) < threshold and \
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 *             return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1813
 *                 (abs(a_rect_x - b_rect_x) < threshold or abs((a_rect_x + a_rect_w) - (b_rect_x + b_rect_w)) < threshold):
 *             return True
 *         if abs(a_rect_h - b_rect_h) < threshold and \             # <<<<<<<<<<<<<<
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 *             return True
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1816
 *                 (abs(a_rect_y - b_rect_y) < threshold or abs((a_rect_y + a_rect_h) - (b_rect_y + b_rect_h)) < threshold):
 *             return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1806
 * 
 *     @staticmethod
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):             # <<<<<<<<<<<<<<
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.rect_can_be_merged", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_rect_x);
  __Pyx_XDECREF(__pyx_v_a_rect_y);
  __Pyx_XDECREF(__pyx_v_a_rect_w);
  __Pyx_XDECREF(__pyx_v_a_rect_h);
  __Pyx_XDECREF(__pyx_v_b_rect_x);
  __Pyx_XDECREF(__pyx_v_b_rect_y);
  __Pyx_XDECREF(__pyx_v_b_rect_w);
  __Pyx_XDECREF(__pyx_v_b_rect_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1819
 * 
 *     @staticmethod
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: the horizontal lines in the image
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_217extend_line_at_corner(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_216extend_line_at_corner[] = "\n        :param h_lines: the horizontal lines in the image\n        :param v_lines: the vertical lines in the image\n        :param threshold_v: maximum of vertical line's length can be extended\n        :param threshold_h: maximum of horizontal line's length can be extended\n        :return: the list of horizontal lines and vertical lines\n                 The horizontal line and vertical line is extended to each others when the distance between\n                 start point (end point) of horizontal (vertical) and start point (end point) of vertical (horizontal)\n                 is smaller than threshold\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_217extend_line_at_corner = {"extend_line_at_corner", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_217extend_line_at_corner, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_216extend_line_at_corner};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_217extend_line_at_corner(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_h_lines = 0;
  PyObject *__pyx_v_v_lines = 0;
  PyObject *__pyx_v_threshold_v = 0;
  PyObject *__pyx_v_threshold_h = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("extend_line_at_corner (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_h_lines,&__pyx_n_s_v_lines,&__pyx_n_s_threshold_v,&__pyx_n_s_threshold_h,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_10));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_10));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_h_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_v_lines)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("extend_line_at_corner", 0, 2, 4, 1); __PYX_ERR(0, 1819, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold_v);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold_h);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "extend_line_at_corner") < 0)) __PYX_ERR(0, 1819, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_h_lines = values[0];
    __pyx_v_v_lines = values[1];
    __pyx_v_threshold_v = values[2];
    __pyx_v_threshold_h = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("extend_line_at_corner", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1819, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_line_at_corner", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_216extend_line_at_corner(__pyx_self, __pyx_v_h_lines, __pyx_v_v_lines, __pyx_v_threshold_v, __pyx_v_threshold_h);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1830
 *                  is smaller than threshold
 *         """
 *         v_lines.sort(key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_lambda40(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_lambda40 = {"lambda40", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_lambda40, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_lambda40(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda40 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda40(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda40(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda40", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_line_at_corner.lambda40", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1831
 *         """
 *         v_lines.sort(key=lambda line: line.start_point[1])
 *         h_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_1lambda41(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_1lambda41 = {"lambda41", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_1lambda41, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_1lambda41(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda41 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda41(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda41(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("lambda41", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_line_at_corner.lambda41", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1819
 * 
 *     @staticmethod
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: the horizontal lines in the image
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_216extend_line_at_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines, PyObject *__pyx_v_v_lines, PyObject *__pyx_v_threshold_v, PyObject *__pyx_v_threshold_h) {
  PyObject *__pyx_v_v_line = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_v_intersection_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  int __pyx_t_14;
  int __pyx_t_15;
  __Pyx_RefNannySetupContext("extend_line_at_corner", 0);

  /* "table_extraction/utils_table_extraction.pyx":1830
 *                  is smaller than threshold
 *         """
 *         v_lines.sort(key=lambda line: line.start_point[1])             # <<<<<<<<<<<<<<
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_lambda40, 0, __pyx_n_s_Utils_extend_line_at_corner_loca, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1830, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1831
 *         """
 *         v_lines.sort(key=lambda line: line.start_point[1])
 *         h_lines.sort(key=lambda line: line.start_point[0])             # <<<<<<<<<<<<<<
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_lines, __pyx_n_s_sort); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21extend_line_at_corner_1lambda41, 0, __pyx_n_s_Utils_extend_line_at_corner_loca, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_1) < 0) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_empty_tuple, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1831, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1832
 *         v_lines.sort(key=lambda line: line.start_point[1])
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 */
  if (likely(PyList_CheckExact(__pyx_v_v_lines)) || PyTuple_CheckExact(__pyx_v_v_lines)) {
    __pyx_t_1 = __pyx_v_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1832, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1832, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1832, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1832, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1832, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1832, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_1);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1832, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_v_line, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1833
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
    if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
      __pyx_t_2 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_2); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1833, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_7 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1833, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_2))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1833, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1833, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 1833, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1833, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_7(__pyx_t_2);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1833, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1834
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):             # <<<<<<<<<<<<<<
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_distance_from_line_to_line); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1834, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1834, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_3);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1834, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_h_line);
        __Pyx_GIVEREF(__pyx_v_h_line);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_h_line);
        __Pyx_INCREF(__pyx_v_v_line);
        __Pyx_GIVEREF(__pyx_v_v_line);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_v_line);
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1834, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_INCREF(__pyx_v_threshold_v);
      __pyx_t_9 = __pyx_v_threshold_v;
      __Pyx_INCREF(__pyx_v_threshold_h);
      __pyx_t_11 = __pyx_v_threshold_h;
      __pyx_t_12 = PyObject_RichCompare(__pyx_t_9, __pyx_t_11, Py_GT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      if (__pyx_t_13) {
        __Pyx_INCREF(__pyx_t_9);
        __pyx_t_8 = __pyx_t_9;
      } else {
        __Pyx_INCREF(__pyx_t_11);
        __pyx_t_8 = __pyx_t_11;
      }
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyObject_RichCompare(__pyx_t_3, __pyx_t_8, Py_LE); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1834, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (__pyx_t_13) {

        /* "table_extraction/utils_table_extraction.pyx":1835
 *             for h_line in h_lines:
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)             # <<<<<<<<<<<<<<
 *                     if not intersection_point[0]:
 *                         continue
 */
        __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1835, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_line_intersection); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1835, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1835, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_v_h_line, __pyx_v_v_line};
          __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1835, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
        } else
        #endif
        {
          __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1835, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_INCREF(__pyx_v_h_line);
          __Pyx_GIVEREF(__pyx_v_h_line);
          PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_h_line);
          __Pyx_INCREF(__pyx_v_v_line);
          __Pyx_GIVEREF(__pyx_v_v_line);
          PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_v_line);
          __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_11, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1835, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        }
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF_SET(__pyx_v_intersection_point, __pyx_t_9);
        __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":1836
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 */
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_intersection_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1836, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1836, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_14 = ((!__pyx_t_13) != 0);
        if (__pyx_t_14) {

          /* "table_extraction/utils_table_extraction.pyx":1837
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 *                         continue             # <<<<<<<<<<<<<<
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 */
          goto __pyx_L5_continue;

          /* "table_extraction/utils_table_extraction.pyx":1836
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:             # <<<<<<<<<<<<<<
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1838
 *                     if not intersection_point[0]:
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1838, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_15 = ((!__pyx_t_13) != 0);
        if (__pyx_t_15) {
        } else {
          __pyx_t_14 = __pyx_t_15;
          goto __pyx_L10_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1839
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 */
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1838, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);

        /* "table_extraction/utils_table_extraction.pyx":1838
 *                     if not intersection_point[0]:
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 1838, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_13 = ((!__pyx_t_15) != 0);
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L10_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1839
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1839, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1839, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1839, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_8 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_11, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_3, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1839, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_3, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1839, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_12 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1839, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_10, __pyx_t_3);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_3 = 0;
          __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_12, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1839, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        }
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold_h, Py_LT); __Pyx_XGOTREF(__pyx_t_11); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1839, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1839, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L10_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1840
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:             # <<<<<<<<<<<<<<
 *                         h_line.start_point = intersection_point
 *                         v_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1840, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1840, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1840, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_3 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_12);
          if (likely(__pyx_t_3)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
            __Pyx_INCREF(__pyx_t_3);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_12, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_9, __pyx_v_intersection_point};
          __pyx_t_11 = __Pyx_PyFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1840, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_9, __pyx_v_intersection_point};
          __pyx_t_11 = __Pyx_PyCFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1840, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        } else
        #endif
        {
          __pyx_t_8 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1840, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          if (__pyx_t_3) {
            __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_9);
          PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_10, __pyx_t_9);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_9 = 0;
          __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_12, __pyx_t_8, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1840, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        }
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_12 = PyObject_RichCompare(__pyx_t_11, __pyx_v_threshold_v, Py_LT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1840, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1840, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_14 = __pyx_t_13;
        __pyx_L10_bool_binop_done:;

        /* "table_extraction/utils_table_extraction.pyx":1838
 *                     if not intersection_point[0]:
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        if (__pyx_t_14) {

          /* "table_extraction/utils_table_extraction.pyx":1841
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1841, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1842
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 *                         v_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_start_point = True
 *                         v_line.connect_at_start_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1842, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1843
 *                         h_line.start_point = intersection_point
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_start_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 1843, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1844
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_start_point = True
 *                         v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 1844, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1838
 *                     if not intersection_point[0]:
 *                         continue
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_start_point \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1846
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1846, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1846, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_15 = ((!__pyx_t_13) != 0);
        if (__pyx_t_15) {
        } else {
          __pyx_t_14 = __pyx_t_15;
          goto __pyx_L15_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1847
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 */
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1846, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);

        /* "table_extraction/utils_table_extraction.pyx":1846
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 1846, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_13 = ((!__pyx_t_15) != 0);
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L15_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1847
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1847, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1847, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1847, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_9 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_8, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_12 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1847, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_12 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1847, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        {
          __pyx_t_3 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1847, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_10, __pyx_t_11);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_11 = 0;
          __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_3, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1847, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        }
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = PyObject_RichCompare(__pyx_t_12, __pyx_v_threshold_h, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1847, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1847, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L15_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1848
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:             # <<<<<<<<<<<<<<
 *                         h_line.start_point = intersection_point
 *                         v_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_Utils); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1848, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_12, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1848, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1848, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_11 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_11)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_11);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_12, __pyx_v_intersection_point};
          __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1848, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_t_12, __pyx_v_intersection_point};
          __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1848, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        } else
        #endif
        {
          __pyx_t_9 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1848, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          if (__pyx_t_11) {
            __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_11); __pyx_t_11 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_12);
          PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_10, __pyx_t_12);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_12 = 0;
          __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_9, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1848, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        }
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = PyObject_RichCompare(__pyx_t_8, __pyx_v_threshold_v, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1848, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1848, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_14 = __pyx_t_13;
        __pyx_L15_bool_binop_done:;

        /* "table_extraction/utils_table_extraction.pyx":1846
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        if (__pyx_t_14) {

          /* "table_extraction/utils_table_extraction.pyx":1849
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_start_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1849, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1850
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.start_point = intersection_point
 *                         v_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_start_point = True
 *                         v_line.connect_at_end_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1850, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1851
 *                         h_line.start_point = intersection_point
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_end_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 1851, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1852
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_start_point = True
 *                         v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 1852, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1846
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_start_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.start_point, intersection_point) < threshold_h\
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1854
 *                         v_line.connect_at_end_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1854, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1854, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_15 = ((!__pyx_t_13) != 0);
        if (__pyx_t_15) {
        } else {
          __pyx_t_14 = __pyx_t_15;
          goto __pyx_L20_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1855
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1854, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);

        /* "table_extraction/utils_table_extraction.pyx":1854
 *                         v_line.connect_at_end_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 1854, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_13 = ((!__pyx_t_15) != 0);
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L20_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1855
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1855, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1855, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1855, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_12 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_12 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_12)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_12);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_12, __pyx_t_8, __pyx_v_intersection_point};
          __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1855, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
          PyObject *__pyx_temp[3] = {__pyx_t_12, __pyx_t_8, __pyx_v_intersection_point};
          __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1855, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        } else
        #endif
        {
          __pyx_t_11 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1855, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          if (__pyx_t_12) {
            __Pyx_GIVEREF(__pyx_t_12); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_12); __pyx_t_12 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_8);
          PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_t_8);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_8 = 0;
          __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1855, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        }
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold_h, Py_LT); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1855, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1855, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L20_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1856
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:             # <<<<<<<<<<<<<<
 *                         h_line.end_point = intersection_point
 *                         v_line.start_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_Utils); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1856, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1856, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1856, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_8 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_11, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_3, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1856, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
          PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_3, __pyx_v_intersection_point};
          __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1856, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        } else
        #endif
        {
          __pyx_t_12 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1856, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          if (__pyx_t_8) {
            __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_8); __pyx_t_8 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_10, __pyx_t_3);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_3 = 0;
          __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_12, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1856, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        }
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = PyObject_RichCompare(__pyx_t_9, __pyx_v_threshold_v, Py_LT); __Pyx_XGOTREF(__pyx_t_11); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1856, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1856, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_14 = __pyx_t_13;
        __pyx_L20_bool_binop_done:;

        /* "table_extraction/utils_table_extraction.pyx":1854
 *                         v_line.connect_at_end_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        if (__pyx_t_14) {

          /* "table_extraction/utils_table_extraction.pyx":1857
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_end_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1857, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1858
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 *                         v_line.start_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_end_point = True
 *                         v_line.connect_at_start_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_start_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1858, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1859
 *                         h_line.end_point = intersection_point
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_start_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 1859, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1860
 *                         v_line.start_point = intersection_point
 *                         h_line.connect_at_end_point = True
 *                         v_line.connect_at_start_point = True             # <<<<<<<<<<<<<<
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_start_point, Py_True) < 0) __PYX_ERR(0, 1860, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1854
 *                         v_line.connect_at_end_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_start_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.start_point, intersection_point) < threshold_v:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1862
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1862, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1862, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_15 = ((!__pyx_t_13) != 0);
        if (__pyx_t_15) {
        } else {
          __pyx_t_14 = __pyx_t_15;
          goto __pyx_L25_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1863
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 */
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1862, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);

        /* "table_extraction/utils_table_extraction.pyx":1862
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 1862, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_13 = ((!__pyx_t_15) != 0);
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L25_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1863
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1863, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1863, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1863, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_3 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
          __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_12);
          if (likely(__pyx_t_3)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
            __Pyx_INCREF(__pyx_t_3);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_12, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_9, __pyx_v_intersection_point};
          __pyx_t_11 = __Pyx_PyFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1863, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_9, __pyx_v_intersection_point};
          __pyx_t_11 = __Pyx_PyCFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1863, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        } else
        #endif
        {
          __pyx_t_8 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1863, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          if (__pyx_t_3) {
            __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_9);
          PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_10, __pyx_t_9);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_9 = 0;
          __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_12, __pyx_t_8, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1863, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        }
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_12 = PyObject_RichCompare(__pyx_t_11, __pyx_v_threshold_h, Py_LT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1863, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1863, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        if (__pyx_t_13) {
        } else {
          __pyx_t_14 = __pyx_t_13;
          goto __pyx_L25_bool_binop_done;
        }

        /* "table_extraction/utils_table_extraction.pyx":1864
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:             # <<<<<<<<<<<<<<
 *                         h_line.end_point = intersection_point
 *                         v_line.end_point = intersection_point
 */
        __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1864, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1864, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1864, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_9 = NULL;
        __pyx_t_10 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_8, function);
            __pyx_t_10 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_12 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1864, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_t_11, __pyx_v_intersection_point};
          __pyx_t_12 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_10, 2+__pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1864, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        } else
        #endif
        {
          __pyx_t_3 = PyTuple_New(2+__pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1864, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_10, __pyx_t_11);
          __Pyx_INCREF(__pyx_v_intersection_point);
          __Pyx_GIVEREF(__pyx_v_intersection_point);
          PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_10, __pyx_v_intersection_point);
          __pyx_t_11 = 0;
          __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_3, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 1864, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        }
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_8 = PyObject_RichCompare(__pyx_t_12, __pyx_v_threshold_v, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1864, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_13 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_13 < 0)) __PYX_ERR(0, 1864, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_14 = __pyx_t_13;
        __pyx_L25_bool_binop_done:;

        /* "table_extraction/utils_table_extraction.pyx":1862
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        if (__pyx_t_14) {

          /* "table_extraction/utils_table_extraction.pyx":1865
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1865, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1866
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 *                         h_line.end_point = intersection_point
 *                         v_line.end_point = intersection_point             # <<<<<<<<<<<<<<
 *                         h_line.connect_at_end_point = True
 *                         v_line.connect_at_end_point = True
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_end_point, __pyx_v_intersection_point) < 0) __PYX_ERR(0, 1866, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1867
 *                         h_line.end_point = intersection_point
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 *                         v_line.connect_at_end_point = True
 * 
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 1867, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1868
 *                         v_line.end_point = intersection_point
 *                         h_line.connect_at_end_point = True
 *                         v_line.connect_at_end_point = True             # <<<<<<<<<<<<<<
 * 
 *         return h_lines, v_lines
 */
          if (__Pyx_PyObject_SetAttrStr(__pyx_v_v_line, __pyx_n_s_connect_at_end_point, Py_True) < 0) __PYX_ERR(0, 1868, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1862
 *                         v_line.connect_at_start_point = True
 * 
 *                     if not h_line.connect_at_end_point and not v_line.connect_at_end_point\             # <<<<<<<<<<<<<<
 *                             and Utils.distance_from_point_to_point(h_line.end_point, intersection_point) < threshold_h \
 *                             and Utils.distance_from_point_to_point(v_line.end_point, intersection_point) < threshold_v:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1834
 *         for v_line in v_lines:
 *             for h_line in h_lines:
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):             # <<<<<<<<<<<<<<
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 *                     if not intersection_point[0]:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1833
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:
 *             for h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 *                     intersection_point = Utils.line_intersection(h_line, v_line)
 */
      __pyx_L5_continue:;
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1832
 *         v_lines.sort(key=lambda line: line.start_point[1])
 *         h_lines.sort(key=lambda line: line.start_point[0])
 *         for v_line in v_lines:             # <<<<<<<<<<<<<<
 *             for h_line in h_lines:
 *                 if Utils.distance_from_line_to_line(h_line, v_line) <= max(threshold_h, threshold_v):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1870
 *                         v_line.connect_at_end_point = True
 * 
 *         return h_lines, v_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_h_lines);
  __Pyx_GIVEREF(__pyx_v_h_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_h_lines);
  __Pyx_INCREF(__pyx_v_v_lines);
  __Pyx_GIVEREF(__pyx_v_v_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_v_lines);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1819
 * 
 *     @staticmethod
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: the horizontal lines in the image
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extend_line_at_corner", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_v_line);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XDECREF(__pyx_v_intersection_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1873
 * 
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_219line_belong_with_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_219line_belong_with_box = {"line_belong_with_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_219line_belong_with_box, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_219line_belong_with_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_belong_with_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject*)__pyx_float_0_8));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_belong_with_box", 0, 2, 3, 1); __PYX_ERR(0, 1873, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_belong_with_box") < 0)) __PYX_ERR(0, 1873, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = values[0];
    __pyx_v_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_belong_with_box", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1873, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_belong_with_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_218line_belong_with_box(__pyx_self, __pyx_v_box, __pyx_v_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_218line_belong_with_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("line_belong_with_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":1874
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):
 *         if line.orientation == 'h':             # <<<<<<<<<<<<<<
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 *         else:
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1874, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_t_1, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1874, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":1875
 *     def line_belong_with_box(box, line, threshold=0.8):
 *         if line.orientation == 'h':
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold             # <<<<<<<<<<<<<<
 *         else:
 *             return (line.end_point[1] - line.start_point[1]) / box[3] >= threshold
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_box, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_1, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_GE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1875, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1874
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):
 *         if line.orientation == 'h':             # <<<<<<<<<<<<<<
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 *         else:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1877
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 *         else:
 *             return (line.end_point[1] - line.start_point[1]) / box[3] >= threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_t_4, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PyNumber_Subtract(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_box, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_4, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_GE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1877, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":1873
 * 
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_belong_with_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1880
 * 
 *     @staticmethod
 *     def reset_connect_at_line_corner(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_221reset_connect_at_line_corner(PyObject *__pyx_self, PyObject *__pyx_v_lines); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_220reset_connect_at_line_corner[] = "\n        :param lines:\n        :return: set all the connect property of the line to False\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_221reset_connect_at_line_corner = {"reset_connect_at_line_corner", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_221reset_connect_at_line_corner, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_220reset_connect_at_line_corner};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_221reset_connect_at_line_corner(PyObject *__pyx_self, PyObject *__pyx_v_lines) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("reset_connect_at_line_corner (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_220reset_connect_at_line_corner(__pyx_self, ((PyObject *)__pyx_v_lines));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_220reset_connect_at_line_corner(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines) {
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("reset_connect_at_line_corner", 0);

  /* "table_extraction/utils_table_extraction.pyx":1885
 *         :return: set all the connect property of the line to False
 *         """
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             line.connect_at_start_point = False
 *             line.connect_at_end_point = False
 */
  if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
    __pyx_t_1 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1885, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1885, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1885, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1885, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1885, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1885, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1885, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1886
 *         """
 *         for line in lines:
 *             line.connect_at_start_point = False             # <<<<<<<<<<<<<<
 *             line.connect_at_end_point = False
 *         return lines
 */
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_line, __pyx_n_s_connect_at_start_point, Py_False) < 0) __PYX_ERR(0, 1886, __pyx_L1_error)

    /* "table_extraction/utils_table_extraction.pyx":1887
 *         for line in lines:
 *             line.connect_at_start_point = False
 *             line.connect_at_end_point = False             # <<<<<<<<<<<<<<
 *         return lines
 * 
 */
    if (__Pyx_PyObject_SetAttrStr(__pyx_v_line, __pyx_n_s_connect_at_end_point, Py_False) < 0) __PYX_ERR(0, 1887, __pyx_L1_error)

    /* "table_extraction/utils_table_extraction.pyx":1885
 *         :return: set all the connect property of the line to False
 *         """
 *         for line in lines:             # <<<<<<<<<<<<<<
 *             line.connect_at_start_point = False
 *             line.connect_at_end_point = False
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1888
 *             line.connect_at_start_point = False
 *             line.connect_at_end_point = False
 *         return lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_lines);
  __pyx_r = __pyx_v_lines;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1880
 * 
 *     @staticmethod
 *     def reset_connect_at_line_corner(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.reset_connect_at_line_corner", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1891
 * 
 *     @staticmethod
 *     def expand_image(image, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param image:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_223expand_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_222expand_image[] = "\n        :param image:\n        :param padding_size:\n        :return: the image is added more padding\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_223expand_image = {"expand_image", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_223expand_image, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_222expand_image};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_223expand_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_padding_size = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("expand_image (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_padding_size,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_padding_size)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("expand_image", 1, 2, 2, 1); __PYX_ERR(0, 1891, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "expand_image") < 0)) __PYX_ERR(0, 1891, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_image = values[0];
    __pyx_v_padding_size = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("expand_image", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1891, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_222expand_image(__pyx_self, __pyx_v_image, __pyx_v_padding_size);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_222expand_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_padding_size) {
  PyObject *__pyx_v_expanded_image = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("expand_image", 0);

  /* "table_extraction/utils_table_extraction.pyx":1897
 *         :return: the image is added more padding
 *         """
 *         expanded_image = np.pad(image, [(padding_size, padding_size), (padding_size, padding_size)],             # <<<<<<<<<<<<<<
 *                                 "constant", constant_values=255)
 *         return expanded_image
 */
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_np); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_pad); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_padding_size);
  __Pyx_GIVEREF(__pyx_v_padding_size);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_padding_size);
  __Pyx_INCREF(__pyx_v_padding_size);
  __Pyx_GIVEREF(__pyx_v_padding_size);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_padding_size);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_padding_size);
  __Pyx_GIVEREF(__pyx_v_padding_size);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_padding_size);
  __Pyx_INCREF(__pyx_v_padding_size);
  __Pyx_GIVEREF(__pyx_v_padding_size);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_padding_size);
  __pyx_t_4 = PyList_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_1);
  PyList_SET_ITEM(__pyx_t_4, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_3);
  PyList_SET_ITEM(__pyx_t_4, 1, __pyx_t_3);
  __pyx_t_1 = 0;
  __pyx_t_3 = 0;
  __pyx_t_3 = PyTuple_New(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_image);
  __Pyx_GIVEREF(__pyx_v_image);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_image);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
  __Pyx_INCREF(__pyx_n_s_constant);
  __Pyx_GIVEREF(__pyx_n_s_constant);
  PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_n_s_constant);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1898
 *         """
 *         expanded_image = np.pad(image, [(padding_size, padding_size), (padding_size, padding_size)],
 *                                 "constant", constant_values=255)             # <<<<<<<<<<<<<<
 *         return expanded_image
 * 
 */
  __pyx_t_4 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1898, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_t_4, __pyx_n_s_constant_values, __pyx_int_255) < 0) __PYX_ERR(0, 1898, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1897
 *         :return: the image is added more padding
 *         """
 *         expanded_image = np.pad(image, [(padding_size, padding_size), (padding_size, padding_size)],             # <<<<<<<<<<<<<<
 *                                 "constant", constant_values=255)
 *         return expanded_image
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1897, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_expanded_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1899
 *         expanded_image = np.pad(image, [(padding_size, padding_size), (padding_size, padding_size)],
 *                                 "constant", constant_values=255)
 *         return expanded_image             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_expanded_image);
  __pyx_r = __pyx_v_expanded_image;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1891
 * 
 *     @staticmethod
 *     def expand_image(image, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param image:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.expand_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_expanded_image);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1902
 * 
 *     @staticmethod
 *     def remove_padding_rect(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_225remove_padding_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_224remove_padding_rect[] = "\n        :param rect: the rect's position\n        :param image_shape: the shape of the input image\n        :param padding_size: the padding of the image\n        :return: exactly rect's position in the input image\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_225remove_padding_rect = {"remove_padding_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_225remove_padding_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_224remove_padding_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_225remove_padding_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_image_shape = 0;
  PyObject *__pyx_v_padding_size = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_padding_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_image_shape,&__pyx_n_s_padding_size,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image_shape)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_padding_rect", 1, 3, 3, 1); __PYX_ERR(0, 1902, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_padding_size)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_padding_rect", 1, 3, 3, 2); __PYX_ERR(0, 1902, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_padding_rect") < 0)) __PYX_ERR(0, 1902, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_rect = values[0];
    __pyx_v_image_shape = values[1];
    __pyx_v_padding_size = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_padding_rect", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1902, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_padding_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_224remove_padding_rect(__pyx_self, __pyx_v_rect, __pyx_v_image_shape, __pyx_v_padding_size);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_224remove_padding_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image_shape, PyObject *__pyx_v_padding_size) {
  PyObject *__pyx_v_h_image = NULL;
  PyObject *__pyx_v_w_image = NULL;
  PyObject *__pyx_v_x1 = NULL;
  PyObject *__pyx_v_y1 = NULL;
  PyObject *__pyx_v_x2 = NULL;
  PyObject *__pyx_v_y2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  long __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("remove_padding_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":1909
 *         :return: exactly rect's position in the input image
 *         """
 *         h_image = image_shape[0]             # <<<<<<<<<<<<<<
 *         w_image = image_shape[1]
 *         x1 = max(rect[0] - padding_size, 0) # in case, the line reach the border
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_image_shape, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1909, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_h_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1910
 *         """
 *         h_image = image_shape[0]
 *         w_image = image_shape[1]             # <<<<<<<<<<<<<<
 *         x1 = max(rect[0] - padding_size, 0) # in case, the line reach the border
 *         y1 = max(rect[1] - padding_size, 0)
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_image_shape, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1910, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_w_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1911
 *         h_image = image_shape[0]
 *         w_image = image_shape[1]
 *         x1 = max(rect[0] - padding_size, 0) # in case, the line reach the border             # <<<<<<<<<<<<<<
 *         y1 = max(rect[1] - padding_size, 0)
 *         x2 = min(w_image, x1 + rect[2])
 */
  __pyx_t_2 = 0;
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1911, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_1, __pyx_v_padding_size); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1911, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1911, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_GT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1911, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1911, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_6) {
    __pyx_t_5 = __Pyx_PyInt_From_long(__pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1911, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_1 = __pyx_t_5;
    __pyx_t_5 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_1;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_x1 = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1912
 *         w_image = image_shape[1]
 *         x1 = max(rect[0] - padding_size, 0) # in case, the line reach the border
 *         y1 = max(rect[1] - padding_size, 0)             # <<<<<<<<<<<<<<
 *         x2 = min(w_image, x1 + rect[2])
 *         y2 = min(h_image, y1 + rect[3])
 */
  __pyx_t_2 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1912, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_3, __pyx_v_padding_size); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1912, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyInt_From_long(__pyx_t_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1912, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_5, __pyx_t_1, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1912, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1912, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_6) {
    __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1912, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_3 = __pyx_t_4;
    __pyx_t_4 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_3 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_3;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_y1 = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1913
 *         x1 = max(rect[0] - padding_size, 0) # in case, the line reach the border
 *         y1 = max(rect[1] - padding_size, 0)
 *         x2 = min(w_image, x1 + rect[2])             # <<<<<<<<<<<<<<
 *         y2 = min(h_image, y1 + rect[3])
 *         return x1, y1, x2 - x1, y2 - y1
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1913, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Add(__pyx_v_x1, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1913, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_INCREF(__pyx_v_w_image);
  __pyx_t_1 = __pyx_v_w_image;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_3, __pyx_t_1, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1913, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1913, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_4 = __pyx_t_3;
  } else {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_4 = __pyx_t_1;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __pyx_t_4;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_x2 = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1914
 *         y1 = max(rect[1] - padding_size, 0)
 *         x2 = min(w_image, x1 + rect[2])
 *         y2 = min(h_image, y1 + rect[3])             # <<<<<<<<<<<<<<
 *         return x1, y1, x2 - x1, y2 - y1
 * 
 */
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1914, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyNumber_Add(__pyx_v_y1, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1914, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_v_h_image);
  __pyx_t_3 = __pyx_v_h_image;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1914, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 1914, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_6) {
    __Pyx_INCREF(__pyx_t_4);
    __pyx_t_1 = __pyx_t_4;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __pyx_t_1;
  __Pyx_INCREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_y2 = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1915
 *         x2 = min(w_image, x1 + rect[2])
 *         y2 = min(h_image, y1 + rect[3])
 *         return x1, y1, x2 - x1, y2 - y1             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1915, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1915, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyTuple_New(4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1915, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_v_x1);
  __Pyx_GIVEREF(__pyx_v_x1);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_x1);
  __Pyx_INCREF(__pyx_v_y1);
  __Pyx_GIVEREF(__pyx_v_y1);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_y1);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_3, 2, __pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_3, 3, __pyx_t_1);
  __pyx_t_4 = 0;
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1902
 * 
 *     @staticmethod
 *     def remove_padding_rect(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_padding_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_image);
  __Pyx_XDECREF(__pyx_v_w_image);
  __Pyx_XDECREF(__pyx_v_x1);
  __Pyx_XDECREF(__pyx_v_y1);
  __Pyx_XDECREF(__pyx_v_x2);
  __Pyx_XDECREF(__pyx_v_y2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1918
 * 
 *     @staticmethod
 *     def line_at_border_image(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_227line_at_border_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_226line_at_border_image[] = "\n        :param rect: the rect's position\n        :param image_shape: the shape of the input image\n        :param padding_size: the padding of the image\n        :return: The rect whether or not is in border of the image.\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_227line_at_border_image = {"line_at_border_image", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_227line_at_border_image, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_226line_at_border_image};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_227line_at_border_image(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_image_shape = 0;
  PyObject *__pyx_v_padding_size = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("line_at_border_image (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_image_shape,&__pyx_n_s_padding_size,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image_shape)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_at_border_image", 1, 3, 3, 1); __PYX_ERR(0, 1918, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_padding_size)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("line_at_border_image", 1, 3, 3, 2); __PYX_ERR(0, 1918, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "line_at_border_image") < 0)) __PYX_ERR(0, 1918, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_rect = values[0];
    __pyx_v_image_shape = values[1];
    __pyx_v_padding_size = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("line_at_border_image", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1918, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_at_border_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_226line_at_border_image(__pyx_self, __pyx_v_rect, __pyx_v_image_shape, __pyx_v_padding_size);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_226line_at_border_image(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_image_shape, PyObject *__pyx_v_padding_size) {
  PyObject *__pyx_v_h_image = NULL;
  PyObject *__pyx_v_w_image = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("line_at_border_image", 0);

  /* "table_extraction/utils_table_extraction.pyx":1925
 *         :return: The rect whether or not is in border of the image.
 *         """
 *         h_image = image_shape[0]             # <<<<<<<<<<<<<<
 *         w_image = image_shape[1]
 *         x, y, w, h = rect
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_image_shape, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1925, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_h_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1926
 *         """
 *         h_image = image_shape[0]
 *         w_image = image_shape[1]             # <<<<<<<<<<<<<<
 *         x, y, w, h = rect
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_image_shape, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1926, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_w_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1927
 *         h_image = image_shape[0]
 *         w_image = image_shape[1]
 *         x, y, w, h = rect             # <<<<<<<<<<<<<<
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):
 *             return True
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
    PyObject* sequence = __pyx_v_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 1927, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 1927, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1927, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 1927, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 1927, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1928
 *         w_image = image_shape[1]
 *         x, y, w, h = rect
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):             # <<<<<<<<<<<<<<
 *             return True
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):
 */
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_w, __pyx_v_h, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L6_bool_binop_done;
  }
  __pyx_t_4 = PyObject_RichCompare(__pyx_v_y, __pyx_v_padding_size, Py_LE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (!__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L6_bool_binop_done;
  }
  __pyx_t_4 = PyNumber_Add(__pyx_v_y, __pyx_v_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyNumber_Add(__pyx_v_h_image, __pyx_v_padding_size); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1928, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __pyx_t_8;
  __pyx_L6_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1929
 *         x, y, w, h = rect
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):
 *             return True             # <<<<<<<<<<<<<<
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):
 *             return True
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1928
 *         w_image = image_shape[1]
 *         x, y, w, h = rect
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):             # <<<<<<<<<<<<<<
 *             return True
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1930
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):
 *             return True
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  __pyx_t_2 = PyObject_RichCompare(__pyx_v_w, __pyx_v_h, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_2 = PyObject_RichCompare(__pyx_v_x, __pyx_v_padding_size, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (!__pyx_t_8) {
  } else {
    __pyx_t_7 = __pyx_t_8;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_2 = PyNumber_Add(__pyx_v_x, __pyx_v_w); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyNumber_Add(__pyx_v_w_image, __pyx_v_padding_size); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = PyObject_RichCompare(__pyx_t_2, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1930, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_7 = __pyx_t_8;
  __pyx_L10_bool_binop_done:;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":1931
 *             return True
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):
 *             return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1930
 *         if w > h and (y <= padding_size or y + h >= h_image + padding_size):
 *             return True
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1932
 *         if w < h and (x <= padding_size or x + w >= w_image + padding_size):
 *             return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1918
 * 
 *     @staticmethod
 *     def line_at_border_image(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.line_at_border_image", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_h_image);
  __Pyx_XDECREF(__pyx_v_w_image);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1935
 * 
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):             # <<<<<<<<<<<<<<
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_229check_two_points_in_same_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_229check_two_points_in_same_line = {"check_two_points_in_same_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_229check_two_points_in_same_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_229check_two_points_in_same_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_point = 0;
  PyObject *__pyx_v_b_point = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("check_two_points_in_same_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_point,&__pyx_n_s_b_point,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[4] = {0,0,0,0};
    values[3] = ((PyObject *)((PyObject *)__pyx_int_20));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_point)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_point)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("check_two_points_in_same_line", 0, 3, 4, 1); __PYX_ERR(0, 1935, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("check_two_points_in_same_line", 0, 3, 4, 2); __PYX_ERR(0, 1935, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "check_two_points_in_same_line") < 0)) __PYX_ERR(0, 1935, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_point = values[0];
    __pyx_v_b_point = values[1];
    __pyx_v_orientation = values[2];
    __pyx_v_threshold = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("check_two_points_in_same_line", 0, 3, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1935, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.check_two_points_in_same_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_228check_two_points_in_same_line(__pyx_self, __pyx_v_a_point, __pyx_v_b_point, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_228check_two_points_in_same_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_point, PyObject *__pyx_v_b_point, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("check_two_points_in_same_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1936
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:             # <<<<<<<<<<<<<<
 *             return True
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_vertical, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1936, __pyx_L1_error)
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_a_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_5 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1936, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1937
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:
 *             return True
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1936
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:             # <<<<<<<<<<<<<<
 *             return True
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1938
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_horizontal, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1938, __pyx_L1_error)
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_a_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_b_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyNumber_Subtract(__pyx_t_5, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1938, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_1 = __pyx_t_2;
  __pyx_L7_bool_binop_done:;
  if (__pyx_t_1) {

    /* "table_extraction/utils_table_extraction.pyx":1939
 *             return True
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:
 *             return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":1938
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":1940
 *         if orientation == "horizontal" and abs(a_point[1] - b_point[1]) <= threshold:
 *             return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1935
 * 
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):             # <<<<<<<<<<<<<<
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.check_two_points_in_same_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1943
 * 
 *     @staticmethod
 *     def real_text_block(text_box, threshold=500):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_box:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_231real_text_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_230real_text_block[] = "\n        :param text_box:\n        :param threshold: the text block is considered as true text block if it's width or height is smaller than this parameter\n        :return: True: it is true text block\n                 False: Otherwise\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_231real_text_block = {"real_text_block", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_231real_text_block, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_230real_text_block};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_231real_text_block(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_text_box = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("real_text_block (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_text_box,&__pyx_n_s_threshold,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject *)__pyx_int_500));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "real_text_block") < 0)) __PYX_ERR(0, 1943, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_text_box = values[0];
    __pyx_v_threshold = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("real_text_block", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1943, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.real_text_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_230real_text_block(__pyx_self, __pyx_v_text_box, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_230real_text_block(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_box, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  __Pyx_RefNannySetupContext("real_text_block", 0);

  /* "table_extraction/utils_table_extraction.pyx":1950
 *                  False: Otherwise
 *         """
 *         return text_box[2] <= threshold or text_box[3] <= threshold             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_text_box, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1950, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1950, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 1950, __pyx_L1_error)
  if (!__pyx_t_4) {
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_text_box, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1950, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1950, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1943
 * 
 *     @staticmethod
 *     def real_text_block(text_box, threshold=500):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_box:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.real_text_block", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1953
 * 
 *     @staticmethod
 *     def remove_dot_lines_noise(dot_rects, text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param dot_rects:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_233remove_dot_lines_noise(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_232remove_dot_lines_noise[] = "\n        :param dot_rects:\n        :param text_blocks:\n        :return: the line is made by some of dots without noise line.\n                The line is considered as the noise line if it go through more than 2 text blocks\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_233remove_dot_lines_noise = {"remove_dot_lines_noise", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_233remove_dot_lines_noise, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_232remove_dot_lines_noise};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_233remove_dot_lines_noise(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_dot_rects = 0;
  PyObject *__pyx_v_text_blocks = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_dot_lines_noise (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_dot_rects,&__pyx_n_s_text_blocks,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_dot_rects)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_dot_lines_noise", 1, 2, 2, 1); __PYX_ERR(0, 1953, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_dot_lines_noise") < 0)) __PYX_ERR(0, 1953, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_dot_rects = values[0];
    __pyx_v_text_blocks = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_dot_lines_noise", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1953, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_dot_lines_noise", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_232remove_dot_lines_noise(__pyx_self, __pyx_v_dot_rects, __pyx_v_text_blocks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_232remove_dot_lines_noise(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_dot_rects, PyObject *__pyx_v_text_blocks) {
  PyObject *__pyx_v_invalid_dots = NULL;
  PyObject *__pyx_v_dot_rect = NULL;
  PyObject *__pyx_v_count_down = NULL;
  PyObject *__pyx_v_text_block = NULL;
  PyObject *__pyx_v_invalid_dot = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("remove_dot_lines_noise", 0);

  /* "table_extraction/utils_table_extraction.pyx":1960
 *                 The line is considered as the noise line if it go through more than 2 text blocks
 *         """
 *         invalid_dots = []             # <<<<<<<<<<<<<<
 *         for dot_rect in dot_rects:
 *             count_down = 2
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1960, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_invalid_dots = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1961
 *         """
 *         invalid_dots = []
 *         for dot_rect in dot_rects:             # <<<<<<<<<<<<<<
 *             count_down = 2
 *             for text_block in text_blocks:
 */
  if (likely(PyList_CheckExact(__pyx_v_dot_rects)) || PyTuple_CheckExact(__pyx_v_dot_rects)) {
    __pyx_t_1 = __pyx_v_dot_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_dot_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1961, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1961, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1961, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1961, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1961, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1961, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 1961, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_dot_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1962
 *         invalid_dots = []
 *         for dot_rect in dot_rects:
 *             count_down = 2             # <<<<<<<<<<<<<<
 *             for text_block in text_blocks:
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 */
    __Pyx_INCREF(__pyx_int_2);
    __Pyx_XDECREF_SET(__pyx_v_count_down, __pyx_int_2);

    /* "table_extraction/utils_table_extraction.pyx":1963
 *         for dot_rect in dot_rects:
 *             count_down = 2
 *             for text_block in text_blocks:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 *                     count_down -= 1
 */
    if (likely(PyList_CheckExact(__pyx_v_text_blocks)) || PyTuple_CheckExact(__pyx_v_text_blocks)) {
      __pyx_t_4 = __pyx_v_text_blocks; __Pyx_INCREF(__pyx_t_4); __pyx_t_5 = 0;
      __pyx_t_6 = NULL;
    } else {
      __pyx_t_5 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_text_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1963, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1963, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_6)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1963, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1963, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        } else {
          if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_7 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_7); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 1963, __pyx_L1_error)
          #else
          __pyx_t_7 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1963, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_7);
          #endif
        }
      } else {
        __pyx_t_7 = __pyx_t_6(__pyx_t_4);
        if (unlikely(!__pyx_t_7)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1963, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_7);
      }
      __Pyx_XDECREF_SET(__pyx_v_text_block, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1964
 *             count_down = 2
 *             for text_block in text_blocks:
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):             # <<<<<<<<<<<<<<
 *                     count_down -= 1
 *                     if count_down == 0:
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1964, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_overlap_rect_with_percent); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1964, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_dot_rect, __pyx_v_text_block, __pyx_int_0};
        __pyx_t_7 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1964, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_dot_rect, __pyx_v_text_block, __pyx_int_0};
        __pyx_t_7 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 3+__pyx_t_10); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1964, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_7);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(3+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1964, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_dot_rect);
        __Pyx_GIVEREF(__pyx_v_dot_rect);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_dot_rect);
        __Pyx_INCREF(__pyx_v_text_block);
        __Pyx_GIVEREF(__pyx_v_text_block);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_text_block);
        __Pyx_INCREF(__pyx_int_0);
        __Pyx_GIVEREF(__pyx_int_0);
        PyTuple_SET_ITEM(__pyx_t_11, 2+__pyx_t_10, __pyx_int_0);
        __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1964, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1964, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (__pyx_t_12) {

        /* "table_extraction/utils_table_extraction.pyx":1965
 *             for text_block in text_blocks:
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 *                     count_down -= 1             # <<<<<<<<<<<<<<
 *                     if count_down == 0:
 *                         invalid_dots.append(dot_rect)
 */
        __pyx_t_7 = __Pyx_PyInt_SubtractObjC(__pyx_v_count_down, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1965, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_DECREF_SET(__pyx_v_count_down, __pyx_t_7);
        __pyx_t_7 = 0;

        /* "table_extraction/utils_table_extraction.pyx":1966
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 *                     count_down -= 1
 *                     if count_down == 0:             # <<<<<<<<<<<<<<
 *                         invalid_dots.append(dot_rect)
 *                         break
 */
        __pyx_t_7 = __Pyx_PyInt_EqObjC(__pyx_v_count_down, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1966, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1966, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        if (__pyx_t_12) {

          /* "table_extraction/utils_table_extraction.pyx":1967
 *                     count_down -= 1
 *                     if count_down == 0:
 *                         invalid_dots.append(dot_rect)             # <<<<<<<<<<<<<<
 *                         break
 * 
 */
          __pyx_t_13 = __Pyx_PyList_Append(__pyx_v_invalid_dots, __pyx_v_dot_rect); if (unlikely(__pyx_t_13 == ((int)-1))) __PYX_ERR(0, 1967, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":1968
 *                     if count_down == 0:
 *                         invalid_dots.append(dot_rect)
 *                         break             # <<<<<<<<<<<<<<
 * 
 *         for invalid_dot in invalid_dots:
 */
          goto __pyx_L6_break;

          /* "table_extraction/utils_table_extraction.pyx":1966
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 *                     count_down -= 1
 *                     if count_down == 0:             # <<<<<<<<<<<<<<
 *                         invalid_dots.append(dot_rect)
 *                         break
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":1964
 *             count_down = 2
 *             for text_block in text_blocks:
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):             # <<<<<<<<<<<<<<
 *                     count_down -= 1
 *                     if count_down == 0:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":1963
 *         for dot_rect in dot_rects:
 *             count_down = 2
 *             for text_block in text_blocks:             # <<<<<<<<<<<<<<
 *                 if Utils.rect_overlap_rect_with_percent(dot_rect, text_block, 0):
 *                     count_down -= 1
 */
    }
    __pyx_L6_break:;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1961
 *         """
 *         invalid_dots = []
 *         for dot_rect in dot_rects:             # <<<<<<<<<<<<<<
 *             count_down = 2
 *             for text_block in text_blocks:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1970
 *                         break
 * 
 *         for invalid_dot in invalid_dots:             # <<<<<<<<<<<<<<
 *             if invalid_dot in dot_rects:
 *                 dot_rects.remove(invalid_dot)
 */
  __pyx_t_1 = __pyx_v_invalid_dots; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 1970, __pyx_L1_error)
    #else
    __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1970, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_invalid_dot, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":1971
 * 
 *         for invalid_dot in invalid_dots:
 *             if invalid_dot in dot_rects:             # <<<<<<<<<<<<<<
 *                 dot_rects.remove(invalid_dot)
 * 
 */
    __pyx_t_12 = (__Pyx_PySequence_ContainsTF(__pyx_v_invalid_dot, __pyx_v_dot_rects, Py_EQ)); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 1971, __pyx_L1_error)
    __pyx_t_14 = (__pyx_t_12 != 0);
    if (__pyx_t_14) {

      /* "table_extraction/utils_table_extraction.pyx":1972
 *         for invalid_dot in invalid_dots:
 *             if invalid_dot in dot_rects:
 *                 dot_rects.remove(invalid_dot)             # <<<<<<<<<<<<<<
 * 
 *         return dot_rects
 */
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_dot_rects, __pyx_n_s_remove); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1972, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_9 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_7);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_7, function);
        }
      }
      __pyx_t_4 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_9, __pyx_v_invalid_dot) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_invalid_dot);
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1972, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":1971
 * 
 *         for invalid_dot in invalid_dots:
 *             if invalid_dot in dot_rects:             # <<<<<<<<<<<<<<
 *                 dot_rects.remove(invalid_dot)
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":1970
 *                         break
 * 
 *         for invalid_dot in invalid_dots:             # <<<<<<<<<<<<<<
 *             if invalid_dot in dot_rects:
 *                 dot_rects.remove(invalid_dot)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1974
 *                 dot_rects.remove(invalid_dot)
 * 
 *         return dot_rects             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_dot_rects);
  __pyx_r = __pyx_v_dot_rects;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1953
 * 
 *     @staticmethod
 *     def remove_dot_lines_noise(dot_rects, text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param dot_rects:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_dot_lines_noise", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_invalid_dots);
  __Pyx_XDECREF(__pyx_v_dot_rect);
  __Pyx_XDECREF(__pyx_v_count_down);
  __Pyx_XDECREF(__pyx_v_text_block);
  __Pyx_XDECREF(__pyx_v_invalid_dot);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1978
 * 
 *     @staticmethod
 *     def white_percentage(image):             # <<<<<<<<<<<<<<
 *         """
 *         :return: the white pixel ratio in the image.
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_235white_percentage(PyObject *__pyx_self, PyObject *__pyx_v_image); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_234white_percentage[] = "\n        :return: the white pixel ratio in the image.\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_235white_percentage = {"white_percentage", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_235white_percentage, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_234white_percentage};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_235white_percentage(PyObject *__pyx_self, PyObject *__pyx_v_image) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("white_percentage (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_234white_percentage(__pyx_self, ((PyObject *)__pyx_v_image));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_234white_percentage(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image) {
  PyObject *__pyx_v_white_pixels = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("white_percentage", 0);

  /* "table_extraction/utils_table_extraction.pyx":1982
 *         :return: the white pixel ratio in the image.
 *         """
 *         white_pixels = np.sum(image == 255)             # <<<<<<<<<<<<<<
 *         return white_pixels / (image.shape[0] * image.shape[1]) * 100
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_np); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1982, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_sum); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1982, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyInt_EqObjC(__pyx_v_image, __pyx_int_255, 0xFF, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1982, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_t_2) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1982, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_white_pixels = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1983
 *         """
 *         white_pixels = np.sum(image == 255)
 *         return white_pixels / (image.shape[0] * image.shape[1]) * 100             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_shape); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_shape); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Multiply(__pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyNumber_Divide(__pyx_v_white_pixels, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Multiply(__pyx_t_2, __pyx_int_100); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1983, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1978
 * 
 *     @staticmethod
 *     def white_percentage(image):             # <<<<<<<<<<<<<<
 *         """
 *         :return: the white pixel ratio in the image.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.white_percentage", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_white_pixels);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1986
 * 
 *     @staticmethod
 *     def width_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_237width_line(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_236width_line[] = "\n        :param line:\n        :return: width of the line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_237width_line = {"width_line", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_237width_line, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_236width_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_237width_line(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("width_line (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_236width_line(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_236width_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("width_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1991
 *         :return: width of the line
 *         """
 *         return line.end_point[0] - line.start_point[0]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1991, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1991, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1991, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1991, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1991, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1986
 * 
 *     @staticmethod
 *     def width_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.width_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":1994
 * 
 *     @staticmethod
 *     def height_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_239height_line(PyObject *__pyx_self, PyObject *__pyx_v_line); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_238height_line[] = "\n        :param line:\n        :return: height of the line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_239height_line = {"height_line", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_239height_line, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_238height_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_239height_line(PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("height_line (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_238height_line(__pyx_self, ((PyObject *)__pyx_v_line));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_238height_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("height_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":1999
 *         :return: height of the line
 *         """
 *         return line.end_point[1] - line.start_point[1]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1999, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1999, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1999, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1999, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1999, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":1994
 * 
 *     @staticmethod
 *     def height_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.height_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2002
 * 
 *     @staticmethod
 *     def content_block_in_groups(groups, content_block):             # <<<<<<<<<<<<<<
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_241content_block_in_groups(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_240content_block_in_groups[] = "Check if a Content_Block has aready existed in a list of group\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_241content_block_in_groups = {"content_block_in_groups", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_241content_block_in_groups, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_240content_block_in_groups};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_241content_block_in_groups(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_groups = 0;
  PyObject *__pyx_v_content_block = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("content_block_in_groups (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_groups,&__pyx_n_s_content_block,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_groups)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_block)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("content_block_in_groups", 1, 2, 2, 1); __PYX_ERR(0, 2002, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "content_block_in_groups") < 0)) __PYX_ERR(0, 2002, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_groups = values[0];
    __pyx_v_content_block = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("content_block_in_groups", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2002, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.content_block_in_groups", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_240content_block_in_groups(__pyx_self, __pyx_v_groups, __pyx_v_content_block);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_240content_block_in_groups(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_groups, PyObject *__pyx_v_content_block) {
  PyObject *__pyx_v_group = NULL;
  PyObject *__pyx_v_cb = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("content_block_in_groups", 0);

  /* "table_extraction/utils_table_extraction.pyx":2005
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 *         for group in groups:             # <<<<<<<<<<<<<<
 *             for cb in group.content_blocks:
 *                 if cb.idx == content_block.idx:
 */
  if (likely(PyList_CheckExact(__pyx_v_groups)) || PyTuple_CheckExact(__pyx_v_groups)) {
    __pyx_t_1 = __pyx_v_groups; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_groups); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2005, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2005, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2005, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2005, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2005, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2005, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2005, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_group, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2006
 *         """
 *         for group in groups:
 *             for cb in group.content_blocks:             # <<<<<<<<<<<<<<
 *                 if cb.idx == content_block.idx:
 *                     return True
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_group, __pyx_n_s_content_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2006, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
      __pyx_t_5 = __pyx_t_4; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2006, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_7 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2006, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_5))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_4 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_4); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 2006, __pyx_L1_error)
          #else
          __pyx_t_4 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2006, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_4); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 2006, __pyx_L1_error)
          #else
          __pyx_t_4 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2006, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          #endif
        }
      } else {
        __pyx_t_4 = __pyx_t_7(__pyx_t_5);
        if (unlikely(!__pyx_t_4)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 2006, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_4);
      }
      __Pyx_XDECREF_SET(__pyx_v_cb, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2007
 *         for group in groups:
 *             for cb in group.content_blocks:
 *                 if cb.idx == content_block.idx:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_cb, __pyx_n_s_idx); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2007, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_content_block, __pyx_n_s_idx); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2007, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = PyObject_RichCompare(__pyx_t_4, __pyx_t_8, Py_EQ); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2007, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 2007, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (__pyx_t_10) {

        /* "table_extraction/utils_table_extraction.pyx":2008
 *             for cb in group.content_blocks:
 *                 if cb.idx == content_block.idx:
 *                     return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":2007
 *         for group in groups:
 *             for cb in group.content_blocks:
 *                 if cb.idx == content_block.idx:             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2006
 *         """
 *         for group in groups:
 *             for cb in group.content_blocks:             # <<<<<<<<<<<<<<
 *                 if cb.idx == content_block.idx:
 *                     return True
 */
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2005
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 *         for group in groups:             # <<<<<<<<<<<<<<
 *             for cb in group.content_blocks:
 *                 if cb.idx == content_block.idx:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2009
 *                 if cb.idx == content_block.idx:
 *                     return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2002
 * 
 *     @staticmethod
 *     def content_block_in_groups(groups, content_block):             # <<<<<<<<<<<<<<
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.content_block_in_groups", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_group);
  __Pyx_XDECREF(__pyx_v_cb);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2012
 * 
 *     @staticmethod
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_243remove_underline_text(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_242remove_underline_text[] = "\n        :param lines:\n        :param block_texts:\n        :param threshold_distance: the line is considered as a underline of the block text\n                                    if distance between them is smaller than this parameter\n        :param threshold_deviation: the line is considered as a underline of the block text\n                                    if the line and the block text are aligned center.\n                                    The line and the block is considered as aligned center of each others\n                                    when deviation is smaller than this parameter\n        :return: lines without underlines and extend text block above underline with the with of the text block\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_243remove_underline_text = {"remove_underline_text", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_243remove_underline_text, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_242remove_underline_text};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_243remove_underline_text(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_lines = 0;
  PyObject *__pyx_v_block_texts = 0;
  PyObject *__pyx_v_threshold_distance = 0;
  PyObject *__pyx_v_threshold_deviation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_underline_text (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_lines,&__pyx_n_s_block_texts,&__pyx_n_s_threshold_distance,&__pyx_n_s_threshold_deviation,0};
    PyObject* values[4] = {0,0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_15));
    values[3] = ((PyObject *)((PyObject *)__pyx_int_20));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_lines)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_block_texts)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_underline_text", 0, 2, 4, 1); __PYX_ERR(0, 2012, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold_distance);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold_deviation);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_underline_text") < 0)) __PYX_ERR(0, 2012, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_lines = values[0];
    __pyx_v_block_texts = values[1];
    __pyx_v_threshold_distance = values[2];
    __pyx_v_threshold_deviation = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_underline_text", 0, 2, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2012, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_underline_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_242remove_underline_text(__pyx_self, __pyx_v_lines, __pyx_v_block_texts, __pyx_v_threshold_distance, __pyx_v_threshold_deviation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2025
 *         """
 * 
 *         def align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *             """
 *             :param block_text: bounding rectangle of the block text
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_1align_center(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center[] = "\n            :param block_text: bounding rectangle of the block text\n            :param line: line object\n            :param threshold_deviation: a line is considered as center alignment with the block_text\n                    if the x_center coordination of the line is approximately x_center coordination of the block text\n            :return: whether or not line is center alignment with the text block\n            ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_1align_center = {"align_center", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_1align_center, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_1align_center(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_block_text = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_threshold_deviation = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("align_center (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_block_text,&__pyx_n_s_line,&__pyx_n_s_threshold_deviation,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_block_text)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("align_center", 1, 3, 3, 1); __PYX_ERR(0, 2025, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold_deviation)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("align_center", 1, 3, 3, 2); __PYX_ERR(0, 2025, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "align_center") < 0)) __PYX_ERR(0, 2025, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_block_text = values[0];
    __pyx_v_line = values[1];
    __pyx_v_threshold_deviation = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("align_center", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2025, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_underline_text.align_center", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center(__pyx_self, __pyx_v_block_text, __pyx_v_line, __pyx_v_threshold_deviation);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_block_text, PyObject *__pyx_v_line, PyObject *__pyx_v_threshold_deviation) {
  PyObject *__pyx_v_center_text = NULL;
  PyObject *__pyx_v_center_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("align_center", 0);

  /* "table_extraction/utils_table_extraction.pyx":2034
 *             """
 *             # x_center coordination of the text block
 *             center_text = block_text[0] + block_text[2] / 2             # <<<<<<<<<<<<<<
 *             # x_center coordination of the line
 *             center_line = line.start_point[0] + Utils.width_line(line) / 2
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_block_text, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2034, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_block_text, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2034, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_t_2, __pyx_int_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2034, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2034, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_center_text = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2036
 *             center_text = block_text[0] + block_text[2] / 2
 *             # x_center coordination of the line
 *             center_line = line.start_point[0] + Utils.width_line(line) / 2             # <<<<<<<<<<<<<<
 * 
 *             return abs(center_text - center_line) < threshold_deviation
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_Utils); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_width_line); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_4);
    if (likely(__pyx_t_1)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_4, function);
    }
  }
  __pyx_t_2 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_1, __pyx_v_line) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_line);
  __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Divide(__pyx_t_2, __pyx_int_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Add(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2036, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_center_line = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2038
 *             center_line = line.start_point[0] + Utils.width_line(line) / 2
 * 
 *             return abs(center_text - center_line) < threshold_deviation             # <<<<<<<<<<<<<<
 * 
 *         underlines = []
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = PyNumber_Subtract(__pyx_v_center_text, __pyx_v_center_line); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2038, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2038, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold_deviation, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2038, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2025
 *         """
 * 
 *         def align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *             """
 *             :param block_text: bounding rectangle of the block text
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_underline_text.align_center", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_center_text);
  __Pyx_XDECREF(__pyx_v_center_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2012
 * 
 *     @staticmethod
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_242remove_underline_text(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_lines, PyObject *__pyx_v_block_texts, PyObject *__pyx_v_threshold_distance, PyObject *__pyx_v_threshold_deviation) {
  PyObject *__pyx_v_align_center = 0;
  PyObject *__pyx_v_underlines = NULL;
  PyObject *__pyx_v_idx = NULL;
  PyObject *__pyx_v_block_text = NULL;
  PyObject *__pyx_v_line = NULL;
  PyObject *__pyx_v_lines_temp = NULL;
  PyObject *__pyx_v_line_checked = NULL;
  PyObject *__pyx_v_x = NULL;
  PyObject *__pyx_v_y = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_underline = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  PyObject *__pyx_t_14 = NULL;
  int __pyx_t_15;
  Py_ssize_t __pyx_t_16;
  PyObject *(*__pyx_t_17)(PyObject *);
  PyObject *__pyx_t_18 = NULL;
  int __pyx_t_19;
  PyObject *__pyx_t_20 = NULL;
  PyObject *__pyx_t_21 = NULL;
  PyObject *(*__pyx_t_22)(PyObject *);
  __Pyx_RefNannySetupContext("remove_underline_text", 0);

  /* "table_extraction/utils_table_extraction.pyx":2025
 *         """
 * 
 *         def align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *             """
 *             :param block_text: bounding rectangle of the block text
 */
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_1align_center, 0, __pyx_n_s_Utils_remove_underline_text_loca, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__17)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2025, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_align_center = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2040
 *             return abs(center_text - center_line) < threshold_deviation
 * 
 *         underlines = []             # <<<<<<<<<<<<<<
 *         for idx, block_text in enumerate(block_texts):
 *             for line in lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2040, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_underlines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2041
 * 
 *         underlines = []
 *         for idx, block_text in enumerate(block_texts):             # <<<<<<<<<<<<<<
 *             for line in lines:
 *                 # only check short line (<300)
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_1 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_block_texts)) || PyTuple_CheckExact(__pyx_v_block_texts)) {
    __pyx_t_2 = __pyx_v_block_texts; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_block_texts); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2041, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2041, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2041, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2041, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2041, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2041, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2041, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_block_text, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_XDECREF_SET(__pyx_v_idx, __pyx_t_1);
    __pyx_t_5 = __Pyx_PyInt_AddObjC(__pyx_t_1, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2041, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1);
    __pyx_t_1 = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2042
 *         underlines = []
 *         for idx, block_text in enumerate(block_texts):
 *             for line in lines:             # <<<<<<<<<<<<<<
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 */
    if (likely(PyList_CheckExact(__pyx_v_lines)) || PyTuple_CheckExact(__pyx_v_lines)) {
      __pyx_t_5 = __pyx_v_lines; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_lines); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2042, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_7 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2042, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_5))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_8 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_8); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 2042, __pyx_L1_error)
          #else
          __pyx_t_8 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2042, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_8); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 2042, __pyx_L1_error)
          #else
          __pyx_t_8 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2042, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          #endif
        }
      } else {
        __pyx_t_8 = __pyx_t_7(__pyx_t_5);
        if (unlikely(!__pyx_t_8)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 2042, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_8);
      }
      __Pyx_XDECREF_SET(__pyx_v_line, __pyx_t_8);
      __pyx_t_8 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2045
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \             # <<<<<<<<<<<<<<
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:
 *                     lines_temp = lines.copy()
 */
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_orientation); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_10 = (__Pyx_PyString_Equals(__pyx_t_8, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L8_bool_binop_done;
      }
      __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_width_line); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_11 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
        __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_12);
        if (likely(__pyx_t_11)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_12, function);
        }
      }
      __pyx_t_8 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_12, __pyx_t_11, __pyx_v_line) : __Pyx_PyObject_CallOneArg(__pyx_t_12, __pyx_v_line);
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = PyObject_RichCompare(__pyx_t_8, __pyx_int_300, Py_LT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      if (__pyx_t_10) {
      } else {
        __pyx_t_9 = __pyx_t_10;
        goto __pyx_L8_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":2046
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:             # <<<<<<<<<<<<<<
 *                     lines_temp = lines.copy()
 *                     # list of those lines without the line
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);

      /* "table_extraction/utils_table_extraction.pyx":2045
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \             # <<<<<<<<<<<<<<
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:
 *                     lines_temp = lines.copy()
 */
      __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_line_inside_box); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_13 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_11, function);
          __pyx_t_13 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_block_text, __pyx_v_line, __pyx_int_5};
        __pyx_t_12 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2045, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_12);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[4] = {__pyx_t_8, __pyx_v_block_text, __pyx_v_line, __pyx_int_5};
        __pyx_t_12 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2045, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_12);
      } else
      #endif
      {
        __pyx_t_14 = PyTuple_New(3+__pyx_t_13); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2045, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_block_text);
        __Pyx_GIVEREF(__pyx_v_block_text);
        PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_13, __pyx_v_block_text);
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_13, __pyx_v_line);
        __Pyx_INCREF(__pyx_int_5);
        __Pyx_GIVEREF(__pyx_int_5);
        PyTuple_SET_ITEM(__pyx_t_14, 2+__pyx_t_13, __pyx_int_5);
        __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_14, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2045, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      }
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 2045, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_15 = ((!__pyx_t_10) != 0);
      if (__pyx_t_15) {
      } else {
        __pyx_t_9 = __pyx_t_15;
        goto __pyx_L8_bool_binop_done;
      }

      /* "table_extraction/utils_table_extraction.pyx":2046
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:             # <<<<<<<<<<<<<<
 *                     lines_temp = lines.copy()
 *                     # list of those lines without the line
 */
      __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2046, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_distance_from_line_to_box); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2046, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_11 = NULL;
      __pyx_t_13 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
        __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_14);
        if (likely(__pyx_t_11)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_14, function);
          __pyx_t_13 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[4] = {__pyx_t_11, __pyx_v_block_text, __pyx_v_line, __pyx_n_s_bottom};
        __pyx_t_12 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2046, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_12);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[4] = {__pyx_t_11, __pyx_v_block_text, __pyx_v_line, __pyx_n_s_bottom};
        __pyx_t_12 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2046, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_GOTREF(__pyx_t_12);
      } else
      #endif
      {
        __pyx_t_8 = PyTuple_New(3+__pyx_t_13); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2046, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (__pyx_t_11) {
          __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_11); __pyx_t_11 = NULL;
        }
        __Pyx_INCREF(__pyx_v_block_text);
        __Pyx_GIVEREF(__pyx_v_block_text);
        PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_13, __pyx_v_block_text);
        __Pyx_INCREF(__pyx_v_line);
        __Pyx_GIVEREF(__pyx_v_line);
        PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_13, __pyx_v_line);
        __Pyx_INCREF(__pyx_n_s_bottom);
        __Pyx_GIVEREF(__pyx_n_s_bottom);
        PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_13, __pyx_n_s_bottom);
        __pyx_t_12 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_8, NULL); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2046, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      }
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_14 = PyObject_RichCompare(__pyx_t_12, __pyx_v_threshold_distance, Py_LT); __Pyx_XGOTREF(__pyx_t_14); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2046, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_14); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2046, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_9 = __pyx_t_15;
      __pyx_L8_bool_binop_done:;

      /* "table_extraction/utils_table_extraction.pyx":2045
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \             # <<<<<<<<<<<<<<
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:
 *                     lines_temp = lines.copy()
 */
      if (__pyx_t_9) {

        /* "table_extraction/utils_table_extraction.pyx":2047
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:
 *                     lines_temp = lines.copy()             # <<<<<<<<<<<<<<
 *                     # list of those lines without the line
 *                     lines_temp.remove(line)
 */
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_lines, __pyx_n_s_copy); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2047, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_8 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_12))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_12);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_12, function);
          }
        }
        __pyx_t_14 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_12, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_12);
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2047, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_XDECREF_SET(__pyx_v_lines_temp, __pyx_t_14);
        __pyx_t_14 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2049
 *                     lines_temp = lines.copy()
 *                     # list of those lines without the line
 *                     lines_temp.remove(line)             # <<<<<<<<<<<<<<
 * 
 *                     for line_checked in lines_temp:
 */
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_lines_temp, __pyx_n_s_remove); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2049, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_8 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_12))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_12);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_12, function);
          }
        }
        __pyx_t_14 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_12, __pyx_t_8, __pyx_v_line) : __Pyx_PyObject_CallOneArg(__pyx_t_12, __pyx_v_line);
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2049, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2051
 *                     lines_temp.remove(line)
 * 
 *                     for line_checked in lines_temp:             # <<<<<<<<<<<<<<
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 */
        if (likely(PyList_CheckExact(__pyx_v_lines_temp)) || PyTuple_CheckExact(__pyx_v_lines_temp)) {
          __pyx_t_14 = __pyx_v_lines_temp; __Pyx_INCREF(__pyx_t_14); __pyx_t_16 = 0;
          __pyx_t_17 = NULL;
        } else {
          __pyx_t_16 = -1; __pyx_t_14 = PyObject_GetIter(__pyx_v_lines_temp); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2051, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          __pyx_t_17 = Py_TYPE(__pyx_t_14)->tp_iternext; if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 2051, __pyx_L1_error)
        }
        for (;;) {
          if (likely(!__pyx_t_17)) {
            if (likely(PyList_CheckExact(__pyx_t_14))) {
              if (__pyx_t_16 >= PyList_GET_SIZE(__pyx_t_14)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_12 = PyList_GET_ITEM(__pyx_t_14, __pyx_t_16); __Pyx_INCREF(__pyx_t_12); __pyx_t_16++; if (unlikely(0 < 0)) __PYX_ERR(0, 2051, __pyx_L1_error)
              #else
              __pyx_t_12 = PySequence_ITEM(__pyx_t_14, __pyx_t_16); __pyx_t_16++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2051, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_12);
              #endif
            } else {
              if (__pyx_t_16 >= PyTuple_GET_SIZE(__pyx_t_14)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_12 = PyTuple_GET_ITEM(__pyx_t_14, __pyx_t_16); __Pyx_INCREF(__pyx_t_12); __pyx_t_16++; if (unlikely(0 < 0)) __PYX_ERR(0, 2051, __pyx_L1_error)
              #else
              __pyx_t_12 = PySequence_ITEM(__pyx_t_14, __pyx_t_16); __pyx_t_16++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2051, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_12);
              #endif
            }
          } else {
            __pyx_t_12 = __pyx_t_17(__pyx_t_14);
            if (unlikely(!__pyx_t_12)) {
              PyObject* exc_type = PyErr_Occurred();
              if (exc_type) {
                if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
                else __PYX_ERR(0, 2051, __pyx_L1_error)
              }
              break;
            }
            __Pyx_GOTREF(__pyx_t_12);
          }
          __Pyx_XDECREF_SET(__pyx_v_line_checked, __pyx_t_12);
          __pyx_t_12 = 0;

          /* "table_extraction/utils_table_extraction.pyx":2054
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \             # <<<<<<<<<<<<<<
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 */
          __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_v_line_checked, __pyx_n_s_orientation); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __pyx_t_15 = (__Pyx_PyString_Equals(__pyx_t_12, __pyx_n_s_h, Py_EQ)); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          if (__pyx_t_15) {
          } else {
            __pyx_t_9 = __pyx_t_15;
            goto __pyx_L15_bool_binop_done;
          }

          /* "table_extraction/utils_table_extraction.pyx":2055
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \
 *                                             and align_center(block_text, line_checked, threshold_deviation)\             # <<<<<<<<<<<<<<
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 *                             break
 */
          __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);

          /* "table_extraction/utils_table_extraction.pyx":2054
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \             # <<<<<<<<<<<<<<
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 */
          __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_width_line); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          __pyx_t_8 = NULL;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
            __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
            if (likely(__pyx_t_8)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
              __Pyx_INCREF(__pyx_t_8);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_11, function);
            }
          }
          __pyx_t_12 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_11, __pyx_t_8, __pyx_v_line_checked) : __Pyx_PyObject_CallOneArg(__pyx_t_11, __pyx_v_line_checked);
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = PyObject_RichCompare(__pyx_t_12, __pyx_int_300, Py_LT); __Pyx_XGOTREF(__pyx_t_11); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2054, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          if (__pyx_t_15) {
          } else {
            __pyx_t_9 = __pyx_t_15;
            goto __pyx_L15_bool_binop_done;
          }

          /* "table_extraction/utils_table_extraction.pyx":2055
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \
 *                                             and align_center(block_text, line_checked, threshold_deviation)\             # <<<<<<<<<<<<<<
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 *                             break
 */
          __pyx_t_11 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center(__pyx_v_align_center, __pyx_v_block_text, __pyx_v_line_checked, __pyx_v_threshold_deviation); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2055, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2055, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          if (__pyx_t_15) {
          } else {
            __pyx_t_9 = __pyx_t_15;
            goto __pyx_L15_bool_binop_done;
          }

          /* "table_extraction/utils_table_extraction.pyx":2056
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:             # <<<<<<<<<<<<<<
 *                             break
 *                         # if the block text is nearly a vertical line, we do not check underline anymore
 */
          __Pyx_GetModuleGlobalName(__pyx_t_12, __pyx_n_s_Utils); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2056, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_12, __pyx_n_s_distance_from_line_to_box); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2056, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          __pyx_t_12 = NULL;
          __pyx_t_13 = 0;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
            __pyx_t_12 = PyMethod_GET_SELF(__pyx_t_8);
            if (likely(__pyx_t_12)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
              __Pyx_INCREF(__pyx_t_12);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_8, function);
              __pyx_t_13 = 1;
            }
          }
          #if CYTHON_FAST_PYCALL
          if (PyFunction_Check(__pyx_t_8)) {
            PyObject *__pyx_temp[4] = {__pyx_t_12, __pyx_v_block_text, __pyx_v_line_checked, __pyx_n_s_top};
            __pyx_t_11 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2056, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
            __Pyx_GOTREF(__pyx_t_11);
          } else
          #endif
          #if CYTHON_FAST_PYCCALL
          if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
            PyObject *__pyx_temp[4] = {__pyx_t_12, __pyx_v_block_text, __pyx_v_line_checked, __pyx_n_s_top};
            __pyx_t_11 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_13, 3+__pyx_t_13); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2056, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_12); __pyx_t_12 = 0;
            __Pyx_GOTREF(__pyx_t_11);
          } else
          #endif
          {
            __pyx_t_18 = PyTuple_New(3+__pyx_t_13); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2056, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_18);
            if (__pyx_t_12) {
              __Pyx_GIVEREF(__pyx_t_12); PyTuple_SET_ITEM(__pyx_t_18, 0, __pyx_t_12); __pyx_t_12 = NULL;
            }
            __Pyx_INCREF(__pyx_v_block_text);
            __Pyx_GIVEREF(__pyx_v_block_text);
            PyTuple_SET_ITEM(__pyx_t_18, 0+__pyx_t_13, __pyx_v_block_text);
            __Pyx_INCREF(__pyx_v_line_checked);
            __Pyx_GIVEREF(__pyx_v_line_checked);
            PyTuple_SET_ITEM(__pyx_t_18, 1+__pyx_t_13, __pyx_v_line_checked);
            __Pyx_INCREF(__pyx_n_s_top);
            __Pyx_GIVEREF(__pyx_n_s_top);
            PyTuple_SET_ITEM(__pyx_t_18, 2+__pyx_t_13, __pyx_n_s_top);
            __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_18, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2056, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_11);
            __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
          }
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          __pyx_t_8 = PyObject_RichCompare(__pyx_t_11, __pyx_v_threshold_distance, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2056, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2056, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          __pyx_t_9 = __pyx_t_15;
          __pyx_L15_bool_binop_done:;

          /* "table_extraction/utils_table_extraction.pyx":2054
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \             # <<<<<<<<<<<<<<
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 */
          if (__pyx_t_9) {

            /* "table_extraction/utils_table_extraction.pyx":2057
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 *                             break             # <<<<<<<<<<<<<<
 *                         # if the block text is nearly a vertical line, we do not check underline anymore
 *                         if line_checked.orientation == 'v' and Utils.distance_from_line_to_line(line, line_checked) < threshold_distance:
 */
            goto __pyx_L13_break;

            /* "table_extraction/utils_table_extraction.pyx":2054
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 *                         if line_checked.orientation == 'h' and Utils.width_line(line_checked) < 300 \             # <<<<<<<<<<<<<<
 *                                             and align_center(block_text, line_checked, threshold_deviation)\
 *                                             and Utils.distance_from_line_to_box(block_text, line_checked, "top") < threshold_distance:
 */
          }

          /* "table_extraction/utils_table_extraction.pyx":2059
 *                             break
 *                         # if the block text is nearly a vertical line, we do not check underline anymore
 *                         if line_checked.orientation == 'v' and Utils.distance_from_line_to_line(line, line_checked) < threshold_distance:             # <<<<<<<<<<<<<<
 *                             break
 *                     else:
 */
          __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_line_checked, __pyx_n_s_orientation); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __pyx_t_15 = (__Pyx_PyString_Equals(__pyx_t_8, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          if (__pyx_t_15) {
          } else {
            __pyx_t_9 = __pyx_t_15;
            goto __pyx_L20_bool_binop_done;
          }
          __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_distance_from_line_to_line); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_18);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = NULL;
          __pyx_t_13 = 0;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_18))) {
            __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_18);
            if (likely(__pyx_t_11)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_18);
              __Pyx_INCREF(__pyx_t_11);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_18, function);
              __pyx_t_13 = 1;
            }
          }
          #if CYTHON_FAST_PYCALL
          if (PyFunction_Check(__pyx_t_18)) {
            PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_line, __pyx_v_line_checked};
            __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_18, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2059, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_GOTREF(__pyx_t_8);
          } else
          #endif
          #if CYTHON_FAST_PYCCALL
          if (__Pyx_PyFastCFunction_Check(__pyx_t_18)) {
            PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_line, __pyx_v_line_checked};
            __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_18, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2059, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_GOTREF(__pyx_t_8);
          } else
          #endif
          {
            __pyx_t_12 = PyTuple_New(2+__pyx_t_13); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2059, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_12);
            if (__pyx_t_11) {
              __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_11); __pyx_t_11 = NULL;
            }
            __Pyx_INCREF(__pyx_v_line);
            __Pyx_GIVEREF(__pyx_v_line);
            PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_13, __pyx_v_line);
            __Pyx_INCREF(__pyx_v_line_checked);
            __Pyx_GIVEREF(__pyx_v_line_checked);
            PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_13, __pyx_v_line_checked);
            __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_18, __pyx_t_12, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2059, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_8);
            __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          }
          __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
          __pyx_t_18 = PyObject_RichCompare(__pyx_t_8, __pyx_v_threshold_distance, Py_LT); __Pyx_XGOTREF(__pyx_t_18); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_t_18); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2059, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
          __pyx_t_9 = __pyx_t_15;
          __pyx_L20_bool_binop_done:;
          if (__pyx_t_9) {

            /* "table_extraction/utils_table_extraction.pyx":2060
 *                         # if the block text is nearly a vertical line, we do not check underline anymore
 *                         if line_checked.orientation == 'v' and Utils.distance_from_line_to_line(line, line_checked) < threshold_distance:
 *                             break             # <<<<<<<<<<<<<<
 *                     else:
 *                         # check the line whether or not is underline
 */
            goto __pyx_L13_break;

            /* "table_extraction/utils_table_extraction.pyx":2059
 *                             break
 *                         # if the block text is nearly a vertical line, we do not check underline anymore
 *                         if line_checked.orientation == 'v' and Utils.distance_from_line_to_line(line, line_checked) < threshold_distance:             # <<<<<<<<<<<<<<
 *                             break
 *                     else:
 */
          }

          /* "table_extraction/utils_table_extraction.pyx":2051
 *                     lines_temp.remove(line)
 * 
 *                     for line_checked in lines_temp:             # <<<<<<<<<<<<<<
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 */
        }
        /*else*/ {

          /* "table_extraction/utils_table_extraction.pyx":2063
 *                     else:
 *                         # check the line whether or not is underline
 *                         if align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *                             underlines.append(line)
 *                             x, y, w, h = block_texts[idx]
 */
          __pyx_t_18 = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_underline_text_align_center(__pyx_v_align_center, __pyx_v_block_text, __pyx_v_line, __pyx_v_threshold_deviation); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2063, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_18);
          __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_18); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 2063, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
          if (__pyx_t_9) {

            /* "table_extraction/utils_table_extraction.pyx":2064
 *                         # check the line whether or not is underline
 *                         if align_center(block_text, line, threshold_deviation):
 *                             underlines.append(line)             # <<<<<<<<<<<<<<
 *                             x, y, w, h = block_texts[idx]
 *                             x = min(x, line.start_point[0])
 */
            __pyx_t_19 = __Pyx_PyList_Append(__pyx_v_underlines, __pyx_v_line); if (unlikely(__pyx_t_19 == ((int)-1))) __PYX_ERR(0, 2064, __pyx_L1_error)

            /* "table_extraction/utils_table_extraction.pyx":2065
 *                         if align_center(block_text, line, threshold_deviation):
 *                             underlines.append(line)
 *                             x, y, w, h = block_texts[idx]             # <<<<<<<<<<<<<<
 *                             x = min(x, line.start_point[0])
 *                             w = max(w, Utils.width_line(line))
 */
            __pyx_t_18 = __Pyx_PyObject_GetItem(__pyx_v_block_texts, __pyx_v_idx); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2065, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_18);
            if ((likely(PyTuple_CheckExact(__pyx_t_18))) || (PyList_CheckExact(__pyx_t_18))) {
              PyObject* sequence = __pyx_t_18;
              Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
              if (unlikely(size != 4)) {
                if (size > 4) __Pyx_RaiseTooManyValuesError(4);
                else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
                __PYX_ERR(0, 2065, __pyx_L1_error)
              }
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              if (likely(PyTuple_CheckExact(sequence))) {
                __pyx_t_8 = PyTuple_GET_ITEM(sequence, 0); 
                __pyx_t_12 = PyTuple_GET_ITEM(sequence, 1); 
                __pyx_t_11 = PyTuple_GET_ITEM(sequence, 2); 
                __pyx_t_20 = PyTuple_GET_ITEM(sequence, 3); 
              } else {
                __pyx_t_8 = PyList_GET_ITEM(sequence, 0); 
                __pyx_t_12 = PyList_GET_ITEM(sequence, 1); 
                __pyx_t_11 = PyList_GET_ITEM(sequence, 2); 
                __pyx_t_20 = PyList_GET_ITEM(sequence, 3); 
              }
              __Pyx_INCREF(__pyx_t_8);
              __Pyx_INCREF(__pyx_t_12);
              __Pyx_INCREF(__pyx_t_11);
              __Pyx_INCREF(__pyx_t_20);
              #else
              {
                Py_ssize_t i;
                PyObject** temps[4] = {&__pyx_t_8,&__pyx_t_12,&__pyx_t_11,&__pyx_t_20};
                for (i=0; i < 4; i++) {
                  PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2065, __pyx_L1_error)
                  __Pyx_GOTREF(item);
                  *(temps[i]) = item;
                }
              }
              #endif
              __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
            } else {
              Py_ssize_t index = -1;
              PyObject** temps[4] = {&__pyx_t_8,&__pyx_t_12,&__pyx_t_11,&__pyx_t_20};
              __pyx_t_21 = PyObject_GetIter(__pyx_t_18); if (unlikely(!__pyx_t_21)) __PYX_ERR(0, 2065, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_21);
              __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
              __pyx_t_22 = Py_TYPE(__pyx_t_21)->tp_iternext;
              for (index=0; index < 4; index++) {
                PyObject* item = __pyx_t_22(__pyx_t_21); if (unlikely(!item)) goto __pyx_L24_unpacking_failed;
                __Pyx_GOTREF(item);
                *(temps[index]) = item;
              }
              if (__Pyx_IternextUnpackEndCheck(__pyx_t_22(__pyx_t_21), 4) < 0) __PYX_ERR(0, 2065, __pyx_L1_error)
              __pyx_t_22 = NULL;
              __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
              goto __pyx_L25_unpacking_done;
              __pyx_L24_unpacking_failed:;
              __Pyx_DECREF(__pyx_t_21); __pyx_t_21 = 0;
              __pyx_t_22 = NULL;
              if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
              __PYX_ERR(0, 2065, __pyx_L1_error)
              __pyx_L25_unpacking_done:;
            }
            __Pyx_XDECREF_SET(__pyx_v_x, __pyx_t_8);
            __pyx_t_8 = 0;
            __Pyx_XDECREF_SET(__pyx_v_y, __pyx_t_12);
            __pyx_t_12 = 0;
            __Pyx_XDECREF_SET(__pyx_v_w, __pyx_t_11);
            __pyx_t_11 = 0;
            __Pyx_XDECREF_SET(__pyx_v_h, __pyx_t_20);
            __pyx_t_20 = 0;

            /* "table_extraction/utils_table_extraction.pyx":2066
 *                             underlines.append(line)
 *                             x, y, w, h = block_texts[idx]
 *                             x = min(x, line.start_point[0])             # <<<<<<<<<<<<<<
 *                             w = max(w, Utils.width_line(line))
 *                             block_texts[idx] = (x, y, w, h)
 */
            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2066, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_18);
            __pyx_t_20 = __Pyx_GetItemInt(__pyx_t_18, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 2066, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_20);
            __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
            __Pyx_INCREF(__pyx_v_x);
            __pyx_t_18 = __pyx_v_x;
            __pyx_t_12 = PyObject_RichCompare(__pyx_t_20, __pyx_t_18, Py_LT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2066, __pyx_L1_error)
            __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 2066, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
            if (__pyx_t_9) {
              __Pyx_INCREF(__pyx_t_20);
              __pyx_t_11 = __pyx_t_20;
            } else {
              __Pyx_INCREF(__pyx_t_18);
              __pyx_t_11 = __pyx_t_18;
            }
            __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
            __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
            __pyx_t_20 = __pyx_t_11;
            __Pyx_INCREF(__pyx_t_20);
            __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_DECREF_SET(__pyx_v_x, __pyx_t_20);
            __pyx_t_20 = 0;

            /* "table_extraction/utils_table_extraction.pyx":2067
 *                             x, y, w, h = block_texts[idx]
 *                             x = min(x, line.start_point[0])
 *                             w = max(w, Utils.width_line(line))             # <<<<<<<<<<<<<<
 *                             block_texts[idx] = (x, y, w, h)
 * 
 */
            __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2067, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_11);
            __pyx_t_18 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_width_line); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2067, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_18);
            __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
            __pyx_t_11 = NULL;
            if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_18))) {
              __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_18);
              if (likely(__pyx_t_11)) {
                PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_18);
                __Pyx_INCREF(__pyx_t_11);
                __Pyx_INCREF(function);
                __Pyx_DECREF_SET(__pyx_t_18, function);
              }
            }
            __pyx_t_20 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_18, __pyx_t_11, __pyx_v_line) : __Pyx_PyObject_CallOneArg(__pyx_t_18, __pyx_v_line);
            __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
            if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 2067, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_20);
            __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
            __Pyx_INCREF(__pyx_v_w);
            __pyx_t_18 = __pyx_v_w;
            __pyx_t_12 = PyObject_RichCompare(__pyx_t_20, __pyx_t_18, Py_GT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2067, __pyx_L1_error)
            __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 2067, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
            if (__pyx_t_9) {
              __Pyx_INCREF(__pyx_t_20);
              __pyx_t_11 = __pyx_t_20;
            } else {
              __Pyx_INCREF(__pyx_t_18);
              __pyx_t_11 = __pyx_t_18;
            }
            __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
            __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;
            __pyx_t_20 = __pyx_t_11;
            __Pyx_INCREF(__pyx_t_20);
            __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_DECREF_SET(__pyx_v_w, __pyx_t_20);
            __pyx_t_20 = 0;

            /* "table_extraction/utils_table_extraction.pyx":2068
 *                             x = min(x, line.start_point[0])
 *                             w = max(w, Utils.width_line(line))
 *                             block_texts[idx] = (x, y, w, h)             # <<<<<<<<<<<<<<
 * 
 *         for underline in underlines:
 */
            __pyx_t_20 = PyTuple_New(4); if (unlikely(!__pyx_t_20)) __PYX_ERR(0, 2068, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_20);
            __Pyx_INCREF(__pyx_v_x);
            __Pyx_GIVEREF(__pyx_v_x);
            PyTuple_SET_ITEM(__pyx_t_20, 0, __pyx_v_x);
            __Pyx_INCREF(__pyx_v_y);
            __Pyx_GIVEREF(__pyx_v_y);
            PyTuple_SET_ITEM(__pyx_t_20, 1, __pyx_v_y);
            __Pyx_INCREF(__pyx_v_w);
            __Pyx_GIVEREF(__pyx_v_w);
            PyTuple_SET_ITEM(__pyx_t_20, 2, __pyx_v_w);
            __Pyx_INCREF(__pyx_v_h);
            __Pyx_GIVEREF(__pyx_v_h);
            PyTuple_SET_ITEM(__pyx_t_20, 3, __pyx_v_h);
            if (unlikely(PyObject_SetItem(__pyx_v_block_texts, __pyx_v_idx, __pyx_t_20) < 0)) __PYX_ERR(0, 2068, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_20); __pyx_t_20 = 0;

            /* "table_extraction/utils_table_extraction.pyx":2063
 *                     else:
 *                         # check the line whether or not is underline
 *                         if align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *                             underlines.append(line)
 *                             x, y, w, h = block_texts[idx]
 */
          }
        }

        /* "table_extraction/utils_table_extraction.pyx":2051
 *                     lines_temp.remove(line)
 * 
 *                     for line_checked in lines_temp:             # <<<<<<<<<<<<<<
 *                         # if the block text has another line in above and center alignment,
 *                         # we do not check underline anymore
 */
        __pyx_L13_break:;
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2045
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 *                 if line.orientation == 'h' and Utils.width_line(line) < 300 and not Utils.line_inside_box(block_text, line, 5) \             # <<<<<<<<<<<<<<
 *                                            and Utils.distance_from_line_to_box(block_text, line, "bottom") < threshold_distance:
 *                     lines_temp = lines.copy()
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2042
 *         underlines = []
 *         for idx, block_text in enumerate(block_texts):
 *             for line in lines:             # <<<<<<<<<<<<<<
 *                 # only check short line (<300)
 *                 # only check the line is near the block text and under the block text
 */
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2041
 * 
 *         underlines = []
 *         for idx, block_text in enumerate(block_texts):             # <<<<<<<<<<<<<<
 *             for line in lines:
 *                 # only check short line (<300)
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2070
 *                             block_texts[idx] = (x, y, w, h)
 * 
 *         for underline in underlines:             # <<<<<<<<<<<<<<
 *             if underline in lines:
 *                 lines.remove(underline)
 */
  __pyx_t_1 = __pyx_v_underlines; __Pyx_INCREF(__pyx_t_1); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_3); __Pyx_INCREF(__pyx_t_2); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2070, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2070, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_underline, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2071
 * 
 *         for underline in underlines:
 *             if underline in lines:             # <<<<<<<<<<<<<<
 *                 lines.remove(underline)
 *         return lines, block_texts
 */
    __pyx_t_9 = (__Pyx_PySequence_ContainsTF(__pyx_v_underline, __pyx_v_lines, Py_EQ)); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 2071, __pyx_L1_error)
    __pyx_t_15 = (__pyx_t_9 != 0);
    if (__pyx_t_15) {

      /* "table_extraction/utils_table_extraction.pyx":2072
 *         for underline in underlines:
 *             if underline in lines:
 *                 lines.remove(underline)             # <<<<<<<<<<<<<<
 *         return lines, block_texts
 * 
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_lines, __pyx_n_s_remove); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2072, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_14 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_14)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_14);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
        }
      }
      __pyx_t_2 = (__pyx_t_14) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_14, __pyx_v_underline) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_underline);
      __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2072, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2071
 * 
 *         for underline in underlines:
 *             if underline in lines:             # <<<<<<<<<<<<<<
 *                 lines.remove(underline)
 *         return lines, block_texts
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2070
 *                             block_texts[idx] = (x, y, w, h)
 * 
 *         for underline in underlines:             # <<<<<<<<<<<<<<
 *             if underline in lines:
 *                 lines.remove(underline)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2073
 *             if underline in lines:
 *                 lines.remove(underline)
 *         return lines, block_texts             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2073, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_lines);
  __Pyx_GIVEREF(__pyx_v_lines);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_lines);
  __Pyx_INCREF(__pyx_v_block_texts);
  __Pyx_GIVEREF(__pyx_v_block_texts);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_block_texts);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2012
 * 
 *     @staticmethod
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_18);
  __Pyx_XDECREF(__pyx_t_20);
  __Pyx_XDECREF(__pyx_t_21);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_underline_text", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_align_center);
  __Pyx_XDECREF(__pyx_v_underlines);
  __Pyx_XDECREF(__pyx_v_idx);
  __Pyx_XDECREF(__pyx_v_block_text);
  __Pyx_XDECREF(__pyx_v_line);
  __Pyx_XDECREF(__pyx_v_lines_temp);
  __Pyx_XDECREF(__pyx_v_line_checked);
  __Pyx_XDECREF(__pyx_v_x);
  __Pyx_XDECREF(__pyx_v_y);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_underline);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2076
 * 
 *     @staticmethod
 *     def remove_invalid_signed(h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: horizontal lines
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_245remove_invalid_signed(PyObject *__pyx_self, PyObject *__pyx_v_h_lines); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_244remove_invalid_signed[] = "\n        :param h_lines: horizontal lines\n        :return: remove small horizontal line if it do not connect with any vertical line\n                 and has the same width and y_coordination with other small line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_245remove_invalid_signed = {"remove_invalid_signed", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_245remove_invalid_signed, METH_O, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_244remove_invalid_signed};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_245remove_invalid_signed(PyObject *__pyx_self, PyObject *__pyx_v_h_lines) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_invalid_signed (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_244remove_invalid_signed(__pyx_self, ((PyObject *)__pyx_v_h_lines));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2083
 *         """
 * 
 *         def same_horizontal_sign(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_1same_horizontal_sign(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_1same_horizontal_sign = {"same_horizontal_sign", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_1same_horizontal_sign, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_1same_horizontal_sign(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_line = 0;
  PyObject *__pyx_v_b_line = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("same_horizontal_sign (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_line,&__pyx_n_s_b_line,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("same_horizontal_sign", 0, 2, 3, 1); __PYX_ERR(0, 2083, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "same_horizontal_sign") < 0)) __PYX_ERR(0, 2083, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_line = values[0];
    __pyx_v_b_line = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("same_horizontal_sign", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2083, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_invalid_signed.same_horizontal_sign", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_same_horizontal_sign(__pyx_self, __pyx_v_a_line, __pyx_v_b_line, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_same_horizontal_sign(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_line, PyObject *__pyx_v_b_line, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("same_horizontal_sign", 0);

  /* "table_extraction/utils_table_extraction.pyx":2084
 * 
 *         def same_horizontal_sign(a_line, b_line, threshold=5):
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold             # <<<<<<<<<<<<<<
 * 
 *         invalid_lines = []
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_b_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_2, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_3, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2084, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_width_line); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_v_a_line) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_a_line);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_width_line); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
    }
  }
  __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_4, __pyx_v_b_line) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_b_line);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyNumber_Absolute(__pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2084, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_6);
  __pyx_t_1 = __pyx_t_6;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2083
 *         """
 * 
 *         def same_horizontal_sign(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_invalid_signed.same_horizontal_sign", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2076
 * 
 *     @staticmethod
 *     def remove_invalid_signed(h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: horizontal lines
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_244remove_invalid_signed(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_h_lines) {
  PyObject *__pyx_v_same_horizontal_sign = 0;
  PyObject *__pyx_v_invalid_lines = NULL;
  PyObject *__pyx_v_h_line = NULL;
  PyObject *__pyx_v_h_lines_temp = NULL;
  PyObject *__pyx_v_h_line_temp = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("remove_invalid_signed", 0);

  /* "table_extraction/utils_table_extraction.pyx":2083
 *         """
 * 
 *         def same_horizontal_sign(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold
 * 
 */
  __pyx_t_1 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21remove_invalid_signed_1same_horizontal_sign, 0, __pyx_n_s_Utils_remove_invalid_signed_loca, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__19)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2083, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_1, __pyx_tuple__20);
  __pyx_v_same_horizontal_sign = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2086
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold
 * 
 *         invalid_lines = []             # <<<<<<<<<<<<<<
 * 
 *         for h_line in h_lines:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2086, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_invalid_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2088
 *         invalid_lines = []
 * 
 *         for h_line in h_lines:             # <<<<<<<<<<<<<<
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:
 *                     h_lines_temp = h_lines.copy()
 */
  if (likely(PyList_CheckExact(__pyx_v_h_lines)) || PyTuple_CheckExact(__pyx_v_h_lines)) {
    __pyx_t_1 = __pyx_v_h_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_h_lines); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2088, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2088, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2088, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2088, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2088, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2088, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2089
 * 
 *         for h_line in h_lines:
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:             # <<<<<<<<<<<<<<
 *                     h_lines_temp = h_lines.copy()
 *                     h_lines_temp.remove(h_line)
 */
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_width_line); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_6, __pyx_v_h_line) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_h_line);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, __pyx_int_100, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_5 = __pyx_t_8;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_start_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_7, Py_False, Py_EQ); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_8) {
    } else {
      __pyx_t_5 = __pyx_t_8;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_line, __pyx_n_s_connect_at_end_point); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = PyObject_RichCompare(__pyx_t_4, Py_False, Py_EQ); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 2089, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_5 = __pyx_t_8;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":2090
 *         for h_line in h_lines:
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:
 *                     h_lines_temp = h_lines.copy()             # <<<<<<<<<<<<<<
 *                     h_lines_temp.remove(h_line)
 *                     for h_line_temp in h_lines_temp:
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_lines, __pyx_n_s_copy); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2090, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_7 = (__pyx_t_6) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_6) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2090, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_XDECREF_SET(__pyx_v_h_lines_temp, __pyx_t_7);
      __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2091
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:
 *                     h_lines_temp = h_lines.copy()
 *                     h_lines_temp.remove(h_line)             # <<<<<<<<<<<<<<
 *                     for h_line_temp in h_lines_temp:
 *                         if same_horizontal_sign(h_line, h_line_temp):
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_lines_temp, __pyx_n_s_remove); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2091, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_7 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_6, __pyx_v_h_line) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_h_line);
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2091, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2092
 *                     h_lines_temp = h_lines.copy()
 *                     h_lines_temp.remove(h_line)
 *                     for h_line_temp in h_lines_temp:             # <<<<<<<<<<<<<<
 *                         if same_horizontal_sign(h_line, h_line_temp):
 *                             invalid_lines.append(h_line)
 */
      if (likely(PyList_CheckExact(__pyx_v_h_lines_temp)) || PyTuple_CheckExact(__pyx_v_h_lines_temp)) {
        __pyx_t_7 = __pyx_v_h_lines_temp; __Pyx_INCREF(__pyx_t_7); __pyx_t_9 = 0;
        __pyx_t_10 = NULL;
      } else {
        __pyx_t_9 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_v_h_lines_temp); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2092, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_10 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2092, __pyx_L1_error)
      }
      for (;;) {
        if (likely(!__pyx_t_10)) {
          if (likely(PyList_CheckExact(__pyx_t_7))) {
            if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_4 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_9); __Pyx_INCREF(__pyx_t_4); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2092, __pyx_L1_error)
            #else
            __pyx_t_4 = PySequence_ITEM(__pyx_t_7, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2092, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_4);
            #endif
          } else {
            if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_9); __Pyx_INCREF(__pyx_t_4); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2092, __pyx_L1_error)
            #else
            __pyx_t_4 = PySequence_ITEM(__pyx_t_7, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2092, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_4);
            #endif
          }
        } else {
          __pyx_t_4 = __pyx_t_10(__pyx_t_7);
          if (unlikely(!__pyx_t_4)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 2092, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_4);
        }
        __Pyx_XDECREF_SET(__pyx_v_h_line_temp, __pyx_t_4);
        __pyx_t_4 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2093
 *                     h_lines_temp.remove(h_line)
 *                     for h_line_temp in h_lines_temp:
 *                         if same_horizontal_sign(h_line, h_line_temp):             # <<<<<<<<<<<<<<
 *                             invalid_lines.append(h_line)
 *                             invalid_lines.append(h_line_temp)
 */
        __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2093, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_INCREF(__pyx_v_h_line);
        __Pyx_GIVEREF(__pyx_v_h_line);
        PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_h_line);
        __Pyx_INCREF(__pyx_v_h_line_temp);
        __Pyx_GIVEREF(__pyx_v_h_line_temp);
        PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_h_line_temp);
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_v_same_horizontal_sign, __pyx_t_4, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2093, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2093, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        if (__pyx_t_5) {

          /* "table_extraction/utils_table_extraction.pyx":2094
 *                     for h_line_temp in h_lines_temp:
 *                         if same_horizontal_sign(h_line, h_line_temp):
 *                             invalid_lines.append(h_line)             # <<<<<<<<<<<<<<
 *                             invalid_lines.append(h_line_temp)
 * 
 */
          __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_invalid_lines, __pyx_v_h_line); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 2094, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":2095
 *                         if same_horizontal_sign(h_line, h_line_temp):
 *                             invalid_lines.append(h_line)
 *                             invalid_lines.append(h_line_temp)             # <<<<<<<<<<<<<<
 * 
 *         for h_line in invalid_lines:
 */
          __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_invalid_lines, __pyx_v_h_line_temp); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 2095, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":2093
 *                     h_lines_temp.remove(h_line)
 *                     for h_line_temp in h_lines_temp:
 *                         if same_horizontal_sign(h_line, h_line_temp):             # <<<<<<<<<<<<<<
 *                             invalid_lines.append(h_line)
 *                             invalid_lines.append(h_line_temp)
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":2092
 *                     h_lines_temp = h_lines.copy()
 *                     h_lines_temp.remove(h_line)
 *                     for h_line_temp in h_lines_temp:             # <<<<<<<<<<<<<<
 *                         if same_horizontal_sign(h_line, h_line_temp):
 *                             invalid_lines.append(h_line)
 */
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2089
 * 
 *         for h_line in h_lines:
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:             # <<<<<<<<<<<<<<
 *                     h_lines_temp = h_lines.copy()
 *                     h_lines_temp.remove(h_line)
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2088
 *         invalid_lines = []
 * 
 *         for h_line in h_lines:             # <<<<<<<<<<<<<<
 *             if Utils.width_line(h_line) < 100 and h_line.connect_at_start_point == False and h_line.connect_at_end_point == False:
 *                     h_lines_temp = h_lines.copy()
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2097
 *                             invalid_lines.append(h_line_temp)
 * 
 *         for h_line in invalid_lines:             # <<<<<<<<<<<<<<
 *             if h_line in h_lines:
 *                 h_lines.remove(h_line)
 */
  __pyx_t_1 = __pyx_v_invalid_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_7 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_7); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2097, __pyx_L1_error)
    #else
    __pyx_t_7 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2097, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_h_line, __pyx_t_7);
    __pyx_t_7 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2098
 * 
 *         for h_line in invalid_lines:
 *             if h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 h_lines.remove(h_line)
 * 
 */
    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_h_line, __pyx_v_h_lines, Py_EQ)); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2098, __pyx_L1_error)
    __pyx_t_8 = (__pyx_t_5 != 0);
    if (__pyx_t_8) {

      /* "table_extraction/utils_table_extraction.pyx":2099
 *         for h_line in invalid_lines:
 *             if h_line in h_lines:
 *                 h_lines.remove(h_line)             # <<<<<<<<<<<<<<
 * 
 *         return h_lines
 */
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_h_lines, __pyx_n_s_remove); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2099, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_4)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_4);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
        }
      }
      __pyx_t_7 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_4, __pyx_v_h_line) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_h_line);
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2099, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2098
 * 
 *         for h_line in invalid_lines:
 *             if h_line in h_lines:             # <<<<<<<<<<<<<<
 *                 h_lines.remove(h_line)
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2097
 *                             invalid_lines.append(h_line_temp)
 * 
 *         for h_line in invalid_lines:             # <<<<<<<<<<<<<<
 *             if h_line in h_lines:
 *                 h_lines.remove(h_line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2101
 *                 h_lines.remove(h_line)
 * 
 *         return h_lines             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_h_lines);
  __pyx_r = __pyx_v_h_lines;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2076
 * 
 *     @staticmethod
 *     def remove_invalid_signed(h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: horizontal lines
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_invalid_signed", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_same_horizontal_sign);
  __Pyx_XDECREF(__pyx_v_invalid_lines);
  __Pyx_XDECREF(__pyx_v_h_line);
  __Pyx_XDECREF(__pyx_v_h_lines_temp);
  __Pyx_XDECREF(__pyx_v_h_line_temp);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2104
 * 
 *     @staticmethod
 *     def merge_overlap_boxes(boxes, width=2, height=2):             # <<<<<<<<<<<<<<
 *         """
 *         :param boxes:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_247merge_overlap_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_246merge_overlap_boxes[] = "\n        :param boxes:\n        :param width:\n        :param height:\n        :return: the list of boxes.\n                Two boxes will be merged if the overlap squared of them is greater than width and height\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_247merge_overlap_boxes = {"merge_overlap_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_247merge_overlap_boxes, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_246merge_overlap_boxes};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_247merge_overlap_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_boxes = 0;
  PyObject *__pyx_v_width = 0;
  PyObject *__pyx_v_height = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_overlap_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_boxes,&__pyx_n_s_width,&__pyx_n_s_height,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject *)__pyx_int_2));
    values[2] = ((PyObject *)((PyObject *)__pyx_int_2));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_boxes)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_width);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_height);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "merge_overlap_boxes") < 0)) __PYX_ERR(0, 2104, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_boxes = values[0];
    __pyx_v_width = values[1];
    __pyx_v_height = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("merge_overlap_boxes", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2104, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_overlap_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_246merge_overlap_boxes(__pyx_self, __pyx_v_boxes, __pyx_v_width, __pyx_v_height);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_246merge_overlap_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_boxes, PyObject *__pyx_v_width, PyObject *__pyx_v_height) {
  PyObject *__pyx_v_extend_boxes = NULL;
  Py_ssize_t __pyx_v_i;
  PyObject *__pyx_v_new_box = NULL;
  Py_ssize_t __pyx_v_j;
  PyObject *__pyx_v_b_rect = NULL;
  PyObject *__pyx_v_temp_box = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  Py_ssize_t __pyx_t_3;
  Py_ssize_t __pyx_t_4;
  Py_ssize_t __pyx_t_5;
  Py_ssize_t __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("merge_overlap_boxes", 0);

  /* "table_extraction/utils_table_extraction.pyx":2112
 *                 Two boxes will be merged if the overlap squared of them is greater than width and height
 *         """
 *         extend_boxes = []             # <<<<<<<<<<<<<<
 * 
 *         for i in range(len(boxes) - 1):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2112, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_extend_boxes = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2114
 *         extend_boxes = []
 * 
 *         for i in range(len(boxes) - 1):             # <<<<<<<<<<<<<<
 *             new_box = boxes[i]
 *             for j in range(len(boxes) - 1):
 */
  __pyx_t_2 = PyObject_Length(__pyx_v_boxes); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2114, __pyx_L1_error)
  __pyx_t_3 = (__pyx_t_2 - 1);
  __pyx_t_2 = __pyx_t_3;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_2; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "table_extraction/utils_table_extraction.pyx":2115
 * 
 *         for i in range(len(boxes) - 1):
 *             new_box = boxes[i]             # <<<<<<<<<<<<<<
 *             for j in range(len(boxes) - 1):
 *                 b_rect = boxes[j]
 */
    __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_boxes, __pyx_v_i, Py_ssize_t, 1, PyInt_FromSsize_t, 0, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2115, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_XDECREF_SET(__pyx_v_new_box, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2116
 *         for i in range(len(boxes) - 1):
 *             new_box = boxes[i]
 *             for j in range(len(boxes) - 1):             # <<<<<<<<<<<<<<
 *                 b_rect = boxes[j]
 *                 if Utils.rect_overlap_rect_with_width_height(new_box, b_rect, width, height):
 */
    __pyx_t_5 = PyObject_Length(__pyx_v_boxes); if (unlikely(__pyx_t_5 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2116, __pyx_L1_error)
    __pyx_t_6 = (__pyx_t_5 - 1);
    __pyx_t_5 = __pyx_t_6;
    for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_5; __pyx_t_7+=1) {
      __pyx_v_j = __pyx_t_7;

      /* "table_extraction/utils_table_extraction.pyx":2117
 *             new_box = boxes[i]
 *             for j in range(len(boxes) - 1):
 *                 b_rect = boxes[j]             # <<<<<<<<<<<<<<
 *                 if Utils.rect_overlap_rect_with_width_height(new_box, b_rect, width, height):
 *                     # merge 2 overlaped boxes
 */
      __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_boxes, __pyx_v_j, Py_ssize_t, 1, PyInt_FromSsize_t, 0, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2117, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_XDECREF_SET(__pyx_v_b_rect, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2118
 *             for j in range(len(boxes) - 1):
 *                 b_rect = boxes[j]
 *                 if Utils.rect_overlap_rect_with_width_height(new_box, b_rect, width, height):             # <<<<<<<<<<<<<<
 *                     # merge 2 overlaped boxes
 *                     temp_box = Utils.bounding_rect([new_box, b_rect])
 */
      __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_Utils); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2118, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_rect_overlap_rect_with_width_hei); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2118, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = NULL;
      __pyx_t_10 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
          __pyx_t_10 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[5] = {__pyx_t_8, __pyx_v_new_box, __pyx_v_b_rect, __pyx_v_width, __pyx_v_height};
        __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2118, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
        PyObject *__pyx_temp[5] = {__pyx_t_8, __pyx_v_new_box, __pyx_v_b_rect, __pyx_v_width, __pyx_v_height};
        __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_10, 4+__pyx_t_10); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2118, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_GOTREF(__pyx_t_1);
      } else
      #endif
      {
        __pyx_t_11 = PyTuple_New(4+__pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2118, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (__pyx_t_8) {
          __Pyx_GIVEREF(__pyx_t_8); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_8); __pyx_t_8 = NULL;
        }
        __Pyx_INCREF(__pyx_v_new_box);
        __Pyx_GIVEREF(__pyx_v_new_box);
        PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_10, __pyx_v_new_box);
        __Pyx_INCREF(__pyx_v_b_rect);
        __Pyx_GIVEREF(__pyx_v_b_rect);
        PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_10, __pyx_v_b_rect);
        __Pyx_INCREF(__pyx_v_width);
        __Pyx_GIVEREF(__pyx_v_width);
        PyTuple_SET_ITEM(__pyx_t_11, 2+__pyx_t_10, __pyx_v_width);
        __Pyx_INCREF(__pyx_v_height);
        __Pyx_GIVEREF(__pyx_v_height);
        PyTuple_SET_ITEM(__pyx_t_11, 3+__pyx_t_10, __pyx_v_height);
        __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_11, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2118, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2118, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_12) {

        /* "table_extraction/utils_table_extraction.pyx":2120
 *                 if Utils.rect_overlap_rect_with_width_height(new_box, b_rect, width, height):
 *                     # merge 2 overlaped boxes
 *                     temp_box = Utils.bounding_rect([new_box, b_rect])             # <<<<<<<<<<<<<<
 *                     # remove padding after each of merge
 *                     new_box = (temp_box[0], temp_box[1], temp_box[2] - 1, temp_box[3] - 1)
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_bounding_rect); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = PyList_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_INCREF(__pyx_v_new_box);
        __Pyx_GIVEREF(__pyx_v_new_box);
        PyList_SET_ITEM(__pyx_t_9, 0, __pyx_v_new_box);
        __Pyx_INCREF(__pyx_v_b_rect);
        __Pyx_GIVEREF(__pyx_v_b_rect);
        PyList_SET_ITEM(__pyx_t_9, 1, __pyx_v_b_rect);
        __pyx_t_8 = NULL;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_11);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_11, function);
          }
        }
        __pyx_t_1 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_11, __pyx_t_8, __pyx_t_9) : __Pyx_PyObject_CallOneArg(__pyx_t_11, __pyx_t_9);
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2120, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_XDECREF_SET(__pyx_v_temp_box, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2122
 *                     temp_box = Utils.bounding_rect([new_box, b_rect])
 *                     # remove padding after each of merge
 *                     new_box = (temp_box[0], temp_box[1], temp_box[2] - 1, temp_box[3] - 1)             # <<<<<<<<<<<<<<
 * 
 *             extend_boxes.append(new_box)
 */
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_temp_box, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_temp_box, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_temp_box, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_8 = __Pyx_PyInt_SubtractObjC(__pyx_t_9, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_temp_box, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_13 = __Pyx_PyInt_SubtractObjC(__pyx_t_9, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = PyTuple_New(4); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2122, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_11);
        PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_11);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_9, 2, __pyx_t_8);
        __Pyx_GIVEREF(__pyx_t_13);
        PyTuple_SET_ITEM(__pyx_t_9, 3, __pyx_t_13);
        __pyx_t_1 = 0;
        __pyx_t_11 = 0;
        __pyx_t_8 = 0;
        __pyx_t_13 = 0;
        __Pyx_DECREF_SET(__pyx_v_new_box, __pyx_t_9);
        __pyx_t_9 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2118
 *             for j in range(len(boxes) - 1):
 *                 b_rect = boxes[j]
 *                 if Utils.rect_overlap_rect_with_width_height(new_box, b_rect, width, height):             # <<<<<<<<<<<<<<
 *                     # merge 2 overlaped boxes
 *                     temp_box = Utils.bounding_rect([new_box, b_rect])
 */
      }
    }

    /* "table_extraction/utils_table_extraction.pyx":2124
 *                     new_box = (temp_box[0], temp_box[1], temp_box[2] - 1, temp_box[3] - 1)
 * 
 *             extend_boxes.append(new_box)             # <<<<<<<<<<<<<<
 * 
 *         extend_boxes = list(set(extend_boxes))
 */
    __pyx_t_14 = __Pyx_PyList_Append(__pyx_v_extend_boxes, __pyx_v_new_box); if (unlikely(__pyx_t_14 == ((int)-1))) __PYX_ERR(0, 2124, __pyx_L1_error)
  }

  /* "table_extraction/utils_table_extraction.pyx":2126
 *             extend_boxes.append(new_box)
 * 
 *         extend_boxes = list(set(extend_boxes))             # <<<<<<<<<<<<<<
 * 
 *         return extend_boxes
 */
  __pyx_t_9 = PySet_New(__pyx_v_extend_boxes); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2126, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __pyx_t_13 = PySequence_List(__pyx_t_9); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2126, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_13);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __Pyx_DECREF_SET(__pyx_v_extend_boxes, ((PyObject*)__pyx_t_13));
  __pyx_t_13 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2128
 *         extend_boxes = list(set(extend_boxes))
 * 
 *         return extend_boxes             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_extend_boxes);
  __pyx_r = __pyx_v_extend_boxes;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2104
 * 
 *     @staticmethod
 *     def merge_overlap_boxes(boxes, width=2, height=2):             # <<<<<<<<<<<<<<
 *         """
 *         :param boxes:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_overlap_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_extend_boxes);
  __Pyx_XDECREF(__pyx_v_new_box);
  __Pyx_XDECREF(__pyx_v_b_rect);
  __Pyx_XDECREF(__pyx_v_temp_box);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2131
 * 
 *     @staticmethod
 *     def merge_two_types_text_blocks(old_text_blocks, new_text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param old_text_blocks: text blocks is detected by Infodio algorithm
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_249merge_two_types_text_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_248merge_two_types_text_blocks[] = "\n        :param old_text_blocks: text blocks is detected by Infodio algorithm\n        :param new_text_blocks: text blocks is detected by our algorithm\n        :return: list of the best exactly text blocks\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_249merge_two_types_text_blocks = {"merge_two_types_text_blocks", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_249merge_two_types_text_blocks, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_248merge_two_types_text_blocks};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_249merge_two_types_text_blocks(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_old_text_blocks = 0;
  PyObject *__pyx_v_new_text_blocks = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_two_types_text_blocks (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_old_text_blocks,&__pyx_n_s_new_text_blocks,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_old_text_blocks)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_new_text_blocks)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("merge_two_types_text_blocks", 1, 2, 2, 1); __PYX_ERR(0, 2131, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "merge_two_types_text_blocks") < 0)) __PYX_ERR(0, 2131, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_old_text_blocks = values[0];
    __pyx_v_new_text_blocks = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("merge_two_types_text_blocks", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2131, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_two_types_text_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_248merge_two_types_text_blocks(__pyx_self, __pyx_v_old_text_blocks, __pyx_v_new_text_blocks);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_248merge_two_types_text_blocks(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_old_text_blocks, PyObject *__pyx_v_new_text_blocks) {
  PyObject *__pyx_v_text_block_rects = NULL;
  PyObject *__pyx_v_old_text_block = NULL;
  PyObject *__pyx_v_new_text_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  int __pyx_t_13;
  PyObject *__pyx_t_14 = NULL;
  __Pyx_RefNannySetupContext("merge_two_types_text_blocks", 0);

  /* "table_extraction/utils_table_extraction.pyx":2138
 *         """
 *         # combine 2 types of text blocks
 *         text_block_rects = []             # <<<<<<<<<<<<<<
 *         for old_text_block in old_text_blocks:
 *             # keep the small text block (Almost it is a number)
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_text_block_rects = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2139
 *         # combine 2 types of text blocks
 *         text_block_rects = []
 *         for old_text_block in old_text_blocks:             # <<<<<<<<<<<<<<
 *             # keep the small text block (Almost it is a number)
 *             if old_text_block[2] < 50 and old_text_block[3] < 50:
 */
  if (likely(PyList_CheckExact(__pyx_v_old_text_blocks)) || PyTuple_CheckExact(__pyx_v_old_text_blocks)) {
    __pyx_t_1 = __pyx_v_old_text_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_old_text_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2139, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2139, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2139, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2139, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2139, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2139, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2139, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_old_text_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2141
 *         for old_text_block in old_text_blocks:
 *             # keep the small text block (Almost it is a number)
 *             if old_text_block[2] < 50 and old_text_block[3] < 50:             # <<<<<<<<<<<<<<
 *                 text_block_rects.append(old_text_block)
 *             else:
 */
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_old_text_block, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = PyObject_RichCompare(__pyx_t_4, __pyx_int_50, Py_LT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_old_text_block, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_int_50, Py_LT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":2142
 *             # keep the small text block (Almost it is a number)
 *             if old_text_block[2] < 50 and old_text_block[3] < 50:
 *                 text_block_rects.append(old_text_block)             # <<<<<<<<<<<<<<
 *             else:
 *                 # If the bigger text block overlaps with new text block. They will be merge together.
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_text_block_rects, __pyx_v_old_text_block); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2142, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":2141
 *         for old_text_block in old_text_blocks:
 *             # keep the small text block (Almost it is a number)
 *             if old_text_block[2] < 50 and old_text_block[3] < 50:             # <<<<<<<<<<<<<<
 *                 text_block_rects.append(old_text_block)
 *             else:
 */
      goto __pyx_L5;
    }

    /* "table_extraction/utils_table_extraction.pyx":2145
 *             else:
 *                 # If the bigger text block overlaps with new text block. They will be merge together.
 *                 for new_text_block in new_text_blocks:             # <<<<<<<<<<<<<<
 *                     if Utils.rect_overlap_rect(old_text_block, new_text_block):
 *                         text_block_rects.append(new_text_block)
 */
    /*else*/ {
      if (likely(PyList_CheckExact(__pyx_v_new_text_blocks)) || PyTuple_CheckExact(__pyx_v_new_text_blocks)) {
        __pyx_t_4 = __pyx_v_new_text_blocks; __Pyx_INCREF(__pyx_t_4); __pyx_t_9 = 0;
        __pyx_t_10 = NULL;
      } else {
        __pyx_t_9 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_new_text_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2145, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_10 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2145, __pyx_L1_error)
      }
      for (;;) {
        if (likely(!__pyx_t_10)) {
          if (likely(PyList_CheckExact(__pyx_t_4))) {
            if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_4)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_6 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2145, __pyx_L1_error)
            #else
            __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2145, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            #endif
          } else {
            if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_9); __Pyx_INCREF(__pyx_t_6); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2145, __pyx_L1_error)
            #else
            __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2145, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            #endif
          }
        } else {
          __pyx_t_6 = __pyx_t_10(__pyx_t_4);
          if (unlikely(!__pyx_t_6)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 2145, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_6);
        }
        __Pyx_XDECREF_SET(__pyx_v_new_text_block, __pyx_t_6);
        __pyx_t_6 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2146
 *                 # If the bigger text block overlaps with new text block. They will be merge together.
 *                 for new_text_block in new_text_blocks:
 *                     if Utils.rect_overlap_rect(old_text_block, new_text_block):             # <<<<<<<<<<<<<<
 *                         text_block_rects.append(new_text_block)
 *         # Add the sign(shape in image) position in image to the text blocks
 */
        __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2146, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_12 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2146, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = NULL;
        __pyx_t_13 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_12))) {
          __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_12);
          if (likely(__pyx_t_11)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
            __Pyx_INCREF(__pyx_t_11);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_12, function);
            __pyx_t_13 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_old_text_block, __pyx_v_new_text_block};
          __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2146, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_6);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_12)) {
          PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_old_text_block, __pyx_v_new_text_block};
          __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_13, 2+__pyx_t_13); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2146, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_GOTREF(__pyx_t_6);
        } else
        #endif
        {
          __pyx_t_14 = PyTuple_New(2+__pyx_t_13); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2146, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          if (__pyx_t_11) {
            __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_11); __pyx_t_11 = NULL;
          }
          __Pyx_INCREF(__pyx_v_old_text_block);
          __Pyx_GIVEREF(__pyx_v_old_text_block);
          PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_13, __pyx_v_old_text_block);
          __Pyx_INCREF(__pyx_v_new_text_block);
          __Pyx_GIVEREF(__pyx_v_new_text_block);
          PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_13, __pyx_v_new_text_block);
          __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_12, __pyx_t_14, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2146, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        }
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2146, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        if (__pyx_t_5) {

          /* "table_extraction/utils_table_extraction.pyx":2147
 *                 for new_text_block in new_text_blocks:
 *                     if Utils.rect_overlap_rect(old_text_block, new_text_block):
 *                         text_block_rects.append(new_text_block)             # <<<<<<<<<<<<<<
 *         # Add the sign(shape in image) position in image to the text blocks
 *         for new_text_block in new_text_blocks:
 */
          __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_text_block_rects, __pyx_v_new_text_block); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2147, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":2146
 *                 # If the bigger text block overlaps with new text block. They will be merge together.
 *                 for new_text_block in new_text_blocks:
 *                     if Utils.rect_overlap_rect(old_text_block, new_text_block):             # <<<<<<<<<<<<<<
 *                         text_block_rects.append(new_text_block)
 *         # Add the sign(shape in image) position in image to the text blocks
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":2145
 *             else:
 *                 # If the bigger text block overlaps with new text block. They will be merge together.
 *                 for new_text_block in new_text_blocks:             # <<<<<<<<<<<<<<
 *                     if Utils.rect_overlap_rect(old_text_block, new_text_block):
 *                         text_block_rects.append(new_text_block)
 */
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
    __pyx_L5:;

    /* "table_extraction/utils_table_extraction.pyx":2139
 *         # combine 2 types of text blocks
 *         text_block_rects = []
 *         for old_text_block in old_text_blocks:             # <<<<<<<<<<<<<<
 *             # keep the small text block (Almost it is a number)
 *             if old_text_block[2] < 50 and old_text_block[3] < 50:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2149
 *                         text_block_rects.append(new_text_block)
 *         # Add the sign(shape in image) position in image to the text blocks
 *         for new_text_block in new_text_blocks:             # <<<<<<<<<<<<<<
 *             if new_text_block[2] > 50 and new_text_block[3] > 50:
 *                 text_block_rects.append(new_text_block)
 */
  if (likely(PyList_CheckExact(__pyx_v_new_text_blocks)) || PyTuple_CheckExact(__pyx_v_new_text_blocks)) {
    __pyx_t_1 = __pyx_v_new_text_blocks; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_new_text_blocks); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2149, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2149, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2149, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2149, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2149, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2149, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2149, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_new_text_block, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2150
 *         # Add the sign(shape in image) position in image to the text blocks
 *         for new_text_block in new_text_blocks:
 *             if new_text_block[2] > 50 and new_text_block[3] > 50:             # <<<<<<<<<<<<<<
 *                 text_block_rects.append(new_text_block)
 * 
 */
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_new_text_block, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_6 = PyObject_RichCompare(__pyx_t_4, __pyx_int_50, Py_GT); __Pyx_XGOTREF(__pyx_t_6); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (__pyx_t_7) {
    } else {
      __pyx_t_5 = __pyx_t_7;
      goto __pyx_L14_bool_binop_done;
    }
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_new_text_block, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_4 = PyObject_RichCompare(__pyx_t_6, __pyx_int_50, Py_GT); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2150, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __pyx_t_7;
    __pyx_L14_bool_binop_done:;
    if (__pyx_t_5) {

      /* "table_extraction/utils_table_extraction.pyx":2151
 *         for new_text_block in new_text_blocks:
 *             if new_text_block[2] > 50 and new_text_block[3] > 50:
 *                 text_block_rects.append(new_text_block)             # <<<<<<<<<<<<<<
 * 
 *         return list(set(text_block_rects))
 */
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_text_block_rects, __pyx_v_new_text_block); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2151, __pyx_L1_error)

      /* "table_extraction/utils_table_extraction.pyx":2150
 *         # Add the sign(shape in image) position in image to the text blocks
 *         for new_text_block in new_text_blocks:
 *             if new_text_block[2] > 50 and new_text_block[3] > 50:             # <<<<<<<<<<<<<<
 *                 text_block_rects.append(new_text_block)
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2149
 *                         text_block_rects.append(new_text_block)
 *         # Add the sign(shape in image) position in image to the text blocks
 *         for new_text_block in new_text_blocks:             # <<<<<<<<<<<<<<
 *             if new_text_block[2] > 50 and new_text_block[3] > 50:
 *                 text_block_rects.append(new_text_block)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2153
 *                 text_block_rects.append(new_text_block)
 * 
 *         return list(set(text_block_rects))             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PySet_New(__pyx_v_text_block_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2153, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = PySequence_List(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2153, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_4;
  __pyx_t_4 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2131
 * 
 *     @staticmethod
 *     def merge_two_types_text_blocks(old_text_blocks, new_text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param old_text_blocks: text blocks is detected by Infodio algorithm
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_two_types_text_blocks", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_text_block_rects);
  __Pyx_XDECREF(__pyx_v_old_text_block);
  __Pyx_XDECREF(__pyx_v_new_text_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2156
 * 
 *     @staticmethod
 *     def remove_noise_lines_rect(line_rects, text_block_rects):             # <<<<<<<<<<<<<<
 *         """
 *         :param line_rects: all of the line's position
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_251remove_noise_lines_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_250remove_noise_lines_rect[] = "\n        :param line_rects: all of the line's position\n        :param text_block_rects: all of the text block's position\n        :return: new line rectangle list\n         A line is considered as a noise line\n         when it's a small line and around the line does not have any line or text block\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_251remove_noise_lines_rect = {"remove_noise_lines_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_251remove_noise_lines_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_250remove_noise_lines_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_251remove_noise_lines_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line_rects = 0;
  PyObject *__pyx_v_text_block_rects = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("remove_noise_lines_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line_rects,&__pyx_n_s_text_block_rects,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line_rects)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_text_block_rects)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("remove_noise_lines_rect", 1, 2, 2, 1); __PYX_ERR(0, 2156, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "remove_noise_lines_rect") < 0)) __PYX_ERR(0, 2156, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_line_rects = values[0];
    __pyx_v_text_block_rects = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("remove_noise_lines_rect", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2156, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_noise_lines_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_250remove_noise_lines_rect(__pyx_self, __pyx_v_line_rects, __pyx_v_text_block_rects);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_250remove_noise_lines_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line_rects, PyObject *__pyx_v_text_block_rects) {
  PyObject *__pyx_v_invalid_lines = NULL;
  PyObject *__pyx_v_line_rect = NULL;
  PyObject *__pyx_v_line_rect_padding = NULL;
  PyObject *__pyx_v_temp_line_rects = NULL;
  PyObject *__pyx_v_temp_line_rect = NULL;
  PyObject *__pyx_v_text_block_rect = NULL;
  PyObject *__pyx_v_invalid_line = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *(*__pyx_t_3)(PyObject *);
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  Py_ssize_t __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  Py_ssize_t __pyx_t_12;
  PyObject *(*__pyx_t_13)(PyObject *);
  PyObject *__pyx_t_14 = NULL;
  int __pyx_t_15;
  int __pyx_t_16;
  __Pyx_RefNannySetupContext("remove_noise_lines_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":2164
 *          when it's a small line and around the line does not have any line or text block
 *         """
 *         invalid_lines = []             # <<<<<<<<<<<<<<
 *         for line_rect in line_rects:
 *             if line_rect[2] * line_rect[3] < 200:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2164, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_invalid_lines = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2165
 *         """
 *         invalid_lines = []
 *         for line_rect in line_rects:             # <<<<<<<<<<<<<<
 *             if line_rect[2] * line_rect[3] < 200:
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)
 */
  if (likely(PyList_CheckExact(__pyx_v_line_rects)) || PyTuple_CheckExact(__pyx_v_line_rects)) {
    __pyx_t_1 = __pyx_v_line_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
    __pyx_t_3 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_line_rects); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2165, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2165, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_3)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2165, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2165, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2165, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2165, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_3(__pyx_t_1);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2165, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_line_rect, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2166
 *         invalid_lines = []
 *         for line_rect in line_rects:
 *             if line_rect[2] * line_rect[3] < 200:             # <<<<<<<<<<<<<<
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)
 *                 temp_line_rects = list(line_rects.copy())
 */
    __pyx_t_4 = __Pyx_GetItemInt(__pyx_v_line_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2166, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_v_line_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2166, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyNumber_Multiply(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2166, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyObject_RichCompare(__pyx_t_6, __pyx_int_200, Py_LT); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2166, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2166, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":2167
 *         for line_rect in line_rects:
 *             if line_rect[2] * line_rect[3] < 200:
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)             # <<<<<<<<<<<<<<
 *                 temp_line_rects = list(line_rects.copy())
 *                 # compare this line with all others lines
 */
      __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2167, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2167, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = NULL;
      __pyx_t_8 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
          __pyx_t_8 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_line_rect, __pyx_int_5};
        __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2167, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
        PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_v_line_rect, __pyx_int_5};
        __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2167, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_GOTREF(__pyx_t_5);
      } else
      #endif
      {
        __pyx_t_9 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2167, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (__pyx_t_6) {
          __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_6); __pyx_t_6 = NULL;
        }
        __Pyx_INCREF(__pyx_v_line_rect);
        __Pyx_GIVEREF(__pyx_v_line_rect);
        PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_line_rect);
        __Pyx_INCREF(__pyx_int_5);
        __Pyx_GIVEREF(__pyx_int_5);
        PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_int_5);
        __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2167, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      }
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_XDECREF_SET(__pyx_v_line_rect_padding, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2168
 *             if line_rect[2] * line_rect[3] < 200:
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)
 *                 temp_line_rects = list(line_rects.copy())             # <<<<<<<<<<<<<<
 *                 # compare this line with all others lines
 *                 temp_line_rects.remove(line_rect)
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_line_rects, __pyx_n_s_copy); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2168, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_9 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_5 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2168, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PySequence_List(__pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2168, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_XDECREF_SET(__pyx_v_temp_line_rects, ((PyObject*)__pyx_t_4));
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2170
 *                 temp_line_rects = list(line_rects.copy())
 *                 # compare this line with all others lines
 *                 temp_line_rects.remove(line_rect)             # <<<<<<<<<<<<<<
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:
 */
      __pyx_t_4 = __Pyx_CallUnboundCMethod1(&__pyx_umethod_PyList_Type_remove, __pyx_v_temp_line_rects, __pyx_v_line_rect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2170, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2172
 *                 temp_line_rects.remove(line_rect)
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:             # <<<<<<<<<<<<<<
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):
 *                         break
 */
      __pyx_t_4 = __pyx_v_temp_line_rects; __Pyx_INCREF(__pyx_t_4); __pyx_t_10 = 0;
      for (;;) {
        if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_10); __Pyx_INCREF(__pyx_t_5); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 2172, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_4, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2172, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
        __Pyx_XDECREF_SET(__pyx_v_temp_line_rect, __pyx_t_5);
        __pyx_t_5 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2173
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):             # <<<<<<<<<<<<<<
 *                         break
 *                 else:
 */
        __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2173, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2173, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = NULL;
        __pyx_t_8 = 0;
        if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_6);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_6, function);
            __pyx_t_8 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (PyFunction_Check(__pyx_t_6)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_line_rect_padding, __pyx_v_temp_line_rect};
          __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2173, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_5);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
          PyObject *__pyx_temp[3] = {__pyx_t_9, __pyx_v_line_rect_padding, __pyx_v_temp_line_rect};
          __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2173, __pyx_L1_error)
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_GOTREF(__pyx_t_5);
        } else
        #endif
        {
          __pyx_t_11 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2173, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          if (__pyx_t_9) {
            __Pyx_GIVEREF(__pyx_t_9); PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_9); __pyx_t_9 = NULL;
          }
          __Pyx_INCREF(__pyx_v_line_rect_padding);
          __Pyx_GIVEREF(__pyx_v_line_rect_padding);
          PyTuple_SET_ITEM(__pyx_t_11, 0+__pyx_t_8, __pyx_v_line_rect_padding);
          __Pyx_INCREF(__pyx_v_temp_line_rect);
          __Pyx_GIVEREF(__pyx_v_temp_line_rect);
          PyTuple_SET_ITEM(__pyx_t_11, 1+__pyx_t_8, __pyx_v_temp_line_rect);
          __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_11, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2173, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        }
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2173, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        if (__pyx_t_7) {

          /* "table_extraction/utils_table_extraction.pyx":2174
 *                 for temp_line_rect in temp_line_rects:
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):
 *                         break             # <<<<<<<<<<<<<<
 *                 else:
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 */
          goto __pyx_L7_break;

          /* "table_extraction/utils_table_extraction.pyx":2173
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):             # <<<<<<<<<<<<<<
 *                         break
 *                 else:
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":2172
 *                 temp_line_rects.remove(line_rect)
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:             # <<<<<<<<<<<<<<
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):
 *                         break
 */
      }
      /*else*/ {

        /* "table_extraction/utils_table_extraction.pyx":2177
 *                 else:
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 *                     for text_block_rect in text_block_rects:             # <<<<<<<<<<<<<<
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):
 *                             break
 */
        if (likely(PyList_CheckExact(__pyx_v_text_block_rects)) || PyTuple_CheckExact(__pyx_v_text_block_rects)) {
          __pyx_t_5 = __pyx_v_text_block_rects; __Pyx_INCREF(__pyx_t_5); __pyx_t_12 = 0;
          __pyx_t_13 = NULL;
        } else {
          __pyx_t_12 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_text_block_rects); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2177, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __pyx_t_13 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2177, __pyx_L1_error)
        }
        for (;;) {
          if (likely(!__pyx_t_13)) {
            if (likely(PyList_CheckExact(__pyx_t_5))) {
              if (__pyx_t_12 >= PyList_GET_SIZE(__pyx_t_5)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_6 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_12); __Pyx_INCREF(__pyx_t_6); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 2177, __pyx_L1_error)
              #else
              __pyx_t_6 = PySequence_ITEM(__pyx_t_5, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2177, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_6);
              #endif
            } else {
              if (__pyx_t_12 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_12); __Pyx_INCREF(__pyx_t_6); __pyx_t_12++; if (unlikely(0 < 0)) __PYX_ERR(0, 2177, __pyx_L1_error)
              #else
              __pyx_t_6 = PySequence_ITEM(__pyx_t_5, __pyx_t_12); __pyx_t_12++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2177, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_6);
              #endif
            }
          } else {
            __pyx_t_6 = __pyx_t_13(__pyx_t_5);
            if (unlikely(!__pyx_t_6)) {
              PyObject* exc_type = PyErr_Occurred();
              if (exc_type) {
                if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
                else __PYX_ERR(0, 2177, __pyx_L1_error)
              }
              break;
            }
            __Pyx_GOTREF(__pyx_t_6);
          }
          __Pyx_XDECREF_SET(__pyx_v_text_block_rect, __pyx_t_6);
          __pyx_t_6 = 0;

          /* "table_extraction/utils_table_extraction.pyx":2178
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 *                     for text_block_rect in text_block_rects:
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):             # <<<<<<<<<<<<<<
 *                             break
 *                     else:
 */
          __Pyx_GetModuleGlobalName(__pyx_t_11, __pyx_n_s_Utils); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2178, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_11, __pyx_n_s_rect_overlap_rect); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2178, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = NULL;
          __pyx_t_8 = 0;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
            __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_9);
            if (likely(__pyx_t_11)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
              __Pyx_INCREF(__pyx_t_11);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_9, function);
              __pyx_t_8 = 1;
            }
          }
          #if CYTHON_FAST_PYCALL
          if (PyFunction_Check(__pyx_t_9)) {
            PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_line_rect_padding, __pyx_v_text_block_rect};
            __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2178, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_GOTREF(__pyx_t_6);
          } else
          #endif
          #if CYTHON_FAST_PYCCALL
          if (__Pyx_PyFastCFunction_Check(__pyx_t_9)) {
            PyObject *__pyx_temp[3] = {__pyx_t_11, __pyx_v_line_rect_padding, __pyx_v_text_block_rect};
            __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_9, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2178, __pyx_L1_error)
            __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
            __Pyx_GOTREF(__pyx_t_6);
          } else
          #endif
          {
            __pyx_t_14 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2178, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_14);
            if (__pyx_t_11) {
              __Pyx_GIVEREF(__pyx_t_11); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_11); __pyx_t_11 = NULL;
            }
            __Pyx_INCREF(__pyx_v_line_rect_padding);
            __Pyx_GIVEREF(__pyx_v_line_rect_padding);
            PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_8, __pyx_v_line_rect_padding);
            __Pyx_INCREF(__pyx_v_text_block_rect);
            __Pyx_GIVEREF(__pyx_v_text_block_rect);
            PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_8, __pyx_v_text_block_rect);
            __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_t_14, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2178, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
          }
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
          __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_6); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2178, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
          if (__pyx_t_7) {

            /* "table_extraction/utils_table_extraction.pyx":2179
 *                     for text_block_rect in text_block_rects:
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):
 *                             break             # <<<<<<<<<<<<<<
 *                     else:
 *                         invalid_lines.append(line_rect)
 */
            goto __pyx_L11_break;

            /* "table_extraction/utils_table_extraction.pyx":2178
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 *                     for text_block_rect in text_block_rects:
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):             # <<<<<<<<<<<<<<
 *                             break
 *                     else:
 */
          }

          /* "table_extraction/utils_table_extraction.pyx":2177
 *                 else:
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 *                     for text_block_rect in text_block_rects:             # <<<<<<<<<<<<<<
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):
 *                             break
 */
        }
        /*else*/ {

          /* "table_extraction/utils_table_extraction.pyx":2181
 *                             break
 *                     else:
 *                         invalid_lines.append(line_rect)             # <<<<<<<<<<<<<<
 * 
 *         # remove the invalid lines
 */
          __pyx_t_15 = __Pyx_PyList_Append(__pyx_v_invalid_lines, __pyx_v_line_rect); if (unlikely(__pyx_t_15 == ((int)-1))) __PYX_ERR(0, 2181, __pyx_L1_error)
        }

        /* "table_extraction/utils_table_extraction.pyx":2177
 *                 else:
 *                     # if line overlaps with text blocks, that mean this line is valid, so do not need check anymore
 *                     for text_block_rect in text_block_rects:             # <<<<<<<<<<<<<<
 *                         if Utils.rect_overlap_rect(line_rect_padding, text_block_rect):
 *                             break
 */
        __pyx_L11_break:;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }

      /* "table_extraction/utils_table_extraction.pyx":2172
 *                 temp_line_rects.remove(line_rect)
 *                 # if line overlaps with others line, that mean this line is valid, so do not need check anymore
 *                 for temp_line_rect in temp_line_rects:             # <<<<<<<<<<<<<<
 *                     if Utils.rect_overlap_rect(line_rect_padding, temp_line_rect):
 *                         break
 */
      __pyx_L7_break:;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2166
 *         invalid_lines = []
 *         for line_rect in line_rects:
 *             if line_rect[2] * line_rect[3] < 200:             # <<<<<<<<<<<<<<
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)
 *                 temp_line_rects = list(line_rects.copy())
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2165
 *         """
 *         invalid_lines = []
 *         for line_rect in line_rects:             # <<<<<<<<<<<<<<
 *             if line_rect[2] * line_rect[3] < 200:
 *                 line_rect_padding = Utils.expand_rect(line_rect, 5)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2184
 * 
 *         # remove the invalid lines
 *         for invalid_line in invalid_lines:             # <<<<<<<<<<<<<<
 *             if invalid_line in line_rects:
 *                 line_rects.remove(invalid_line)
 */
  __pyx_t_1 = __pyx_v_invalid_lines; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_4); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2184, __pyx_L1_error)
    #else
    __pyx_t_4 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2184, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_invalid_line, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2185
 *         # remove the invalid lines
 *         for invalid_line in invalid_lines:
 *             if invalid_line in line_rects:             # <<<<<<<<<<<<<<
 *                 line_rects.remove(invalid_line)
 * 
 */
    __pyx_t_7 = (__Pyx_PySequence_ContainsTF(__pyx_v_invalid_line, __pyx_v_line_rects, Py_EQ)); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2185, __pyx_L1_error)
    __pyx_t_16 = (__pyx_t_7 != 0);
    if (__pyx_t_16) {

      /* "table_extraction/utils_table_extraction.pyx":2186
 *         for invalid_line in invalid_lines:
 *             if invalid_line in line_rects:
 *                 line_rects.remove(invalid_line)             # <<<<<<<<<<<<<<
 * 
 *         return line_rects
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line_rects, __pyx_n_s_remove); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2186, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
        }
      }
      __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_invalid_line) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_invalid_line);
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2186, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2185
 *         # remove the invalid lines
 *         for invalid_line in invalid_lines:
 *             if invalid_line in line_rects:             # <<<<<<<<<<<<<<
 *                 line_rects.remove(invalid_line)
 * 
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2184
 * 
 *         # remove the invalid lines
 *         for invalid_line in invalid_lines:             # <<<<<<<<<<<<<<
 *             if invalid_line in line_rects:
 *                 line_rects.remove(invalid_line)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2188
 *                 line_rects.remove(invalid_line)
 * 
 *         return line_rects             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_line_rects);
  __pyx_r = __pyx_v_line_rects;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2156
 * 
 *     @staticmethod
 *     def remove_noise_lines_rect(line_rects, text_block_rects):             # <<<<<<<<<<<<<<
 *         """
 *         :param line_rects: all of the line's position
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.remove_noise_lines_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_invalid_lines);
  __Pyx_XDECREF(__pyx_v_line_rect);
  __Pyx_XDECREF(__pyx_v_line_rect_padding);
  __Pyx_XDECREF(__pyx_v_temp_line_rects);
  __Pyx_XDECREF(__pyx_v_temp_line_rect);
  __Pyx_XDECREF(__pyx_v_text_block_rect);
  __Pyx_XDECREF(__pyx_v_invalid_line);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2191
 * 
 *     @staticmethod
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         x1,y1,w,h = rect
 *         x2 = x1 + w
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_253convert_rect_to_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_253convert_rect_to_rect = {"convert_rect_to_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_253convert_rect_to_rect, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_253convert_rect_to_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rect = 0;
  PyObject *__pyx_v_width_ratio = 0;
  PyObject *__pyx_v_height_ratio = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("convert_rect_to_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rect,&__pyx_n_s_width_ratio,&__pyx_n_s_height_ratio,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rect)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_width_ratio)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("convert_rect_to_rect", 1, 3, 3, 1); __PYX_ERR(0, 2191, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_height_ratio)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("convert_rect_to_rect", 1, 3, 3, 2); __PYX_ERR(0, 2191, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "convert_rect_to_rect") < 0)) __PYX_ERR(0, 2191, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_rect = values[0];
    __pyx_v_width_ratio = values[1];
    __pyx_v_height_ratio = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("convert_rect_to_rect", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2191, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_rect_to_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_252convert_rect_to_rect(__pyx_self, __pyx_v_rect, __pyx_v_width_ratio, __pyx_v_height_ratio);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_252convert_rect_to_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rect, PyObject *__pyx_v_width_ratio, PyObject *__pyx_v_height_ratio) {
  PyObject *__pyx_v_x1 = NULL;
  PyObject *__pyx_v_y1 = NULL;
  PyObject *__pyx_v_w = NULL;
  PyObject *__pyx_v_h = NULL;
  PyObject *__pyx_v_x2 = NULL;
  PyObject *__pyx_v_y2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  __Pyx_RefNannySetupContext("convert_rect_to_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":2192
 *     @staticmethod
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):
 *         x1,y1,w,h = rect             # <<<<<<<<<<<<<<
 *         x2 = x1 + w
 *         y2 = y1 + h
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_rect))) || (PyList_CheckExact(__pyx_v_rect))) {
    PyObject* sequence = __pyx_v_rect;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 2192, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2192, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_rect); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2192, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 2192, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 2192, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_x1 = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_y1 = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2193
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):
 *         x1,y1,w,h = rect
 *         x2 = x1 + w             # <<<<<<<<<<<<<<
 *         y2 = y1 + h
 * 
 */
  __pyx_t_4 = PyNumber_Add(__pyx_v_x1, __pyx_v_w); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2193, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_x2 = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2194
 *         x1,y1,w,h = rect
 *         x2 = x1 + w
 *         y2 = y1 + h             # <<<<<<<<<<<<<<
 * 
 *         x1 = int(x1 * width_ratio)
 */
  __pyx_t_4 = PyNumber_Add(__pyx_v_y1, __pyx_v_h); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2194, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_y2 = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2196
 *         y2 = y1 + h
 * 
 *         x1 = int(x1 * width_ratio)             # <<<<<<<<<<<<<<
 *         y1 = int(y1 * height_ratio)
 *         x2 = int(x2 * width_ratio)
 */
  __pyx_t_4 = PyNumber_Multiply(__pyx_v_x1, __pyx_v_width_ratio); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2196, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2196, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_x1, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2197
 * 
 *         x1 = int(x1 * width_ratio)
 *         y1 = int(y1 * height_ratio)             # <<<<<<<<<<<<<<
 *         x2 = int(x2 * width_ratio)
 *         y2 = int(y2 * height_ratio)
 */
  __pyx_t_3 = PyNumber_Multiply(__pyx_v_y1, __pyx_v_height_ratio); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2197, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2197, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_y1, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2198
 *         x1 = int(x1 * width_ratio)
 *         y1 = int(y1 * height_ratio)
 *         x2 = int(x2 * width_ratio)             # <<<<<<<<<<<<<<
 *         y2 = int(y2 * height_ratio)
 * 
 */
  __pyx_t_4 = PyNumber_Multiply(__pyx_v_x2, __pyx_v_width_ratio); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF_SET(__pyx_v_x2, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2199
 *         y1 = int(y1 * height_ratio)
 *         x2 = int(x2 * width_ratio)
 *         y2 = int(y2 * height_ratio)             # <<<<<<<<<<<<<<
 * 
 *         return (x1, y1, x2 - x1, y2 - y1)
 */
  __pyx_t_3 = PyNumber_Multiply(__pyx_v_y2, __pyx_v_height_ratio); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2199, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyNumber_Int(__pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2199, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_y2, __pyx_t_4);
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2201
 *         y2 = int(y2 * height_ratio)
 * 
 *         return (x1, y1, x2 - x1, y2 - y1)             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_4 = PyNumber_Subtract(__pyx_v_x2, __pyx_v_x1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2201, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_3 = PyNumber_Subtract(__pyx_v_y2, __pyx_v_y1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2201, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyTuple_New(4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2201, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_v_x1);
  __Pyx_GIVEREF(__pyx_v_x1);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_x1);
  __Pyx_INCREF(__pyx_v_y1);
  __Pyx_GIVEREF(__pyx_v_y1);
  PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_y1);
  __Pyx_GIVEREF(__pyx_t_4);
  PyTuple_SET_ITEM(__pyx_t_2, 2, __pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_2, 3, __pyx_t_3);
  __pyx_t_4 = 0;
  __pyx_t_3 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2191
 * 
 *     @staticmethod
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         x1,y1,w,h = rect
 *         x2 = x1 + w
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_rect_to_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_x1);
  __Pyx_XDECREF(__pyx_v_y1);
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_h);
  __Pyx_XDECREF(__pyx_v_x2);
  __Pyx_XDECREF(__pyx_v_y2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2205
 * 
 *     @staticmethod
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 * 
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_255convert_rects_to_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_255convert_rects_to_rects = {"convert_rects_to_rects", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_255convert_rects_to_rects, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_255convert_rects_to_rects(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rects = 0;
  PyObject *__pyx_v_width_ratio = 0;
  PyObject *__pyx_v_height_ratio = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("convert_rects_to_rects (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_rects,&__pyx_n_s_width_ratio,&__pyx_n_s_height_ratio,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_rects)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_width_ratio)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("convert_rects_to_rects", 1, 3, 3, 1); __PYX_ERR(0, 2205, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_height_ratio)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("convert_rects_to_rects", 1, 3, 3, 2); __PYX_ERR(0, 2205, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "convert_rects_to_rects") < 0)) __PYX_ERR(0, 2205, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_rects = values[0];
    __pyx_v_width_ratio = values[1];
    __pyx_v_height_ratio = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("convert_rects_to_rects", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2205, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_rects_to_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_254convert_rects_to_rects(__pyx_self, __pyx_v_rects, __pyx_v_width_ratio, __pyx_v_height_ratio);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_254convert_rects_to_rects(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_rects, PyObject *__pyx_v_width_ratio, PyObject *__pyx_v_height_ratio) {
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("convert_rects_to_rects", 0);

  /* "table_extraction/utils_table_extraction.pyx":2206
 *     @staticmethod
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2206, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_rects)) || PyTuple_CheckExact(__pyx_v_rects)) {
    __pyx_t_2 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_rects); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2206, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2206, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2206, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2206, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2206, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2206, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_convert_rect_to_rect); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2206, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_rect, __pyx_v_width_ratio, __pyx_v_height_ratio};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2206, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
      PyObject *__pyx_temp[4] = {__pyx_t_6, __pyx_v_rect, __pyx_v_width_ratio, __pyx_v_height_ratio};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_8, 3+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2206, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(3+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2206, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_6) {
        __Pyx_GIVEREF(__pyx_t_6); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_6); __pyx_t_6 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_width_ratio);
      __Pyx_GIVEREF(__pyx_v_width_ratio);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_v_width_ratio);
      __Pyx_INCREF(__pyx_v_height_ratio);
      __Pyx_GIVEREF(__pyx_v_height_ratio);
      PyTuple_SET_ITEM(__pyx_t_9, 2+__pyx_t_8, __pyx_v_height_ratio);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2206, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_5))) __PYX_ERR(0, 2206, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2205
 * 
 *     @staticmethod
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 * 
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.convert_rects_to_rects", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2209
 * 
 *     @staticmethod
 *     def extract_line_rect(image, remove_line_at_border=True):             # <<<<<<<<<<<<<<
 *         """
 *         :param image: The image contains horizontal lines or vertical lines.
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_257extract_line_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_256extract_line_rect[] = "\n        :param image: The image contains horizontal lines or vertical lines.\n        :param remove_line_at_border: True: remove the line reach to the border of image. False: Otherwise\n        :return: Extract all line in the image\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_257extract_line_rect = {"extract_line_rect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_257extract_line_rect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_256extract_line_rect};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_257extract_line_rect(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_v_remove_line_at_border = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("extract_line_rect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_image,&__pyx_n_s_remove_line_at_border,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject *)Py_True));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_remove_line_at_border);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "extract_line_rect") < 0)) __PYX_ERR(0, 2209, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_image = values[0];
    __pyx_v_remove_line_at_border = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("extract_line_rect", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2209, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extract_line_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_256extract_line_rect(__pyx_self, __pyx_v_image, __pyx_v_remove_line_at_border);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_256extract_line_rect(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_image, PyObject *__pyx_v_remove_line_at_border) {
  PyObject *__pyx_v_extract_line_image = NULL;
  PyObject *__pyx_v_image_shape = NULL;
  long __pyx_v_PADDING_SIZE;
  PyObject *__pyx_v_contours = NULL;
  PyObject *__pyx_v_rects = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_v_rect = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  int __pyx_t_11;
  int __pyx_t_12;
  int __pyx_t_13;
  __Pyx_RefNannySetupContext("extract_line_rect", 0);

  /* "table_extraction/utils_table_extraction.pyx":2215
 *         :return: Extract all line in the image
 *         """
 *         extract_line_image = image.copy()             # <<<<<<<<<<<<<<
 *         image_shape = image.shape
 *         PADDING_SIZE = 5
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2215, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2215, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_extract_line_image = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2216
 *         """
 *         extract_line_image = image.copy()
 *         image_shape = image.shape             # <<<<<<<<<<<<<<
 *         PADDING_SIZE = 5
 * 
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_image, __pyx_n_s_shape); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2216, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_image_shape = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2217
 *         extract_line_image = image.copy()
 *         image_shape = image.shape
 *         PADDING_SIZE = 5             # <<<<<<<<<<<<<<
 * 
 *         # add padding to the image to extract line reach to border image
 */
  __pyx_v_PADDING_SIZE = 5;

  /* "table_extraction/utils_table_extraction.pyx":2220
 * 
 *         # add padding to the image to extract line reach to border image
 *         extract_line_image = Utils.expand_image(extract_line_image, PADDING_SIZE)             # <<<<<<<<<<<<<<
 * 
 *         contours = cv2.findContours(extract_line_image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_expand_image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyInt_From_long(__pyx_v_PADDING_SIZE); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_extract_line_image, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2220, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_v_extract_line_image, __pyx_t_2};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2220, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2220, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_INCREF(__pyx_v_extract_line_image);
    __Pyx_GIVEREF(__pyx_v_extract_line_image);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_v_extract_line_image);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2220, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF_SET(__pyx_v_extract_line_image, __pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2222
 *         extract_line_image = Utils.expand_image(extract_line_image, PADDING_SIZE)
 * 
 *         contours = cv2.findContours(extract_line_image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]             # <<<<<<<<<<<<<<
 *         rects = [cv2.boundingRect(c) for c in contours]
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_3, __pyx_n_s_cv2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_findContours); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_extract_line_image, __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_RETR_TREE); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_cv2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_CHAIN_APPROX_SIMPLE); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[4] = {__pyx_t_2, __pyx_t_3, __pyx_t_4, __pyx_t_7};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2222, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
    PyObject *__pyx_temp[4] = {__pyx_t_2, __pyx_t_3, __pyx_t_4, __pyx_t_7};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2222, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  } else
  #endif
  {
    __pyx_t_8 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2222, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_8, 0+__pyx_t_5, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_8, 1+__pyx_t_5, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_8, 2+__pyx_t_5, __pyx_t_7);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_7 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_8, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2222, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_1, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_contours = __pyx_t_6;
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2223
 * 
 *         contours = cv2.findContours(extract_line_image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]             # <<<<<<<<<<<<<<
 * 
 *         # Remove noise: small line or the line reach to border image(It depends on the remove_line_at_border parameter)
 */
  __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2223, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  if (likely(PyList_CheckExact(__pyx_v_contours)) || PyTuple_CheckExact(__pyx_v_contours)) {
    __pyx_t_1 = __pyx_v_contours; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
    __pyx_t_10 = NULL;
  } else {
    __pyx_t_9 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_v_contours); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_10 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2223, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_10)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2223, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2223, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      } else {
        if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2223, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2223, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      }
    } else {
      __pyx_t_8 = __pyx_t_10(__pyx_t_1);
      if (unlikely(!__pyx_t_8)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2223, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_8);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_cv2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_boundingRect); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_8 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_7, __pyx_v_c) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_c);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 2223, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_rects = ((PyObject*)__pyx_t_6);
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2227
 *         # Remove noise: small line or the line reach to border image(It depends on the remove_line_at_border parameter)
 *         # convert box coordination from padding image to the original image
 *         rects = [Utils.remove_padding_rect(rect, image_shape, PADDING_SIZE) for rect in rects if             # <<<<<<<<<<<<<<
 *                  not (Utils.is_noise(rect))
 *                  and not (remove_line_at_border and Utils.line_at_border_image(rect, image_shape, PADDING_SIZE))]
 */
  __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2227, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
  for (;;) {
    if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2227, __pyx_L1_error)
    #else
    __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2227, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_8);
    __pyx_t_8 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2228
 *         # convert box coordination from padding image to the original image
 *         rects = [Utils.remove_padding_rect(rect, image_shape, PADDING_SIZE) for rect in rects if
 *                  not (Utils.is_noise(rect))             # <<<<<<<<<<<<<<
 *                  and not (remove_line_at_border and Utils.line_at_border_image(rect, image_shape, PADDING_SIZE))]
 *         # remove the lines, if that line's width or line's height is too big
 */
    __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2228, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_is_noise); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2228, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    __pyx_t_8 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_4, __pyx_v_rect) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_rect);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2228, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2228, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_13 = ((!__pyx_t_12) != 0);
    if (__pyx_t_13) {
    } else {
      __pyx_t_11 = __pyx_t_13;
      goto __pyx_L8_bool_binop_done;
    }

    /* "table_extraction/utils_table_extraction.pyx":2229
 *         rects = [Utils.remove_padding_rect(rect, image_shape, PADDING_SIZE) for rect in rects if
 *                  not (Utils.is_noise(rect))
 *                  and not (remove_line_at_border and Utils.line_at_border_image(rect, image_shape, PADDING_SIZE))]             # <<<<<<<<<<<<<<
 *         # remove the lines, if that line's width or line's height is too big
 *         return [rect for rect in rects if rect[2] < 40 or rect[3] < 40]
 */
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_v_remove_line_at_border); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2229, __pyx_L1_error)
    if (__pyx_t_12) {
    } else {
      __pyx_t_13 = __pyx_t_12;
      goto __pyx_L10_bool_binop_done;
    }
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2229, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_line_at_border_image); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2229, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = __Pyx_PyInt_From_long(__pyx_v_PADDING_SIZE); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2229, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_3 = NULL;
    __pyx_t_5 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
        __pyx_t_5 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_rect, __pyx_v_image_shape, __pyx_t_7};
      __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2229, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_4)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_v_rect, __pyx_v_image_shape, __pyx_t_7};
      __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_4, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2229, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_2 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2229, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      if (__pyx_t_3) {
        __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      __Pyx_INCREF(__pyx_v_rect);
      __Pyx_GIVEREF(__pyx_v_rect);
      PyTuple_SET_ITEM(__pyx_t_2, 0+__pyx_t_5, __pyx_v_rect);
      __Pyx_INCREF(__pyx_v_image_shape);
      __Pyx_GIVEREF(__pyx_v_image_shape);
      PyTuple_SET_ITEM(__pyx_t_2, 1+__pyx_t_5, __pyx_v_image_shape);
      __Pyx_GIVEREF(__pyx_t_7);
      PyTuple_SET_ITEM(__pyx_t_2, 2+__pyx_t_5, __pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_t_2, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2229, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2229, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_13 = __pyx_t_12;
    __pyx_L10_bool_binop_done:;
    __pyx_t_12 = ((!__pyx_t_13) != 0);
    __pyx_t_11 = __pyx_t_12;
    __pyx_L8_bool_binop_done:;

    /* "table_extraction/utils_table_extraction.pyx":2227
 *         # Remove noise: small line or the line reach to border image(It depends on the remove_line_at_border parameter)
 *         # convert box coordination from padding image to the original image
 *         rects = [Utils.remove_padding_rect(rect, image_shape, PADDING_SIZE) for rect in rects if             # <<<<<<<<<<<<<<
 *                  not (Utils.is_noise(rect))
 *                  and not (remove_line_at_border and Utils.line_at_border_image(rect, image_shape, PADDING_SIZE))]
 */
    if (__pyx_t_11) {
      __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2227, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_remove_padding_rect); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2227, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyInt_From_long(__pyx_v_PADDING_SIZE); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2227, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = NULL;
      __pyx_t_5 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_2);
        if (likely(__pyx_t_7)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
          __Pyx_INCREF(__pyx_t_7);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_2, function);
          __pyx_t_5 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_v_rect, __pyx_v_image_shape, __pyx_t_4};
        __pyx_t_8 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2227, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
        PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_v_rect, __pyx_v_image_shape, __pyx_t_4};
        __pyx_t_8 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 3+__pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2227, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_3 = PyTuple_New(3+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2227, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        if (__pyx_t_7) {
          __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_7); __pyx_t_7 = NULL;
        }
        __Pyx_INCREF(__pyx_v_rect);
        __Pyx_GIVEREF(__pyx_v_rect);
        PyTuple_SET_ITEM(__pyx_t_3, 0+__pyx_t_5, __pyx_v_rect);
        __Pyx_INCREF(__pyx_v_image_shape);
        __Pyx_GIVEREF(__pyx_v_image_shape);
        PyTuple_SET_ITEM(__pyx_t_3, 1+__pyx_t_5, __pyx_v_image_shape);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_3, 2+__pyx_t_5, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_3, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2227, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      }
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 2227, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_rects, ((PyObject*)__pyx_t_6));
  __pyx_t_6 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2231
 *                  and not (remove_line_at_border and Utils.line_at_border_image(rect, image_shape, PADDING_SIZE))]
 *         # remove the lines, if that line's width or line's height is too big
 *         return [rect for rect in rects if rect[2] < 40 or rect[3] < 40]             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_6 = PyList_New(0); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2231, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_1 = __pyx_v_rects; __Pyx_INCREF(__pyx_t_1); __pyx_t_9 = 0;
  for (;;) {
    if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_8 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_9); __Pyx_INCREF(__pyx_t_8); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 2231, __pyx_L1_error)
    #else
    __pyx_t_8 = PySequence_ITEM(__pyx_t_1, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_rect, __pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_rect, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_8, __pyx_int_40, Py_LT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!__pyx_t_12) {
    } else {
      __pyx_t_11 = __pyx_t_12;
      goto __pyx_L15_bool_binop_done;
    }
    __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_rect, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_8 = PyObject_RichCompare(__pyx_t_2, __pyx_int_40, Py_LT); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_11 = __pyx_t_12;
    __pyx_L15_bool_binop_done:;
    if (__pyx_t_11) {
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_6, (PyObject*)__pyx_v_rect))) __PYX_ERR(0, 2231, __pyx_L1_error)
    }
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_6;
  __pyx_t_6 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2209
 * 
 *     @staticmethod
 *     def extract_line_rect(image, remove_line_at_border=True):             # <<<<<<<<<<<<<<
 *         """
 *         :param image: The image contains horizontal lines or vertical lines.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.extract_line_rect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_extract_line_image);
  __Pyx_XDECREF(__pyx_v_image_shape);
  __Pyx_XDECREF(__pyx_v_contours);
  __Pyx_XDECREF(__pyx_v_rects);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_rect);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2234
 * 
 *     @staticmethod
 *     def is_point_in_line(point, line):             # <<<<<<<<<<<<<<
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_259is_point_in_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_259is_point_in_line = {"is_point_in_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_259is_point_in_line, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_259is_point_in_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_point_in_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_point,&__pyx_n_s_line,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_point_in_line", 1, 2, 2, 1); __PYX_ERR(0, 2234, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_point_in_line") < 0)) __PYX_ERR(0, 2234, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_point = values[0];
    __pyx_v_line = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_point_in_line", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2234, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_point_in_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_258is_point_in_line(__pyx_self, __pyx_v_point, __pyx_v_line);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_258is_point_in_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("is_point_in_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":2235
 *     @staticmethod
 *     def is_point_in_line(point, line):
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \             # <<<<<<<<<<<<<<
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (!__pyx_t_5) {
    goto __pyx_L4_next_or;
  } else {
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2235, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2235, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_2)) {
    __Pyx_DECREF(__pyx_t_2);
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2235, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_GetItemInt(__pyx_t_6, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2235, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_7, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2235, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2235, __pyx_L1_error)
  if (!__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_L4_next_or:;

  /* "table_extraction/utils_table_extraction.pyx":2236
 *     def is_point_in_line(point, line):
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_point, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_2, __pyx_t_4, Py_EQ); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2236, __pyx_L1_error)
  if (__pyx_t_5) {
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_1 = __pyx_t_3;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L3_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_GetItemInt(__pyx_t_3, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_point, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2236, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_4, __pyx_t_3, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2236, __pyx_L1_error)
  if (__Pyx_PyObject_IsTrue(__pyx_t_2)) {
    __Pyx_DECREF(__pyx_t_2);
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2236, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_6 = __Pyx_GetItemInt(__pyx_t_7, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2236, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_t_6, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2236, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_1 = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L3_bool_binop_done:;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2234
 * 
 *     @staticmethod
 *     def is_point_in_line(point, line):             # <<<<<<<<<<<<<<
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_point_in_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2239
 * 
 *     @staticmethod
 *     def is_start_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_261is_start_point_on_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_260is_start_point_on_intersection[] = "\n        :param line:\n        :param orientation:\n        :param threshold: threshold of distance between start point and original start point\n        :return: True if start point on the intersection point\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_261is_start_point_on_intersection = {"is_start_point_on_intersection", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_261is_start_point_on_intersection, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_260is_start_point_on_intersection};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_261is_start_point_on_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_start_point_on_intersection (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_start_point_on_intersection") < 0)) __PYX_ERR(0, 2239, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_orientation = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_start_point_on_intersection", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2239, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_start_point_on_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_260is_start_point_on_intersection(__pyx_self, __pyx_v_line, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_260is_start_point_on_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  long __pyx_v_idx;
  PyObject *__pyx_v_orig_start_point = NULL;
  PyObject *__pyx_v_start_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("is_start_point_on_intersection", 0);

  /* "table_extraction/utils_table_extraction.pyx":2246
 *         :return: True if start point on the intersection point
 *         """
 *         idx = 1 if orientation=="v" else 0             # <<<<<<<<<<<<<<
 *         if line.original_start_point and line.start_point:
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2246, __pyx_L1_error)
  if (__pyx_t_2) {
    __pyx_t_1 = 1;
  } else {
    __pyx_t_1 = 0;
  }
  __pyx_v_idx = __pyx_t_1;

  /* "table_extraction/utils_table_extraction.pyx":2247
 *         """
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_start_point and line.start_point:             # <<<<<<<<<<<<<<
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()
 *             start_point      = line.start_point[idx]          # intersection start point at shrink_line()
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_original_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2247, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 2247, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_4) {
  } else {
    __pyx_t_2 = __pyx_t_4;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2247, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 2247, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_2 = __pyx_t_4;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":2248
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_start_point and line.start_point:
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()             # <<<<<<<<<<<<<<
 *             start_point      = line.start_point[idx]          # intersection start point at shrink_line()
 *             return abs(orig_start_point-start_point)<threshold
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_original_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2248, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_3, __pyx_v_idx, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2248, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_orig_start_point = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2249
 *         if line.original_start_point and line.start_point:
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()
 *             start_point      = line.start_point[idx]          # intersection start point at shrink_line()             # <<<<<<<<<<<<<<
 *             return abs(orig_start_point-start_point)<threshold
 *         else:
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_5, __pyx_v_idx, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2249, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_start_point = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2250
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()
 *             start_point      = line.start_point[idx]          # intersection start point at shrink_line()
 *             return abs(orig_start_point-start_point)<threshold             # <<<<<<<<<<<<<<
 *         else:
 *             return False
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = PyNumber_Subtract(__pyx_v_orig_start_point, __pyx_v_start_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2250, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2250, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_5, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2250, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2247
 *         """
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_start_point and line.start_point:             # <<<<<<<<<<<<<<
 *             orig_start_point = line.original_start_point[idx] # start point before shrink_line()
 *             start_point      = line.start_point[idx]          # intersection start point at shrink_line()
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2252
 *             return abs(orig_start_point-start_point)<threshold
 *         else:
 *             return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":2239
 * 
 *     @staticmethod
 *     def is_start_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_start_point_on_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_orig_start_point);
  __Pyx_XDECREF(__pyx_v_start_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2255
 * 
 *     @staticmethod
 *     def is_end_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_263is_end_point_on_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_262is_end_point_on_intersection[] = "\n        :param line:\n        :param orientation:\n        :param threshold: threshold of distance between end point and original end point\n        :return: True if point on intersection\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_263is_end_point_on_intersection = {"is_end_point_on_intersection", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_263is_end_point_on_intersection, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_262is_end_point_on_intersection};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_263is_end_point_on_intersection(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_orientation = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_end_point_on_intersection (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_line,&__pyx_n_s_orientation,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)((PyObject*)__pyx_n_s_v));
    values[2] = ((PyObject *)((PyObject *)__pyx_int_0));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_orientation);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_end_point_on_intersection") < 0)) __PYX_ERR(0, 2255, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_line = values[0];
    __pyx_v_orientation = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_end_point_on_intersection", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2255, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_end_point_on_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_262is_end_point_on_intersection(__pyx_self, __pyx_v_line, __pyx_v_orientation, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_262is_end_point_on_intersection(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_line, PyObject *__pyx_v_orientation, PyObject *__pyx_v_threshold) {
  long __pyx_v_idx;
  PyObject *__pyx_v_orig_end_point = NULL;
  PyObject *__pyx_v_end_point = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  long __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("is_end_point_on_intersection", 0);

  /* "table_extraction/utils_table_extraction.pyx":2262
 *         :return: True if point on intersection
 *         """
 *         idx = 1 if orientation=="v" else 0             # <<<<<<<<<<<<<<
 *         if line.original_end_point and line.end_point:
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()
 */
  __pyx_t_2 = (__Pyx_PyString_Equals(__pyx_v_orientation, __pyx_n_s_v, Py_EQ)); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2262, __pyx_L1_error)
  if (__pyx_t_2) {
    __pyx_t_1 = 1;
  } else {
    __pyx_t_1 = 0;
  }
  __pyx_v_idx = __pyx_t_1;

  /* "table_extraction/utils_table_extraction.pyx":2263
 *         """
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_end_point and line.end_point:             # <<<<<<<<<<<<<<
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()
 *             end_point      = line.end_point[idx]          # intersection end point at shrink_line()
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_original_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2263, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 2263, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_4) {
  } else {
    __pyx_t_2 = __pyx_t_4;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2263, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 2263, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_2 = __pyx_t_4;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":2264
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_end_point and line.end_point:
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()             # <<<<<<<<<<<<<<
 *             end_point      = line.end_point[idx]          # intersection end point at shrink_line()
 *             return abs(orig_end_point-end_point)<threshold
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_original_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2264, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_GetItemInt(__pyx_t_3, __pyx_v_idx, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2264, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_orig_end_point = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2265
 *         if line.original_end_point and line.end_point:
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()
 *             end_point      = line.end_point[idx]          # intersection end point at shrink_line()             # <<<<<<<<<<<<<<
 *             return abs(orig_end_point-end_point)<threshold
 *         else:
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2265, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_5, __pyx_v_idx, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2265, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_end_point = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2266
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()
 *             end_point      = line.end_point[idx]          # intersection end point at shrink_line()
 *             return abs(orig_end_point-end_point)<threshold             # <<<<<<<<<<<<<<
 *         else:
 *             return False
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = PyNumber_Subtract(__pyx_v_orig_end_point, __pyx_v_end_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2266, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_PyNumber_Absolute(__pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2266, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PyObject_RichCompare(__pyx_t_5, __pyx_v_threshold, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2266, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2263
 *         """
 *         idx = 1 if orientation=="v" else 0
 *         if line.original_end_point and line.end_point:             # <<<<<<<<<<<<<<
 *             orig_end_point = line.original_end_point[idx] # end point before shrink_line()
 *             end_point      = line.end_point[idx]          # intersection end point at shrink_line()
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2268
 *             return abs(orig_end_point-end_point)<threshold
 *         else:
 *             return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
  }

  /* "table_extraction/utils_table_extraction.pyx":2255
 * 
 *     @staticmethod
 *     def is_end_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_end_point_on_intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_orig_end_point);
  __Pyx_XDECREF(__pyx_v_end_point);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2271
 * 
 *     @staticmethod
 *     def is_point_far_line(point, line, times=1):             # <<<<<<<<<<<<<<
 *         """
 *         Is the point {times} times as far away from the line
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_265is_point_far_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_264is_point_far_line[] = "\n        Is the point {times} times as far away from the line\n\n        :param point:\n        :param line:\n        :param times: a multiple of the line length\n        :return: True if point is far from line\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_265is_point_far_line = {"is_point_far_line", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_265is_point_far_line, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_264is_point_far_line};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_265is_point_far_line(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_point = 0;
  PyObject *__pyx_v_line = 0;
  PyObject *__pyx_v_times = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_point_far_line (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_point,&__pyx_n_s_line,&__pyx_n_s_times,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_1));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_point)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_line)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_point_far_line", 0, 2, 3, 1); __PYX_ERR(0, 2271, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_times);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_point_far_line") < 0)) __PYX_ERR(0, 2271, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_point = values[0];
    __pyx_v_line = values[1];
    __pyx_v_times = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_point_far_line", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2271, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_point_far_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_264is_point_far_line(__pyx_self, __pyx_v_point, __pyx_v_line, __pyx_v_times);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_264is_point_far_line(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_point, PyObject *__pyx_v_line, PyObject *__pyx_v_times) {
  PyObject *__pyx_v_min_distance = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  __Pyx_RefNannySetupContext("is_point_far_line", 0);

  /* "table_extraction/utils_table_extraction.pyx":2281
 *         """
 *         min_distance = min(Utils.distance_from_point_to_point(line.start_point, point),
 *                            Utils.distance_from_point_to_point(line.end_point,   point))             # <<<<<<<<<<<<<<
 *         return line.length()*times>min_distance
 * 
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_end_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_v_point};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2281, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_v_point};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2281, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_6 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2281, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_6, 0+__pyx_t_5, __pyx_t_2);
    __Pyx_INCREF(__pyx_v_point);
    __Pyx_GIVEREF(__pyx_v_point);
    PyTuple_SET_ITEM(__pyx_t_6, 1+__pyx_t_5, __pyx_v_point);
    __pyx_t_2 = 0;
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_6, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2281, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2280
 *         :return: True if point is far from line
 *         """
 *         min_distance = min(Utils.distance_from_point_to_point(line.start_point, point),             # <<<<<<<<<<<<<<
 *                            Utils.distance_from_point_to_point(line.end_point,   point))
 *         return line.length()*times>min_distance
 */
  __Pyx_GetModuleGlobalName(__pyx_t_6, __pyx_n_s_Utils); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2280, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_distance_from_point_to_point); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2280, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_start_point); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2280, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __pyx_t_4 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_6, __pyx_v_point};
    __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2280, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_6, __pyx_v_point};
    __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2280, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  } else
  #endif
  {
    __pyx_t_7 = PyTuple_New(2+__pyx_t_5); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2280, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    if (__pyx_t_4) {
      __Pyx_GIVEREF(__pyx_t_4); PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_7, 0+__pyx_t_5, __pyx_t_6);
    __Pyx_INCREF(__pyx_v_point);
    __Pyx_GIVEREF(__pyx_v_point);
    PyTuple_SET_ITEM(__pyx_t_7, 1+__pyx_t_5, __pyx_v_point);
    __pyx_t_6 = 0;
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_7, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2280, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2281
 *         """
 *         min_distance = min(Utils.distance_from_point_to_point(line.start_point, point),
 *                            Utils.distance_from_point_to_point(line.end_point,   point))             # <<<<<<<<<<<<<<
 *         return line.length()*times>min_distance
 * 
 */
  __pyx_t_7 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_LT); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2281, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 2281, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (__pyx_t_8) {
    __Pyx_INCREF(__pyx_t_1);
    __pyx_t_2 = __pyx_t_1;
  } else {
    __Pyx_INCREF(__pyx_t_3);
    __pyx_t_2 = __pyx_t_3;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __pyx_t_2;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_min_distance = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2282
 *         min_distance = min(Utils.distance_from_point_to_point(line.start_point, point),
 *                            Utils.distance_from_point_to_point(line.end_point,   point))
 *         return line.length()*times>min_distance             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_line, __pyx_n_s_length); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Multiply(__pyx_t_1, __pyx_v_times); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_min_distance, Py_GT); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2282, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2271
 * 
 *     @staticmethod
 *     def is_point_far_line(point, line, times=1):             # <<<<<<<<<<<<<<
 *         """
 *         Is the point {times} times as far away from the line
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_point_far_line", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_min_distance);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2285
 * 
 *     @staticmethod
 *     def search_text_by_box(crnn_chars, box): #13968             # <<<<<<<<<<<<<<
 *         """
 *         Search text from crnn_chars by box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_267search_text_by_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_266search_text_by_box[] = "\n        Search text from crnn_chars by box\n\n        :param crnn_chars:\n        :param box:\n        :return find:text  not find:\"\"\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_267search_text_by_box = {"search_text_by_box", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_267search_text_by_box, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_266search_text_by_box};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_267search_text_by_box(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_crnn_chars = 0;
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("search_text_by_box (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_crnn_chars,&__pyx_n_s_box,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_crnn_chars)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("search_text_by_box", 1, 2, 2, 1); __PYX_ERR(0, 2285, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "search_text_by_box") < 0)) __PYX_ERR(0, 2285, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_crnn_chars = values[0];
    __pyx_v_box = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("search_text_by_box", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2285, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.search_text_by_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_266search_text_by_box(__pyx_self, __pyx_v_crnn_chars, __pyx_v_box);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_266search_text_by_box(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_crnn_chars, PyObject *__pyx_v_box) {
  PyObject *__pyx_v_text = NULL;
  PyObject *__pyx_v_crnn_char = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("search_text_by_box", 0);

  /* "table_extraction/utils_table_extraction.pyx":2293
 *         :return find:text  not find:""
 *         """
 *         text = [crnn_char["text"] for crnn_char in crnn_chars if (crnn_char["x"], crnn_char["y"], crnn_char["w"], crnn_char["h"])==box]             # <<<<<<<<<<<<<<
 *         return text[0] if text and text[0] else ""
 * 
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2293, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (likely(PyList_CheckExact(__pyx_v_crnn_chars)) || PyTuple_CheckExact(__pyx_v_crnn_chars)) {
    __pyx_t_2 = __pyx_v_crnn_chars; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_crnn_chars); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2293, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2293, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2293, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2293, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2293, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2293, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_crnn_char, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_Dict_GetItem(__pyx_v_crnn_char, __pyx_n_s_x); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = __Pyx_PyObject_Dict_GetItem(__pyx_v_crnn_char, __pyx_n_s_y); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = __Pyx_PyObject_Dict_GetItem(__pyx_v_crnn_char, __pyx_n_s_w); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_PyObject_Dict_GetItem(__pyx_v_crnn_char, __pyx_n_s_h); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_9 = PyTuple_New(4); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_6);
    PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_7);
    PyTuple_SET_ITEM(__pyx_t_9, 2, __pyx_t_7);
    __Pyx_GIVEREF(__pyx_t_8);
    PyTuple_SET_ITEM(__pyx_t_9, 3, __pyx_t_8);
    __pyx_t_5 = 0;
    __pyx_t_6 = 0;
    __pyx_t_7 = 0;
    __pyx_t_8 = 0;
    __pyx_t_8 = PyObject_RichCompare(__pyx_t_9, __pyx_v_box, Py_EQ); __Pyx_XGOTREF(__pyx_t_8); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_10 = __Pyx_PyObject_IsTrue(__pyx_t_8); if (unlikely(__pyx_t_10 < 0)) __PYX_ERR(0, 2293, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (__pyx_t_10) {
      __pyx_t_8 = __Pyx_PyObject_Dict_GetItem(__pyx_v_crnn_char, __pyx_n_s_text); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2293, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 2293, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_text = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2294
 *         """
 *         text = [crnn_char["text"] for crnn_char in crnn_chars if (crnn_char["x"], crnn_char["y"], crnn_char["w"], crnn_char["h"])==box]
 *         return text[0] if text and text[0] else ""             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_11 = (PyList_GET_SIZE(__pyx_v_text) != 0);
  if (__pyx_t_11) {
  } else {
    __pyx_t_10 = __pyx_t_11;
    goto __pyx_L6_bool_binop_done;
  }
  __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_text, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_11 < 0)) __PYX_ERR(0, 2294, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_10 = __pyx_t_11;
  __pyx_L6_bool_binop_done:;
  if (__pyx_t_10) {
    __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_text, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __pyx_t_2;
    __pyx_t_2 = 0;
  } else {
    __Pyx_INCREF(__pyx_kp_s__21);
    __pyx_t_1 = __pyx_kp_s__21;
  }
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2285
 * 
 *     @staticmethod
 *     def search_text_by_box(crnn_chars, box): #13968             # <<<<<<<<<<<<<<
 *         """
 *         Search text from crnn_chars by box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.search_text_by_box", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_text);
  __Pyx_XDECREF(__pyx_v_crnn_char);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2297
 * 
 *     @staticmethod
 *     def merge_single_chars(text_list):             # <<<<<<<<<<<<<<
 *         merge_chars_list = []
 *         searched_ids     = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_269merge_single_chars(PyObject *__pyx_self, PyObject *__pyx_v_text_list); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_269merge_single_chars = {"merge_single_chars", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_269merge_single_chars, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_269merge_single_chars(PyObject *__pyx_self, PyObject *__pyx_v_text_list) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("merge_single_chars (wrapper)", 0);
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_268merge_single_chars(__pyx_self, ((PyObject *)__pyx_v_text_list));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_268merge_single_chars(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_text_list) {
  PyObject *__pyx_v_merge_chars_list = NULL;
  PyObject *__pyx_v_searched_ids = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_src_text = NULL;
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_v_dst_text = NULL;
  PyObject *__pyx_v_adj = NULL;
  PyObject *__pyx_v_merge_chars = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *(*__pyx_t_4)(PyObject *);
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *(*__pyx_t_13)(PyObject *);
  PyObject *__pyx_t_14 = NULL;
  PyObject *__pyx_t_15 = NULL;
  PyObject *(*__pyx_t_16)(PyObject *);
  Py_ssize_t __pyx_t_17;
  int __pyx_t_18;
  __Pyx_RefNannySetupContext("merge_single_chars", 0);

  /* "table_extraction/utils_table_extraction.pyx":2298
 *     @staticmethod
 *     def merge_single_chars(text_list):
 *         merge_chars_list = []             # <<<<<<<<<<<<<<
 *         searched_ids     = []
 *         for i, src_text in enumerate(text_list):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2298, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_merge_chars_list = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2299
 *     def merge_single_chars(text_list):
 *         merge_chars_list = []
 *         searched_ids     = []             # <<<<<<<<<<<<<<
 *         for i, src_text in enumerate(text_list):
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2299, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_searched_ids = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2300
 *         merge_chars_list = []
 *         searched_ids     = []
 *         for i, src_text in enumerate(text_list):             # <<<<<<<<<<<<<<
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 *                 merge_chars_list.append([i])
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_1 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_text_list)) || PyTuple_CheckExact(__pyx_v_text_list)) {
    __pyx_t_2 = __pyx_v_text_list; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    __pyx_t_4 = NULL;
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_text_list); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2300, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2300, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_4)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2300, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2300, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_3 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_5); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2300, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2300, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_4(__pyx_t_2);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2300, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_src_text, __pyx_t_5);
    __pyx_t_5 = 0;
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_5 = __Pyx_PyInt_AddObjC(__pyx_t_1, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2300, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1);
    __pyx_t_1 = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2301
 *         searched_ids     = []
 *         for i, src_text in enumerate(text_list):
 *             if len(src_text)==1 and i not in searched_ids: # chack single char             # <<<<<<<<<<<<<<
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 */
    __pyx_t_7 = PyObject_Length(__pyx_v_src_text); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2301, __pyx_L1_error)
    __pyx_t_8 = ((__pyx_t_7 == 1) != 0);
    if (__pyx_t_8) {
    } else {
      __pyx_t_6 = __pyx_t_8;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_8 = (__Pyx_PySequence_ContainsTF(__pyx_v_i, __pyx_v_searched_ids, Py_NE)); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 2301, __pyx_L1_error)
    __pyx_t_9 = (__pyx_t_8 != 0);
    __pyx_t_6 = __pyx_t_9;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":2302
 *         for i, src_text in enumerate(text_list):
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 *                 merge_chars_list.append([i])             # <<<<<<<<<<<<<<
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 *                     if len(dst_text)==1 and j not in searched_ids:
 */
      __pyx_t_5 = PyList_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2302, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_i);
      __Pyx_GIVEREF(__pyx_v_i);
      PyList_SET_ITEM(__pyx_t_5, 0, __pyx_v_i);
      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_merge_chars_list, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 2302, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2303
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):             # <<<<<<<<<<<<<<
 *                     if len(dst_text)==1 and j not in searched_ids:
 *                         merge_chars_list[-1].append(j)
 */
      __pyx_t_5 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_11 = __Pyx_PyObject_GetSlice(__pyx_v_text_list, 0, 0, &__pyx_t_5, NULL, NULL, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = PyTuple_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_11);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_11);
      __pyx_t_11 = 0;
      __pyx_t_11 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_12 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      if (PyDict_SetItem(__pyx_t_11, __pyx_n_s_start, __pyx_t_12) < 0) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = __Pyx_PyObject_Call(__pyx_builtin_enumerate, __pyx_t_5, __pyx_t_11); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2303, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      if (likely(PyList_CheckExact(__pyx_t_12)) || PyTuple_CheckExact(__pyx_t_12)) {
        __pyx_t_11 = __pyx_t_12; __Pyx_INCREF(__pyx_t_11); __pyx_t_7 = 0;
        __pyx_t_13 = NULL;
      } else {
        __pyx_t_7 = -1; __pyx_t_11 = PyObject_GetIter(__pyx_t_12); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2303, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_13 = Py_TYPE(__pyx_t_11)->tp_iternext; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2303, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      for (;;) {
        if (likely(!__pyx_t_13)) {
          if (likely(PyList_CheckExact(__pyx_t_11))) {
            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_11)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_12 = PyList_GET_ITEM(__pyx_t_11, __pyx_t_7); __Pyx_INCREF(__pyx_t_12); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 2303, __pyx_L1_error)
            #else
            __pyx_t_12 = PySequence_ITEM(__pyx_t_11, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2303, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_12);
            #endif
          } else {
            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_11)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_12 = PyTuple_GET_ITEM(__pyx_t_11, __pyx_t_7); __Pyx_INCREF(__pyx_t_12); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 2303, __pyx_L1_error)
            #else
            __pyx_t_12 = PySequence_ITEM(__pyx_t_11, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2303, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_12);
            #endif
          }
        } else {
          __pyx_t_12 = __pyx_t_13(__pyx_t_11);
          if (unlikely(!__pyx_t_12)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 2303, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_12);
        }
        if ((likely(PyTuple_CheckExact(__pyx_t_12))) || (PyList_CheckExact(__pyx_t_12))) {
          PyObject* sequence = __pyx_t_12;
          Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
          if (unlikely(size != 2)) {
            if (size > 2) __Pyx_RaiseTooManyValuesError(2);
            else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
            __PYX_ERR(0, 2303, __pyx_L1_error)
          }
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          if (likely(PyTuple_CheckExact(sequence))) {
            __pyx_t_5 = PyTuple_GET_ITEM(sequence, 0); 
            __pyx_t_14 = PyTuple_GET_ITEM(sequence, 1); 
          } else {
            __pyx_t_5 = PyList_GET_ITEM(sequence, 0); 
            __pyx_t_14 = PyList_GET_ITEM(sequence, 1); 
          }
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_14);
          #else
          __pyx_t_5 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2303, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __pyx_t_14 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2303, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          #endif
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        } else {
          Py_ssize_t index = -1;
          __pyx_t_15 = PyObject_GetIter(__pyx_t_12); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 2303, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_15);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          __pyx_t_16 = Py_TYPE(__pyx_t_15)->tp_iternext;
          index = 0; __pyx_t_5 = __pyx_t_16(__pyx_t_15); if (unlikely(!__pyx_t_5)) goto __pyx_L10_unpacking_failed;
          __Pyx_GOTREF(__pyx_t_5);
          index = 1; __pyx_t_14 = __pyx_t_16(__pyx_t_15); if (unlikely(!__pyx_t_14)) goto __pyx_L10_unpacking_failed;
          __Pyx_GOTREF(__pyx_t_14);
          if (__Pyx_IternextUnpackEndCheck(__pyx_t_16(__pyx_t_15), 2) < 0) __PYX_ERR(0, 2303, __pyx_L1_error)
          __pyx_t_16 = NULL;
          __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
          goto __pyx_L11_unpacking_done;
          __pyx_L10_unpacking_failed:;
          __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
          __pyx_t_16 = NULL;
          if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
          __PYX_ERR(0, 2303, __pyx_L1_error)
          __pyx_L11_unpacking_done:;
        }
        __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_5);
        __pyx_t_5 = 0;
        __Pyx_XDECREF_SET(__pyx_v_dst_text, __pyx_t_14);
        __pyx_t_14 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2304
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 *                     if len(dst_text)==1 and j not in searched_ids:             # <<<<<<<<<<<<<<
 *                         merge_chars_list[-1].append(j)
 *                         searched_ids.append(j)
 */
        __pyx_t_17 = PyObject_Length(__pyx_v_dst_text); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2304, __pyx_L1_error)
        __pyx_t_9 = ((__pyx_t_17 == 1) != 0);
        if (__pyx_t_9) {
        } else {
          __pyx_t_6 = __pyx_t_9;
          goto __pyx_L13_bool_binop_done;
        }
        __pyx_t_9 = (__Pyx_PySequence_ContainsTF(__pyx_v_j, __pyx_v_searched_ids, Py_NE)); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 2304, __pyx_L1_error)
        __pyx_t_8 = (__pyx_t_9 != 0);
        __pyx_t_6 = __pyx_t_8;
        __pyx_L13_bool_binop_done:;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":2305
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 *                     if len(dst_text)==1 and j not in searched_ids:
 *                         merge_chars_list[-1].append(j)             # <<<<<<<<<<<<<<
 *                         searched_ids.append(j)
 *                     else:
 */
          __pyx_t_12 = __Pyx_GetItemInt_List(__pyx_v_merge_chars_list, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2305, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __pyx_t_10 = __Pyx_PyObject_Append(__pyx_t_12, __pyx_v_j); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 2305, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;

          /* "table_extraction/utils_table_extraction.pyx":2306
 *                     if len(dst_text)==1 and j not in searched_ids:
 *                         merge_chars_list[-1].append(j)
 *                         searched_ids.append(j)             # <<<<<<<<<<<<<<
 *                     else:
 *                         break
 */
          __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_searched_ids, __pyx_v_j); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 2306, __pyx_L1_error)

          /* "table_extraction/utils_table_extraction.pyx":2304
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 *                     if len(dst_text)==1 and j not in searched_ids:             # <<<<<<<<<<<<<<
 *                         merge_chars_list[-1].append(j)
 *                         searched_ids.append(j)
 */
          goto __pyx_L12;
        }

        /* "table_extraction/utils_table_extraction.pyx":2308
 *                         searched_ids.append(j)
 *                     else:
 *                         break             # <<<<<<<<<<<<<<
 *         # merge single chars
 *         adj = 0
 */
        /*else*/ {
          goto __pyx_L9_break;
        }
        __pyx_L12:;

        /* "table_extraction/utils_table_extraction.pyx":2303
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):             # <<<<<<<<<<<<<<
 *                     if len(dst_text)==1 and j not in searched_ids:
 *                         merge_chars_list[-1].append(j)
 */
      }
      __pyx_L9_break:;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2301
 *         searched_ids     = []
 *         for i, src_text in enumerate(text_list):
 *             if len(src_text)==1 and i not in searched_ids: # chack single char             # <<<<<<<<<<<<<<
 *                 merge_chars_list.append([i])
 *                 for j, dst_text in enumerate(text_list[i+1:], start=i+1):
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2300
 *         merge_chars_list = []
 *         searched_ids     = []
 *         for i, src_text in enumerate(text_list):             # <<<<<<<<<<<<<<
 *             if len(src_text)==1 and i not in searched_ids: # chack single char
 *                 merge_chars_list.append([i])
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2310
 *                         break
 *         # merge single chars
 *         adj = 0             # <<<<<<<<<<<<<<
 *         for merge_chars in merge_chars_list:
 *             if len(merge_chars)>=2:
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_adj = __pyx_int_0;

  /* "table_extraction/utils_table_extraction.pyx":2311
 *         # merge single chars
 *         adj = 0
 *         for merge_chars in merge_chars_list:             # <<<<<<<<<<<<<<
 *             if len(merge_chars)>=2:
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 */
  __pyx_t_1 = __pyx_v_merge_chars_list; __Pyx_INCREF(__pyx_t_1); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_3); __Pyx_INCREF(__pyx_t_2); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 2311, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2311, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_merge_chars, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2312
 *         adj = 0
 *         for merge_chars in merge_chars_list:
 *             if len(merge_chars)>=2:             # <<<<<<<<<<<<<<
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:
 */
    __pyx_t_7 = PyObject_Length(__pyx_v_merge_chars); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2312, __pyx_L1_error)
    __pyx_t_6 = ((__pyx_t_7 >= 2) != 0);
    if (__pyx_t_6) {

      /* "table_extraction/utils_table_extraction.pyx":2313
 *         for merge_chars in merge_chars_list:
 *             if len(merge_chars)>=2:
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))             # <<<<<<<<<<<<<<
 *                 for i in merge_chars:
 *                     if merge_chars[0]-adj+1<len(text_list):
 */
      __pyx_t_11 = __Pyx_PyObject_GetAttrStr(__pyx_v_text_list, __pyx_n_s_insert); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_12 = __Pyx_GetItemInt(__pyx_v_merge_chars, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __pyx_t_14 = PyNumber_Subtract(__pyx_t_12, __pyx_v_adj); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = __Pyx_GetItemInt(__pyx_v_merge_chars, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __pyx_t_5 = PyNumber_Subtract(__pyx_t_12, __pyx_v_adj); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = __Pyx_GetItemInt(__pyx_v_merge_chars, -1L, long, 1, __Pyx_PyInt_From_long, 0, 1, 1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __pyx_t_15 = __Pyx_PyInt_AddObjC(__pyx_t_12, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = PyNumber_Subtract(__pyx_t_15, __pyx_v_adj); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
      __pyx_t_15 = __Pyx_PyObject_GetSlice(__pyx_v_text_list, 0, 0, &__pyx_t_5, &__pyx_t_12, NULL, 0, 0, 1); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = __Pyx_PyString_Join(__pyx_kp_s__21, __pyx_t_15); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
      __pyx_t_15 = NULL;
      __pyx_t_18 = 0;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_11))) {
        __pyx_t_15 = PyMethod_GET_SELF(__pyx_t_11);
        if (likely(__pyx_t_15)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
          __Pyx_INCREF(__pyx_t_15);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_11, function);
          __pyx_t_18 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_t_14, __pyx_t_12};
        __pyx_t_2 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_18, 2+__pyx_t_18); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2313, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_t_14, __pyx_t_12};
        __pyx_t_2 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_18, 2+__pyx_t_18); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2313, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      } else
      #endif
      {
        __pyx_t_5 = PyTuple_New(2+__pyx_t_18); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2313, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        if (__pyx_t_15) {
          __Pyx_GIVEREF(__pyx_t_15); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_15); __pyx_t_15 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_14);
        PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_18, __pyx_t_14);
        __Pyx_GIVEREF(__pyx_t_12);
        PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_18, __pyx_t_12);
        __pyx_t_14 = 0;
        __pyx_t_12 = 0;
        __pyx_t_2 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_5, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2313, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2314
 *             if len(merge_chars)>=2:
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:             # <<<<<<<<<<<<<<
 *                     if merge_chars[0]-adj+1<len(text_list):
 *                         text_list.pop(merge_chars[0]-adj+1)
 */
      if (likely(PyList_CheckExact(__pyx_v_merge_chars)) || PyTuple_CheckExact(__pyx_v_merge_chars)) {
        __pyx_t_2 = __pyx_v_merge_chars; __Pyx_INCREF(__pyx_t_2); __pyx_t_7 = 0;
        __pyx_t_4 = NULL;
      } else {
        __pyx_t_7 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_merge_chars); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2314, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_4 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2314, __pyx_L1_error)
      }
      for (;;) {
        if (likely(!__pyx_t_4)) {
          if (likely(PyList_CheckExact(__pyx_t_2))) {
            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_2)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_11 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_11); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 2314, __pyx_L1_error)
            #else
            __pyx_t_11 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2314, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_11);
            #endif
          } else {
            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_11 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_7); __Pyx_INCREF(__pyx_t_11); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 2314, __pyx_L1_error)
            #else
            __pyx_t_11 = PySequence_ITEM(__pyx_t_2, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2314, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_11);
            #endif
          }
        } else {
          __pyx_t_11 = __pyx_t_4(__pyx_t_2);
          if (unlikely(!__pyx_t_11)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 2314, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_11);
        }
        __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_11);
        __pyx_t_11 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2315
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:
 *                     if merge_chars[0]-adj+1<len(text_list):             # <<<<<<<<<<<<<<
 *                         text_list.pop(merge_chars[0]-adj+1)
 *                 adj += len(merge_chars)-1
 */
        __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_merge_chars, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_5 = PyNumber_Subtract(__pyx_t_11, __pyx_v_adj); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = __Pyx_PyInt_AddObjC(__pyx_t_5, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_17 = PyObject_Length(__pyx_v_text_list); if (unlikely(__pyx_t_17 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2315, __pyx_L1_error)
        __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_17); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_12 = PyObject_RichCompare(__pyx_t_11, __pyx_t_5, Py_LT); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2315, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        if (__pyx_t_6) {

          /* "table_extraction/utils_table_extraction.pyx":2316
 *                 for i in merge_chars:
 *                     if merge_chars[0]-adj+1<len(text_list):
 *                         text_list.pop(merge_chars[0]-adj+1)             # <<<<<<<<<<<<<<
 *                 adj += len(merge_chars)-1
 *         return text_list
 */
          __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_text_list, __pyx_n_s_pop); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2316, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_merge_chars, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2316, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_14 = PyNumber_Subtract(__pyx_t_11, __pyx_v_adj); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2316, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_14);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = __Pyx_PyInt_AddObjC(__pyx_t_14, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2316, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
          __pyx_t_14 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
            __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_5);
            if (likely(__pyx_t_14)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
              __Pyx_INCREF(__pyx_t_14);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_5, function);
            }
          }
          __pyx_t_12 = (__pyx_t_14) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_14, __pyx_t_11) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_11);
          __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2316, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;

          /* "table_extraction/utils_table_extraction.pyx":2315
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:
 *                     if merge_chars[0]-adj+1<len(text_list):             # <<<<<<<<<<<<<<
 *                         text_list.pop(merge_chars[0]-adj+1)
 *                 adj += len(merge_chars)-1
 */
        }

        /* "table_extraction/utils_table_extraction.pyx":2314
 *             if len(merge_chars)>=2:
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:             # <<<<<<<<<<<<<<
 *                     if merge_chars[0]-adj+1<len(text_list):
 *                         text_list.pop(merge_chars[0]-adj+1)
 */
      }
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2317
 *                     if merge_chars[0]-adj+1<len(text_list):
 *                         text_list.pop(merge_chars[0]-adj+1)
 *                 adj += len(merge_chars)-1             # <<<<<<<<<<<<<<
 *         return text_list
 * 
 */
      __pyx_t_7 = PyObject_Length(__pyx_v_merge_chars); if (unlikely(__pyx_t_7 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2317, __pyx_L1_error)
      __pyx_t_2 = PyInt_FromSsize_t((__pyx_t_7 - 1)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2317, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_12 = PyNumber_InPlaceAdd(__pyx_v_adj, __pyx_t_2); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 2317, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF_SET(__pyx_v_adj, __pyx_t_12);
      __pyx_t_12 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2312
 *         adj = 0
 *         for merge_chars in merge_chars_list:
 *             if len(merge_chars)>=2:             # <<<<<<<<<<<<<<
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 *                 for i in merge_chars:
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2311
 *         # merge single chars
 *         adj = 0
 *         for merge_chars in merge_chars_list:             # <<<<<<<<<<<<<<
 *             if len(merge_chars)>=2:
 *                 text_list.insert(merge_chars[0]-adj, "".join(text_list[merge_chars[0]-adj:merge_chars[-1]+1-adj]))
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2318
 *                         text_list.pop(merge_chars[0]-adj+1)
 *                 adj += len(merge_chars)-1
 *         return text_list             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_text_list);
  __pyx_r = __pyx_v_text_list;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2297
 * 
 *     @staticmethod
 *     def merge_single_chars(text_list):             # <<<<<<<<<<<<<<
 *         merge_chars_list = []
 *         searched_ids     = []
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.merge_single_chars", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_merge_chars_list);
  __Pyx_XDECREF(__pyx_v_searched_ids);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_src_text);
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XDECREF(__pyx_v_dst_text);
  __Pyx_XDECREF(__pyx_v_adj);
  __Pyx_XDECREF(__pyx_v_merge_chars);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2321
 * 
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968             # <<<<<<<<<<<<<<
 *         if len(blocks)<=1: #14611
 *             return False
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_271is_text_blocks_header_by_header_dict(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_271is_text_blocks_header_by_header_dict = {"is_text_blocks_header_by_header_dict", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_271is_text_blocks_header_by_header_dict, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_271is_text_blocks_header_by_header_dict(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_blocks = 0;
  PyObject *__pyx_v_crnn_chars = 0;
  PyObject *__pyx_v_header_regex = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_text_blocks_header_by_header_dict (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_blocks,&__pyx_n_s_crnn_chars,&__pyx_n_s_header_regex,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_blocks)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_crnn_chars)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_text_blocks_header_by_header_dict", 1, 3, 3, 1); __PYX_ERR(0, 2321, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_header_regex)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_text_blocks_header_by_header_dict", 1, 3, 3, 2); __PYX_ERR(0, 2321, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_text_blocks_header_by_header_dict") < 0)) __PYX_ERR(0, 2321, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_blocks = values[0];
    __pyx_v_crnn_chars = values[1];
    __pyx_v_header_regex = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_text_blocks_header_by_header_dict", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2321, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_text_blocks_header_by_header_dict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_270is_text_blocks_header_by_header_dict(__pyx_self, __pyx_v_blocks, __pyx_v_crnn_chars, __pyx_v_header_regex);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_270is_text_blocks_header_by_header_dict(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_blocks, PyObject *__pyx_v_crnn_chars, PyObject *__pyx_v_header_regex) {
  PyObject *__pyx_v_text_list = NULL;
  PyObject *__pyx_v_candidate_header_count = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_span_list = NULL;
  PyObject *__pyx_v_searched_ids = NULL;
  Py_ssize_t __pyx_v_THRESH;
  PyObject *__pyx_v_regex = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_text = NULL;
  PyObject *__pyx_v_res = NULL;
  PyObject *__pyx_v_block = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *(*__pyx_t_5)(PyObject *);
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  Py_ssize_t __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  PyObject *(*__pyx_t_13)(PyObject *);
  PyObject *__pyx_t_14 = NULL;
  int __pyx_t_15;
  int __pyx_t_16;
  int __pyx_t_17;
  __Pyx_RefNannySetupContext("is_text_blocks_header_by_header_dict", 0);

  /* "table_extraction/utils_table_extraction.pyx":2322
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968
 *         if len(blocks)<=1: #14611             # <<<<<<<<<<<<<<
 *             return False
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 */
  __pyx_t_1 = PyObject_Length(__pyx_v_blocks); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2322, __pyx_L1_error)
  __pyx_t_2 = ((__pyx_t_1 <= 1) != 0);
  if (__pyx_t_2) {

    /* "table_extraction/utils_table_extraction.pyx":2323
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968
 *         if len(blocks)<=1: #14611
 *             return False             # <<<<<<<<<<<<<<
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 *         text_list = Utils.merge_single_chars(text_list)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2322
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968
 *         if len(blocks)<=1: #14611             # <<<<<<<<<<<<<<
 *             return False
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2324
 *         if len(blocks)<=1: #14611
 *             return False
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]             # <<<<<<<<<<<<<<
 *         text_list = Utils.merge_single_chars(text_list)
 *         text_list = [text.replace(' ', '') for text in text_list]
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (likely(PyList_CheckExact(__pyx_v_blocks)) || PyTuple_CheckExact(__pyx_v_blocks)) {
    __pyx_t_4 = __pyx_v_blocks; __Pyx_INCREF(__pyx_t_4); __pyx_t_1 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_1 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_v_blocks); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2324, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_4))) {
        if (__pyx_t_1 >= PyList_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_1); __Pyx_INCREF(__pyx_t_6); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2324, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2324, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      } else {
        if (__pyx_t_1 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_1); __Pyx_INCREF(__pyx_t_6); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2324, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2324, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      }
    } else {
      __pyx_t_6 = __pyx_t_5(__pyx_t_4);
      if (unlikely(!__pyx_t_6)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2324, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_6);
    }
    __Pyx_XDECREF_SET(__pyx_v_block, __pyx_t_6);
    __pyx_t_6 = 0;
    __Pyx_GetModuleGlobalName(__pyx_t_7, __pyx_n_s_Utils); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_search_text_by_box); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2324, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    __pyx_t_9 = 0;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_8))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_8);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_8, function);
        __pyx_t_9 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_crnn_chars, __pyx_v_block};
      __pyx_t_6 = __Pyx_PyFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2324, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_6);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_8)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_crnn_chars, __pyx_v_block};
      __pyx_t_6 = __Pyx_PyCFunction_FastCall(__pyx_t_8, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2324, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_6);
    } else
    #endif
    {
      __pyx_t_10 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2324, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (__pyx_t_7) {
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_7); __pyx_t_7 = NULL;
      }
      __Pyx_INCREF(__pyx_v_crnn_chars);
      __Pyx_GIVEREF(__pyx_v_crnn_chars);
      PyTuple_SET_ITEM(__pyx_t_10, 0+__pyx_t_9, __pyx_v_crnn_chars);
      __Pyx_INCREF(__pyx_v_block);
      __Pyx_GIVEREF(__pyx_v_block);
      PyTuple_SET_ITEM(__pyx_t_10, 1+__pyx_t_9, __pyx_v_block);
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_t_10, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2324, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    }
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_6))) __PYX_ERR(0, 2324, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_text_list = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2325
 *             return False
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 *         text_list = Utils.merge_single_chars(text_list)             # <<<<<<<<<<<<<<
 *         text_list = [text.replace(' ', '') for text in text_list]
 *         candidate_header_count = 0
 */
  __Pyx_GetModuleGlobalName(__pyx_t_4, __pyx_n_s_Utils); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_merge_single_chars); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_6);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_6, function);
    }
  }
  __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_4, __pyx_v_text_list) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_text_list);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF_SET(__pyx_v_text_list, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2326
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 *         text_list = Utils.merge_single_chars(text_list)
 *         text_list = [text.replace(' ', '') for text in text_list]             # <<<<<<<<<<<<<<
 *         candidate_header_count = 0
 *         span_list    = []
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2326, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (likely(PyList_CheckExact(__pyx_v_text_list)) || PyTuple_CheckExact(__pyx_v_text_list)) {
    __pyx_t_6 = __pyx_v_text_list; __Pyx_INCREF(__pyx_t_6); __pyx_t_1 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_1 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_v_text_list); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2326, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2326, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_6))) {
        if (__pyx_t_1 >= PyList_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_1); __Pyx_INCREF(__pyx_t_4); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2326, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_6, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2326, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_1 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_1); __Pyx_INCREF(__pyx_t_4); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2326, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_6, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2326, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_5(__pyx_t_6);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2326, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_text, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_text, __pyx_n_s_replace); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2326, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_8 = __Pyx_PyObject_Call(__pyx_t_4, __pyx_tuple__23, NULL); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2326, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_8))) __PYX_ERR(0, 2326, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF_SET(__pyx_v_text_list, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2327
 *         text_list = Utils.merge_single_chars(text_list)
 *         text_list = [text.replace(' ', '') for text in text_list]
 *         candidate_header_count = 0             # <<<<<<<<<<<<<<
 *         span_list    = []
 *         searched_ids = []
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_candidate_header_count = __pyx_int_0;

  /* "table_extraction/utils_table_extraction.pyx":2328
 *         text_list = [text.replace(' ', '') for text in text_list]
 *         candidate_header_count = 0
 *         span_list    = []             # <<<<<<<<<<<<<<
 *         searched_ids = []
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2328, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_span_list = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2329
 *         candidate_header_count = 0
 *         span_list    = []
 *         searched_ids = []             # <<<<<<<<<<<<<<
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 *         for regex in header_regex:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2329, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_searched_ids = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2330
 *         span_list    = []
 *         searched_ids = []
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782             # <<<<<<<<<<<<<<
 *         for regex in header_regex:
 *             for i, text in enumerate(text_list):
 */
  __pyx_t_11 = PyObject_Length(__pyx_v_blocks); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2330, __pyx_L1_error)
  if (((__pyx_t_11 <= 3) != 0)) {
    __pyx_t_12 = PyObject_Length(__pyx_v_blocks); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2330, __pyx_L1_error)
    __pyx_t_1 = __pyx_t_12;
  } else {
    __pyx_t_12 = PyObject_Length(__pyx_v_blocks); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2330, __pyx_L1_error)
    __pyx_t_1 = __Pyx_div_Py_ssize_t(__pyx_t_12, 2);
  }
  __pyx_v_THRESH = __pyx_t_1;

  /* "table_extraction/utils_table_extraction.pyx":2331
 *         searched_ids = []
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 *         for regex in header_regex:             # <<<<<<<<<<<<<<
 *             for i, text in enumerate(text_list):
 *                 res = re.fullmatch(regex, text)
 */
  if (likely(PyList_CheckExact(__pyx_v_header_regex)) || PyTuple_CheckExact(__pyx_v_header_regex)) {
    __pyx_t_3 = __pyx_v_header_regex; __Pyx_INCREF(__pyx_t_3); __pyx_t_1 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_1 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_header_regex); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2331, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2331, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_1 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_1); __Pyx_INCREF(__pyx_t_6); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2331, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2331, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      } else {
        if (__pyx_t_1 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_1); __Pyx_INCREF(__pyx_t_6); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 2331, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_3, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2331, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      }
    } else {
      __pyx_t_6 = __pyx_t_5(__pyx_t_3);
      if (unlikely(!__pyx_t_6)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2331, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_6);
    }
    __Pyx_XDECREF_SET(__pyx_v_regex, __pyx_t_6);
    __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2332
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 *         for regex in header_regex:
 *             for i, text in enumerate(text_list):             # <<<<<<<<<<<<<<
 *                 res = re.fullmatch(regex, text)
 *                 if res and i not in searched_ids:
 */
    __Pyx_INCREF(__pyx_int_0);
    __pyx_t_6 = __pyx_int_0;
    if (likely(PyList_CheckExact(__pyx_v_text_list)) || PyTuple_CheckExact(__pyx_v_text_list)) {
      __pyx_t_8 = __pyx_v_text_list; __Pyx_INCREF(__pyx_t_8); __pyx_t_11 = 0;
      __pyx_t_13 = NULL;
    } else {
      __pyx_t_11 = -1; __pyx_t_8 = PyObject_GetIter(__pyx_v_text_list); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2332, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_13 = Py_TYPE(__pyx_t_8)->tp_iternext; if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2332, __pyx_L1_error)
    }
    for (;;) {
      if (likely(!__pyx_t_13)) {
        if (likely(PyList_CheckExact(__pyx_t_8))) {
          if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_8)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_4 = PyList_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_4); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 2332, __pyx_L1_error)
          #else
          __pyx_t_4 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2332, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          #endif
        } else {
          if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_8)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_8, __pyx_t_11); __Pyx_INCREF(__pyx_t_4); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 2332, __pyx_L1_error)
          #else
          __pyx_t_4 = PySequence_ITEM(__pyx_t_8, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2332, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          #endif
        }
      } else {
        __pyx_t_4 = __pyx_t_13(__pyx_t_8);
        if (unlikely(!__pyx_t_4)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 2332, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_4);
      }
      __Pyx_XDECREF_SET(__pyx_v_text, __pyx_t_4);
      __pyx_t_4 = 0;
      __Pyx_INCREF(__pyx_t_6);
      __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_6);
      __pyx_t_4 = __Pyx_PyInt_AddObjC(__pyx_t_6, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2332, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_6);
      __pyx_t_6 = __pyx_t_4;
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2333
 *         for regex in header_regex:
 *             for i, text in enumerate(text_list):
 *                 res = re.fullmatch(regex, text)             # <<<<<<<<<<<<<<
 *                 if res and i not in searched_ids:
 *                     candidate_header_count += 1
 */
      __Pyx_GetModuleGlobalName(__pyx_t_10, __pyx_n_s_re); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2333, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_t_10, __pyx_n_s_fullmatch); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2333, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = NULL;
      __pyx_t_9 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_7))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_7, function);
          __pyx_t_9 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_regex, __pyx_v_text};
        __pyx_t_4 = __Pyx_PyFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2333, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_GOTREF(__pyx_t_4);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_7)) {
        PyObject *__pyx_temp[3] = {__pyx_t_10, __pyx_v_regex, __pyx_v_text};
        __pyx_t_4 = __Pyx_PyCFunction_FastCall(__pyx_t_7, __pyx_temp+1-__pyx_t_9, 2+__pyx_t_9); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2333, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_GOTREF(__pyx_t_4);
      } else
      #endif
      {
        __pyx_t_14 = PyTuple_New(2+__pyx_t_9); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2333, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        if (__pyx_t_10) {
          __Pyx_GIVEREF(__pyx_t_10); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_10); __pyx_t_10 = NULL;
        }
        __Pyx_INCREF(__pyx_v_regex);
        __Pyx_GIVEREF(__pyx_v_regex);
        PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_9, __pyx_v_regex);
        __Pyx_INCREF(__pyx_v_text);
        __Pyx_GIVEREF(__pyx_v_text);
        PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_9, __pyx_v_text);
        __pyx_t_4 = __Pyx_PyObject_Call(__pyx_t_7, __pyx_t_14, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2333, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      }
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_XDECREF_SET(__pyx_v_res, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2334
 *             for i, text in enumerate(text_list):
 *                 res = re.fullmatch(regex, text)
 *                 if res and i not in searched_ids:             # <<<<<<<<<<<<<<
 *                     candidate_header_count += 1
 *                     searched_ids.append(i)
 */
      __pyx_t_15 = __Pyx_PyObject_IsTrue(__pyx_v_res); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2334, __pyx_L1_error)
      if (__pyx_t_15) {
      } else {
        __pyx_t_2 = __pyx_t_15;
        goto __pyx_L13_bool_binop_done;
      }
      __pyx_t_15 = (__Pyx_PySequence_ContainsTF(__pyx_v_i, __pyx_v_searched_ids, Py_NE)); if (unlikely(__pyx_t_15 < 0)) __PYX_ERR(0, 2334, __pyx_L1_error)
      __pyx_t_16 = (__pyx_t_15 != 0);
      __pyx_t_2 = __pyx_t_16;
      __pyx_L13_bool_binop_done:;
      if (__pyx_t_2) {

        /* "table_extraction/utils_table_extraction.pyx":2335
 *                 res = re.fullmatch(regex, text)
 *                 if res and i not in searched_ids:
 *                     candidate_header_count += 1             # <<<<<<<<<<<<<<
 *                     searched_ids.append(i)
 *                 if candidate_header_count>=THRESH: # thresh
 */
        __pyx_t_4 = __Pyx_PyInt_AddObjC(__pyx_v_candidate_header_count, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2335, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF_SET(__pyx_v_candidate_header_count, __pyx_t_4);
        __pyx_t_4 = 0;

        /* "table_extraction/utils_table_extraction.pyx":2336
 *                 if res and i not in searched_ids:
 *                     candidate_header_count += 1
 *                     searched_ids.append(i)             # <<<<<<<<<<<<<<
 *                 if candidate_header_count>=THRESH: # thresh
 *                     return True
 */
        __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_searched_ids, __pyx_v_i); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 2336, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2334
 *             for i, text in enumerate(text_list):
 *                 res = re.fullmatch(regex, text)
 *                 if res and i not in searched_ids:             # <<<<<<<<<<<<<<
 *                     candidate_header_count += 1
 *                     searched_ids.append(i)
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2337
 *                     candidate_header_count += 1
 *                     searched_ids.append(i)
 *                 if candidate_header_count>=THRESH: # thresh             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      __pyx_t_4 = PyInt_FromSsize_t(__pyx_v_THRESH); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2337, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = PyObject_RichCompare(__pyx_v_candidate_header_count, __pyx_t_4, Py_GE); __Pyx_XGOTREF(__pyx_t_7); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2337, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_7); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2337, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (__pyx_t_2) {

        /* "table_extraction/utils_table_extraction.pyx":2338
 *                     searched_ids.append(i)
 *                 if candidate_header_count>=THRESH: # thresh
 *                     return True             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
        __Pyx_XDECREF(__pyx_r);
        __Pyx_INCREF(Py_True);
        __pyx_r = Py_True;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        goto __pyx_L0;

        /* "table_extraction/utils_table_extraction.pyx":2337
 *                     candidate_header_count += 1
 *                     searched_ids.append(i)
 *                 if candidate_header_count>=THRESH: # thresh             # <<<<<<<<<<<<<<
 *                     return True
 *         return False
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2332
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 *         for regex in header_regex:
 *             for i, text in enumerate(text_list):             # <<<<<<<<<<<<<<
 *                 res = re.fullmatch(regex, text)
 *                 if res and i not in searched_ids:
 */
    }
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2331
 *         searched_ids = []
 *         THRESH       = len(blocks) if len(blocks)<=3 else len(blocks)//2 #14782
 *         for regex in header_regex:             # <<<<<<<<<<<<<<
 *             for i, text in enumerate(text_list):
 *                 res = re.fullmatch(regex, text)
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2339
 *                 if candidate_header_count>=THRESH: # thresh
 *                     return True
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2321
 * 
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968             # <<<<<<<<<<<<<<
 *         if len(blocks)<=1: #14611
 *             return False
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_text_blocks_header_by_header_dict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_text_list);
  __Pyx_XDECREF(__pyx_v_candidate_header_count);
  __Pyx_XDECREF(__pyx_v_span_list);
  __Pyx_XDECREF(__pyx_v_searched_ids);
  __Pyx_XDECREF(__pyx_v_regex);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_text);
  __Pyx_XDECREF(__pyx_v_res);
  __Pyx_XDECREF(__pyx_v_block);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2342
 * 
 *     @staticmethod
 *     def align_horizontal(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_273align_horizontal(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_273align_horizontal = {"align_horizontal", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_273align_horizontal, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_273align_horizontal(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_box = 0;
  PyObject *__pyx_v_b_box = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("align_horizontal (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_box,&__pyx_n_s_b_box,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("align_horizontal", 0, 2, 3, 1); __PYX_ERR(0, 2342, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "align_horizontal") < 0)) __PYX_ERR(0, 2342, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_box = values[0];
    __pyx_v_b_box = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("align_horizontal", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2342, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.align_horizontal", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_272align_horizontal(__pyx_self, __pyx_v_a_box, __pyx_v_b_box, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_272align_horizontal(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_box, PyObject *__pyx_v_b_box, PyObject *__pyx_v_threshold) {
  CYTHON_UNUSED PyObject *__pyx_v_a_x = NULL;
  PyObject *__pyx_v_a_y = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_a_w = NULL;
  PyObject *__pyx_v_a_h = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_b_x = NULL;
  PyObject *__pyx_v_b_y = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_b_w = NULL;
  PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("align_horizontal", 0);

  /* "table_extraction/utils_table_extraction.pyx":2343
 *     @staticmethod
 *     def align_horizontal(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box             # <<<<<<<<<<<<<<
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_y - b_y) <= threshold:
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_box))) || (PyList_CheckExact(__pyx_v_a_box))) {
    PyObject* sequence = __pyx_v_a_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 2343, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2343, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2343, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 2343, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 2343, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_a_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2344
 *     def align_horizontal(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box             # <<<<<<<<<<<<<<
 *         if abs(a_y - b_y) <= threshold:
 *             return "top"
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_box))) || (PyList_CheckExact(__pyx_v_b_box))) {
    PyObject* sequence = __pyx_v_b_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 2344, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2344, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2344, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 2344, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 2344, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_y = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_h = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2345
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_y - b_y) <= threshold:             # <<<<<<<<<<<<<<
 *             return "top"
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 */
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_a_y, __pyx_v_b_y); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2345, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2345, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2345, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2345, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2346
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_y - b_y) <= threshold:
 *             return "top"             # <<<<<<<<<<<<<<
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 *             return "center"
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_top);
    __pyx_r = __pyx_n_s_top;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2345
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_y - b_y) <= threshold:             # <<<<<<<<<<<<<<
 *             return "top"
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2347
 *         if abs(a_y - b_y) <= threshold:
 *             return "top"
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "center"
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:
 */
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_a_h, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Add(__pyx_v_a_y, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_b_h, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Add(__pyx_v_b_y, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2347, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2348
 *             return "top"
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 *             return "center"             # <<<<<<<<<<<<<<
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:
 *             return "bottom"
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_center);
    __pyx_r = __pyx_n_s_center;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2347
 *         if abs(a_y - b_y) <= threshold:
 *             return "top"
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "center"
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2349
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 *             return "center"
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "bottom"
 *         return False
 */
  __pyx_t_1 = PyNumber_Add(__pyx_v_a_y, __pyx_v_a_h); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Add(__pyx_v_b_y, __pyx_v_b_h); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2349, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2350
 *             return "center"
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:
 *             return "bottom"             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_bottom);
    __pyx_r = __pyx_n_s_bottom;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2349
 *         if abs((a_y + a_h / 2) - (b_y + b_h / 2)) <= threshold:
 *             return "center"
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "bottom"
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2351
 *         if abs((a_y + a_h) - (b_y + b_h)) <= threshold:
 *             return "bottom"
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2342
 * 
 *     @staticmethod
 *     def align_horizontal(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.align_horizontal", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2354
 * 
 *     @staticmethod
 *     def align_vertical(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_275align_vertical(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_275align_vertical = {"align_vertical", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_275align_vertical, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_275align_vertical(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a_box = 0;
  PyObject *__pyx_v_b_box = 0;
  PyObject *__pyx_v_threshold = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("align_vertical (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a_box,&__pyx_n_s_b_box,&__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)((PyObject *)__pyx_int_5));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b_box)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("align_vertical", 0, 2, 3, 1); __PYX_ERR(0, 2354, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "align_vertical") < 0)) __PYX_ERR(0, 2354, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a_box = values[0];
    __pyx_v_b_box = values[1];
    __pyx_v_threshold = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("align_vertical", 0, 2, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2354, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.align_vertical", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_274align_vertical(__pyx_self, __pyx_v_a_box, __pyx_v_b_box, __pyx_v_threshold);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_274align_vertical(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_a_box, PyObject *__pyx_v_b_box, PyObject *__pyx_v_threshold) {
  PyObject *__pyx_v_a_x = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_a_y = NULL;
  PyObject *__pyx_v_a_w = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_a_h = NULL;
  PyObject *__pyx_v_b_x = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_b_y = NULL;
  PyObject *__pyx_v_b_w = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_b_h = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("align_vertical", 0);

  /* "table_extraction/utils_table_extraction.pyx":2355
 *     @staticmethod
 *     def align_vertical(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box             # <<<<<<<<<<<<<<
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_x - b_x) <= threshold:
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_a_box))) || (PyList_CheckExact(__pyx_v_a_box))) {
    PyObject* sequence = __pyx_v_a_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 2355, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_1 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_4 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_4);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2355, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_1,&__pyx_t_2,&__pyx_t_3,&__pyx_t_4};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_a_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2355, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L3_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 2355, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L4_unpacking_done;
    __pyx_L3_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 2355, __pyx_L1_error)
    __pyx_L4_unpacking_done:;
  }
  __pyx_v_a_x = __pyx_t_1;
  __pyx_t_1 = 0;
  __pyx_v_a_y = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_a_w = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_a_h = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2356
 *     def align_vertical(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box             # <<<<<<<<<<<<<<
 *         if abs(a_x - b_x) <= threshold:
 *             return "left"
 */
  if ((likely(PyTuple_CheckExact(__pyx_v_b_box))) || (PyList_CheckExact(__pyx_v_b_box))) {
    PyObject* sequence = __pyx_v_b_box;
    Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
    if (unlikely(size != 4)) {
      if (size > 4) __Pyx_RaiseTooManyValuesError(4);
      else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
      __PYX_ERR(0, 2356, __pyx_L1_error)
    }
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    if (likely(PyTuple_CheckExact(sequence))) {
      __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyTuple_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyTuple_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyTuple_GET_ITEM(sequence, 3); 
    } else {
      __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
      __pyx_t_3 = PyList_GET_ITEM(sequence, 1); 
      __pyx_t_2 = PyList_GET_ITEM(sequence, 2); 
      __pyx_t_1 = PyList_GET_ITEM(sequence, 3); 
    }
    __Pyx_INCREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_INCREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_t_1);
    #else
    {
      Py_ssize_t i;
      PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
      for (i=0; i < 4; i++) {
        PyObject* item = PySequence_ITEM(sequence, i); if (unlikely(!item)) __PYX_ERR(0, 2356, __pyx_L1_error)
        __Pyx_GOTREF(item);
        *(temps[i]) = item;
      }
    }
    #endif
  } else {
    Py_ssize_t index = -1;
    PyObject** temps[4] = {&__pyx_t_4,&__pyx_t_3,&__pyx_t_2,&__pyx_t_1};
    __pyx_t_5 = PyObject_GetIter(__pyx_v_b_box); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2356, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = Py_TYPE(__pyx_t_5)->tp_iternext;
    for (index=0; index < 4; index++) {
      PyObject* item = __pyx_t_6(__pyx_t_5); if (unlikely(!item)) goto __pyx_L5_unpacking_failed;
      __Pyx_GOTREF(item);
      *(temps[index]) = item;
    }
    if (__Pyx_IternextUnpackEndCheck(__pyx_t_6(__pyx_t_5), 4) < 0) __PYX_ERR(0, 2356, __pyx_L1_error)
    __pyx_t_6 = NULL;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L6_unpacking_done;
    __pyx_L5_unpacking_failed:;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
    if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
    __PYX_ERR(0, 2356, __pyx_L1_error)
    __pyx_L6_unpacking_done:;
  }
  __pyx_v_b_x = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_v_b_y = __pyx_t_3;
  __pyx_t_3 = 0;
  __pyx_v_b_w = __pyx_t_2;
  __pyx_t_2 = 0;
  __pyx_v_b_h = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2357
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_x - b_x) <= threshold:             # <<<<<<<<<<<<<<
 *             return "left"
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 */
  __pyx_t_1 = PyNumber_Subtract(__pyx_v_a_x, __pyx_v_b_x); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2357, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2357, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2357, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2358
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_x - b_x) <= threshold:
 *             return "left"             # <<<<<<<<<<<<<<
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 *             return "center"
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_left);
    __pyx_r = __pyx_n_s_left;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2357
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 *         if abs(a_x - b_x) <= threshold:             # <<<<<<<<<<<<<<
 *             return "left"
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2359
 *         if abs(a_x - b_x) <= threshold:
 *             return "left"
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "center"
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:
 */
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_a_w, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyNumber_Add(__pyx_v_a_x, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyNumber_Divide(__pyx_v_b_w, __pyx_int_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Add(__pyx_v_b_x, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Subtract(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyNumber_Absolute(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2359, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2360
 *             return "left"
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 *             return "center"             # <<<<<<<<<<<<<<
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:
 *             return "right"
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_center);
    __pyx_r = __pyx_n_s_center;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2359
 *         if abs(a_x - b_x) <= threshold:
 *             return "left"
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "center"
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2361
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 *             return "center"
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "right"
 *         return False
 */
  __pyx_t_1 = PyNumber_Add(__pyx_v_a_x, __pyx_v_a_w); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = PyNumber_Add(__pyx_v_b_x, __pyx_v_b_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = PyNumber_Subtract(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyNumber_Absolute(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_3, __pyx_v_threshold, Py_LE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2361, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_7) {

    /* "table_extraction/utils_table_extraction.pyx":2362
 *             return "center"
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:
 *             return "right"             # <<<<<<<<<<<<<<
 *         return False
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_n_s_right);
    __pyx_r = __pyx_n_s_right;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2361
 *         if abs((a_x + a_w / 2) - (b_x + b_w / 2)) <= threshold:
 *             return "center"
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:             # <<<<<<<<<<<<<<
 *             return "right"
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2363
 *         if abs((a_x + a_w) - (b_x + b_w)) <= threshold:
 *             return "right"
 *         return False             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2354
 * 
 *     @staticmethod
 *     def align_vertical(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.align_vertical", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a_x);
  __Pyx_XDECREF(__pyx_v_a_y);
  __Pyx_XDECREF(__pyx_v_a_w);
  __Pyx_XDECREF(__pyx_v_a_h);
  __Pyx_XDECREF(__pyx_v_b_x);
  __Pyx_XDECREF(__pyx_v_b_y);
  __Pyx_XDECREF(__pyx_v_b_w);
  __Pyx_XDECREF(__pyx_v_b_h);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2366
 * 
 *     @staticmethod
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get rows from content boxes
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_277get_rows_from_content_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_276get_rows_from_content_boxes[] = "\n        Get rows from content boxes\n\n        :param contnet_boxes:\n        :param ignore_signle: ignore single content row if True\n        :return rows:\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_277get_rows_from_content_boxes = {"get_rows_from_content_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_277get_rows_from_content_boxes, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_276get_rows_from_content_boxes};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_277get_rows_from_content_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_content_boxes = 0;
  PyObject *__pyx_v_ignore_single = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_rows_from_content_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_content_boxes,&__pyx_n_s_ignore_single,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_boxes)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_ignore_single);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_rows_from_content_boxes") < 0)) __PYX_ERR(0, 2366, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_content_boxes = values[0];
    __pyx_v_ignore_single = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_rows_from_content_boxes", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2366, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rows_from_content_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_276get_rows_from_content_boxes(__pyx_self, __pyx_v_content_boxes, __pyx_v_ignore_single);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2376
 *         # TODO:allow multiple rows
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[0], box[1])) # sort by x,y             # <<<<<<<<<<<<<<
 *         rows        = []
 *         added_boxes = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27get_rows_from_content_boxes_lambda42(PyObject *__pyx_self, PyObject *__pyx_v_box); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27get_rows_from_content_boxes_lambda42 = {"lambda42", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27get_rows_from_content_boxes_lambda42, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_27get_rows_from_content_boxes_lambda42(PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda42 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda42(__pyx_self, ((PyObject *)__pyx_v_box));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda42(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda42", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_box, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_box, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rows_from_content_boxes.lambda42", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2366
 * 
 *     @staticmethod
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get rows from content boxes
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_276get_rows_from_content_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_boxes, PyObject *__pyx_v_ignore_single) {
  long __pyx_v_ALIGNMENT_THRESH;
  PyObject *__pyx_v_rows = NULL;
  PyObject *__pyx_v_added_boxes = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_src_box = NULL;
  PyObject *__pyx_v_tmp_row = NULL;
  PyObject *__pyx_v_dst_box = NULL;
  PyObject *__pyx_v_tail_box = NULL;
  PyObject *__pyx_v_alignment = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  Py_ssize_t __pyx_t_10;
  PyObject *(*__pyx_t_11)(PyObject *);
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  PyObject *__pyx_t_15 = NULL;
  PyObject *__pyx_t_16 = NULL;
  int __pyx_t_17;
  PyObject *__pyx_t_18 = NULL;
  __Pyx_RefNannySetupContext("get_rows_from_content_boxes", 0);
  __Pyx_INCREF(__pyx_v_content_boxes);

  /* "table_extraction/utils_table_extraction.pyx":2375
 *         """
 *         # TODO:allow multiple rows
 *         ALIGNMENT_THRESH = 10             # <<<<<<<<<<<<<<
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[0], box[1])) # sort by x,y
 *         rows        = []
 */
  __pyx_v_ALIGNMENT_THRESH = 10;

  /* "table_extraction/utils_table_extraction.pyx":2376
 *         # TODO:allow multiple rows
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[0], box[1])) # sort by x,y             # <<<<<<<<<<<<<<
 *         rows        = []
 *         added_boxes = []
 */
  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_content_boxes);
  __Pyx_GIVEREF(__pyx_v_content_boxes);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_content_boxes);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27get_rows_from_content_boxes_lambda42, 0, __pyx_n_s_Utils_get_rows_from_content_boxe, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2376, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_content_boxes, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2377
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[0], box[1])) # sort by x,y
 *         rows        = []             # <<<<<<<<<<<<<<
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_rows = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2378
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[0], box[1])) # sort by x,y
 *         rows        = []
 *         added_boxes = []             # <<<<<<<<<<<<<<
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_added_boxes = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2379
 *         rows        = []
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):             # <<<<<<<<<<<<<<
 *             if src_box in added_boxes:
 *                 continue
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_3 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_content_boxes)) || PyTuple_CheckExact(__pyx_v_content_boxes)) {
    __pyx_t_2 = __pyx_v_content_boxes; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_content_boxes); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2379, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2379, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2379, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_5(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2379, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_src_box, __pyx_t_1);
    __pyx_t_1 = 0;
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_3, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2380
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:             # <<<<<<<<<<<<<<
 *                 continue
 *             tmp_row = [src_box]
 */
    __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_src_box, __pyx_v_added_boxes, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2380, __pyx_L1_error)
    __pyx_t_7 = (__pyx_t_6 != 0);
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":2381
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:
 *                 continue             # <<<<<<<<<<<<<<
 *             tmp_row = [src_box]
 *             added_boxes.append(src_box)
 */
      goto __pyx_L3_continue;

      /* "table_extraction/utils_table_extraction.pyx":2380
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:             # <<<<<<<<<<<<<<
 *                 continue
 *             tmp_row = [src_box]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2382
 *             if src_box in added_boxes:
 *                 continue
 *             tmp_row = [src_box]             # <<<<<<<<<<<<<<
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:
 */
    __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_src_box);
    __Pyx_GIVEREF(__pyx_v_src_box);
    PyList_SET_ITEM(__pyx_t_1, 0, __pyx_v_src_box);
    __Pyx_XDECREF_SET(__pyx_v_tmp_row, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2383
 *                 continue
 *             tmp_row = [src_box]
 *             added_boxes.append(src_box)             # <<<<<<<<<<<<<<
 *             for dst_box in content_boxes[i+1:]:
 *                 tail_box = tmp_row[-1]
 */
    __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_added_boxes, __pyx_v_src_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2383, __pyx_L1_error)

    /* "table_extraction/utils_table_extraction.pyx":2384
 *             tmp_row = [src_box]
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:             # <<<<<<<<<<<<<<
 *                 tail_box = tmp_row[-1]
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):
 */
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2384, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_9 = __Pyx_PyObject_GetSlice(__pyx_v_content_boxes, 0, 0, &__pyx_t_1, NULL, NULL, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2384, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (likely(PyList_CheckExact(__pyx_t_9)) || PyTuple_CheckExact(__pyx_t_9)) {
      __pyx_t_1 = __pyx_t_9; __Pyx_INCREF(__pyx_t_1); __pyx_t_10 = 0;
      __pyx_t_11 = NULL;
    } else {
      __pyx_t_10 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_9); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2384, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_11 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2384, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    for (;;) {
      if (likely(!__pyx_t_11)) {
        if (likely(PyList_CheckExact(__pyx_t_1))) {
          if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_9 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_9); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 2384, __pyx_L1_error)
          #else
          __pyx_t_9 = PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2384, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          #endif
        } else {
          if (__pyx_t_10 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_9 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_9); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 2384, __pyx_L1_error)
          #else
          __pyx_t_9 = PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2384, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          #endif
        }
      } else {
        __pyx_t_9 = __pyx_t_11(__pyx_t_1);
        if (unlikely(!__pyx_t_9)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 2384, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_9);
      }
      __Pyx_XDECREF_SET(__pyx_v_dst_box, __pyx_t_9);
      __pyx_t_9 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2385
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:
 *                 tail_box = tmp_row[-1]             # <<<<<<<<<<<<<<
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):
 *                     continue
 */
      __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_tmp_row, -1L, long, 1, __Pyx_PyInt_From_long, 1, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2385, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_XDECREF_SET(__pyx_v_tail_box, __pyx_t_9);
      __pyx_t_9 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2386
 *             for dst_box in content_boxes[i+1:]:
 *                 tail_box = tmp_row[-1]
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):             # <<<<<<<<<<<<<<
 *                     continue
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 */
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_dst_box, __pyx_v_added_boxes, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __pyx_t_12 = (__pyx_t_6 != 0);
      if (!__pyx_t_12) {
      } else {
        __pyx_t_7 = __pyx_t_12;
        goto __pyx_L9_bool_binop_done;
      }
      __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_Utils); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_rect_vertical_overlap_rect); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_GetModuleGlobalName(__pyx_t_15, __pyx_n_s_Utils); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      __pyx_t_16 = __Pyx_PyObject_GetAttrStr(__pyx_t_15, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_16);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
      __pyx_t_15 = NULL;
      __pyx_t_17 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_16))) {
        __pyx_t_15 = PyMethod_GET_SELF(__pyx_t_16);
        if (likely(__pyx_t_15)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_16);
          __Pyx_INCREF(__pyx_t_15);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_16, function);
          __pyx_t_17 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_16)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_v_tail_box, __pyx_int_neg_2};
        __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_16, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_16)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_v_tail_box, __pyx_int_neg_2};
        __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_16, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      {
        __pyx_t_18 = PyTuple_New(2+__pyx_t_17); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_18);
        if (__pyx_t_15) {
          __Pyx_GIVEREF(__pyx_t_15); PyTuple_SET_ITEM(__pyx_t_18, 0, __pyx_t_15); __pyx_t_15 = NULL;
        }
        __Pyx_INCREF(__pyx_v_tail_box);
        __Pyx_GIVEREF(__pyx_v_tail_box);
        PyTuple_SET_ITEM(__pyx_t_18, 0+__pyx_t_17, __pyx_v_tail_box);
        __Pyx_INCREF(__pyx_int_neg_2);
        __Pyx_GIVEREF(__pyx_int_neg_2);
        PyTuple_SET_ITEM(__pyx_t_18, 1+__pyx_t_17, __pyx_int_neg_2);
        __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_16, __pyx_t_18, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      }
      __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
      __pyx_t_16 = NULL;
      __pyx_t_17 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
        __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_14);
        if (likely(__pyx_t_16)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
          __Pyx_INCREF(__pyx_t_16);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_14, function);
          __pyx_t_17 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[3] = {__pyx_t_16, __pyx_t_13, __pyx_v_dst_box};
        __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[3] = {__pyx_t_16, __pyx_t_13, __pyx_v_dst_box};
        __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      {
        __pyx_t_18 = PyTuple_New(2+__pyx_t_17); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_18);
        if (__pyx_t_16) {
          __Pyx_GIVEREF(__pyx_t_16); PyTuple_SET_ITEM(__pyx_t_18, 0, __pyx_t_16); __pyx_t_16 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_13);
        PyTuple_SET_ITEM(__pyx_t_18, 0+__pyx_t_17, __pyx_t_13);
        __Pyx_INCREF(__pyx_v_dst_box);
        __Pyx_GIVEREF(__pyx_v_dst_box);
        PyTuple_SET_ITEM(__pyx_t_18, 1+__pyx_t_17, __pyx_v_dst_box);
        __pyx_t_13 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_18, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      }
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2386, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_6 = ((!__pyx_t_12) != 0);
      __pyx_t_7 = __pyx_t_6;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2387
 *                 tail_box = tmp_row[-1]
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):
 *                     continue             # <<<<<<<<<<<<<<
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:
 */
        goto __pyx_L6_continue;

        /* "table_extraction/utils_table_extraction.pyx":2386
 *             for dst_box in content_boxes[i+1:]:
 *                 tail_box = tmp_row[-1]
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):             # <<<<<<<<<<<<<<
 *                     continue
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2388
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):
 *                     continue
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment             # <<<<<<<<<<<<<<
 *                 if alignment:
 *                     tmp_row.append(dst_box)
 */
      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_align_horizontal); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_INCREF(__pyx_v_tail_box);
      __Pyx_GIVEREF(__pyx_v_tail_box);
      PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_v_tail_box);
      __Pyx_INCREF(__pyx_v_dst_box);
      __Pyx_GIVEREF(__pyx_v_dst_box);
      PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_v_dst_box);
      __pyx_t_18 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_18);
      __pyx_t_13 = __Pyx_PyInt_From_long(__pyx_v_ALIGNMENT_THRESH); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      if (PyDict_SetItem(__pyx_t_18, __pyx_n_s_threshold, __pyx_t_13) < 0) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_9, __pyx_t_18); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2388, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      __Pyx_XDECREF_SET(__pyx_v_alignment, __pyx_t_13);
      __pyx_t_13 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2389
 *                     continue
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:             # <<<<<<<<<<<<<<
 *                     tmp_row.append(dst_box)
 *                     added_boxes.append(dst_box)
 */
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_alignment); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2389, __pyx_L1_error)
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2390
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:
 *                     tmp_row.append(dst_box)             # <<<<<<<<<<<<<<
 *                     added_boxes.append(dst_box)
 *                 else:
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_tmp_row, __pyx_v_dst_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2390, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2391
 *                 if alignment:
 *                     tmp_row.append(dst_box)
 *                     added_boxes.append(dst_box)             # <<<<<<<<<<<<<<
 *                 else:
 *                     break
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_added_boxes, __pyx_v_dst_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2391, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2389
 *                     continue
 *                 alignment = Utils.align_horizontal(tail_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:             # <<<<<<<<<<<<<<
 *                     tmp_row.append(dst_box)
 *                     added_boxes.append(dst_box)
 */
        goto __pyx_L11;
      }

      /* "table_extraction/utils_table_extraction.pyx":2393
 *                     added_boxes.append(dst_box)
 *                 else:
 *                     break             # <<<<<<<<<<<<<<
 *             if ignore_single:
 *                 if len(tmp_row)>1:
 */
      /*else*/ {
        goto __pyx_L7_break;
      }
      __pyx_L11:;

      /* "table_extraction/utils_table_extraction.pyx":2384
 *             tmp_row = [src_box]
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:             # <<<<<<<<<<<<<<
 *                 tail_box = tmp_row[-1]
 *                 if dst_box in added_boxes or not Utils.rect_vertical_overlap_rect(Utils.expand_rect(tail_box, -2), dst_box):
 */
      __pyx_L6_continue:;
    }
    __pyx_L7_break:;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2394
 *                 else:
 *                     break
 *             if ignore_single:             # <<<<<<<<<<<<<<
 *                 if len(tmp_row)>1:
 *                     rows.append(tmp_row)
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_ignore_single); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2394, __pyx_L1_error)
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":2395
 *                     break
 *             if ignore_single:
 *                 if len(tmp_row)>1:             # <<<<<<<<<<<<<<
 *                     rows.append(tmp_row)
 *             else:
 */
      __pyx_t_10 = PyList_GET_SIZE(__pyx_v_tmp_row); if (unlikely(__pyx_t_10 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2395, __pyx_L1_error)
      __pyx_t_7 = ((__pyx_t_10 > 1) != 0);
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2396
 *             if ignore_single:
 *                 if len(tmp_row)>1:
 *                     rows.append(tmp_row)             # <<<<<<<<<<<<<<
 *             else:
 *                 rows.append(tmp_row)
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_rows, __pyx_v_tmp_row); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2396, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2395
 *                     break
 *             if ignore_single:
 *                 if len(tmp_row)>1:             # <<<<<<<<<<<<<<
 *                     rows.append(tmp_row)
 *             else:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2394
 *                 else:
 *                     break
 *             if ignore_single:             # <<<<<<<<<<<<<<
 *                 if len(tmp_row)>1:
 *                     rows.append(tmp_row)
 */
      goto __pyx_L12;
    }

    /* "table_extraction/utils_table_extraction.pyx":2398
 *                     rows.append(tmp_row)
 *             else:
 *                 rows.append(tmp_row)             # <<<<<<<<<<<<<<
 *         return rows
 * 
 */
    /*else*/ {
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_rows, __pyx_v_tmp_row); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2398, __pyx_L1_error)
    }
    __pyx_L12:;

    /* "table_extraction/utils_table_extraction.pyx":2379
 *         rows        = []
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):             # <<<<<<<<<<<<<<
 *             if src_box in added_boxes:
 *                 continue
 */
    __pyx_L3_continue:;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2399
 *             else:
 *                 rows.append(tmp_row)
 *         return rows             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_rows);
  __pyx_r = __pyx_v_rows;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2366
 * 
 *     @staticmethod
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get rows from content boxes
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_XDECREF(__pyx_t_18);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_rows_from_content_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rows);
  __Pyx_XDECREF(__pyx_v_added_boxes);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_src_box);
  __Pyx_XDECREF(__pyx_v_tmp_row);
  __Pyx_XDECREF(__pyx_v_dst_box);
  __Pyx_XDECREF(__pyx_v_tail_box);
  __Pyx_XDECREF(__pyx_v_alignment);
  __Pyx_XDECREF(__pyx_v_content_boxes);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2402
 * 
 *     @staticmethod
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get columns from content boxes
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_279get_columns_from_content_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_278get_columns_from_content_boxes[] = "\n        Get columns from content boxes\n\n        :param contnet_boxes:\n        :param ignore_signle:\n        :return cols:\n        ";
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_279get_columns_from_content_boxes = {"get_columns_from_content_boxes", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_279get_columns_from_content_boxes, METH_VARARGS|METH_KEYWORDS, __pyx_doc_16table_extraction_22utils_table_extraction_5Utils_278get_columns_from_content_boxes};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_279get_columns_from_content_boxes(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_content_boxes = 0;
  PyObject *__pyx_v_ignore_single = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_columns_from_content_boxes (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_content_boxes,&__pyx_n_s_ignore_single,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)((PyObject *)Py_False));
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_content_boxes)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_ignore_single);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_columns_from_content_boxes") < 0)) __PYX_ERR(0, 2402, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_content_boxes = values[0];
    __pyx_v_ignore_single = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_columns_from_content_boxes", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2402, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_columns_from_content_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_278get_columns_from_content_boxes(__pyx_self, __pyx_v_content_boxes, __pyx_v_ignore_single);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2411
 *         """
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[1], box[0])) # sort by y,x             # <<<<<<<<<<<<<<
 *         cols        = []
 *         added_boxes = []
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30get_columns_from_content_boxes_lambda43(PyObject *__pyx_self, PyObject *__pyx_v_box); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30get_columns_from_content_boxes_lambda43 = {"lambda43", (PyCFunction)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30get_columns_from_content_boxes_lambda43, METH_O, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_30get_columns_from_content_boxes_lambda43(PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda43 (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda43(__pyx_self, ((PyObject *)__pyx_v_box));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda43(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("lambda43", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_box, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_box, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_2);
  PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_columns_from_content_boxes.lambda43", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2402
 * 
 *     @staticmethod
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get columns from content boxes
 */

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_278get_columns_from_content_boxes(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_content_boxes, PyObject *__pyx_v_ignore_single) {
  long __pyx_v_ALIGNMENT_THRESH;
  PyObject *__pyx_v_cols = NULL;
  PyObject *__pyx_v_added_boxes = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_src_box = NULL;
  PyObject *__pyx_v_tmp_col = NULL;
  PyObject *__pyx_v_dst_box = NULL;
  PyObject *__pyx_v_alignment = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  Py_ssize_t __pyx_t_10;
  PyObject *(*__pyx_t_11)(PyObject *);
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  PyObject *__pyx_t_15 = NULL;
  PyObject *__pyx_t_16 = NULL;
  int __pyx_t_17;
  PyObject *__pyx_t_18 = NULL;
  __Pyx_RefNannySetupContext("get_columns_from_content_boxes", 0);
  __Pyx_INCREF(__pyx_v_content_boxes);

  /* "table_extraction/utils_table_extraction.pyx":2410
 *         :return cols:
 *         """
 *         ALIGNMENT_THRESH = 10             # <<<<<<<<<<<<<<
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[1], box[0])) # sort by y,x
 *         cols        = []
 */
  __pyx_v_ALIGNMENT_THRESH = 10;

  /* "table_extraction/utils_table_extraction.pyx":2411
 *         """
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[1], box[0])) # sort by y,x             # <<<<<<<<<<<<<<
 *         cols        = []
 *         added_boxes = []
 */
  __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_v_content_boxes);
  __Pyx_GIVEREF(__pyx_v_content_boxes);
  PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_content_boxes);
  __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_30get_columns_from_content_boxes_lambda43, 0, __pyx_n_s_Utils_get_columns_from_content_b, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_sorted, __pyx_t_1, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2411, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF_SET(__pyx_v_content_boxes, __pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2412
 *         ALIGNMENT_THRESH = 10
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[1], box[0])) # sort by y,x
 *         cols        = []             # <<<<<<<<<<<<<<
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2412, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_cols = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2413
 *         content_boxes = sorted(content_boxes, key=lambda box:(box[1], box[0])) # sort by y,x
 *         cols        = []
 *         added_boxes = []             # <<<<<<<<<<<<<<
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2413, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_added_boxes = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2414
 *         cols        = []
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):             # <<<<<<<<<<<<<<
 *             if src_box in added_boxes:
 *                 continue
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_t_3 = __pyx_int_0;
  if (likely(PyList_CheckExact(__pyx_v_content_boxes)) || PyTuple_CheckExact(__pyx_v_content_boxes)) {
    __pyx_t_2 = __pyx_v_content_boxes; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_content_boxes); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2414, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2414, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2414, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_1); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2414, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2414, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_5(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 2414, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_src_box, __pyx_t_1);
    __pyx_t_1 = 0;
    __Pyx_INCREF(__pyx_t_3);
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_t_3, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3);
    __pyx_t_3 = __pyx_t_1;
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2415
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:             # <<<<<<<<<<<<<<
 *                 continue
 *             tmp_col = [src_box]
 */
    __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_src_box, __pyx_v_added_boxes, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2415, __pyx_L1_error)
    __pyx_t_7 = (__pyx_t_6 != 0);
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":2416
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:
 *                 continue             # <<<<<<<<<<<<<<
 *             tmp_col = [src_box]
 *             added_boxes.append(src_box)
 */
      goto __pyx_L3_continue;

      /* "table_extraction/utils_table_extraction.pyx":2415
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):
 *             if src_box in added_boxes:             # <<<<<<<<<<<<<<
 *                 continue
 *             tmp_col = [src_box]
 */
    }

    /* "table_extraction/utils_table_extraction.pyx":2417
 *             if src_box in added_boxes:
 *                 continue
 *             tmp_col = [src_box]             # <<<<<<<<<<<<<<
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:
 */
    __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2417, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_INCREF(__pyx_v_src_box);
    __Pyx_GIVEREF(__pyx_v_src_box);
    PyList_SET_ITEM(__pyx_t_1, 0, __pyx_v_src_box);
    __Pyx_XDECREF_SET(__pyx_v_tmp_col, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2418
 *                 continue
 *             tmp_col = [src_box]
 *             added_boxes.append(src_box)             # <<<<<<<<<<<<<<
 *             for dst_box in content_boxes[i+1:]:
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):
 */
    __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_added_boxes, __pyx_v_src_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2418, __pyx_L1_error)

    /* "table_extraction/utils_table_extraction.pyx":2419
 *             tmp_col = [src_box]
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:             # <<<<<<<<<<<<<<
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):
 *                     continue
 */
    __pyx_t_1 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2419, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_9 = __Pyx_PyObject_GetSlice(__pyx_v_content_boxes, 0, 0, &__pyx_t_1, NULL, NULL, 0, 0, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2419, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (likely(PyList_CheckExact(__pyx_t_9)) || PyTuple_CheckExact(__pyx_t_9)) {
      __pyx_t_1 = __pyx_t_9; __Pyx_INCREF(__pyx_t_1); __pyx_t_10 = 0;
      __pyx_t_11 = NULL;
    } else {
      __pyx_t_10 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_9); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2419, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_11 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2419, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    for (;;) {
      if (likely(!__pyx_t_11)) {
        if (likely(PyList_CheckExact(__pyx_t_1))) {
          if (__pyx_t_10 >= PyList_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_9 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_9); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 2419, __pyx_L1_error)
          #else
          __pyx_t_9 = PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2419, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          #endif
        } else {
          if (__pyx_t_10 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_9 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_10); __Pyx_INCREF(__pyx_t_9); __pyx_t_10++; if (unlikely(0 < 0)) __PYX_ERR(0, 2419, __pyx_L1_error)
          #else
          __pyx_t_9 = PySequence_ITEM(__pyx_t_1, __pyx_t_10); __pyx_t_10++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2419, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          #endif
        }
      } else {
        __pyx_t_9 = __pyx_t_11(__pyx_t_1);
        if (unlikely(!__pyx_t_9)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 2419, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_9);
      }
      __Pyx_XDECREF_SET(__pyx_v_dst_box, __pyx_t_9);
      __pyx_t_9 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2420
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):             # <<<<<<<<<<<<<<
 *                     continue
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 */
      __pyx_t_6 = (__Pyx_PySequence_ContainsTF(__pyx_v_dst_box, __pyx_v_added_boxes, Py_EQ)); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __pyx_t_12 = (__pyx_t_6 != 0);
      if (!__pyx_t_12) {
      } else {
        __pyx_t_7 = __pyx_t_12;
        goto __pyx_L9_bool_binop_done;
      }
      __Pyx_GetModuleGlobalName(__pyx_t_13, __pyx_n_s_Utils); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_13, __pyx_n_s_rect_horizontal_overlap_rect); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_GetModuleGlobalName(__pyx_t_15, __pyx_n_s_Utils); if (unlikely(!__pyx_t_15)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_15);
      __pyx_t_16 = __Pyx_PyObject_GetAttrStr(__pyx_t_15, __pyx_n_s_expand_rect); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_16);
      __Pyx_DECREF(__pyx_t_15); __pyx_t_15 = 0;
      __pyx_t_15 = NULL;
      __pyx_t_17 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_16))) {
        __pyx_t_15 = PyMethod_GET_SELF(__pyx_t_16);
        if (likely(__pyx_t_15)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_16);
          __Pyx_INCREF(__pyx_t_15);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_16, function);
          __pyx_t_17 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_16)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_v_src_box, __pyx_int_neg_2};
        __pyx_t_13 = __Pyx_PyFunction_FastCall(__pyx_t_16, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_16)) {
        PyObject *__pyx_temp[3] = {__pyx_t_15, __pyx_v_src_box, __pyx_int_neg_2};
        __pyx_t_13 = __Pyx_PyCFunction_FastCall(__pyx_t_16, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_15); __pyx_t_15 = 0;
        __Pyx_GOTREF(__pyx_t_13);
      } else
      #endif
      {
        __pyx_t_18 = PyTuple_New(2+__pyx_t_17); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_18);
        if (__pyx_t_15) {
          __Pyx_GIVEREF(__pyx_t_15); PyTuple_SET_ITEM(__pyx_t_18, 0, __pyx_t_15); __pyx_t_15 = NULL;
        }
        __Pyx_INCREF(__pyx_v_src_box);
        __Pyx_GIVEREF(__pyx_v_src_box);
        PyTuple_SET_ITEM(__pyx_t_18, 0+__pyx_t_17, __pyx_v_src_box);
        __Pyx_INCREF(__pyx_int_neg_2);
        __Pyx_GIVEREF(__pyx_int_neg_2);
        PyTuple_SET_ITEM(__pyx_t_18, 1+__pyx_t_17, __pyx_int_neg_2);
        __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_16, __pyx_t_18, NULL); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      }
      __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
      __pyx_t_16 = NULL;
      __pyx_t_17 = 0;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_14))) {
        __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_14);
        if (likely(__pyx_t_16)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_14);
          __Pyx_INCREF(__pyx_t_16);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_14, function);
          __pyx_t_17 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[3] = {__pyx_t_16, __pyx_t_13, __pyx_v_dst_box};
        __pyx_t_9 = __Pyx_PyFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_14)) {
        PyObject *__pyx_temp[3] = {__pyx_t_16, __pyx_t_13, __pyx_v_dst_box};
        __pyx_t_9 = __Pyx_PyCFunction_FastCall(__pyx_t_14, __pyx_temp+1-__pyx_t_17, 2+__pyx_t_17); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      {
        __pyx_t_18 = PyTuple_New(2+__pyx_t_17); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_18);
        if (__pyx_t_16) {
          __Pyx_GIVEREF(__pyx_t_16); PyTuple_SET_ITEM(__pyx_t_18, 0, __pyx_t_16); __pyx_t_16 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_13);
        PyTuple_SET_ITEM(__pyx_t_18, 0+__pyx_t_17, __pyx_t_13);
        __Pyx_INCREF(__pyx_v_dst_box);
        __Pyx_GIVEREF(__pyx_v_dst_box);
        PyTuple_SET_ITEM(__pyx_t_18, 1+__pyx_t_17, __pyx_v_dst_box);
        __pyx_t_13 = 0;
        __pyx_t_9 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_18, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      }
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __pyx_t_12 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_12 < 0)) __PYX_ERR(0, 2420, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_6 = ((!__pyx_t_12) != 0);
      __pyx_t_7 = __pyx_t_6;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2421
 *             for dst_box in content_boxes[i+1:]:
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):
 *                     continue             # <<<<<<<<<<<<<<
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:
 */
        goto __pyx_L6_continue;

        /* "table_extraction/utils_table_extraction.pyx":2420
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):             # <<<<<<<<<<<<<<
 *                     continue
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2422
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):
 *                     continue
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment             # <<<<<<<<<<<<<<
 *                 if alignment:
 *                     tmp_col.append(dst_box)
 */
      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_Utils); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_14 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_align_vertical); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_14);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_INCREF(__pyx_v_src_box);
      __Pyx_GIVEREF(__pyx_v_src_box);
      PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_v_src_box);
      __Pyx_INCREF(__pyx_v_dst_box);
      __Pyx_GIVEREF(__pyx_v_dst_box);
      PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_v_dst_box);
      __pyx_t_18 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_18)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_18);
      __pyx_t_13 = __Pyx_PyInt_From_long(__pyx_v_ALIGNMENT_THRESH); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      if (PyDict_SetItem(__pyx_t_18, __pyx_n_s_threshold, __pyx_t_13) < 0) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      __pyx_t_13 = __Pyx_PyObject_Call(__pyx_t_14, __pyx_t_9, __pyx_t_18); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2422, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_18); __pyx_t_18 = 0;
      __Pyx_XDECREF_SET(__pyx_v_alignment, __pyx_t_13);
      __pyx_t_13 = 0;

      /* "table_extraction/utils_table_extraction.pyx":2423
 *                     continue
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:             # <<<<<<<<<<<<<<
 *                     tmp_col.append(dst_box)
 *                     added_boxes.append(dst_box)
 */
      __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_alignment); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2423, __pyx_L1_error)
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2424
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:
 *                     tmp_col.append(dst_box)             # <<<<<<<<<<<<<<
 *                     added_boxes.append(dst_box)
 *                 else:
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_tmp_col, __pyx_v_dst_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2424, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2425
 *                 if alignment:
 *                     tmp_col.append(dst_box)
 *                     added_boxes.append(dst_box)             # <<<<<<<<<<<<<<
 *                 else:
 *                     break
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_added_boxes, __pyx_v_dst_box); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2425, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2423
 *                     continue
 *                 alignment = Utils.align_vertical(src_box, dst_box, threshold=ALIGNMENT_THRESH) # get alignment
 *                 if alignment:             # <<<<<<<<<<<<<<
 *                     tmp_col.append(dst_box)
 *                     added_boxes.append(dst_box)
 */
        goto __pyx_L11;
      }

      /* "table_extraction/utils_table_extraction.pyx":2427
 *                     added_boxes.append(dst_box)
 *                 else:
 *                     break             # <<<<<<<<<<<<<<
 *             if ignore_single:
 *                 if len(tmp_col)>1:
 */
      /*else*/ {
        goto __pyx_L7_break;
      }
      __pyx_L11:;

      /* "table_extraction/utils_table_extraction.pyx":2419
 *             tmp_col = [src_box]
 *             added_boxes.append(src_box)
 *             for dst_box in content_boxes[i+1:]:             # <<<<<<<<<<<<<<
 *                 if dst_box in added_boxes or not Utils.rect_horizontal_overlap_rect(Utils.expand_rect(src_box, -2), dst_box):
 *                     continue
 */
      __pyx_L6_continue:;
    }
    __pyx_L7_break:;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "table_extraction/utils_table_extraction.pyx":2428
 *                 else:
 *                     break
 *             if ignore_single:             # <<<<<<<<<<<<<<
 *                 if len(tmp_col)>1:
 *                     cols.append(tmp_col)
 */
    __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_ignore_single); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 2428, __pyx_L1_error)
    if (__pyx_t_7) {

      /* "table_extraction/utils_table_extraction.pyx":2429
 *                     break
 *             if ignore_single:
 *                 if len(tmp_col)>1:             # <<<<<<<<<<<<<<
 *                     cols.append(tmp_col)
 *             else:
 */
      __pyx_t_10 = PyList_GET_SIZE(__pyx_v_tmp_col); if (unlikely(__pyx_t_10 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2429, __pyx_L1_error)
      __pyx_t_7 = ((__pyx_t_10 > 1) != 0);
      if (__pyx_t_7) {

        /* "table_extraction/utils_table_extraction.pyx":2430
 *             if ignore_single:
 *                 if len(tmp_col)>1:
 *                     cols.append(tmp_col)             # <<<<<<<<<<<<<<
 *             else:
 *                 cols.append(tmp_col)
 */
        __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_cols, __pyx_v_tmp_col); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2430, __pyx_L1_error)

        /* "table_extraction/utils_table_extraction.pyx":2429
 *                     break
 *             if ignore_single:
 *                 if len(tmp_col)>1:             # <<<<<<<<<<<<<<
 *                     cols.append(tmp_col)
 *             else:
 */
      }

      /* "table_extraction/utils_table_extraction.pyx":2428
 *                 else:
 *                     break
 *             if ignore_single:             # <<<<<<<<<<<<<<
 *                 if len(tmp_col)>1:
 *                     cols.append(tmp_col)
 */
      goto __pyx_L12;
    }

    /* "table_extraction/utils_table_extraction.pyx":2432
 *                     cols.append(tmp_col)
 *             else:
 *                 cols.append(tmp_col)             # <<<<<<<<<<<<<<
 *         return cols
 * 
 */
    /*else*/ {
      __pyx_t_8 = __Pyx_PyList_Append(__pyx_v_cols, __pyx_v_tmp_col); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 2432, __pyx_L1_error)
    }
    __pyx_L12:;

    /* "table_extraction/utils_table_extraction.pyx":2414
 *         cols        = []
 *         added_boxes = []
 *         for i, src_box in enumerate(content_boxes):             # <<<<<<<<<<<<<<
 *             if src_box in added_boxes:
 *                 continue
 */
    __pyx_L3_continue:;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2433
 *             else:
 *                 cols.append(tmp_col)
 *         return cols             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_cols);
  __pyx_r = __pyx_v_cols;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2402
 * 
 *     @staticmethod
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get columns from content boxes
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_15);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_XDECREF(__pyx_t_18);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.get_columns_from_content_boxes", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_cols);
  __Pyx_XDECREF(__pyx_v_added_boxes);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_src_box);
  __Pyx_XDECREF(__pyx_v_tmp_col);
  __Pyx_XDECREF(__pyx_v_dst_box);
  __Pyx_XDECREF(__pyx_v_alignment);
  __Pyx_XDECREF(__pyx_v_content_boxes);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "table_extraction/utils_table_extraction.pyx":2436
 * 
 *     @staticmethod
 *     def is_fill_area(box, image): #14802             # <<<<<<<<<<<<<<
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)
 */

/* Python wrapper */
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_281is_fill_area(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_281is_fill_area = {"is_fill_area", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_281is_fill_area, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_16table_extraction_22utils_table_extraction_5Utils_281is_fill_area(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_box = 0;
  PyObject *__pyx_v_image = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_fill_area (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_box,&__pyx_n_s_image,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_image)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("is_fill_area", 1, 2, 2, 1); __PYX_ERR(0, 2436, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_fill_area") < 0)) __PYX_ERR(0, 2436, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_box = values[0];
    __pyx_v_image = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_fill_area", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2436, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_fill_area", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_16table_extraction_22utils_table_extraction_5Utils_280is_fill_area(__pyx_self, __pyx_v_box, __pyx_v_image);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_16table_extraction_22utils_table_extraction_5Utils_280is_fill_area(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_box, PyObject *__pyx_v_image) {
  long __pyx_v_FILL_AREA_PERCENT;
  PyObject *__pyx_v_part_area = NULL;
  PyObject *__pyx_v_max_white = NULL;
  PyObject *__pyx_v_area_white = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("is_fill_area", 0);

  /* "table_extraction/utils_table_extraction.pyx":2437
 *     @staticmethod
 *     def is_fill_area(box, image): #14802
 *         FILL_AREA_PERCENT = 70             # <<<<<<<<<<<<<<
 *         part_area = Utils.get_area_from_binary_image(box, image)
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect
 */
  __pyx_v_FILL_AREA_PERCENT = 70;

  /* "table_extraction/utils_table_extraction.pyx":2438
 *     def is_fill_area(box, image): #14802
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)             # <<<<<<<<<<<<<<
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect
 *         area_white = np.sum(part_area)
 */
  __Pyx_GetModuleGlobalName(__pyx_t_2, __pyx_n_s_Utils); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_get_area_from_binary_image); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_4 = 0;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
      __pyx_t_4 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (PyFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_v_image};
    __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2438, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_v_box, __pyx_v_image};
    __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_4, 2+__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2438, __pyx_L1_error)
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_5 = PyTuple_New(2+__pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2438, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (__pyx_t_2) {
      __Pyx_GIVEREF(__pyx_t_2); PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    __Pyx_INCREF(__pyx_v_box);
    __Pyx_GIVEREF(__pyx_v_box);
    PyTuple_SET_ITEM(__pyx_t_5, 0+__pyx_t_4, __pyx_v_box);
    __Pyx_INCREF(__pyx_v_image);
    __Pyx_GIVEREF(__pyx_v_image);
    PyTuple_SET_ITEM(__pyx_t_5, 1+__pyx_t_4, __pyx_v_image);
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_5, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2438, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_part_area = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2439
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect             # <<<<<<<<<<<<<<
 *         area_white = np.sum(part_area)
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:
 */
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_box, 2, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_box, 3, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = PyNumber_Multiply(__pyx_t_1, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PyNumber_Multiply(__pyx_t_5, __pyx_int_255); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_v_max_white = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2440
 *         part_area = Utils.get_area_from_binary_image(box, image)
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect
 *         area_white = np.sum(part_area)             # <<<<<<<<<<<<<<
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:
 *             return True
 */
  __Pyx_GetModuleGlobalName(__pyx_t_5, __pyx_n_s_np); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2440, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_sum); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2440, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_5, __pyx_v_part_area) : __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_v_part_area);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2440, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_area_white = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2441
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect
 *         area_white = np.sum(part_area)
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  __pyx_t_3 = __Pyx_PyNumber_Divide(__pyx_v_area_white, __pyx_v_max_white); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2441, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyNumber_Multiply(__pyx_t_3, __pyx_int_100); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2441, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyInt_From_long(__pyx_v_FILL_AREA_PERCENT); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2441, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = PyObject_RichCompare(__pyx_t_1, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2441, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 2441, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (__pyx_t_6) {

    /* "table_extraction/utils_table_extraction.pyx":2442
 *         area_white = np.sum(part_area)
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:
 *             return True             # <<<<<<<<<<<<<<
 *         return False
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;

    /* "table_extraction/utils_table_extraction.pyx":2441
 *         max_white  = box[2]*box[3]*255 # max number of white on line_rect
 *         area_white = np.sum(part_area)
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:             # <<<<<<<<<<<<<<
 *             return True
 *         return False
 */
  }

  /* "table_extraction/utils_table_extraction.pyx":2443
 *         if area_white/max_white*100>=FILL_AREA_PERCENT:
 *             return True
 *         return False             # <<<<<<<<<<<<<<
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(Py_False);
  __pyx_r = Py_False;
  goto __pyx_L0;

  /* "table_extraction/utils_table_extraction.pyx":2436
 * 
 *     @staticmethod
 *     def is_fill_area(box, image): #14802             # <<<<<<<<<<<<<<
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("table_extraction.utils_table_extraction.Utils.is_fill_area", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_part_area);
  __Pyx_XDECREF(__pyx_v_max_white);
  __Pyx_XDECREF(__pyx_v_area_white);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *__pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects[8];
static int __pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects = 0;

static PyObject *__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (CYTHON_COMPILING_IN_CPYTHON && likely((__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects > 0) & (t->tp_basicsize == sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects)))) {
    o = (PyObject*)__pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects[--__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects];
    memset(o, 0, sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects));
    (void) PyObject_INIT(o, t);
    PyObject_GC_Track(o);
  } else {
    o = (*t->tp_alloc)(t, 0);
    if (unlikely(!o)) return 0;
  }
  return o;
}

static void __pyx_tp_dealloc_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(PyObject *o) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)o;
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->__pyx_v_threshold);
  if (CYTHON_COMPILING_IN_CPYTHON && ((__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects < 8) & (Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects)))) {
    __pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects[__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects++] = ((struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)o);
  } else {
    (*Py_TYPE(o)->tp_free)(o);
  }
}

static int __pyx_tp_traverse_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)o;
  if (p->__pyx_v_threshold) {
    e = (*v)(p->__pyx_v_threshold, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects *)o;
  tmp = ((PyObject*)p->__pyx_v_threshold);
  p->__pyx_v_threshold = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyTypeObject __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects = {
  PyVarObject_HEAD_INIT(0, 0)
  "table_extraction.utils_table_extraction.__pyx_scope_struct__rect_between_two_rects", /*tp_name*/
  sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects, /*tp_traverse*/
  __pyx_tp_clear_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  0, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *__pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect[8];
static int __pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect = 0;

static PyObject *__pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  PyObject *o;
  if (CYTHON_COMPILING_IN_CPYTHON && likely((__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect > 0) & (t->tp_basicsize == sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect)))) {
    o = (PyObject*)__pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect[--__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect];
    memset(o, 0, sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect));
    (void) PyObject_INIT(o, t);
    PyObject_GC_Track(o);
  } else {
    o = (*t->tp_alloc)(t, 0);
    if (unlikely(!o)) return 0;
  }
  return o;
}

static void __pyx_tp_dealloc_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(PyObject *o) {
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)o;
  PyObject_GC_UnTrack(o);
  Py_CLEAR(p->__pyx_v_threshold);
  if (CYTHON_COMPILING_IN_CPYTHON && ((__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect < 8) & (Py_TYPE(o)->tp_basicsize == sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect)))) {
    __pyx_freelist_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect[__pyx_freecount_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect++] = ((struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)o);
  } else {
    (*Py_TYPE(o)->tp_free)(o);
  }
}

static int __pyx_tp_traverse_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)o;
  if (p->__pyx_v_threshold) {
    e = (*v)(p->__pyx_v_threshold, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *p = (struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect *)o;
  tmp = ((PyObject*)p->__pyx_v_threshold);
  p->__pyx_v_threshold = Py_None; Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyTypeObject __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect = {
  PyVarObject_HEAD_INIT(0, 0)
  "table_extraction.utils_table_extraction.__pyx_scope_struct_1_rects_under_rect", /*tp_name*/
  sizeof(struct __pyx_obj_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  0, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect, /*tp_traverse*/
  __pyx_tp_clear_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  0, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static PyMethodDef __pyx_methods[] = {
  {0, 0, 0, 0}
};

#if PY_MAJOR_VERSION >= 3
#if CYTHON_PEP489_MULTI_PHASE_INIT
static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
static int __pyx_pymod_exec_utils_table_extraction(PyObject* module); /*proto*/
static PyModuleDef_Slot __pyx_moduledef_slots[] = {
  {Py_mod_create, (void*)__pyx_pymod_create},
  {Py_mod_exec, (void*)__pyx_pymod_exec_utils_table_extraction},
  {0, NULL}
};
#endif

static struct PyModuleDef __pyx_moduledef = {
    PyModuleDef_HEAD_INIT,
    "utils_table_extraction",
    0, /* m_doc */
  #if CYTHON_PEP489_MULTI_PHASE_INIT
    0, /* m_size */
  #else
    -1, /* m_size */
  #endif
    __pyx_methods /* m_methods */,
  #if CYTHON_PEP489_MULTI_PHASE_INIT
    __pyx_moduledef_slots, /* m_slots */
  #else
    NULL, /* m_reload */
  #endif
    NULL, /* m_traverse */
    NULL, /* m_clear */
    NULL /* m_free */
};
#endif
#ifndef CYTHON_SMALL_CODE
#if defined(__clang__)
    #define CYTHON_SMALL_CODE
#elif defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 3))
    #define CYTHON_SMALL_CODE __attribute__((cold))
#else
    #define CYTHON_SMALL_CODE
#endif
#endif

static __Pyx_StringTabEntry __pyx_string_tab[] = {
  {&__pyx_n_s_ALIGNMENT_THRESH, __pyx_k_ALIGNMENT_THRESH, sizeof(__pyx_k_ALIGNMENT_THRESH), 0, 0, 1, 1},
  {&__pyx_n_s_CHAIN_APPROX_SIMPLE, __pyx_k_CHAIN_APPROX_SIMPLE, sizeof(__pyx_k_CHAIN_APPROX_SIMPLE), 0, 0, 1, 1},
  {&__pyx_n_s_Debug, __pyx_k_Debug, sizeof(__pyx_k_Debug), 0, 0, 1, 1},
  {&__pyx_n_s_FILLED, __pyx_k_FILLED, sizeof(__pyx_k_FILLED), 0, 0, 1, 1},
  {&__pyx_n_s_FILL_AREA_PERCENT, __pyx_k_FILL_AREA_PERCENT, sizeof(__pyx_k_FILL_AREA_PERCENT), 0, 0, 1, 1},
  {&__pyx_n_s_FONT_HERSHEY_COMPLEX, __pyx_k_FONT_HERSHEY_COMPLEX, sizeof(__pyx_k_FONT_HERSHEY_COMPLEX), 0, 0, 1, 1},
  {&__pyx_n_s_Line, __pyx_k_Line, sizeof(__pyx_k_Line), 0, 0, 1, 1},
  {&__pyx_n_s_OVERLAP_SIZE, __pyx_k_OVERLAP_SIZE, sizeof(__pyx_k_OVERLAP_SIZE), 0, 0, 1, 1},
  {&__pyx_n_s_PADDING_SIZE, __pyx_k_PADDING_SIZE, sizeof(__pyx_k_PADDING_SIZE), 0, 0, 1, 1},
  {&__pyx_n_s_RETR_EXTERNAL, __pyx_k_RETR_EXTERNAL, sizeof(__pyx_k_RETR_EXTERNAL), 0, 0, 1, 1},
  {&__pyx_n_s_RETR_TREE, __pyx_k_RETR_TREE, sizeof(__pyx_k_RETR_TREE), 0, 0, 1, 1},
  {&__pyx_n_s_REVERSE_AREA_PERCENT, __pyx_k_REVERSE_AREA_PERCENT, sizeof(__pyx_k_REVERSE_AREA_PERCENT), 0, 0, 1, 1},
  {&__pyx_n_s_REVERSE_NOISE_SIZE, __pyx_k_REVERSE_NOISE_SIZE, sizeof(__pyx_k_REVERSE_NOISE_SIZE), 0, 0, 1, 1},
  {&__pyx_n_s_THRESH, __pyx_k_THRESH, sizeof(__pyx_k_THRESH), 0, 0, 1, 1},
  {&__pyx_n_s_THRESH_SIZE, __pyx_k_THRESH_SIZE, sizeof(__pyx_k_THRESH_SIZE), 0, 0, 1, 1},
  {&__pyx_n_s_Utils, __pyx_k_Utils, sizeof(__pyx_k_Utils), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_align_horizontal, __pyx_k_Utils_align_horizontal, sizeof(__pyx_k_Utils_align_horizontal), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_align_vertical, __pyx_k_Utils_align_vertical, sizeof(__pyx_k_Utils_align_vertical), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_alignments_contain, __pyx_k_Utils_alignments_contain, sizeof(__pyx_k_Utils_alignments_contain), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_bounding_lines_virtual_lin, __pyx_k_Utils_bounding_lines_virtual_lin, sizeof(__pyx_k_Utils_bounding_lines_virtual_lin), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_bounding_rect, __pyx_k_Utils_bounding_rect, sizeof(__pyx_k_Utils_bounding_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_bounding_rect_lines, __pyx_k_Utils_bounding_rect_lines, sizeof(__pyx_k_Utils_bounding_rect_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_calc_centroid, __pyx_k_Utils_calc_centroid, sizeof(__pyx_k_Utils_calc_centroid), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_check_two_points_in_same_l, __pyx_k_Utils_check_two_points_in_same_l, sizeof(__pyx_k_Utils_check_two_points_in_same_l), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_connect_at_corner, __pyx_k_Utils_connect_at_corner, sizeof(__pyx_k_Utils_connect_at_corner), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_content_block_in_groups, __pyx_k_Utils_content_block_in_groups, sizeof(__pyx_k_Utils_content_block_in_groups), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_convert_box_to_line, __pyx_k_Utils_convert_box_to_line, sizeof(__pyx_k_Utils_convert_box_to_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_convert_line_to_box, __pyx_k_Utils_convert_line_to_box, sizeof(__pyx_k_Utils_convert_line_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_convert_rect_to_rect, __pyx_k_Utils_convert_rect_to_rect, sizeof(__pyx_k_Utils_convert_rect_to_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_convert_rects_to_rects, __pyx_k_Utils_convert_rects_to_rects, sizeof(__pyx_k_Utils_convert_rects_to_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_create_virtual_horizontal, __pyx_k_Utils_create_virtual_horizontal, sizeof(__pyx_k_Utils_create_virtual_horizontal), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_create_virtual_vertical_li, __pyx_k_Utils_create_virtual_vertical_li, sizeof(__pyx_k_Utils_create_virtual_vertical_li), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_distance_from_box_to_box, __pyx_k_Utils_distance_from_box_to_box, sizeof(__pyx_k_Utils_distance_from_box_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_distance_from_line_to_box, __pyx_k_Utils_distance_from_line_to_box, sizeof(__pyx_k_Utils_distance_from_line_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_distance_from_line_to_line, __pyx_k_Utils_distance_from_line_to_line, sizeof(__pyx_k_Utils_distance_from_line_to_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_distance_from_point_to_lin, __pyx_k_Utils_distance_from_point_to_lin, sizeof(__pyx_k_Utils_distance_from_point_to_lin), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_distance_from_point_to_poi, __pyx_k_Utils_distance_from_point_to_poi, sizeof(__pyx_k_Utils_distance_from_point_to_poi), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_box, __pyx_k_Utils_draw_box, sizeof(__pyx_k_Utils_draw_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_boxes, __pyx_k_Utils_draw_boxes, sizeof(__pyx_k_Utils_draw_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_content_block, __pyx_k_Utils_draw_content_block, sizeof(__pyx_k_Utils_draw_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_content_blocks, __pyx_k_Utils_draw_content_blocks, sizeof(__pyx_k_Utils_draw_content_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_group, __pyx_k_Utils_draw_group, sizeof(__pyx_k_Utils_draw_group), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_groups, __pyx_k_Utils_draw_groups, sizeof(__pyx_k_Utils_draw_groups), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_line, __pyx_k_Utils_draw_line, sizeof(__pyx_k_Utils_draw_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_lines, __pyx_k_Utils_draw_lines, sizeof(__pyx_k_Utils_draw_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_draw_table, __pyx_k_Utils_draw_table, sizeof(__pyx_k_Utils_draw_table), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_duplicate_line_rects, __pyx_k_Utils_duplicate_line_rects, sizeof(__pyx_k_Utils_duplicate_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_expand_height_rect, __pyx_k_Utils_expand_height_rect, sizeof(__pyx_k_Utils_expand_height_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_expand_image, __pyx_k_Utils_expand_image, sizeof(__pyx_k_Utils_expand_image), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_expand_rect, __pyx_k_Utils_expand_rect, sizeof(__pyx_k_Utils_expand_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_expand_width_rect, __pyx_k_Utils_expand_width_rect, sizeof(__pyx_k_Utils_expand_width_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_extend_line_at_corner, __pyx_k_Utils_extend_line_at_corner, sizeof(__pyx_k_Utils_extend_line_at_corner), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_extend_line_at_corner_loca, __pyx_k_Utils_extend_line_at_corner_loca, sizeof(__pyx_k_Utils_extend_line_at_corner_loca), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_extend_lines, __pyx_k_Utils_extend_lines, sizeof(__pyx_k_Utils_extend_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_external_rects, __pyx_k_Utils_external_rects, sizeof(__pyx_k_Utils_external_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_extract_line_rect, __pyx_k_Utils_extract_line_rect, sizeof(__pyx_k_Utils_extract_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_fill_box, __pyx_k_Utils_fill_box, sizeof(__pyx_k_Utils_fill_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_fill_boxes, __pyx_k_Utils_fill_boxes, sizeof(__pyx_k_Utils_fill_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_fill_rects, __pyx_k_Utils_fill_rects, sizeof(__pyx_k_Utils_fill_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_area_from_binary_image, __pyx_k_Utils_get_area_from_binary_image, sizeof(__pyx_k_Utils_get_area_from_binary_image), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_columns_from_content_b, __pyx_k_Utils_get_columns_from_content_b, sizeof(__pyx_k_Utils_get_columns_from_content_b), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_columns_from_content_b_2, __pyx_k_Utils_get_columns_from_content_b_2, sizeof(__pyx_k_Utils_get_columns_from_content_b_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_rect_contains_blocks, __pyx_k_Utils_get_rect_contains_blocks, sizeof(__pyx_k_Utils_get_rect_contains_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_rect_contains_rects, __pyx_k_Utils_get_rect_contains_rects, sizeof(__pyx_k_Utils_get_rect_contains_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_rows_from_content_boxe, __pyx_k_Utils_get_rows_from_content_boxe, sizeof(__pyx_k_Utils_get_rows_from_content_boxe), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_get_rows_from_content_boxe_2, __pyx_k_Utils_get_rows_from_content_boxe_2, sizeof(__pyx_k_Utils_get_rows_from_content_boxe_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_h_line_inside_box, __pyx_k_Utils_h_line_inside_box, sizeof(__pyx_k_Utils_h_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_h_line_overlap_rect, __pyx_k_Utils_h_line_overlap_rect, sizeof(__pyx_k_Utils_h_line_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_has_box_between_content_bl, __pyx_k_Utils_has_box_between_content_bl, sizeof(__pyx_k_Utils_has_box_between_content_bl), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_has_box_between_content_bl_2, __pyx_k_Utils_has_box_between_content_bl_2, sizeof(__pyx_k_Utils_has_box_between_content_bl_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_height_line, __pyx_k_Utils_height_line, sizeof(__pyx_k_Utils_height_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_horizontal_bottom_neighbor, __pyx_k_Utils_horizontal_bottom_neighbor, sizeof(__pyx_k_Utils_horizontal_bottom_neighbor), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_horizontal_line_cut_vertic, __pyx_k_Utils_horizontal_line_cut_vertic, sizeof(__pyx_k_Utils_horizontal_line_cut_vertic), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_horizontal_neighbor_line, __pyx_k_Utils_horizontal_neighbor_line, sizeof(__pyx_k_Utils_horizontal_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_horizontal_stop_line, __pyx_k_Utils_horizontal_stop_line, sizeof(__pyx_k_Utils_horizontal_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_horizontal_top_neighbor_li, __pyx_k_Utils_horizontal_top_neighbor_li, sizeof(__pyx_k_Utils_horizontal_top_neighbor_li), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_box_far_box, __pyx_k_Utils_is_box_far_box, sizeof(__pyx_k_Utils_is_box_far_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_end_point_on_intersecti, __pyx_k_Utils_is_end_point_on_intersecti, sizeof(__pyx_k_Utils_is_end_point_on_intersecti), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_fill_area, __pyx_k_Utils_is_fill_area, sizeof(__pyx_k_Utils_is_fill_area), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_intersect, __pyx_k_Utils_is_intersect, sizeof(__pyx_k_Utils_is_intersect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_line_cut_rects, __pyx_k_Utils_is_line_cut_rects, sizeof(__pyx_k_Utils_is_line_cut_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_noise, __pyx_k_Utils_is_noise, sizeof(__pyx_k_Utils_is_noise), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_point_far_line, __pyx_k_Utils_is_point_far_line, sizeof(__pyx_k_Utils_is_point_far_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_point_in_line, __pyx_k_Utils_is_point_in_line, sizeof(__pyx_k_Utils_is_point_in_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_rect_contains_rects, __pyx_k_Utils_is_rect_contains_rects, sizeof(__pyx_k_Utils_is_rect_contains_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_rect_divide_content, __pyx_k_Utils_is_rect_divide_content, sizeof(__pyx_k_Utils_is_rect_divide_content), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_rect_divide_text_boxes, __pyx_k_Utils_is_rect_divide_text_boxes, sizeof(__pyx_k_Utils_is_rect_divide_text_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_start_point_on_intersec, __pyx_k_Utils_is_start_point_on_intersec, sizeof(__pyx_k_Utils_is_start_point_on_intersec), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_is_text_blocks_header_by_h, __pyx_k_Utils_is_text_blocks_header_by_h, sizeof(__pyx_k_Utils_is_text_blocks_header_by_h), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_at_border_image, __pyx_k_Utils_line_at_border_image, sizeof(__pyx_k_Utils_line_at_border_image), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_belong_with_box, __pyx_k_Utils_line_belong_with_box, sizeof(__pyx_k_Utils_line_belong_with_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_between_two_rects, __pyx_k_Utils_line_between_two_rects, sizeof(__pyx_k_Utils_line_between_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_inside_box, __pyx_k_Utils_line_inside_box, sizeof(__pyx_k_Utils_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_inside_table_box, __pyx_k_Utils_line_inside_table_box, sizeof(__pyx_k_Utils_line_inside_table_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_inside_text_block, __pyx_k_Utils_line_inside_text_block, sizeof(__pyx_k_Utils_line_inside_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_inside_text_block_loc, __pyx_k_Utils_line_inside_text_block_loc, sizeof(__pyx_k_Utils_line_inside_text_block_loc), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_inside_text_block_loc_2, __pyx_k_Utils_line_inside_text_block_loc_2, sizeof(__pyx_k_Utils_line_inside_text_block_loc_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_intersection, __pyx_k_Utils_line_intersection, sizeof(__pyx_k_Utils_line_intersection), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_intersection_locals_d, __pyx_k_Utils_line_intersection_locals_d, sizeof(__pyx_k_Utils_line_intersection_locals_d), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_overlap_line, __pyx_k_Utils_line_overlap_line, sizeof(__pyx_k_Utils_line_overlap_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_overlap_line_locals_l, __pyx_k_Utils_line_overlap_line_locals_l, sizeof(__pyx_k_Utils_line_overlap_line_locals_l), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_overlap_rects, __pyx_k_Utils_line_overlap_rects, sizeof(__pyx_k_Utils_line_overlap_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_pairs, __pyx_k_Utils_line_pairs, sizeof(__pyx_k_Utils_line_pairs), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_line_split_line, __pyx_k_Utils_line_split_line, sizeof(__pyx_k_Utils_line_split_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_lines_inside_box, __pyx_k_Utils_lines_inside_box, sizeof(__pyx_k_Utils_lines_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_lines_intersect_line, __pyx_k_Utils_lines_intersect_line, sizeof(__pyx_k_Utils_lines_intersect_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_lines_over_line, __pyx_k_Utils_lines_over_line, sizeof(__pyx_k_Utils_lines_over_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_lines_over_line_locals_lam, __pyx_k_Utils_lines_over_line_locals_lam, sizeof(__pyx_k_Utils_lines_over_line_locals_lam), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_border_lines, __pyx_k_Utils_merge_border_lines, sizeof(__pyx_k_Utils_merge_border_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_border_lines_locals, __pyx_k_Utils_merge_border_lines_locals, sizeof(__pyx_k_Utils_merge_border_lines_locals), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_duplicate_lines, __pyx_k_Utils_merge_duplicate_lines, sizeof(__pyx_k_Utils_merge_duplicate_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_lines, __pyx_k_Utils_merge_lines, sizeof(__pyx_k_Utils_merge_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_overlap_boxes, __pyx_k_Utils_merge_overlap_boxes, sizeof(__pyx_k_Utils_merge_overlap_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_single_chars, __pyx_k_Utils_merge_single_chars, sizeof(__pyx_k_Utils_merge_single_chars), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_merge_two_types_text_block, __pyx_k_Utils_merge_two_types_text_block, sizeof(__pyx_k_Utils_merge_two_types_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_outside_rects, __pyx_k_Utils_outside_rects, sizeof(__pyx_k_Utils_outside_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_outside_rects_locals_max_s, __pyx_k_Utils_outside_rects_locals_max_s, sizeof(__pyx_k_Utils_outside_rects_locals_max_s), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_real_text_block, __pyx_k_Utils_real_text_block, sizeof(__pyx_k_Utils_real_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_between_two_rects, __pyx_k_Utils_rect_between_two_rects, sizeof(__pyx_k_Utils_rect_between_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_between_two_rects_loc, __pyx_k_Utils_rect_between_two_rects_loc, sizeof(__pyx_k_Utils_rect_between_two_rects_loc), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_can_be_merged, __pyx_k_Utils_rect_can_be_merged, sizeof(__pyx_k_Utils_rect_can_be_merged), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_horizontal_inside_rec, __pyx_k_Utils_rect_horizontal_inside_rec, sizeof(__pyx_k_Utils_rect_horizontal_inside_rec), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_horizontal_overlap_re, __pyx_k_Utils_rect_horizontal_overlap_re, sizeof(__pyx_k_Utils_rect_horizontal_overlap_re), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_horizontal_overlap_re_2, __pyx_k_Utils_rect_horizontal_overlap_re_2, sizeof(__pyx_k_Utils_rect_horizontal_overlap_re_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_in_list, __pyx_k_Utils_rect_in_list, sizeof(__pyx_k_Utils_rect_in_list), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_inside_rect, __pyx_k_Utils_rect_inside_rect, sizeof(__pyx_k_Utils_rect_inside_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_overlap_rect, __pyx_k_Utils_rect_overlap_rect, sizeof(__pyx_k_Utils_rect_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_overlap_rect_with_per, __pyx_k_Utils_rect_overlap_rect_with_per, sizeof(__pyx_k_Utils_rect_overlap_rect_with_per), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_overlap_rect_with_wid, __pyx_k_Utils_rect_overlap_rect_with_wid, sizeof(__pyx_k_Utils_rect_overlap_rect_with_wid), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_overlap_two_rects, __pyx_k_Utils_rect_overlap_two_rects, sizeof(__pyx_k_Utils_rect_overlap_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_vertical_inside_rect, __pyx_k_Utils_rect_vertical_inside_rect, sizeof(__pyx_k_Utils_rect_vertical_inside_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_vertical_overlap_rect, __pyx_k_Utils_rect_vertical_overlap_rect, sizeof(__pyx_k_Utils_rect_vertical_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rect_vertical_overlap_rect_2, __pyx_k_Utils_rect_vertical_overlap_rect_2, sizeof(__pyx_k_Utils_rect_vertical_overlap_rect_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rects_under_rect, __pyx_k_Utils_rects_under_rect, sizeof(__pyx_k_Utils_rects_under_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_rects_under_rect_locals_la, __pyx_k_Utils_rects_under_rect_locals_la, sizeof(__pyx_k_Utils_rects_under_rect_locals_la), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_reduce_line, __pyx_k_Utils_reduce_line, sizeof(__pyx_k_Utils_reduce_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_refill_rects, __pyx_k_Utils_refill_rects, sizeof(__pyx_k_Utils_refill_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_content_block_by_id, __pyx_k_Utils_remove_content_block_by_id, sizeof(__pyx_k_Utils_remove_content_block_by_id), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_dot_lines_noise, __pyx_k_Utils_remove_dot_lines_noise, sizeof(__pyx_k_Utils_remove_dot_lines_noise), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_duplicate_line_rect, __pyx_k_Utils_remove_duplicate_line_rect, sizeof(__pyx_k_Utils_remove_duplicate_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_duplicate_line_rect_2, __pyx_k_Utils_remove_duplicate_line_rect_2, sizeof(__pyx_k_Utils_remove_duplicate_line_rect_2), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_invalid_signed, __pyx_k_Utils_remove_invalid_signed, sizeof(__pyx_k_Utils_remove_invalid_signed), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_invalid_signed_loca, __pyx_k_Utils_remove_invalid_signed_loca, sizeof(__pyx_k_Utils_remove_invalid_signed_loca), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_noise_content_block, __pyx_k_Utils_remove_noise_content_block, sizeof(__pyx_k_Utils_remove_noise_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_noise_lines_rect, __pyx_k_Utils_remove_noise_lines_rect, sizeof(__pyx_k_Utils_remove_noise_lines_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_padding_rect, __pyx_k_Utils_remove_padding_rect, sizeof(__pyx_k_Utils_remove_padding_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_reverse_line_rects, __pyx_k_Utils_remove_reverse_line_rects, sizeof(__pyx_k_Utils_remove_reverse_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_underline_text, __pyx_k_Utils_remove_underline_text, sizeof(__pyx_k_Utils_remove_underline_text), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_remove_underline_text_loca, __pyx_k_Utils_remove_underline_text_loca, sizeof(__pyx_k_Utils_remove_underline_text_loca), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_reset_connect_at_line_corn, __pyx_k_Utils_reset_connect_at_line_corn, sizeof(__pyx_k_Utils_reset_connect_at_line_corn), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_resize_image, __pyx_k_Utils_resize_image, sizeof(__pyx_k_Utils_resize_image), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_same_h_rect, __pyx_k_Utils_same_h_rect, sizeof(__pyx_k_Utils_same_h_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_same_line, __pyx_k_Utils_same_line, sizeof(__pyx_k_Utils_same_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_same_position, __pyx_k_Utils_same_position, sizeof(__pyx_k_Utils_same_position), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_same_rect, __pyx_k_Utils_same_rect, sizeof(__pyx_k_Utils_same_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_same_v_rect, __pyx_k_Utils_same_v_rect, sizeof(__pyx_k_Utils_same_v_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_search_text_by_box, __pyx_k_Utils_search_text_by_box, sizeof(__pyx_k_Utils_search_text_by_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_shrink_line, __pyx_k_Utils_shrink_line, sizeof(__pyx_k_Utils_shrink_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_single_lines, __pyx_k_Utils_single_lines, sizeof(__pyx_k_Utils_single_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_single_text_blocks, __pyx_k_Utils_single_text_blocks, sizeof(__pyx_k_Utils_single_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_sort_lines, __pyx_k_Utils_sort_lines, sizeof(__pyx_k_Utils_sort_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_sort_lines_locals_lambda, __pyx_k_Utils_sort_lines_locals_lambda, sizeof(__pyx_k_Utils_sort_lines_locals_lambda), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_split_lines, __pyx_k_Utils_split_lines, sizeof(__pyx_k_Utils_split_lines), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_bottom, __pyx_k_Utils_stop_point_at_bottom, sizeof(__pyx_k_Utils_stop_point_at_bottom), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_bottom_local, __pyx_k_Utils_stop_point_at_bottom_local, sizeof(__pyx_k_Utils_stop_point_at_bottom_local), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_left, __pyx_k_Utils_stop_point_at_left, sizeof(__pyx_k_Utils_stop_point_at_left), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_left_locals, __pyx_k_Utils_stop_point_at_left_locals, sizeof(__pyx_k_Utils_stop_point_at_left_locals), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_right, __pyx_k_Utils_stop_point_at_right, sizeof(__pyx_k_Utils_stop_point_at_right), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_right_locals, __pyx_k_Utils_stop_point_at_right_locals, sizeof(__pyx_k_Utils_stop_point_at_right_locals), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_top, __pyx_k_Utils_stop_point_at_top, sizeof(__pyx_k_Utils_stop_point_at_top), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_stop_point_at_top_locals_l, __pyx_k_Utils_stop_point_at_top_locals_l, sizeof(__pyx_k_Utils_stop_point_at_top_locals_l), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_v_line_inside_box, __pyx_k_Utils_v_line_inside_box, sizeof(__pyx_k_Utils_v_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_v_line_overlap_rect, __pyx_k_Utils_v_line_overlap_rect, sizeof(__pyx_k_Utils_v_line_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_vertical_left_neighbor_lin, __pyx_k_Utils_vertical_left_neighbor_lin, sizeof(__pyx_k_Utils_vertical_left_neighbor_lin), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_vertical_line_cut_horionta, __pyx_k_Utils_vertical_line_cut_horionta, sizeof(__pyx_k_Utils_vertical_line_cut_horionta), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_vertical_neighbor_line, __pyx_k_Utils_vertical_neighbor_line, sizeof(__pyx_k_Utils_vertical_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_vertical_right_neighbor_li, __pyx_k_Utils_vertical_right_neighbor_li, sizeof(__pyx_k_Utils_vertical_right_neighbor_li), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_vertical_stop_line, __pyx_k_Utils_vertical_stop_line, sizeof(__pyx_k_Utils_vertical_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_white_percentage, __pyx_k_Utils_white_percentage, sizeof(__pyx_k_Utils_white_percentage), 0, 0, 1, 1},
  {&__pyx_n_s_Utils_width_line, __pyx_k_Utils_width_line, sizeof(__pyx_k_Utils_width_line), 0, 0, 1, 1},
  {&__pyx_n_s__178, __pyx_k__178, sizeof(__pyx_k__178), 0, 0, 1, 1},
  {&__pyx_kp_s__21, __pyx_k__21, sizeof(__pyx_k__21), 0, 0, 1, 0},
  {&__pyx_kp_s__22, __pyx_k__22, sizeof(__pyx_k__22), 0, 0, 1, 0},
  {&__pyx_n_s_a, __pyx_k_a, sizeof(__pyx_k_a), 0, 0, 1, 1},
  {&__pyx_n_s_a_box, __pyx_k_a_box, sizeof(__pyx_k_a_box), 0, 0, 1, 1},
  {&__pyx_n_s_a_content_block, __pyx_k_a_content_block, sizeof(__pyx_k_a_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_a_h, __pyx_k_a_h, sizeof(__pyx_k_a_h), 0, 0, 1, 1},
  {&__pyx_n_s_a_line, __pyx_k_a_line, sizeof(__pyx_k_a_line), 0, 0, 1, 1},
  {&__pyx_n_s_a_line_rect, __pyx_k_a_line_rect, sizeof(__pyx_k_a_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_a_point, __pyx_k_a_point, sizeof(__pyx_k_a_point), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect, __pyx_k_a_rect, sizeof(__pyx_k_a_rect), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_area, __pyx_k_a_rect_area, sizeof(__pyx_k_a_rect_area), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_h, __pyx_k_a_rect_h, sizeof(__pyx_k_a_rect_h), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_w, __pyx_k_a_rect_w, sizeof(__pyx_k_a_rect_w), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_x, __pyx_k_a_rect_x, sizeof(__pyx_k_a_rect_x), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_x1, __pyx_k_a_rect_x1, sizeof(__pyx_k_a_rect_x1), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_x2, __pyx_k_a_rect_x2, sizeof(__pyx_k_a_rect_x2), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_y, __pyx_k_a_rect_y, sizeof(__pyx_k_a_rect_y), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_y1, __pyx_k_a_rect_y1, sizeof(__pyx_k_a_rect_y1), 0, 0, 1, 1},
  {&__pyx_n_s_a_rect_y2, __pyx_k_a_rect_y2, sizeof(__pyx_k_a_rect_y2), 0, 0, 1, 1},
  {&__pyx_n_s_a_w, __pyx_k_a_w, sizeof(__pyx_k_a_w), 0, 0, 1, 1},
  {&__pyx_n_s_a_x, __pyx_k_a_x, sizeof(__pyx_k_a_x), 0, 0, 1, 1},
  {&__pyx_n_s_a_y, __pyx_k_a_y, sizeof(__pyx_k_a_y), 0, 0, 1, 1},
  {&__pyx_n_s_added_boxes, __pyx_k_added_boxes, sizeof(__pyx_k_added_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_adj, __pyx_k_adj, sizeof(__pyx_k_adj), 0, 0, 1, 1},
  {&__pyx_n_s_align_center, __pyx_k_align_center, sizeof(__pyx_k_align_center), 0, 0, 1, 1},
  {&__pyx_n_s_align_horizontal, __pyx_k_align_horizontal, sizeof(__pyx_k_align_horizontal), 0, 0, 1, 1},
  {&__pyx_n_s_align_vertical, __pyx_k_align_vertical, sizeof(__pyx_k_align_vertical), 0, 0, 1, 1},
  {&__pyx_n_s_alignment, __pyx_k_alignment, sizeof(__pyx_k_alignment), 0, 0, 1, 1},
  {&__pyx_n_s_alignments, __pyx_k_alignments, sizeof(__pyx_k_alignments), 0, 0, 1, 1},
  {&__pyx_n_s_alignments_contain, __pyx_k_alignments_contain, sizeof(__pyx_k_alignments_contain), 0, 0, 1, 1},
  {&__pyx_n_s_all_rects, __pyx_k_all_rects, sizeof(__pyx_k_all_rects), 0, 0, 1, 1},
  {&__pyx_n_s_append, __pyx_k_append, sizeof(__pyx_k_append), 0, 0, 1, 1},
  {&__pyx_n_s_area, __pyx_k_area, sizeof(__pyx_k_area), 0, 0, 1, 1},
  {&__pyx_n_s_area_white, __pyx_k_area_white, sizeof(__pyx_k_area_white), 0, 0, 1, 1},
  {&__pyx_n_s_array, __pyx_k_array, sizeof(__pyx_k_array), 0, 0, 1, 1},
  {&__pyx_n_s_ave_area, __pyx_k_ave_area, sizeof(__pyx_k_ave_area), 0, 0, 1, 1},
  {&__pyx_n_s_ave_h, __pyx_k_ave_h, sizeof(__pyx_k_ave_h), 0, 0, 1, 1},
  {&__pyx_n_s_ave_w, __pyx_k_ave_w, sizeof(__pyx_k_ave_w), 0, 0, 1, 1},
  {&__pyx_n_s_b, __pyx_k_b, sizeof(__pyx_k_b), 0, 0, 1, 1},
  {&__pyx_n_s_b_box, __pyx_k_b_box, sizeof(__pyx_k_b_box), 0, 0, 1, 1},
  {&__pyx_n_s_b_content_block, __pyx_k_b_content_block, sizeof(__pyx_k_b_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_b_h, __pyx_k_b_h, sizeof(__pyx_k_b_h), 0, 0, 1, 1},
  {&__pyx_n_s_b_line, __pyx_k_b_line, sizeof(__pyx_k_b_line), 0, 0, 1, 1},
  {&__pyx_n_s_b_line_rect, __pyx_k_b_line_rect, sizeof(__pyx_k_b_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_b_point, __pyx_k_b_point, sizeof(__pyx_k_b_point), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect, __pyx_k_b_rect, sizeof(__pyx_k_b_rect), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_area, __pyx_k_b_rect_area, sizeof(__pyx_k_b_rect_area), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_h, __pyx_k_b_rect_h, sizeof(__pyx_k_b_rect_h), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_w, __pyx_k_b_rect_w, sizeof(__pyx_k_b_rect_w), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_x, __pyx_k_b_rect_x, sizeof(__pyx_k_b_rect_x), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_x1, __pyx_k_b_rect_x1, sizeof(__pyx_k_b_rect_x1), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_x2, __pyx_k_b_rect_x2, sizeof(__pyx_k_b_rect_x2), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_y, __pyx_k_b_rect_y, sizeof(__pyx_k_b_rect_y), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_y1, __pyx_k_b_rect_y1, sizeof(__pyx_k_b_rect_y1), 0, 0, 1, 1},
  {&__pyx_n_s_b_rect_y2, __pyx_k_b_rect_y2, sizeof(__pyx_k_b_rect_y2), 0, 0, 1, 1},
  {&__pyx_n_s_b_w, __pyx_k_b_w, sizeof(__pyx_k_b_w), 0, 0, 1, 1},
  {&__pyx_n_s_b_x, __pyx_k_b_x, sizeof(__pyx_k_b_x), 0, 0, 1, 1},
  {&__pyx_n_s_b_y, __pyx_k_b_y, sizeof(__pyx_k_b_y), 0, 0, 1, 1},
  {&__pyx_n_s_back_line, __pyx_k_back_line, sizeof(__pyx_k_back_line), 0, 0, 1, 1},
  {&__pyx_n_s_binary_image, __pyx_k_binary_image, sizeof(__pyx_k_binary_image), 0, 0, 1, 1},
  {&__pyx_n_s_blank_image, __pyx_k_blank_image, sizeof(__pyx_k_blank_image), 0, 0, 1, 1},
  {&__pyx_n_s_block, __pyx_k_block, sizeof(__pyx_k_block), 0, 0, 1, 1},
  {&__pyx_n_s_block_text, __pyx_k_block_text, sizeof(__pyx_k_block_text), 0, 0, 1, 1},
  {&__pyx_n_s_block_texts, __pyx_k_block_texts, sizeof(__pyx_k_block_texts), 0, 0, 1, 1},
  {&__pyx_n_s_blocks, __pyx_k_blocks, sizeof(__pyx_k_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_border_color, __pyx_k_border_color, sizeof(__pyx_k_border_color), 0, 0, 1, 1},
  {&__pyx_n_s_bottom, __pyx_k_bottom, sizeof(__pyx_k_bottom), 0, 0, 1, 1},
  {&__pyx_n_s_bottom_border, __pyx_k_bottom_border, sizeof(__pyx_k_bottom_border), 0, 0, 1, 1},
  {&__pyx_n_s_bottom_lines, __pyx_k_bottom_lines, sizeof(__pyx_k_bottom_lines), 0, 0, 1, 1},
  {&__pyx_n_s_bottom_point, __pyx_k_bottom_point, sizeof(__pyx_k_bottom_point), 0, 0, 1, 1},
  {&__pyx_n_s_bottom_stop_line, __pyx_k_bottom_stop_line, sizeof(__pyx_k_bottom_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_boundingRect, __pyx_k_boundingRect, sizeof(__pyx_k_boundingRect), 0, 0, 1, 1},
  {&__pyx_n_s_bounding_lines_virtual_line_real, __pyx_k_bounding_lines_virtual_line_real, sizeof(__pyx_k_bounding_lines_virtual_line_real), 0, 0, 1, 1},
  {&__pyx_n_s_bounding_rect, __pyx_k_bounding_rect, sizeof(__pyx_k_bounding_rect), 0, 0, 1, 1},
  {&__pyx_n_s_bounding_rect_lines, __pyx_k_bounding_rect_lines, sizeof(__pyx_k_bounding_rect_lines), 0, 0, 1, 1},
  {&__pyx_n_s_box, __pyx_k_box, sizeof(__pyx_k_box), 0, 0, 1, 1},
  {&__pyx_n_s_box_h, __pyx_k_box_h, sizeof(__pyx_k_box_h), 0, 0, 1, 1},
  {&__pyx_n_s_box_lines, __pyx_k_box_lines, sizeof(__pyx_k_box_lines), 0, 0, 1, 1},
  {&__pyx_n_s_box_w, __pyx_k_box_w, sizeof(__pyx_k_box_w), 0, 0, 1, 1},
  {&__pyx_n_s_box_x, __pyx_k_box_x, sizeof(__pyx_k_box_x), 0, 0, 1, 1},
  {&__pyx_n_s_box_y, __pyx_k_box_y, sizeof(__pyx_k_box_y), 0, 0, 1, 1},
  {&__pyx_n_s_boxes, __pyx_k_boxes, sizeof(__pyx_k_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_c, __pyx_k_c, sizeof(__pyx_k_c), 0, 0, 1, 1},
  {&__pyx_n_s_c1, __pyx_k_c1, sizeof(__pyx_k_c1), 0, 0, 1, 1},
  {&__pyx_n_s_c2, __pyx_k_c2, sizeof(__pyx_k_c2), 0, 0, 1, 1},
  {&__pyx_n_s_calc_centroid, __pyx_k_calc_centroid, sizeof(__pyx_k_calc_centroid), 0, 0, 1, 1},
  {&__pyx_n_s_candidate_header_count, __pyx_k_candidate_header_count, sizeof(__pyx_k_candidate_header_count), 0, 0, 1, 1},
  {&__pyx_n_s_cb, __pyx_k_cb, sizeof(__pyx_k_cb), 0, 0, 1, 1},
  {&__pyx_n_s_center, __pyx_k_center, sizeof(__pyx_k_center), 0, 0, 1, 1},
  {&__pyx_n_s_center_line, __pyx_k_center_line, sizeof(__pyx_k_center_line), 0, 0, 1, 1},
  {&__pyx_n_s_center_text, __pyx_k_center_text, sizeof(__pyx_k_center_text), 0, 0, 1, 1},
  {&__pyx_n_s_check_two_points_in_same_line, __pyx_k_check_two_points_in_same_line, sizeof(__pyx_k_check_two_points_in_same_line), 0, 0, 1, 1},
  {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
  {&__pyx_n_s_cnt, __pyx_k_cnt, sizeof(__pyx_k_cnt), 0, 0, 1, 1},
  {&__pyx_n_s_col_alignments, __pyx_k_col_alignments, sizeof(__pyx_k_col_alignments), 0, 0, 1, 1},
  {&__pyx_n_s_color, __pyx_k_color, sizeof(__pyx_k_color), 0, 0, 1, 1},
  {&__pyx_n_s_cols, __pyx_k_cols, sizeof(__pyx_k_cols), 0, 0, 1, 1},
  {&__pyx_n_s_combinations, __pyx_k_combinations, sizeof(__pyx_k_combinations), 0, 0, 1, 1},
  {&__pyx_n_s_connect_at_corner, __pyx_k_connect_at_corner, sizeof(__pyx_k_connect_at_corner), 0, 0, 1, 1},
  {&__pyx_n_s_connect_at_end_point, __pyx_k_connect_at_end_point, sizeof(__pyx_k_connect_at_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_connect_at_start_and_end_point, __pyx_k_connect_at_start_and_end_point, sizeof(__pyx_k_connect_at_start_and_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_connect_at_start_point, __pyx_k_connect_at_start_point, sizeof(__pyx_k_connect_at_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_constant, __pyx_k_constant, sizeof(__pyx_k_constant), 0, 0, 1, 1},
  {&__pyx_n_s_constant_values, __pyx_k_constant_values, sizeof(__pyx_k_constant_values), 0, 0, 1, 1},
  {&__pyx_n_s_content_block, __pyx_k_content_block, sizeof(__pyx_k_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_content_block_in_groups, __pyx_k_content_block_in_groups, sizeof(__pyx_k_content_block_in_groups), 0, 0, 1, 1},
  {&__pyx_n_s_content_blocks, __pyx_k_content_blocks, sizeof(__pyx_k_content_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_content_boxes, __pyx_k_content_boxes, sizeof(__pyx_k_content_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_content_rect, __pyx_k_content_rect, sizeof(__pyx_k_content_rect), 0, 0, 1, 1},
  {&__pyx_n_s_content_rects, __pyx_k_content_rects, sizeof(__pyx_k_content_rects), 0, 0, 1, 1},
  {&__pyx_n_s_contours, __pyx_k_contours, sizeof(__pyx_k_contours), 0, 0, 1, 1},
  {&__pyx_n_s_convert_box_to_line, __pyx_k_convert_box_to_line, sizeof(__pyx_k_convert_box_to_line), 0, 0, 1, 1},
  {&__pyx_n_s_convert_line_to_box, __pyx_k_convert_line_to_box, sizeof(__pyx_k_convert_line_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_convert_rect_to_rect, __pyx_k_convert_rect_to_rect, sizeof(__pyx_k_convert_rect_to_rect), 0, 0, 1, 1},
  {&__pyx_n_s_convert_rects_to_rects, __pyx_k_convert_rects_to_rects, sizeof(__pyx_k_convert_rects_to_rects), 0, 0, 1, 1},
  {&__pyx_n_s_copy, __pyx_k_copy, sizeof(__pyx_k_copy), 0, 0, 1, 1},
  {&__pyx_n_s_count, __pyx_k_count, sizeof(__pyx_k_count), 0, 0, 1, 1},
  {&__pyx_n_s_count_down, __pyx_k_count_down, sizeof(__pyx_k_count_down), 0, 0, 1, 1},
  {&__pyx_n_s_create_virtual_horizontal_line, __pyx_k_create_virtual_horizontal_line, sizeof(__pyx_k_create_virtual_horizontal_line), 0, 0, 1, 1},
  {&__pyx_n_s_create_virtual_vertical_line, __pyx_k_create_virtual_vertical_line, sizeof(__pyx_k_create_virtual_vertical_line), 0, 0, 1, 1},
  {&__pyx_n_s_crnn_char, __pyx_k_crnn_char, sizeof(__pyx_k_crnn_char), 0, 0, 1, 1},
  {&__pyx_n_s_crnn_chars, __pyx_k_crnn_chars, sizeof(__pyx_k_crnn_chars), 0, 0, 1, 1},
  {&__pyx_n_s_cv2, __pyx_k_cv2, sizeof(__pyx_k_cv2), 0, 0, 1, 1},
  {&__pyx_n_s_d, __pyx_k_d, sizeof(__pyx_k_d), 0, 0, 1, 1},
  {&__pyx_n_s_d1, __pyx_k_d1, sizeof(__pyx_k_d1), 0, 0, 1, 1},
  {&__pyx_n_s_d11, __pyx_k_d11, sizeof(__pyx_k_d11), 0, 0, 1, 1},
  {&__pyx_n_s_d12, __pyx_k_d12, sizeof(__pyx_k_d12), 0, 0, 1, 1},
  {&__pyx_n_s_d2, __pyx_k_d2, sizeof(__pyx_k_d2), 0, 0, 1, 1},
  {&__pyx_n_s_d21, __pyx_k_d21, sizeof(__pyx_k_d21), 0, 0, 1, 1},
  {&__pyx_n_s_d22, __pyx_k_d22, sizeof(__pyx_k_d22), 0, 0, 1, 1},
  {&__pyx_n_s_det, __pyx_k_det, sizeof(__pyx_k_det), 0, 0, 1, 1},
  {&__pyx_n_s_direction, __pyx_k_direction, sizeof(__pyx_k_direction), 0, 0, 1, 1},
  {&__pyx_n_s_distance, __pyx_k_distance, sizeof(__pyx_k_distance), 0, 0, 1, 1},
  {&__pyx_n_s_distance_from_box_to_box, __pyx_k_distance_from_box_to_box, sizeof(__pyx_k_distance_from_box_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_distance_from_line_to_box, __pyx_k_distance_from_line_to_box, sizeof(__pyx_k_distance_from_line_to_box), 0, 0, 1, 1},
  {&__pyx_n_s_distance_from_line_to_line, __pyx_k_distance_from_line_to_line, sizeof(__pyx_k_distance_from_line_to_line), 0, 0, 1, 1},
  {&__pyx_n_s_distance_from_point_to_line, __pyx_k_distance_from_point_to_line, sizeof(__pyx_k_distance_from_point_to_line), 0, 0, 1, 1},
  {&__pyx_n_s_distance_from_point_to_point, __pyx_k_distance_from_point_to_point, sizeof(__pyx_k_distance_from_point_to_point), 0, 0, 1, 1},
  {&__pyx_n_s_distance_threshold, __pyx_k_distance_threshold, sizeof(__pyx_k_distance_threshold), 0, 0, 1, 1},
  {&__pyx_n_s_div, __pyx_k_div, sizeof(__pyx_k_div), 0, 0, 1, 1},
  {&__pyx_n_s_divider_horizontal_lines, __pyx_k_divider_horizontal_lines, sizeof(__pyx_k_divider_horizontal_lines), 0, 0, 1, 1},
  {&__pyx_n_s_divider_line_color, __pyx_k_divider_line_color, sizeof(__pyx_k_divider_line_color), 0, 0, 1, 1},
  {&__pyx_n_s_divider_vertical_lines, __pyx_k_divider_vertical_lines, sizeof(__pyx_k_divider_vertical_lines), 0, 0, 1, 1},
  {&__pyx_n_s_doc, __pyx_k_doc, sizeof(__pyx_k_doc), 0, 0, 1, 1},
  {&__pyx_n_s_dot_rect, __pyx_k_dot_rect, sizeof(__pyx_k_dot_rect), 0, 0, 1, 1},
  {&__pyx_n_s_dot_rects, __pyx_k_dot_rects, sizeof(__pyx_k_dot_rects), 0, 0, 1, 1},
  {&__pyx_n_s_draw_box, __pyx_k_draw_box, sizeof(__pyx_k_draw_box), 0, 0, 1, 1},
  {&__pyx_n_s_draw_boxes, __pyx_k_draw_boxes, sizeof(__pyx_k_draw_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_draw_content_block, __pyx_k_draw_content_block, sizeof(__pyx_k_draw_content_block), 0, 0, 1, 1},
  {&__pyx_n_s_draw_content_blocks, __pyx_k_draw_content_blocks, sizeof(__pyx_k_draw_content_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_draw_group, __pyx_k_draw_group, sizeof(__pyx_k_draw_group), 0, 0, 1, 1},
  {&__pyx_n_s_draw_groups, __pyx_k_draw_groups, sizeof(__pyx_k_draw_groups), 0, 0, 1, 1},
  {&__pyx_n_s_draw_line, __pyx_k_draw_line, sizeof(__pyx_k_draw_line), 0, 0, 1, 1},
  {&__pyx_n_s_draw_lines, __pyx_k_draw_lines, sizeof(__pyx_k_draw_lines), 0, 0, 1, 1},
  {&__pyx_n_s_draw_table, __pyx_k_draw_table, sizeof(__pyx_k_draw_table), 0, 0, 1, 1},
  {&__pyx_n_s_draw_virtual_lines, __pyx_k_draw_virtual_lines, sizeof(__pyx_k_draw_virtual_lines), 0, 0, 1, 1},
  {&__pyx_n_s_dst_box, __pyx_k_dst_box, sizeof(__pyx_k_dst_box), 0, 0, 1, 1},
  {&__pyx_n_s_dst_rect, __pyx_k_dst_rect, sizeof(__pyx_k_dst_rect), 0, 0, 1, 1},
  {&__pyx_n_s_dst_text, __pyx_k_dst_text, sizeof(__pyx_k_dst_text), 0, 0, 1, 1},
  {&__pyx_n_s_duplicate_line_rects, __pyx_k_duplicate_line_rects, sizeof(__pyx_k_duplicate_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_dx, __pyx_k_dx, sizeof(__pyx_k_dx), 0, 0, 1, 1},
  {&__pyx_n_s_dy, __pyx_k_dy, sizeof(__pyx_k_dy), 0, 0, 1, 1},
  {&__pyx_n_s_end, __pyx_k_end, sizeof(__pyx_k_end), 0, 0, 1, 1},
  {&__pyx_n_s_end_line, __pyx_k_end_line, sizeof(__pyx_k_end_line), 0, 0, 1, 1},
  {&__pyx_n_s_end_point, __pyx_k_end_point, sizeof(__pyx_k_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_end_x, __pyx_k_end_x, sizeof(__pyx_k_end_x), 0, 0, 1, 1},
  {&__pyx_n_s_end_y, __pyx_k_end_y, sizeof(__pyx_k_end_y), 0, 0, 1, 1},
  {&__pyx_n_s_enumerate, __pyx_k_enumerate, sizeof(__pyx_k_enumerate), 0, 0, 1, 1},
  {&__pyx_n_s_expand, __pyx_k_expand, sizeof(__pyx_k_expand), 0, 0, 1, 1},
  {&__pyx_n_s_expand_height_rect, __pyx_k_expand_height_rect, sizeof(__pyx_k_expand_height_rect), 0, 0, 1, 1},
  {&__pyx_n_s_expand_image, __pyx_k_expand_image, sizeof(__pyx_k_expand_image), 0, 0, 1, 1},
  {&__pyx_n_s_expand_rect, __pyx_k_expand_rect, sizeof(__pyx_k_expand_rect), 0, 0, 1, 1},
  {&__pyx_n_s_expand_size, __pyx_k_expand_size, sizeof(__pyx_k_expand_size), 0, 0, 1, 1},
  {&__pyx_n_s_expand_width_rect, __pyx_k_expand_width_rect, sizeof(__pyx_k_expand_width_rect), 0, 0, 1, 1},
  {&__pyx_n_s_expand_with_horizontal_line, __pyx_k_expand_with_horizontal_line, sizeof(__pyx_k_expand_with_horizontal_line), 0, 0, 1, 1},
  {&__pyx_n_s_expand_with_vertical_line, __pyx_k_expand_with_vertical_line, sizeof(__pyx_k_expand_with_vertical_line), 0, 0, 1, 1},
  {&__pyx_n_s_expanded_image, __pyx_k_expanded_image, sizeof(__pyx_k_expanded_image), 0, 0, 1, 1},
  {&__pyx_n_s_extend_boxes, __pyx_k_extend_boxes, sizeof(__pyx_k_extend_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_extend_line_at_corner, __pyx_k_extend_line_at_corner, sizeof(__pyx_k_extend_line_at_corner), 0, 0, 1, 1},
  {&__pyx_n_s_extend_lines, __pyx_k_extend_lines, sizeof(__pyx_k_extend_lines), 0, 0, 1, 1},
  {&__pyx_n_s_external_rects, __pyx_k_external_rects, sizeof(__pyx_k_external_rects), 0, 0, 1, 1},
  {&__pyx_n_s_extract_line_image, __pyx_k_extract_line_image, sizeof(__pyx_k_extract_line_image), 0, 0, 1, 1},
  {&__pyx_n_s_extract_line_rect, __pyx_k_extract_line_rect, sizeof(__pyx_k_extract_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_f_between, __pyx_k_f_between, sizeof(__pyx_k_f_between), 0, 0, 1, 1},
  {&__pyx_n_s_f_under, __pyx_k_f_under, sizeof(__pyx_k_f_under), 0, 0, 1, 1},
  {&__pyx_n_s_fill_box, __pyx_k_fill_box, sizeof(__pyx_k_fill_box), 0, 0, 1, 1},
  {&__pyx_n_s_fill_boxes, __pyx_k_fill_boxes, sizeof(__pyx_k_fill_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_fill_rects, __pyx_k_fill_rects, sizeof(__pyx_k_fill_rects), 0, 0, 1, 1},
  {&__pyx_n_s_findContours, __pyx_k_findContours, sizeof(__pyx_k_findContours), 0, 0, 1, 1},
  {&__pyx_n_s_float32, __pyx_k_float32, sizeof(__pyx_k_float32), 0, 0, 1, 1},
  {&__pyx_n_s_front_line, __pyx_k_front_line, sizeof(__pyx_k_front_line), 0, 0, 1, 1},
  {&__pyx_n_s_fullmatch, __pyx_k_fullmatch, sizeof(__pyx_k_fullmatch), 0, 0, 1, 1},
  {&__pyx_n_s_get_area_from_binary_image, __pyx_k_get_area_from_binary_image, sizeof(__pyx_k_get_area_from_binary_image), 0, 0, 1, 1},
  {&__pyx_n_s_get_columns_from_content_boxes, __pyx_k_get_columns_from_content_boxes, sizeof(__pyx_k_get_columns_from_content_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_get_rect_contains_blocks, __pyx_k_get_rect_contains_blocks, sizeof(__pyx_k_get_rect_contains_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_get_rect_contains_rects, __pyx_k_get_rect_contains_rects, sizeof(__pyx_k_get_rect_contains_rects), 0, 0, 1, 1},
  {&__pyx_n_s_get_rows_from_content_boxes, __pyx_k_get_rows_from_content_boxes, sizeof(__pyx_k_get_rows_from_content_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_group, __pyx_k_group, sizeof(__pyx_k_group), 0, 0, 1, 1},
  {&__pyx_n_s_groups, __pyx_k_groups, sizeof(__pyx_k_groups), 0, 0, 1, 1},
  {&__pyx_n_s_h, __pyx_k_h, sizeof(__pyx_k_h), 0, 0, 1, 1},
  {&__pyx_n_s_h_end_point, __pyx_k_h_end_point, sizeof(__pyx_k_h_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_h_image, __pyx_k_h_image, sizeof(__pyx_k_h_image), 0, 0, 1, 1},
  {&__pyx_n_s_h_line, __pyx_k_h_line, sizeof(__pyx_k_h_line), 0, 0, 1, 1},
  {&__pyx_n_s_h_line_inside_box, __pyx_k_h_line_inside_box, sizeof(__pyx_k_h_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_h_line_overlap_rect, __pyx_k_h_line_overlap_rect, sizeof(__pyx_k_h_line_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_h_line_pairs, __pyx_k_h_line_pairs, sizeof(__pyx_k_h_line_pairs), 0, 0, 1, 1},
  {&__pyx_n_s_h_line_temp, __pyx_k_h_line_temp, sizeof(__pyx_k_h_line_temp), 0, 0, 1, 1},
  {&__pyx_n_s_h_lines, __pyx_k_h_lines, sizeof(__pyx_k_h_lines), 0, 0, 1, 1},
  {&__pyx_n_s_h_lines_temp, __pyx_k_h_lines_temp, sizeof(__pyx_k_h_lines_temp), 0, 0, 1, 1},
  {&__pyx_n_s_h_single_lines, __pyx_k_h_single_lines, sizeof(__pyx_k_h_single_lines), 0, 0, 1, 1},
  {&__pyx_n_s_h_start_point, __pyx_k_h_start_point, sizeof(__pyx_k_h_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_has_box_between_content_blocks, __pyx_k_has_box_between_content_blocks, sizeof(__pyx_k_has_box_between_content_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_header_regex, __pyx_k_header_regex, sizeof(__pyx_k_header_regex), 0, 0, 1, 1},
  {&__pyx_n_s_height, __pyx_k_height, sizeof(__pyx_k_height), 0, 0, 1, 1},
  {&__pyx_n_s_height_line, __pyx_k_height_line, sizeof(__pyx_k_height_line), 0, 0, 1, 1},
  {&__pyx_n_s_height_ratio, __pyx_k_height_ratio, sizeof(__pyx_k_height_ratio), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal, __pyx_k_horizontal, sizeof(__pyx_k_horizontal), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_bottom_neighbor_line, __pyx_k_horizontal_bottom_neighbor_line, sizeof(__pyx_k_horizontal_bottom_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_line_cut_vertical_lin, __pyx_k_horizontal_line_cut_vertical_lin, sizeof(__pyx_k_horizontal_line_cut_vertical_lin), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_lines, __pyx_k_horizontal_lines, sizeof(__pyx_k_horizontal_lines), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_neighbor_line, __pyx_k_horizontal_neighbor_line, sizeof(__pyx_k_horizontal_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_stop_line, __pyx_k_horizontal_stop_line, sizeof(__pyx_k_horizontal_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_horizontal_top_neighbor_line, __pyx_k_horizontal_top_neighbor_line, sizeof(__pyx_k_horizontal_top_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_i, __pyx_k_i, sizeof(__pyx_k_i), 0, 0, 1, 1},
  {&__pyx_n_s_idx, __pyx_k_idx, sizeof(__pyx_k_idx), 0, 0, 1, 1},
  {&__pyx_n_s_ignore_single, __pyx_k_ignore_single, sizeof(__pyx_k_ignore_single), 0, 0, 1, 1},
  {&__pyx_n_s_image, __pyx_k_image, sizeof(__pyx_k_image), 0, 0, 1, 1},
  {&__pyx_n_s_image_shape, __pyx_k_image_shape, sizeof(__pyx_k_image_shape), 0, 0, 1, 1},
  {&__pyx_n_s_image_size, __pyx_k_image_size, sizeof(__pyx_k_image_size), 0, 0, 1, 1},
  {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
  {&__pyx_n_s_insert, __pyx_k_insert, sizeof(__pyx_k_insert), 0, 0, 1, 1},
  {&__pyx_n_s_inside_box, __pyx_k_inside_box, sizeof(__pyx_k_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_inside_lines, __pyx_k_inside_lines, sizeof(__pyx_k_inside_lines), 0, 0, 1, 1},
  {&__pyx_n_s_intersection_point, __pyx_k_intersection_point, sizeof(__pyx_k_intersection_point), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_dot, __pyx_k_invalid_dot, sizeof(__pyx_k_invalid_dot), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_dots, __pyx_k_invalid_dots, sizeof(__pyx_k_invalid_dots), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_horizontal_line, __pyx_k_invalid_horizontal_line, sizeof(__pyx_k_invalid_horizontal_line), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_line, __pyx_k_invalid_line, sizeof(__pyx_k_invalid_line), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_lines, __pyx_k_invalid_lines, sizeof(__pyx_k_invalid_lines), 0, 0, 1, 1},
  {&__pyx_n_s_invalid_vertical_line, __pyx_k_invalid_vertical_line, sizeof(__pyx_k_invalid_vertical_line), 0, 0, 1, 1},
  {&__pyx_n_s_is_box_far_box, __pyx_k_is_box_far_box, sizeof(__pyx_k_is_box_far_box), 0, 0, 1, 1},
  {&__pyx_n_s_is_end_point_on_intersection, __pyx_k_is_end_point_on_intersection, sizeof(__pyx_k_is_end_point_on_intersection), 0, 0, 1, 1},
  {&__pyx_n_s_is_fill_area, __pyx_k_is_fill_area, sizeof(__pyx_k_is_fill_area), 0, 0, 1, 1},
  {&__pyx_n_s_is_intersect, __pyx_k_is_intersect, sizeof(__pyx_k_is_intersect), 0, 0, 1, 1},
  {&__pyx_n_s_is_line_cut_rects, __pyx_k_is_line_cut_rects, sizeof(__pyx_k_is_line_cut_rects), 0, 0, 1, 1},
  {&__pyx_n_s_is_noise, __pyx_k_is_noise, sizeof(__pyx_k_is_noise), 0, 0, 1, 1},
  {&__pyx_n_s_is_point_far_line, __pyx_k_is_point_far_line, sizeof(__pyx_k_is_point_far_line), 0, 0, 1, 1},
  {&__pyx_n_s_is_point_in_line, __pyx_k_is_point_in_line, sizeof(__pyx_k_is_point_in_line), 0, 0, 1, 1},
  {&__pyx_n_s_is_rect_contains_rects, __pyx_k_is_rect_contains_rects, sizeof(__pyx_k_is_rect_contains_rects), 0, 0, 1, 1},
  {&__pyx_n_s_is_rect_divide_content, __pyx_k_is_rect_divide_content, sizeof(__pyx_k_is_rect_divide_content), 0, 0, 1, 1},
  {&__pyx_n_s_is_rect_divide_text_boxes, __pyx_k_is_rect_divide_text_boxes, sizeof(__pyx_k_is_rect_divide_text_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_is_start_point_on_intersection, __pyx_k_is_start_point_on_intersection, sizeof(__pyx_k_is_start_point_on_intersection), 0, 0, 1, 1},
  {&__pyx_n_s_is_text_blocks_header_by_header, __pyx_k_is_text_blocks_header_by_header, sizeof(__pyx_k_is_text_blocks_header_by_header), 0, 0, 1, 1},
  {&__pyx_n_s_itertools, __pyx_k_itertools, sizeof(__pyx_k_itertools), 0, 0, 1, 1},
  {&__pyx_n_s_j, __pyx_k_j, sizeof(__pyx_k_j), 0, 0, 1, 1},
  {&__pyx_n_s_join, __pyx_k_join, sizeof(__pyx_k_join), 0, 0, 1, 1},
  {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
  {&__pyx_n_s_left, __pyx_k_left, sizeof(__pyx_k_left), 0, 0, 1, 1},
  {&__pyx_n_s_left_border, __pyx_k_left_border, sizeof(__pyx_k_left_border), 0, 0, 1, 1},
  {&__pyx_n_s_left_lines, __pyx_k_left_lines, sizeof(__pyx_k_left_lines), 0, 0, 1, 1},
  {&__pyx_n_s_left_point, __pyx_k_left_point, sizeof(__pyx_k_left_point), 0, 0, 1, 1},
  {&__pyx_n_s_left_stop_line, __pyx_k_left_stop_line, sizeof(__pyx_k_left_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_length, __pyx_k_length, sizeof(__pyx_k_length), 0, 0, 1, 1},
  {&__pyx_n_s_line, __pyx_k_line, sizeof(__pyx_k_line), 0, 0, 1, 1},
  {&__pyx_n_s_line1, __pyx_k_line1, sizeof(__pyx_k_line1), 0, 0, 1, 1},
  {&__pyx_n_s_line2, __pyx_k_line2, sizeof(__pyx_k_line2), 0, 0, 1, 1},
  {&__pyx_n_s_line_at_border_image, __pyx_k_line_at_border_image, sizeof(__pyx_k_line_at_border_image), 0, 0, 1, 1},
  {&__pyx_n_s_line_belong_with_box, __pyx_k_line_belong_with_box, sizeof(__pyx_k_line_belong_with_box), 0, 0, 1, 1},
  {&__pyx_n_s_line_between_two_rects, __pyx_k_line_between_two_rects, sizeof(__pyx_k_line_between_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_line_checked, __pyx_k_line_checked, sizeof(__pyx_k_line_checked), 0, 0, 1, 1},
  {&__pyx_n_s_line_color, __pyx_k_line_color, sizeof(__pyx_k_line_color), 0, 0, 1, 1},
  {&__pyx_n_s_line_end_x, __pyx_k_line_end_x, sizeof(__pyx_k_line_end_x), 0, 0, 1, 1},
  {&__pyx_n_s_line_end_y, __pyx_k_line_end_y, sizeof(__pyx_k_line_end_y), 0, 0, 1, 1},
  {&__pyx_n_s_line_inside_box, __pyx_k_line_inside_box, sizeof(__pyx_k_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_line_inside_table_box, __pyx_k_line_inside_table_box, sizeof(__pyx_k_line_inside_table_box), 0, 0, 1, 1},
  {&__pyx_n_s_line_inside_text_block, __pyx_k_line_inside_text_block, sizeof(__pyx_k_line_inside_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_line_intersection, __pyx_k_line_intersection, sizeof(__pyx_k_line_intersection), 0, 0, 1, 1},
  {&__pyx_n_s_line_list, __pyx_k_line_list, sizeof(__pyx_k_line_list), 0, 0, 1, 1},
  {&__pyx_n_s_line_overlap_box_f, __pyx_k_line_overlap_box_f, sizeof(__pyx_k_line_overlap_box_f), 0, 0, 1, 1},
  {&__pyx_n_s_line_overlap_line, __pyx_k_line_overlap_line, sizeof(__pyx_k_line_overlap_line), 0, 0, 1, 1},
  {&__pyx_n_s_line_overlap_rects, __pyx_k_line_overlap_rects, sizeof(__pyx_k_line_overlap_rects), 0, 0, 1, 1},
  {&__pyx_n_s_line_pair, __pyx_k_line_pair, sizeof(__pyx_k_line_pair), 0, 0, 1, 1},
  {&__pyx_n_s_line_pairs, __pyx_k_line_pairs, sizeof(__pyx_k_line_pairs), 0, 0, 1, 1},
  {&__pyx_n_s_line_rect, __pyx_k_line_rect, sizeof(__pyx_k_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_line_rect_padding, __pyx_k_line_rect_padding, sizeof(__pyx_k_line_rect_padding), 0, 0, 1, 1},
  {&__pyx_n_s_line_rects, __pyx_k_line_rects, sizeof(__pyx_k_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_line_split_line, __pyx_k_line_split_line, sizeof(__pyx_k_line_split_line), 0, 0, 1, 1},
  {&__pyx_n_s_line_start_x, __pyx_k_line_start_x, sizeof(__pyx_k_line_start_x), 0, 0, 1, 1},
  {&__pyx_n_s_line_start_y, __pyx_k_line_start_y, sizeof(__pyx_k_line_start_y), 0, 0, 1, 1},
  {&__pyx_n_s_lines, __pyx_k_lines, sizeof(__pyx_k_lines), 0, 0, 1, 1},
  {&__pyx_n_s_lines_inside_box, __pyx_k_lines_inside_box, sizeof(__pyx_k_lines_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_lines_intersect_line, __pyx_k_lines_intersect_line, sizeof(__pyx_k_lines_intersect_line), 0, 0, 1, 1},
  {&__pyx_n_s_lines_over_line, __pyx_k_lines_over_line, sizeof(__pyx_k_lines_over_line), 0, 0, 1, 1},
  {&__pyx_n_s_lines_temp, __pyx_k_lines_temp, sizeof(__pyx_k_lines_temp), 0, 0, 1, 1},
  {&__pyx_n_s_lower_lines, __pyx_k_lower_lines, sizeof(__pyx_k_lower_lines), 0, 0, 1, 1},
  {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
  {&__pyx_n_s_math, __pyx_k_math, sizeof(__pyx_k_math), 0, 0, 1, 1},
  {&__pyx_n_s_max, __pyx_k_max, sizeof(__pyx_k_max), 0, 0, 1, 1},
  {&__pyx_n_s_max_h_rect, __pyx_k_max_h_rect, sizeof(__pyx_k_max_h_rect), 0, 0, 1, 1},
  {&__pyx_n_s_max_sort_f, __pyx_k_max_sort_f, sizeof(__pyx_k_max_sort_f), 0, 0, 1, 1},
  {&__pyx_n_s_max_w_rect, __pyx_k_max_w_rect, sizeof(__pyx_k_max_w_rect), 0, 0, 1, 1},
  {&__pyx_n_s_max_white, __pyx_k_max_white, sizeof(__pyx_k_max_white), 0, 0, 1, 1},
  {&__pyx_n_s_merge_border_lines, __pyx_k_merge_border_lines, sizeof(__pyx_k_merge_border_lines), 0, 0, 1, 1},
  {&__pyx_n_s_merge_chars, __pyx_k_merge_chars, sizeof(__pyx_k_merge_chars), 0, 0, 1, 1},
  {&__pyx_n_s_merge_chars_list, __pyx_k_merge_chars_list, sizeof(__pyx_k_merge_chars_list), 0, 0, 1, 1},
  {&__pyx_n_s_merge_duplicate_lines, __pyx_k_merge_duplicate_lines, sizeof(__pyx_k_merge_duplicate_lines), 0, 0, 1, 1},
  {&__pyx_n_s_merge_lines, __pyx_k_merge_lines, sizeof(__pyx_k_merge_lines), 0, 0, 1, 1},
  {&__pyx_n_s_merge_overlap_boxes, __pyx_k_merge_overlap_boxes, sizeof(__pyx_k_merge_overlap_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_merge_single_chars, __pyx_k_merge_single_chars, sizeof(__pyx_k_merge_single_chars), 0, 0, 1, 1},
  {&__pyx_n_s_merge_two_types_text_blocks, __pyx_k_merge_two_types_text_blocks, sizeof(__pyx_k_merge_two_types_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_metaclass, __pyx_k_metaclass, sizeof(__pyx_k_metaclass), 0, 0, 1, 1},
  {&__pyx_n_s_min, __pyx_k_min, sizeof(__pyx_k_min), 0, 0, 1, 1},
  {&__pyx_n_s_min_distance, __pyx_k_min_distance, sizeof(__pyx_k_min_distance), 0, 0, 1, 1},
  {&__pyx_n_s_min_h_rect, __pyx_k_min_h_rect, sizeof(__pyx_k_min_h_rect), 0, 0, 1, 1},
  {&__pyx_n_s_min_rect, __pyx_k_min_rect, sizeof(__pyx_k_min_rect), 0, 0, 1, 1},
  {&__pyx_n_s_min_w_rect, __pyx_k_min_w_rect, sizeof(__pyx_k_min_w_rect), 0, 0, 1, 1},
  {&__pyx_n_s_module, __pyx_k_module, sizeof(__pyx_k_module), 0, 0, 1, 1},
  {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
  {&__pyx_n_s_neighbor_line, __pyx_k_neighbor_line, sizeof(__pyx_k_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_new_box, __pyx_k_new_box, sizeof(__pyx_k_new_box), 0, 0, 1, 1},
  {&__pyx_n_s_new_text_block, __pyx_k_new_text_block, sizeof(__pyx_k_new_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_new_text_blocks, __pyx_k_new_text_blocks, sizeof(__pyx_k_new_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_noise_blocks, __pyx_k_noise_blocks, sizeof(__pyx_k_noise_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_np, __pyx_k_np, sizeof(__pyx_k_np), 0, 0, 1, 1},
  {&__pyx_n_s_numpy, __pyx_k_numpy, sizeof(__pyx_k_numpy), 0, 0, 1, 1},
  {&__pyx_n_s_object, __pyx_k_object, sizeof(__pyx_k_object), 0, 0, 1, 1},
  {&__pyx_n_s_old_text_block, __pyx_k_old_text_block, sizeof(__pyx_k_old_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_old_text_blocks, __pyx_k_old_text_blocks, sizeof(__pyx_k_old_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_orientation, __pyx_k_orientation, sizeof(__pyx_k_orientation), 0, 0, 1, 1},
  {&__pyx_n_s_orig_end_point, __pyx_k_orig_end_point, sizeof(__pyx_k_orig_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_orig_start_point, __pyx_k_orig_start_point, sizeof(__pyx_k_orig_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_original_end_point, __pyx_k_original_end_point, sizeof(__pyx_k_original_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_original_start_point, __pyx_k_original_start_point, sizeof(__pyx_k_original_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_other_line, __pyx_k_other_line, sizeof(__pyx_k_other_line), 0, 0, 1, 1},
  {&__pyx_n_s_outside_boxes, __pyx_k_outside_boxes, sizeof(__pyx_k_outside_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_outside_rects, __pyx_k_outside_rects, sizeof(__pyx_k_outside_rects), 0, 0, 1, 1},
  {&__pyx_n_s_over_f, __pyx_k_over_f, sizeof(__pyx_k_over_f), 0, 0, 1, 1},
  {&__pyx_n_s_over_lines, __pyx_k_over_lines, sizeof(__pyx_k_over_lines), 0, 0, 1, 1},
  {&__pyx_n_s_overlap_area, __pyx_k_overlap_area, sizeof(__pyx_k_overlap_area), 0, 0, 1, 1},
  {&__pyx_n_s_overlap_percent, __pyx_k_overlap_percent, sizeof(__pyx_k_overlap_percent), 0, 0, 1, 1},
  {&__pyx_n_s_overlap_ratio, __pyx_k_overlap_ratio, sizeof(__pyx_k_overlap_ratio), 0, 0, 1, 1},
  {&__pyx_n_s_pad, __pyx_k_pad, sizeof(__pyx_k_pad), 0, 0, 1, 1},
  {&__pyx_n_s_padding_size, __pyx_k_padding_size, sizeof(__pyx_k_padding_size), 0, 0, 1, 1},
  {&__pyx_n_s_part_area, __pyx_k_part_area, sizeof(__pyx_k_part_area), 0, 0, 1, 1},
  {&__pyx_n_s_percent, __pyx_k_percent, sizeof(__pyx_k_percent), 0, 0, 1, 1},
  {&__pyx_n_s_point, __pyx_k_point, sizeof(__pyx_k_point), 0, 0, 1, 1},
  {&__pyx_n_s_points, __pyx_k_points, sizeof(__pyx_k_points), 0, 0, 1, 1},
  {&__pyx_n_s_pop, __pyx_k_pop, sizeof(__pyx_k_pop), 0, 0, 1, 1},
  {&__pyx_n_s_position, __pyx_k_position, sizeof(__pyx_k_position), 0, 0, 1, 1},
  {&__pyx_n_s_prepare, __pyx_k_prepare, sizeof(__pyx_k_prepare), 0, 0, 1, 1},
  {&__pyx_n_s_putText, __pyx_k_putText, sizeof(__pyx_k_putText), 0, 0, 1, 1},
  {&__pyx_n_s_qualname, __pyx_k_qualname, sizeof(__pyx_k_qualname), 0, 0, 1, 1},
  {&__pyx_n_s_r, __pyx_k_r, sizeof(__pyx_k_r), 0, 0, 1, 1},
  {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
  {&__pyx_n_s_ratio_threshold, __pyx_k_ratio_threshold, sizeof(__pyx_k_ratio_threshold), 0, 0, 1, 1},
  {&__pyx_n_s_re, __pyx_k_re, sizeof(__pyx_k_re), 0, 0, 1, 1},
  {&__pyx_n_s_real_line, __pyx_k_real_line, sizeof(__pyx_k_real_line), 0, 0, 1, 1},
  {&__pyx_n_s_real_text_block, __pyx_k_real_text_block, sizeof(__pyx_k_real_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_rect, __pyx_k_rect, sizeof(__pyx_k_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_between_two_rects, __pyx_k_rect_between_two_rects, sizeof(__pyx_k_rect_between_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_rect_can_be_merged, __pyx_k_rect_can_be_merged, sizeof(__pyx_k_rect_can_be_merged), 0, 0, 1, 1},
  {&__pyx_n_s_rect_end_x, __pyx_k_rect_end_x, sizeof(__pyx_k_rect_end_x), 0, 0, 1, 1},
  {&__pyx_n_s_rect_end_y, __pyx_k_rect_end_y, sizeof(__pyx_k_rect_end_y), 0, 0, 1, 1},
  {&__pyx_n_s_rect_h, __pyx_k_rect_h, sizeof(__pyx_k_rect_h), 0, 0, 1, 1},
  {&__pyx_n_s_rect_horizontal_inside_rect, __pyx_k_rect_horizontal_inside_rect, sizeof(__pyx_k_rect_horizontal_inside_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_horizontal_overlap_rect, __pyx_k_rect_horizontal_overlap_rect, sizeof(__pyx_k_rect_horizontal_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_in_list, __pyx_k_rect_in_list, sizeof(__pyx_k_rect_in_list), 0, 0, 1, 1},
  {&__pyx_n_s_rect_inside_rect, __pyx_k_rect_inside_rect, sizeof(__pyx_k_rect_inside_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_line, __pyx_k_rect_line, sizeof(__pyx_k_rect_line), 0, 0, 1, 1},
  {&__pyx_n_s_rect_list, __pyx_k_rect_list, sizeof(__pyx_k_rect_list), 0, 0, 1, 1},
  {&__pyx_n_s_rect_overlap_rect, __pyx_k_rect_overlap_rect, sizeof(__pyx_k_rect_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_overlap_rect_with_percent, __pyx_k_rect_overlap_rect_with_percent, sizeof(__pyx_k_rect_overlap_rect_with_percent), 0, 0, 1, 1},
  {&__pyx_n_s_rect_overlap_rect_with_width_hei, __pyx_k_rect_overlap_rect_with_width_hei, sizeof(__pyx_k_rect_overlap_rect_with_width_hei), 0, 0, 1, 1},
  {&__pyx_n_s_rect_overlap_two_rects, __pyx_k_rect_overlap_two_rects, sizeof(__pyx_k_rect_overlap_two_rects), 0, 0, 1, 1},
  {&__pyx_n_s_rect_pair, __pyx_k_rect_pair, sizeof(__pyx_k_rect_pair), 0, 0, 1, 1},
  {&__pyx_n_s_rect_start_x, __pyx_k_rect_start_x, sizeof(__pyx_k_rect_start_x), 0, 0, 1, 1},
  {&__pyx_n_s_rect_start_y, __pyx_k_rect_start_y, sizeof(__pyx_k_rect_start_y), 0, 0, 1, 1},
  {&__pyx_n_s_rect_vertical_inside_rect, __pyx_k_rect_vertical_inside_rect, sizeof(__pyx_k_rect_vertical_inside_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_vertical_overlap_rect, __pyx_k_rect_vertical_overlap_rect, sizeof(__pyx_k_rect_vertical_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_rect_w, __pyx_k_rect_w, sizeof(__pyx_k_rect_w), 0, 0, 1, 1},
  {&__pyx_n_s_rectangle, __pyx_k_rectangle, sizeof(__pyx_k_rectangle), 0, 0, 1, 1},
  {&__pyx_n_s_rects, __pyx_k_rects, sizeof(__pyx_k_rects), 0, 0, 1, 1},
  {&__pyx_n_s_rects_under_rect, __pyx_k_rects_under_rect, sizeof(__pyx_k_rects_under_rect), 0, 0, 1, 1},
  {&__pyx_n_s_reduce_line, __pyx_k_reduce_line, sizeof(__pyx_k_reduce_line), 0, 0, 1, 1},
  {&__pyx_n_s_refill_rects, __pyx_k_refill_rects, sizeof(__pyx_k_refill_rects), 0, 0, 1, 1},
  {&__pyx_n_s_regex, __pyx_k_regex, sizeof(__pyx_k_regex), 0, 0, 1, 1},
  {&__pyx_n_s_remove, __pyx_k_remove, sizeof(__pyx_k_remove), 0, 0, 1, 1},
  {&__pyx_n_s_remove_content_block_by_id, __pyx_k_remove_content_block_by_id, sizeof(__pyx_k_remove_content_block_by_id), 0, 0, 1, 1},
  {&__pyx_n_s_remove_dot_lines_noise, __pyx_k_remove_dot_lines_noise, sizeof(__pyx_k_remove_dot_lines_noise), 0, 0, 1, 1},
  {&__pyx_n_s_remove_duplicate_line_rects, __pyx_k_remove_duplicate_line_rects, sizeof(__pyx_k_remove_duplicate_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_remove_invalid_signed, __pyx_k_remove_invalid_signed, sizeof(__pyx_k_remove_invalid_signed), 0, 0, 1, 1},
  {&__pyx_n_s_remove_line_at_border, __pyx_k_remove_line_at_border, sizeof(__pyx_k_remove_line_at_border), 0, 0, 1, 1},
  {&__pyx_n_s_remove_noise_content_blocks, __pyx_k_remove_noise_content_blocks, sizeof(__pyx_k_remove_noise_content_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_remove_noise_lines_rect, __pyx_k_remove_noise_lines_rect, sizeof(__pyx_k_remove_noise_lines_rect), 0, 0, 1, 1},
  {&__pyx_n_s_remove_padding_rect, __pyx_k_remove_padding_rect, sizeof(__pyx_k_remove_padding_rect), 0, 0, 1, 1},
  {&__pyx_n_s_remove_reverse_line_rects, __pyx_k_remove_reverse_line_rects, sizeof(__pyx_k_remove_reverse_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_remove_underline_text, __pyx_k_remove_underline_text, sizeof(__pyx_k_remove_underline_text), 0, 0, 1, 1},
  {&__pyx_n_s_removed_line_rects, __pyx_k_removed_line_rects, sizeof(__pyx_k_removed_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_replace, __pyx_k_replace, sizeof(__pyx_k_replace), 0, 0, 1, 1},
  {&__pyx_n_s_res, __pyx_k_res, sizeof(__pyx_k_res), 0, 0, 1, 1},
  {&__pyx_n_s_reset_connect_at_line_corner, __pyx_k_reset_connect_at_line_corner, sizeof(__pyx_k_reset_connect_at_line_corner), 0, 0, 1, 1},
  {&__pyx_n_s_resize, __pyx_k_resize, sizeof(__pyx_k_resize), 0, 0, 1, 1},
  {&__pyx_n_s_resize_image, __pyx_k_resize_image, sizeof(__pyx_k_resize_image), 0, 0, 1, 1},
  {&__pyx_n_s_ret_blocks, __pyx_k_ret_blocks, sizeof(__pyx_k_ret_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_ret_rects, __pyx_k_ret_rects, sizeof(__pyx_k_ret_rects), 0, 0, 1, 1},
  {&__pyx_n_s_return_lines, __pyx_k_return_lines, sizeof(__pyx_k_return_lines), 0, 0, 1, 1},
  {&__pyx_n_s_return_rects, __pyx_k_return_rects, sizeof(__pyx_k_return_rects), 0, 0, 1, 1},
  {&__pyx_n_s_reverse, __pyx_k_reverse, sizeof(__pyx_k_reverse), 0, 0, 1, 1},
  {&__pyx_n_s_right, __pyx_k_right, sizeof(__pyx_k_right), 0, 0, 1, 1},
  {&__pyx_n_s_right_border, __pyx_k_right_border, sizeof(__pyx_k_right_border), 0, 0, 1, 1},
  {&__pyx_n_s_right_lines, __pyx_k_right_lines, sizeof(__pyx_k_right_lines), 0, 0, 1, 1},
  {&__pyx_n_s_right_point, __pyx_k_right_point, sizeof(__pyx_k_right_point), 0, 0, 1, 1},
  {&__pyx_n_s_right_stop_line, __pyx_k_right_stop_line, sizeof(__pyx_k_right_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_rows, __pyx_k_rows, sizeof(__pyx_k_rows), 0, 0, 1, 1},
  {&__pyx_n_s_same_h_rect, __pyx_k_same_h_rect, sizeof(__pyx_k_same_h_rect), 0, 0, 1, 1},
  {&__pyx_n_s_same_horizontal_sign, __pyx_k_same_horizontal_sign, sizeof(__pyx_k_same_horizontal_sign), 0, 0, 1, 1},
  {&__pyx_n_s_same_line, __pyx_k_same_line, sizeof(__pyx_k_same_line), 0, 0, 1, 1},
  {&__pyx_n_s_same_position, __pyx_k_same_position, sizeof(__pyx_k_same_position), 0, 0, 1, 1},
  {&__pyx_n_s_same_rect, __pyx_k_same_rect, sizeof(__pyx_k_same_rect), 0, 0, 1, 1},
  {&__pyx_n_s_same_v_rect, __pyx_k_same_v_rect, sizeof(__pyx_k_same_v_rect), 0, 0, 1, 1},
  {&__pyx_n_s_search_text_by_box, __pyx_k_search_text_by_box, sizeof(__pyx_k_search_text_by_box), 0, 0, 1, 1},
  {&__pyx_n_s_searched_ids, __pyx_k_searched_ids, sizeof(__pyx_k_searched_ids), 0, 0, 1, 1},
  {&__pyx_n_s_shape, __pyx_k_shape, sizeof(__pyx_k_shape), 0, 0, 1, 1},
  {&__pyx_n_s_shrink_line, __pyx_k_shrink_line, sizeof(__pyx_k_shrink_line), 0, 0, 1, 1},
  {&__pyx_n_s_shrink_size, __pyx_k_shrink_size, sizeof(__pyx_k_shrink_size), 0, 0, 1, 1},
  {&__pyx_n_s_single_lines, __pyx_k_single_lines, sizeof(__pyx_k_single_lines), 0, 0, 1, 1},
  {&__pyx_n_s_single_text_blocks, __pyx_k_single_text_blocks, sizeof(__pyx_k_single_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_size, __pyx_k_size, sizeof(__pyx_k_size), 0, 0, 1, 1},
  {&__pyx_n_s_sort, __pyx_k_sort, sizeof(__pyx_k_sort), 0, 0, 1, 1},
  {&__pyx_n_s_sort_lines, __pyx_k_sort_lines, sizeof(__pyx_k_sort_lines), 0, 0, 1, 1},
  {&__pyx_n_s_sorted, __pyx_k_sorted, sizeof(__pyx_k_sorted), 0, 0, 1, 1},
  {&__pyx_n_s_span_list, __pyx_k_span_list, sizeof(__pyx_k_span_list), 0, 0, 1, 1},
  {&__pyx_n_s_split_line, __pyx_k_split_line, sizeof(__pyx_k_split_line), 0, 0, 1, 1},
  {&__pyx_n_s_split_lines, __pyx_k_split_lines, sizeof(__pyx_k_split_lines), 0, 0, 1, 1},
  {&__pyx_n_s_sqrt, __pyx_k_sqrt, sizeof(__pyx_k_sqrt), 0, 0, 1, 1},
  {&__pyx_n_s_square, __pyx_k_square, sizeof(__pyx_k_square), 0, 0, 1, 1},
  {&__pyx_n_s_src_box, __pyx_k_src_box, sizeof(__pyx_k_src_box), 0, 0, 1, 1},
  {&__pyx_n_s_src_rect, __pyx_k_src_rect, sizeof(__pyx_k_src_rect), 0, 0, 1, 1},
  {&__pyx_n_s_src_text, __pyx_k_src_text, sizeof(__pyx_k_src_text), 0, 0, 1, 1},
  {&__pyx_n_s_start, __pyx_k_start, sizeof(__pyx_k_start), 0, 0, 1, 1},
  {&__pyx_n_s_start_line, __pyx_k_start_line, sizeof(__pyx_k_start_line), 0, 0, 1, 1},
  {&__pyx_n_s_start_point, __pyx_k_start_point, sizeof(__pyx_k_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_start_x, __pyx_k_start_x, sizeof(__pyx_k_start_x), 0, 0, 1, 1},
  {&__pyx_n_s_start_y, __pyx_k_start_y, sizeof(__pyx_k_start_y), 0, 0, 1, 1},
  {&__pyx_n_s_staticmethod, __pyx_k_staticmethod, sizeof(__pyx_k_staticmethod), 0, 0, 1, 1},
  {&__pyx_n_s_stop_point_at_bottom, __pyx_k_stop_point_at_bottom, sizeof(__pyx_k_stop_point_at_bottom), 0, 0, 1, 1},
  {&__pyx_n_s_stop_point_at_left, __pyx_k_stop_point_at_left, sizeof(__pyx_k_stop_point_at_left), 0, 0, 1, 1},
  {&__pyx_n_s_stop_point_at_right, __pyx_k_stop_point_at_right, sizeof(__pyx_k_stop_point_at_right), 0, 0, 1, 1},
  {&__pyx_n_s_stop_point_at_top, __pyx_k_stop_point_at_top, sizeof(__pyx_k_stop_point_at_top), 0, 0, 1, 1},
  {&__pyx_n_s_sum, __pyx_k_sum, sizeof(__pyx_k_sum), 0, 0, 1, 1},
  {&__pyx_n_s_table, __pyx_k_table, sizeof(__pyx_k_table), 0, 0, 1, 1},
  {&__pyx_n_s_table_extraction_debug, __pyx_k_table_extraction_debug, sizeof(__pyx_k_table_extraction_debug), 0, 0, 1, 1},
  {&__pyx_n_s_table_extraction_line, __pyx_k_table_extraction_line, sizeof(__pyx_k_table_extraction_line), 0, 0, 1, 1},
  {&__pyx_kp_s_table_extraction_utils_table_ext, __pyx_k_table_extraction_utils_table_ext, sizeof(__pyx_k_table_extraction_utils_table_ext), 0, 0, 1, 0},
  {&__pyx_n_s_table_extraction_utils_table_ext_2, __pyx_k_table_extraction_utils_table_ext_2, sizeof(__pyx_k_table_extraction_utils_table_ext_2), 0, 0, 1, 1},
  {&__pyx_n_s_table_processing, __pyx_k_table_processing, sizeof(__pyx_k_table_processing), 0, 0, 1, 1},
  {&__pyx_n_s_tail_box, __pyx_k_tail_box, sizeof(__pyx_k_tail_box), 0, 0, 1, 1},
  {&__pyx_n_s_temp_box, __pyx_k_temp_box, sizeof(__pyx_k_temp_box), 0, 0, 1, 1},
  {&__pyx_n_s_temp_line_rect, __pyx_k_temp_line_rect, sizeof(__pyx_k_temp_line_rect), 0, 0, 1, 1},
  {&__pyx_n_s_temp_line_rects, __pyx_k_temp_line_rects, sizeof(__pyx_k_temp_line_rects), 0, 0, 1, 1},
  {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
  {&__pyx_n_s_text, __pyx_k_text, sizeof(__pyx_k_text), 0, 0, 1, 1},
  {&__pyx_n_s_text_block, __pyx_k_text_block, sizeof(__pyx_k_text_block), 0, 0, 1, 1},
  {&__pyx_n_s_text_block_rect, __pyx_k_text_block_rect, sizeof(__pyx_k_text_block_rect), 0, 0, 1, 1},
  {&__pyx_n_s_text_block_rects, __pyx_k_text_block_rects, sizeof(__pyx_k_text_block_rects), 0, 0, 1, 1},
  {&__pyx_n_s_text_blocks, __pyx_k_text_blocks, sizeof(__pyx_k_text_blocks), 0, 0, 1, 1},
  {&__pyx_n_s_text_box, __pyx_k_text_box, sizeof(__pyx_k_text_box), 0, 0, 1, 1},
  {&__pyx_n_s_text_boxes, __pyx_k_text_boxes, sizeof(__pyx_k_text_boxes), 0, 0, 1, 1},
  {&__pyx_n_s_text_list, __pyx_k_text_list, sizeof(__pyx_k_text_list), 0, 0, 1, 1},
  {&__pyx_n_s_text_stats_dict, __pyx_k_text_stats_dict, sizeof(__pyx_k_text_stats_dict), 0, 0, 1, 1},
  {&__pyx_n_s_thickness, __pyx_k_thickness, sizeof(__pyx_k_thickness), 0, 0, 1, 1},
  {&__pyx_n_s_thresh, __pyx_k_thresh, sizeof(__pyx_k_thresh), 0, 0, 1, 1},
  {&__pyx_n_s_threshold, __pyx_k_threshold, sizeof(__pyx_k_threshold), 0, 0, 1, 1},
  {&__pyx_n_s_threshold_deviation, __pyx_k_threshold_deviation, sizeof(__pyx_k_threshold_deviation), 0, 0, 1, 1},
  {&__pyx_n_s_threshold_distance, __pyx_k_threshold_distance, sizeof(__pyx_k_threshold_distance), 0, 0, 1, 1},
  {&__pyx_n_s_threshold_h, __pyx_k_threshold_h, sizeof(__pyx_k_threshold_h), 0, 0, 1, 1},
  {&__pyx_n_s_threshold_v, __pyx_k_threshold_v, sizeof(__pyx_k_threshold_v), 0, 0, 1, 1},
  {&__pyx_n_s_times, __pyx_k_times, sizeof(__pyx_k_times), 0, 0, 1, 1},
  {&__pyx_n_s_tmp_area, __pyx_k_tmp_area, sizeof(__pyx_k_tmp_area), 0, 0, 1, 1},
  {&__pyx_n_s_tmp_col, __pyx_k_tmp_col, sizeof(__pyx_k_tmp_col), 0, 0, 1, 1},
  {&__pyx_n_s_tmp_row, __pyx_k_tmp_row, sizeof(__pyx_k_tmp_row), 0, 0, 1, 1},
  {&__pyx_n_s_top, __pyx_k_top, sizeof(__pyx_k_top), 0, 0, 1, 1},
  {&__pyx_n_s_top_border, __pyx_k_top_border, sizeof(__pyx_k_top_border), 0, 0, 1, 1},
  {&__pyx_n_s_top_lines, __pyx_k_top_lines, sizeof(__pyx_k_top_lines), 0, 0, 1, 1},
  {&__pyx_n_s_top_point, __pyx_k_top_point, sizeof(__pyx_k_top_point), 0, 0, 1, 1},
  {&__pyx_n_s_top_stop_line, __pyx_k_top_stop_line, sizeof(__pyx_k_top_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_type, __pyx_k_type, sizeof(__pyx_k_type), 0, 0, 1, 1},
  {&__pyx_n_s_uint8, __pyx_k_uint8, sizeof(__pyx_k_uint8), 0, 0, 1, 1},
  {&__pyx_n_s_underline, __pyx_k_underline, sizeof(__pyx_k_underline), 0, 0, 1, 1},
  {&__pyx_n_s_underlines, __pyx_k_underlines, sizeof(__pyx_k_underlines), 0, 0, 1, 1},
  {&__pyx_n_s_upper_lines, __pyx_k_upper_lines, sizeof(__pyx_k_upper_lines), 0, 0, 1, 1},
  {&__pyx_n_s_v, __pyx_k_v, sizeof(__pyx_k_v), 0, 0, 1, 1},
  {&__pyx_n_s_v_end_point, __pyx_k_v_end_point, sizeof(__pyx_k_v_end_point), 0, 0, 1, 1},
  {&__pyx_n_s_v_line, __pyx_k_v_line, sizeof(__pyx_k_v_line), 0, 0, 1, 1},
  {&__pyx_n_s_v_line_inside_box, __pyx_k_v_line_inside_box, sizeof(__pyx_k_v_line_inside_box), 0, 0, 1, 1},
  {&__pyx_n_s_v_line_overlap_rect, __pyx_k_v_line_overlap_rect, sizeof(__pyx_k_v_line_overlap_rect), 0, 0, 1, 1},
  {&__pyx_n_s_v_line_pairs, __pyx_k_v_line_pairs, sizeof(__pyx_k_v_line_pairs), 0, 0, 1, 1},
  {&__pyx_n_s_v_lines, __pyx_k_v_lines, sizeof(__pyx_k_v_lines), 0, 0, 1, 1},
  {&__pyx_n_s_v_single_lines, __pyx_k_v_single_lines, sizeof(__pyx_k_v_single_lines), 0, 0, 1, 1},
  {&__pyx_n_s_v_start_point, __pyx_k_v_start_point, sizeof(__pyx_k_v_start_point), 0, 0, 1, 1},
  {&__pyx_n_s_vertical, __pyx_k_vertical, sizeof(__pyx_k_vertical), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_left_neighbor_line, __pyx_k_vertical_left_neighbor_line, sizeof(__pyx_k_vertical_left_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_line_cut_horiontal_line, __pyx_k_vertical_line_cut_horiontal_line, sizeof(__pyx_k_vertical_line_cut_horiontal_line), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_lines, __pyx_k_vertical_lines, sizeof(__pyx_k_vertical_lines), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_neighbor_line, __pyx_k_vertical_neighbor_line, sizeof(__pyx_k_vertical_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_right_neighbor_line, __pyx_k_vertical_right_neighbor_line, sizeof(__pyx_k_vertical_right_neighbor_line), 0, 0, 1, 1},
  {&__pyx_n_s_vertical_stop_line, __pyx_k_vertical_stop_line, sizeof(__pyx_k_vertical_stop_line), 0, 0, 1, 1},
  {&__pyx_n_s_virtual_h_line, __pyx_k_virtual_h_line, sizeof(__pyx_k_virtual_h_line), 0, 0, 1, 1},
  {&__pyx_n_s_virtual_line, __pyx_k_virtual_line, sizeof(__pyx_k_virtual_line), 0, 0, 1, 1},
  {&__pyx_n_s_virtual_v_line, __pyx_k_virtual_v_line, sizeof(__pyx_k_virtual_v_line), 0, 0, 1, 1},
  {&__pyx_n_s_w, __pyx_k_w, sizeof(__pyx_k_w), 0, 0, 1, 1},
  {&__pyx_n_s_w_image, __pyx_k_w_image, sizeof(__pyx_k_w_image), 0, 0, 1, 1},
  {&__pyx_n_s_white_percentage, __pyx_k_white_percentage, sizeof(__pyx_k_white_percentage), 0, 0, 1, 1},
  {&__pyx_n_s_white_pixels, __pyx_k_white_pixels, sizeof(__pyx_k_white_pixels), 0, 0, 1, 1},
  {&__pyx_n_s_width, __pyx_k_width, sizeof(__pyx_k_width), 0, 0, 1, 1},
  {&__pyx_n_s_width_line, __pyx_k_width_line, sizeof(__pyx_k_width_line), 0, 0, 1, 1},
  {&__pyx_n_s_width_ratio, __pyx_k_width_ratio, sizeof(__pyx_k_width_ratio), 0, 0, 1, 1},
  {&__pyx_n_s_x, __pyx_k_x, sizeof(__pyx_k_x), 0, 0, 1, 1},
  {&__pyx_n_s_x0, __pyx_k_x0, sizeof(__pyx_k_x0), 0, 0, 1, 1},
  {&__pyx_n_s_x1, __pyx_k_x1, sizeof(__pyx_k_x1), 0, 0, 1, 1},
  {&__pyx_n_s_x2, __pyx_k_x2, sizeof(__pyx_k_x2), 0, 0, 1, 1},
  {&__pyx_n_s_x_position, __pyx_k_x_position, sizeof(__pyx_k_x_position), 0, 0, 1, 1},
  {&__pyx_n_s_xdiff, __pyx_k_xdiff, sizeof(__pyx_k_xdiff), 0, 0, 1, 1},
  {&__pyx_n_s_y, __pyx_k_y, sizeof(__pyx_k_y), 0, 0, 1, 1},
  {&__pyx_n_s_y0, __pyx_k_y0, sizeof(__pyx_k_y0), 0, 0, 1, 1},
  {&__pyx_n_s_y1, __pyx_k_y1, sizeof(__pyx_k_y1), 0, 0, 1, 1},
  {&__pyx_n_s_y2, __pyx_k_y2, sizeof(__pyx_k_y2), 0, 0, 1, 1},
  {&__pyx_n_s_y_position, __pyx_k_y_position, sizeof(__pyx_k_y_position), 0, 0, 1, 1},
  {&__pyx_n_s_ydiff, __pyx_k_ydiff, sizeof(__pyx_k_ydiff), 0, 0, 1, 1},
  {&__pyx_n_s_zeros, __pyx_k_zeros, sizeof(__pyx_k_zeros), 0, 0, 1, 1},
  {0, 0, 0, 0, 0, 0, 0}
};
static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
  __pyx_builtin_object = __Pyx_GetBuiltinName(__pyx_n_s_object); if (!__pyx_builtin_object) __PYX_ERR(0, 9, __pyx_L1_error)
  __pyx_builtin_staticmethod = __Pyx_GetBuiltinName(__pyx_n_s_staticmethod); if (!__pyx_builtin_staticmethod) __PYX_ERR(0, 11, __pyx_L1_error)
  __pyx_builtin_enumerate = __Pyx_GetBuiltinName(__pyx_n_s_enumerate); if (!__pyx_builtin_enumerate) __PYX_ERR(0, 227, __pyx_L1_error)
  __pyx_builtin_sorted = __Pyx_GetBuiltinName(__pyx_n_s_sorted); if (!__pyx_builtin_sorted) __PYX_ERR(0, 247, __pyx_L1_error)
  __pyx_builtin_max = __Pyx_GetBuiltinName(__pyx_n_s_max); if (!__pyx_builtin_max) __PYX_ERR(0, 1218, __pyx_L1_error)
  __pyx_builtin_min = __Pyx_GetBuiltinName(__pyx_n_s_min); if (!__pyx_builtin_min) __PYX_ERR(0, 1219, __pyx_L1_error)
  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 2114, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);

  /* "table_extraction/utils_table_extraction.pyx":18
 *         """
 *         THRESH_SIZE = 115
 *         w, h = rect[2:]             # <<<<<<<<<<<<<<
 *         is_noise = True if w * h < THRESH_SIZE else False
 *         return is_noise
 */
  __pyx_slice_ = PySlice_New(__pyx_int_2, Py_None, Py_None); if (unlikely(!__pyx_slice_)) __PYX_ERR(0, 18, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_slice_);
  __Pyx_GIVEREF(__pyx_slice_);

  /* "table_extraction/utils_table_extraction.pyx":141
 *         ydiff = (line1[0][1] - line1[1][1], line2[0][1] - line2[1][1])  # Typo was here
 * 
 *         def det(a, b):             # <<<<<<<<<<<<<<
 *             return a[0] * b[1] - a[1] * b[0]
 * 
 */
  __pyx_tuple__2 = PyTuple_Pack(2, __pyx_n_s_a, __pyx_n_s_b); if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 141, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__2);
  __Pyx_GIVEREF(__pyx_tuple__2);
  __pyx_codeobj__3 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__2, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_det, 141, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__3)) __PYX_ERR(0, 141, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":146
 *         div = det(xdiff, ydiff)
 *         if div == 0:
 *             return None, None #14560             # <<<<<<<<<<<<<<
 *             # raise Exception('lines do not intersect')
 * 
 */
  __pyx_tuple__4 = PyTuple_Pack(2, Py_None, Py_None); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 146, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__4);
  __Pyx_GIVEREF(__pyx_tuple__4);

  /* "table_extraction/utils_table_extraction.pyx":1180
 *         """
 *         # padding rect. it's depend on
 *         def expand_with_horizontal_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check horizontal line
 */
  __pyx_tuple__5 = PyTuple_Pack(2, __pyx_n_s_rect, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 1180, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__5);
  __Pyx_GIVEREF(__pyx_tuple__5);
  __pyx_codeobj__6 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__5, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_with_horizontal_line, 1180, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__6)) __PYX_ERR(0, 1180, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1186
 *             return rect[0] - expand / 2, rect[1] - expand / 2, rect[2] + expand, rect[3] + expand
 * 
 *         def expand_with_vertical_line(rect, expand):             # <<<<<<<<<<<<<<
 *             """
 *             :return: add more padding for text block to check vertical line
 */
  __pyx_tuple__7 = PyTuple_Pack(2, __pyx_n_s_rect, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 1186, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__7);
  __Pyx_GIVEREF(__pyx_tuple__7);
  __pyx_codeobj__8 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__7, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_with_vertical_line, 1186, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__8)) __PYX_ERR(0, 1186, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1446
 * 
 *         # Draw all rects
 *         Utils.fill_boxes(blank_image, rects, (255, 255, 255))             # <<<<<<<<<<<<<<
 * 
 *         # Fill all external rects
 */
  __pyx_tuple__9 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_255, __pyx_int_255); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 1446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__9);
  __Pyx_GIVEREF(__pyx_tuple__9);

  /* "table_extraction/utils_table_extraction.pyx":1457
 *         """Get outside rects
 *         """
 *         def max_sort_f(rect):             # <<<<<<<<<<<<<<
 *             return rect[2]*rect[3]
 * 
 */
  __pyx_tuple__10 = PyTuple_Pack(1, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 1457, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__10);
  __Pyx_GIVEREF(__pyx_tuple__10);
  __pyx_codeobj__11 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__10, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_max_sort_f, 1457, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__11)) __PYX_ERR(0, 1457, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1496
 * 
 *     @staticmethod
 *     def fill_rects(image, color=(255, 255, 255)):             # <<<<<<<<<<<<<<
 *         """Fill all rects in the input image with the color
 *         """
 */
  __pyx_tuple__9 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_255, __pyx_int_255); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 1496, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__9);
  __Pyx_GIVEREF(__pyx_tuple__9);

  /* "table_extraction/utils_table_extraction.pyx":1644
 *         return False
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1652
 * 
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1652, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1658
 * 
 *     @staticmethod
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1658, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1668
 * 
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1668, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1674
 * 
 *     @staticmethod
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1674, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1683
 * 
 *     @staticmethod
 *     def fill_box(image, box, color=(255, 0, 255)):             # <<<<<<<<<<<<<<
 *         '''
 *         fill bounding box
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1683, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1692
 * 
 *     @staticmethod
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1692, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1701
 * 
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 */
  __pyx_tuple__13 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 1701, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__13);
  __Pyx_GIVEREF(__pyx_tuple__13);

  /* "table_extraction/utils_table_extraction.pyx":1707
 * 
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1707, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1712
 * 
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 */
  __pyx_tuple__12 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 1712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "table_extraction/utils_table_extraction.pyx":1718
 * 
 *     @staticmethod
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):             # <<<<<<<<<<<<<<
 * 
 *         if table.left_border is not None:
 */
  __pyx_tuple__13 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_0, __pyx_int_255); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__13);
  __Pyx_GIVEREF(__pyx_tuple__13);
  __pyx_tuple__14 = PyTuple_Pack(3, __pyx_int_0, __pyx_int_255, __pyx_int_0); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__14);
  __Pyx_GIVEREF(__pyx_tuple__14);
  __pyx_tuple__15 = PyTuple_Pack(3, __pyx_int_255, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__15);
  __Pyx_GIVEREF(__pyx_tuple__15);

  /* "table_extraction/utils_table_extraction.pyx":2025
 *         """
 * 
 *         def align_center(block_text, line, threshold_deviation):             # <<<<<<<<<<<<<<
 *             """
 *             :param block_text: bounding rectangle of the block text
 */
  __pyx_tuple__16 = PyTuple_Pack(5, __pyx_n_s_block_text, __pyx_n_s_line, __pyx_n_s_threshold_deviation, __pyx_n_s_center_text, __pyx_n_s_center_line); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 2025, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__16);
  __Pyx_GIVEREF(__pyx_tuple__16);
  __pyx_codeobj__17 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__16, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_align_center, 2025, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__17)) __PYX_ERR(0, 2025, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2083
 *         """
 * 
 *         def same_horizontal_sign(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *             return abs(a_line.start_point[1] - b_line.start_point[1]) < threshold and abs(Utils.width_line(a_line) - Utils.width_line(b_line)) < threshold
 * 
 */
  __pyx_tuple__18 = PyTuple_Pack(3, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 2083, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__18);
  __Pyx_GIVEREF(__pyx_tuple__18);
  __pyx_codeobj__19 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__18, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_horizontal_sign, 2083, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__19)) __PYX_ERR(0, 2083, __pyx_L1_error)
  __pyx_tuple__20 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 2083, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__20);
  __Pyx_GIVEREF(__pyx_tuple__20);

  /* "table_extraction/utils_table_extraction.pyx":2326
 *         text_list = [Utils.search_text_by_box(crnn_chars, block) for block in blocks]
 *         text_list = Utils.merge_single_chars(text_list)
 *         text_list = [text.replace(' ', '') for text in text_list]             # <<<<<<<<<<<<<<
 *         candidate_header_count = 0
 *         span_list    = []
 */
  __pyx_tuple__23 = PyTuple_Pack(2, __pyx_kp_s__22, __pyx_kp_s__21); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(0, 2326, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__23);
  __Pyx_GIVEREF(__pyx_tuple__23);

  /* "table_extraction/utils_table_extraction.pyx":9
 * from table_extraction.debug import Debug
 * 
 * class Utils(object):             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_tuple__24 = PyTuple_Pack(1, __pyx_builtin_object); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 9, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__24);
  __Pyx_GIVEREF(__pyx_tuple__24);

  /* "table_extraction/utils_table_extraction.pyx":12
 * 
 *     @staticmethod
 *     def is_noise(rect):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect:
 */
  __pyx_tuple__25 = PyTuple_Pack(5, __pyx_n_s_rect, __pyx_n_s_THRESH_SIZE, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_is_noise); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__25);
  __Pyx_GIVEREF(__pyx_tuple__25);
  __pyx_codeobj__26 = (PyObject*)__Pyx_PyCode_New(1, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__25, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_noise, 12, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__26)) __PYX_ERR(0, 12, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":23
 * 
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):             # <<<<<<<<<<<<<<
 *         if image.shape[0] > image.shape[1]:
 *             size = (width, height)
 */
  __pyx_tuple__27 = PyTuple_Pack(4, __pyx_n_s_image, __pyx_n_s_width, __pyx_n_s_height, __pyx_n_s_size); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 23, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__27);
  __Pyx_GIVEREF(__pyx_tuple__27);
  __pyx_codeobj__28 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__27, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_resize_image, 23, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__28)) __PYX_ERR(0, 23, __pyx_L1_error)
  __pyx_tuple__29 = PyTuple_Pack(2, ((PyObject *)__pyx_int_1936), ((PyObject *)__pyx_int_2730)); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 23, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__29);
  __Pyx_GIVEREF(__pyx_tuple__29);

  /* "table_extraction/utils_table_extraction.pyx":31
 * 
 *     @staticmethod
 *     def refill_rects(image):             # <<<<<<<<<<<<<<
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 */
  __pyx_tuple__30 = PyTuple_Pack(5, __pyx_n_s_image, __pyx_n_s_contours, __pyx_n_s_rects, __pyx_n_s_c, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(0, 31, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__30);
  __Pyx_GIVEREF(__pyx_tuple__30);
  __pyx_codeobj__31 = (PyObject*)__Pyx_PyCode_New(1, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__30, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_refill_rects, 31, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__31)) __PYX_ERR(0, 31, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":37
 * 
 *     @staticmethod
 *     def shrink_line(h_lines, v_lines, threshold=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: those horizontal lines in the table
 */
  __pyx_tuple__32 = PyTuple_Pack(7, __pyx_n_s_h_lines, __pyx_n_s_v_lines, __pyx_n_s_threshold, __pyx_n_s_v_line, __pyx_n_s_h_line, __pyx_n_s_intersection_point, __pyx_n_s_line); if (unlikely(!__pyx_tuple__32)) __PYX_ERR(0, 37, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__32);
  __Pyx_GIVEREF(__pyx_tuple__32);
  __pyx_codeobj__33 = (PyObject*)__Pyx_PyCode_New(3, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__32, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_shrink_line, 37, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__33)) __PYX_ERR(0, 37, __pyx_L1_error)
  __pyx_tuple__34 = PyTuple_Pack(1, ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__34)) __PYX_ERR(0, 37, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__34);
  __Pyx_GIVEREF(__pyx_tuple__34);

  /* "table_extraction/utils_table_extraction.pyx":90
 * 
 *     @staticmethod
 *     def reduce_line(h_lines, v_lines, threshold=15):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: all of the horizontal lines
 */
  __pyx_tuple__35 = PyTuple_Pack(7, __pyx_n_s_h_lines, __pyx_n_s_v_lines, __pyx_n_s_threshold, __pyx_n_s_v_line, __pyx_n_s_h_line, __pyx_n_s_intersection_point, __pyx_n_s_line); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 90, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__35);
  __Pyx_GIVEREF(__pyx_tuple__35);
  __pyx_codeobj__36 = (PyObject*)__Pyx_PyCode_New(3, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__35, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_reduce_line, 90, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__36)) __PYX_ERR(0, 90, __pyx_L1_error)
  __pyx_tuple__37 = PyTuple_Pack(1, ((PyObject *)__pyx_int_15)); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 90, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__37);
  __Pyx_GIVEREF(__pyx_tuple__37);

  /* "table_extraction/utils_table_extraction.pyx":125
 * 
 *     @staticmethod
 *     def is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point
 */
  __pyx_tuple__38 = PyTuple_Pack(6, __pyx_n_s_h_line, __pyx_n_s_v_line, __pyx_n_s_h_start_point, __pyx_n_s_h_end_point, __pyx_n_s_v_start_point, __pyx_n_s_v_end_point); if (unlikely(!__pyx_tuple__38)) __PYX_ERR(0, 125, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__38);
  __Pyx_GIVEREF(__pyx_tuple__38);
  __pyx_codeobj__39 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__38, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_intersect, 125, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__39)) __PYX_ERR(0, 125, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":134
 * 
 *     @staticmethod
 *     def line_intersection(a_line, b_line):             # <<<<<<<<<<<<<<
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)
 */
  __pyx_tuple__40 = PyTuple_Pack(12, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_line1, __pyx_n_s_line2, __pyx_n_s_xdiff, __pyx_n_s_ydiff, __pyx_n_s_det, __pyx_n_s_det, __pyx_n_s_div, __pyx_n_s_d, __pyx_n_s_x, __pyx_n_s_y); if (unlikely(!__pyx_tuple__40)) __PYX_ERR(0, 134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__40);
  __Pyx_GIVEREF(__pyx_tuple__40);
  __pyx_codeobj__41 = (PyObject*)__Pyx_PyCode_New(2, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__40, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_intersection, 134, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__41)) __PYX_ERR(0, 134, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":155
 * 
 *     @staticmethod
 *     def lines_intersect_line(lines, line):             # <<<<<<<<<<<<<<
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 */
  __pyx_tuple__42 = PyTuple_Pack(3, __pyx_n_s_lines, __pyx_n_s_line, __pyx_n_s_other_line); if (unlikely(!__pyx_tuple__42)) __PYX_ERR(0, 155, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__42);
  __Pyx_GIVEREF(__pyx_tuple__42);
  __pyx_codeobj__43 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__42, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_lines_intersect_line, 155, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__43)) __PYX_ERR(0, 155, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":164
 * 
 *     @staticmethod
 *     def line_split_line(line, split_line):             # <<<<<<<<<<<<<<
 *         """ Split line by split_line
 *         """
 */
  __pyx_tuple__44 = PyTuple_Pack(6, __pyx_n_s_line, __pyx_n_s_split_line, __pyx_n_s_front_line, __pyx_n_s_back_line, __pyx_n_s_x, __pyx_n_s_y); if (unlikely(!__pyx_tuple__44)) __PYX_ERR(0, 164, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__44);
  __Pyx_GIVEREF(__pyx_tuple__44);
  __pyx_codeobj__45 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__44, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_split_line, 164, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__45)) __PYX_ERR(0, 164, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":193
 * 
 *     @staticmethod
 *     def duplicate_line_rects(a_line_rect, b_line_rect, orientation="horizontal", threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param a_line_rect: the bounding rectangle of a line
 */
  __pyx_tuple__46 = PyTuple_Pack(12, __pyx_n_s_a_line_rect, __pyx_n_s_b_line_rect, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_a_x, __pyx_n_s_a_y, __pyx_n_s_a_w, __pyx_n_s_a_h, __pyx_n_s_b_x, __pyx_n_s_b_y, __pyx_n_s_b_w, __pyx_n_s_b_h); if (unlikely(!__pyx_tuple__46)) __PYX_ERR(0, 193, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__46);
  __Pyx_GIVEREF(__pyx_tuple__46);
  __pyx_codeobj__47 = (PyObject*)__Pyx_PyCode_New(4, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__46, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_duplicate_line_rects, 193, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__47)) __PYX_ERR(0, 193, __pyx_L1_error)
  __pyx_tuple__48 = PyTuple_Pack(2, ((PyObject*)__pyx_n_s_horizontal), ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__48)) __PYX_ERR(0, 193, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__48);
  __Pyx_GIVEREF(__pyx_tuple__48);

  /* "table_extraction/utils_table_extraction.pyx":209
 * 
 *     @staticmethod
 *     def get_area_from_binary_image(rect, image):             # <<<<<<<<<<<<<<
 *         x, y, w, h = rect
 *         return image[y:y+h,x:x+w]
 */
  __pyx_tuple__49 = PyTuple_Pack(6, __pyx_n_s_rect, __pyx_n_s_image, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__49);
  __Pyx_GIVEREF(__pyx_tuple__49);
  __pyx_codeobj__50 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__49, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_get_area_from_binary_image, 209, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__50)) __PYX_ERR(0, 209, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":214
 * 
 *     @staticmethod
 *     def remove_reverse_line_rects(line_rects, binary_image, orientation="v"):             # <<<<<<<<<<<<<<
 *         """
 *         remove noise line rects if reverse area
 */
  __pyx_tuple__51 = PyTuple_Pack(13, __pyx_n_s_line_rects, __pyx_n_s_binary_image, __pyx_n_s_orientation, __pyx_n_s_REVERSE_NOISE_SIZE, __pyx_n_s_REVERSE_AREA_PERCENT, __pyx_n_s_count, __pyx_n_s_removed_line_rects, __pyx_n_s_i, __pyx_n_s_line_rect, __pyx_n_s_size, __pyx_n_s_part_area, __pyx_n_s_max_white, __pyx_n_s_area_white); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__51);
  __Pyx_GIVEREF(__pyx_tuple__51);
  __pyx_codeobj__52 = (PyObject*)__Pyx_PyCode_New(3, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__51, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_reverse_line_rects, 214, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__52)) __PYX_ERR(0, 214, __pyx_L1_error)
  __pyx_tuple__53 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_v)); if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__53);
  __Pyx_GIVEREF(__pyx_tuple__53);

  /* "table_extraction/utils_table_extraction.pyx":240
 * 
 *     @staticmethod
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """
 *         :param rects: the list bounding rectangle of lines
 */
  __pyx_tuple__54 = PyTuple_Pack(5, __pyx_n_s_rects, __pyx_n_s_orientation, __pyx_n_s_duplicate_line_rects, __pyx_n_s_rect_pair, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__54)) __PYX_ERR(0, 240, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__54);
  __Pyx_GIVEREF(__pyx_tuple__54);
  __pyx_codeobj__55 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__54, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_duplicate_line_rects, 240, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__55)) __PYX_ERR(0, 240, __pyx_L1_error)
  __pyx_tuple__56 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_horizontal)); if (unlikely(!__pyx_tuple__56)) __PYX_ERR(0, 240, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__56);
  __Pyx_GIVEREF(__pyx_tuple__56);

  /* "table_extraction/utils_table_extraction.pyx":265
 * 
 *     @staticmethod
 *     def same_line(a_line, b_line):             # <<<<<<<<<<<<<<
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 * 
 */
  __pyx_tuple__57 = PyTuple_Pack(2, __pyx_n_s_a_line, __pyx_n_s_b_line); if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 265, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__57);
  __Pyx_GIVEREF(__pyx_tuple__57);
  __pyx_codeobj__58 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__57, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_line, 265, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__58)) __PYX_ERR(0, 265, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":269
 * 
 *     @staticmethod
 *     def same_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 * 
 */
  __pyx_tuple__59 = PyTuple_Pack(2, __pyx_n_s_a_rect, __pyx_n_s_b_rect); if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 269, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__59);
  __Pyx_GIVEREF(__pyx_tuple__59);
  __pyx_codeobj__60 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__59, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_rect, 269, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__60)) __PYX_ERR(0, 269, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":273
 * 
 *     @staticmethod
 *     def same_h_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 * 
 */
  __pyx_tuple__61 = PyTuple_Pack(3, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_thresh); if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__61);
  __Pyx_GIVEREF(__pyx_tuple__61);
  __pyx_codeobj__62 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__61, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_h_rect, 273, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__62)) __PYX_ERR(0, 273, __pyx_L1_error)
  __pyx_tuple__63 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__63)) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__63);
  __Pyx_GIVEREF(__pyx_tuple__63);

  /* "table_extraction/utils_table_extraction.pyx":277
 * 
 *     @staticmethod
 *     def same_v_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 * 
 */
  __pyx_tuple__64 = PyTuple_Pack(3, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_thresh); if (unlikely(!__pyx_tuple__64)) __PYX_ERR(0, 277, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__64);
  __Pyx_GIVEREF(__pyx_tuple__64);
  __pyx_codeobj__65 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__64, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_v_rect, 277, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__65)) __PYX_ERR(0, 277, __pyx_L1_error)
  __pyx_tuple__66 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__66)) __PYX_ERR(0, 277, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__66);
  __Pyx_GIVEREF(__pyx_tuple__66);

  /* "table_extraction/utils_table_extraction.pyx":281
 * 
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */
  __pyx_tuple__67 = PyTuple_Pack(3, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__67)) __PYX_ERR(0, 281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__67);
  __Pyx_GIVEREF(__pyx_tuple__67);
  __pyx_codeobj__68 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__67, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_same_position, 281, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__68)) __PYX_ERR(0, 281, __pyx_L1_error)
  __pyx_tuple__69 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__69)) __PYX_ERR(0, 281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__69);
  __Pyx_GIVEREF(__pyx_tuple__69);

  /* "table_extraction/utils_table_extraction.pyx":290
 * 
 *     @staticmethod
 *     def merge_duplicate_lines(a_line, b_line):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 *         if a_line.orientation == "h":
 */
  __pyx_tuple__70 = PyTuple_Pack(5, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_Line, __pyx_n_s_start_point, __pyx_n_s_end_point); if (unlikely(!__pyx_tuple__70)) __PYX_ERR(0, 290, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__70);
  __Pyx_GIVEREF(__pyx_tuple__70);
  __pyx_codeobj__71 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__70, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_duplicate_lines, 290, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__71)) __PYX_ERR(0, 290, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":302
 * 
 *     @staticmethod
 *     def distance_from_point_to_point(a_point, b_point):             # <<<<<<<<<<<<<<
 *         x1, y1 = a_point
 *         x2, y2 = b_point
 */
  __pyx_tuple__72 = PyTuple_Pack(6, __pyx_n_s_a_point, __pyx_n_s_b_point, __pyx_n_s_x1, __pyx_n_s_y1, __pyx_n_s_x2, __pyx_n_s_y2); if (unlikely(!__pyx_tuple__72)) __PYX_ERR(0, 302, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__72);
  __Pyx_GIVEREF(__pyx_tuple__72);
  __pyx_codeobj__73 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__72, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_distance_from_point_to_point, 302, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__73)) __PYX_ERR(0, 302, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":308
 * 
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         if Utils.is_intersect(h_line, v_line):
 *             return 0
 */
  __pyx_tuple__74 = PyTuple_Pack(8, __pyx_n_s_h_line, __pyx_n_s_v_line, __pyx_n_s_d11, __pyx_n_s_d12, __pyx_n_s_d1, __pyx_n_s_d21, __pyx_n_s_d22, __pyx_n_s_d2); if (unlikely(!__pyx_tuple__74)) __PYX_ERR(0, 308, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__74);
  __Pyx_GIVEREF(__pyx_tuple__74);
  __pyx_codeobj__75 = (PyObject*)__Pyx_PyCode_New(2, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__74, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_distance_from_line_to_line, 308, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__75)) __PYX_ERR(0, 308, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":328
 * 
 *     @staticmethod
 *     def distance_from_point_to_line(point, line):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */
  __pyx_tuple__76 = PyTuple_Pack(8, __pyx_n_s_point, __pyx_n_s_line, __pyx_n_s_x1, __pyx_n_s_y1, __pyx_n_s_x2, __pyx_n_s_y2, __pyx_n_s_x0, __pyx_n_s_y0); if (unlikely(!__pyx_tuple__76)) __PYX_ERR(0, 328, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__76);
  __Pyx_GIVEREF(__pyx_tuple__76);
  __pyx_codeobj__77 = (PyObject*)__Pyx_PyCode_New(2, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__76, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_distance_from_point_to_line, 328, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__77)) __PYX_ERR(0, 328, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":335
 * 
 *     @staticmethod
 *     def distance_from_line_to_box(box, line, direction):             # <<<<<<<<<<<<<<
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 */
  __pyx_tuple__78 = PyTuple_Pack(9, __pyx_n_s_box, __pyx_n_s_line, __pyx_n_s_direction, __pyx_n_s_distance, __pyx_n_s_box_x, __pyx_n_s_box_y, __pyx_n_s_box_w, __pyx_n_s_box_h, __pyx_n_s_position); if (unlikely(!__pyx_tuple__78)) __PYX_ERR(0, 335, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__78);
  __Pyx_GIVEREF(__pyx_tuple__78);
  __pyx_codeobj__79 = (PyObject*)__Pyx_PyCode_New(3, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__78, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_distance_from_line_to_box, 335, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__79)) __PYX_ERR(0, 335, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":355
 * 
 *     @staticmethod
 *     def distance_from_box_to_box(src_box, dst_box):             # <<<<<<<<<<<<<<
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)
 */
  __pyx_tuple__80 = PyTuple_Pack(4, __pyx_n_s_src_box, __pyx_n_s_dst_box, __pyx_n_s_c1, __pyx_n_s_c2); if (unlikely(!__pyx_tuple__80)) __PYX_ERR(0, 355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__80);
  __Pyx_GIVEREF(__pyx_tuple__80);
  __pyx_codeobj__81 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__80, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_distance_from_box_to_box, 355, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__81)) __PYX_ERR(0, 355, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":361
 * 
 *     @staticmethod
 *     def is_box_far_box(src_box, dst_box, times=1):             # <<<<<<<<<<<<<<
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:
 */
  __pyx_tuple__82 = PyTuple_Pack(4, __pyx_n_s_src_box, __pyx_n_s_dst_box, __pyx_n_s_times, __pyx_n_s_distance); if (unlikely(!__pyx_tuple__82)) __PYX_ERR(0, 361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__82);
  __Pyx_GIVEREF(__pyx_tuple__82);
  __pyx_codeobj__83 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__82, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_box_far_box, 361, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__83)) __PYX_ERR(0, 361, __pyx_L1_error)
  __pyx_tuple__84 = PyTuple_Pack(1, ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__84)) __PYX_ERR(0, 361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__84);
  __Pyx_GIVEREF(__pyx_tuple__84);

  /* "table_extraction/utils_table_extraction.pyx":368
 * 
 *     @staticmethod
 *     def calc_centroid(box):             # <<<<<<<<<<<<<<
 *         x, y, w, h = box
 *         return x+w/2, y+h/2
 */
  __pyx_tuple__85 = PyTuple_Pack(5, __pyx_n_s_box, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__85)) __PYX_ERR(0, 368, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__85);
  __Pyx_GIVEREF(__pyx_tuple__85);
  __pyx_codeobj__86 = (PyObject*)__Pyx_PyCode_New(1, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__85, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_calc_centroid, 368, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__86)) __PYX_ERR(0, 368, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":373
 * 
 *     @staticmethod
 *     def split_lines(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines: the list of the lines
 */
  __pyx_tuple__87 = PyTuple_Pack(4, __pyx_n_s_lines, __pyx_n_s_h_lines, __pyx_n_s_v_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__87)) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__87);
  __Pyx_GIVEREF(__pyx_tuple__87);
  __pyx_codeobj__88 = (PyObject*)__Pyx_PyCode_New(1, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__87, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_split_lines, 373, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__88)) __PYX_ERR(0, 373, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":383
 * 
 *     @staticmethod
 *     def merge_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 * 
 */
  __pyx_tuple__89 = PyTuple_Pack(12, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_orientation, __pyx_n_s_Line, __pyx_n_s_start_x, __pyx_n_s_end_x, __pyx_n_s_y, __pyx_n_s_width, __pyx_n_s_line, __pyx_n_s_start_y, __pyx_n_s_end_y, __pyx_n_s_x); if (unlikely(!__pyx_tuple__89)) __PYX_ERR(0, 383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__89);
  __Pyx_GIVEREF(__pyx_tuple__89);
  __pyx_codeobj__90 = (PyObject*)__Pyx_PyCode_New(3, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__89, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_lines, 383, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__90)) __PYX_ERR(0, 383, __pyx_L1_error)
  __pyx_tuple__91 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_horizontal)); if (unlikely(!__pyx_tuple__91)) __PYX_ERR(0, 383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__91);
  __Pyx_GIVEREF(__pyx_tuple__91);

  /* "table_extraction/utils_table_extraction.pyx":406
 *         return line
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if len(lines) == 1:
 *             return lines[0]
 */
  __pyx_tuple__92 = PyTuple_Pack(4, __pyx_n_s_lines, __pyx_n_s_orientation, __pyx_n_s_start_line, __pyx_n_s_end_line); if (unlikely(!__pyx_tuple__92)) __PYX_ERR(0, 406, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__92);
  __Pyx_GIVEREF(__pyx_tuple__92);
  __pyx_codeobj__93 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__92, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_border_lines, 406, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__93)) __PYX_ERR(0, 406, __pyx_L1_error)
  __pyx_tuple__94 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_horizontal)); if (unlikely(!__pyx_tuple__94)) __PYX_ERR(0, 406, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__94);
  __Pyx_GIVEREF(__pyx_tuple__94);

  /* "table_extraction/utils_table_extraction.pyx":420
 * 
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal":
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 */
  __pyx_tuple__95 = PyTuple_Pack(3, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_orientation); if (unlikely(!__pyx_tuple__95)) __PYX_ERR(0, 420, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__95);
  __Pyx_GIVEREF(__pyx_tuple__95);
  __pyx_codeobj__96 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__95, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_extend_lines, 420, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__96)) __PYX_ERR(0, 420, __pyx_L1_error)
  __pyx_tuple__97 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_horizontal)); if (unlikely(!__pyx_tuple__97)) __PYX_ERR(0, 420, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__97);
  __Pyx_GIVEREF(__pyx_tuple__97);

  /* "table_extraction/utils_table_extraction.pyx":428
 * 
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):             # <<<<<<<<<<<<<<
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 */
  __pyx_tuple__98 = PyTuple_Pack(3, __pyx_n_s_h_lines, __pyx_n_s_v_lines, __pyx_n_s_type); if (unlikely(!__pyx_tuple__98)) __PYX_ERR(0, 428, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__98);
  __Pyx_GIVEREF(__pyx_tuple__98);
  __pyx_codeobj__99 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__98, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_sort_lines, 428, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__99)) __PYX_ERR(0, 428, __pyx_L1_error)
  __pyx_tuple__100 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_position)); if (unlikely(!__pyx_tuple__100)) __PYX_ERR(0, 428, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__100);
  __Pyx_GIVEREF(__pyx_tuple__100);

  /* "table_extraction/utils_table_extraction.pyx":438
 * 
 *     @staticmethod
 *     def horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 * 
 */
  __pyx_tuple__101 = PyTuple_Pack(2, __pyx_n_s_h_line, __pyx_n_s_v_line); if (unlikely(!__pyx_tuple__101)) __PYX_ERR(0, 438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__101);
  __Pyx_GIVEREF(__pyx_tuple__101);
  __pyx_codeobj__102 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__101, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_horizontal_line_cut_vertical_lin, 438, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__102)) __PYX_ERR(0, 438, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":442
 * 
 *     @staticmethod
 *     def vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 * 
 */
  __pyx_tuple__103 = PyTuple_Pack(2, __pyx_n_s_v_line, __pyx_n_s_h_line); if (unlikely(!__pyx_tuple__103)) __PYX_ERR(0, 442, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__103);
  __Pyx_GIVEREF(__pyx_tuple__103);
  __pyx_codeobj__104 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__103, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_vertical_line_cut_horiontal_line, 442, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__104)) __PYX_ERR(0, 442, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":446
 * 
 *     @staticmethod
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */
  __pyx_tuple__105 = PyTuple_Pack(6, __pyx_n_s_h_line, __pyx_n_s_neighbor_line, __pyx_n_s_direction, __pyx_n_s_Line, __pyx_n_s_virtual_v_line, __pyx_n_s_x_position); if (unlikely(!__pyx_tuple__105)) __PYX_ERR(0, 446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__105);
  __Pyx_GIVEREF(__pyx_tuple__105);
  __pyx_codeobj__106 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__105, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_create_virtual_vertical_line, 446, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__106)) __PYX_ERR(0, 446, __pyx_L1_error)
  __pyx_tuple__107 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_start)); if (unlikely(!__pyx_tuple__107)) __PYX_ERR(0, 446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__107);
  __Pyx_GIVEREF(__pyx_tuple__107);

  /* "table_extraction/utils_table_extraction.pyx":502
 * 
 *     @staticmethod
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */
  __pyx_tuple__108 = PyTuple_Pack(6, __pyx_n_s_v_line, __pyx_n_s_neighbor_line, __pyx_n_s_direction, __pyx_n_s_Line, __pyx_n_s_virtual_h_line, __pyx_n_s_y_position); if (unlikely(!__pyx_tuple__108)) __PYX_ERR(0, 502, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__108);
  __Pyx_GIVEREF(__pyx_tuple__108);
  __pyx_codeobj__109 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__108, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_create_virtual_horizontal_line, 502, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__109)) __PYX_ERR(0, 502, __pyx_L1_error)
  __pyx_tuple__110 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_start)); if (unlikely(!__pyx_tuple__110)) __PYX_ERR(0, 502, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__110);
  __Pyx_GIVEREF(__pyx_tuple__110);

  /* "table_extraction/utils_table_extraction.pyx":559
 * 
 *     @staticmethod
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         for line in v_lines:
 */
  __pyx_tuple__111 = PyTuple_Pack(5, __pyx_n_s_v_line, __pyx_n_s_v_lines, __pyx_n_s_invalid_lines, __pyx_n_s_left_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__111)) __PYX_ERR(0, 559, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__111);
  __Pyx_GIVEREF(__pyx_tuple__111);
  __pyx_codeobj__112 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__111, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_vertical_left_neighbor_line, 559, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__112)) __PYX_ERR(0, 559, __pyx_L1_error)
  __pyx_tuple__113 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__113)) __PYX_ERR(0, 559, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__113);
  __Pyx_GIVEREF(__pyx_tuple__113);

  /* "table_extraction/utils_table_extraction.pyx":574
 * 
 *     @staticmethod
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         right_lines = []
 *         for line in v_lines:
 */
  __pyx_tuple__114 = PyTuple_Pack(5, __pyx_n_s_v_line, __pyx_n_s_v_lines, __pyx_n_s_invalid_lines, __pyx_n_s_right_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__114)) __PYX_ERR(0, 574, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__114);
  __Pyx_GIVEREF(__pyx_tuple__114);
  __pyx_codeobj__115 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__114, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_vertical_right_neighbor_line, 574, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__115)) __PYX_ERR(0, 574, __pyx_L1_error)
  __pyx_tuple__116 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__116)) __PYX_ERR(0, 574, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__116);
  __Pyx_GIVEREF(__pyx_tuple__116);

  /* "table_extraction/utils_table_extraction.pyx":589
 * 
 *     @staticmethod
 *     def vertical_neighbor_line(v_line, v_lines):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         right_lines = []
 */
  __pyx_tuple__117 = PyTuple_Pack(5, __pyx_n_s_v_line, __pyx_n_s_v_lines, __pyx_n_s_left_lines, __pyx_n_s_right_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__117)) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__117);
  __Pyx_GIVEREF(__pyx_tuple__117);
  __pyx_codeobj__118 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__117, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_vertical_neighbor_line, 589, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__118)) __PYX_ERR(0, 589, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":616
 * 
 *     @staticmethod
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         top_lines = []
 *         for line in h_lines:
 */
  __pyx_tuple__119 = PyTuple_Pack(5, __pyx_n_s_h_line, __pyx_n_s_h_lines, __pyx_n_s_invalid_lines, __pyx_n_s_top_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__119)) __PYX_ERR(0, 616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__119);
  __Pyx_GIVEREF(__pyx_tuple__119);
  __pyx_codeobj__120 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__119, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_horizontal_top_neighbor_line, 616, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__120)) __PYX_ERR(0, 616, __pyx_L1_error)
  __pyx_tuple__121 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__121)) __PYX_ERR(0, 616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__121);
  __Pyx_GIVEREF(__pyx_tuple__121);

  /* "table_extraction/utils_table_extraction.pyx":631
 * 
 *     @staticmethod
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 *         for line in h_lines:
 */
  __pyx_tuple__122 = PyTuple_Pack(5, __pyx_n_s_h_line, __pyx_n_s_h_lines, __pyx_n_s_invalid_lines, __pyx_n_s_bottom_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__122)) __PYX_ERR(0, 631, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__122);
  __Pyx_GIVEREF(__pyx_tuple__122);
  __pyx_codeobj__123 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__122, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_horizontal_bottom_neighbor_line, 631, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__123)) __PYX_ERR(0, 631, __pyx_L1_error)
  __pyx_tuple__124 = PyTuple_Pack(1, ((PyObject *)Py_None)); if (unlikely(!__pyx_tuple__124)) __PYX_ERR(0, 631, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__124);
  __Pyx_GIVEREF(__pyx_tuple__124);

  /* "table_extraction/utils_table_extraction.pyx":646
 * 
 *     @staticmethod
 *     def horizontal_neighbor_line(h_line, h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_line:
 */
  __pyx_tuple__125 = PyTuple_Pack(5, __pyx_n_s_h_line, __pyx_n_s_h_lines, __pyx_n_s_top_lines, __pyx_n_s_bottom_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__125)) __PYX_ERR(0, 646, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__125);
  __Pyx_GIVEREF(__pyx_tuple__125);
  __pyx_codeobj__126 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__125, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_horizontal_neighbor_line, 646, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__126)) __PYX_ERR(0, 646, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":679
 * 
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)
 */
  __pyx_tuple__127 = PyTuple_Pack(6, __pyx_n_s_line, __pyx_n_s_rects, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_rect, __pyx_n_s_rect_line); if (unlikely(!__pyx_tuple__127)) __PYX_ERR(0, 679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__127);
  __Pyx_GIVEREF(__pyx_tuple__127);
  __pyx_codeobj__128 = (PyObject*)__Pyx_PyCode_New(4, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__127, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_line_cut_rects, 679, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__128)) __PYX_ERR(0, 679, __pyx_L1_error)
  __pyx_tuple__129 = PyTuple_Pack(2, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_neg_2)); if (unlikely(!__pyx_tuple__129)) __PYX_ERR(0, 679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__129);
  __Pyx_GIVEREF(__pyx_tuple__129);

  /* "table_extraction/utils_table_extraction.pyx":690
 * 
 *     @staticmethod
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 * 
 *         left_stop_line = None
 */
  __pyx_tuple__130 = PyTuple_Pack(11, __pyx_n_s_h_line, __pyx_n_s_v_lines, __pyx_n_s_content_rects, __pyx_n_s_threshold, __pyx_n_s_left_stop_line, __pyx_n_s_right_stop_line, __pyx_n_s_invalid_horizontal_line, __pyx_n_s_left_lines, __pyx_n_s_right_lines, __pyx_n_s_v_line, __pyx_n_s_content_rect); if (unlikely(!__pyx_tuple__130)) __PYX_ERR(0, 690, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__130);
  __Pyx_GIVEREF(__pyx_tuple__130);
  __pyx_codeobj__131 = (PyObject*)__Pyx_PyCode_New(4, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__130, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_vertical_stop_line, 690, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__131)) __PYX_ERR(0, 690, __pyx_L1_error)
  __pyx_tuple__132 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__132)) __PYX_ERR(0, 690, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__132);
  __Pyx_GIVEREF(__pyx_tuple__132);

  /* "table_extraction/utils_table_extraction.pyx":733
 * 
 *     @staticmethod
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 *         top_stop_line = None
 *         bottom_stop_line = None
 */
  __pyx_tuple__133 = PyTuple_Pack(11, __pyx_n_s_v_line, __pyx_n_s_h_lines, __pyx_n_s_content_rects, __pyx_n_s_threshold, __pyx_n_s_top_stop_line, __pyx_n_s_bottom_stop_line, __pyx_n_s_invalid_vertical_line, __pyx_n_s_top_lines, __pyx_n_s_bottom_lines, __pyx_n_s_h_line, __pyx_n_s_content_rect); if (unlikely(!__pyx_tuple__133)) __PYX_ERR(0, 733, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__133);
  __Pyx_GIVEREF(__pyx_tuple__133);
  __pyx_codeobj__134 = (PyObject*)__Pyx_PyCode_New(4, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__133, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_horizontal_stop_line, 733, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__134)) __PYX_ERR(0, 733, __pyx_L1_error)
  __pyx_tuple__135 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__135)) __PYX_ERR(0, 733, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__135);
  __Pyx_GIVEREF(__pyx_tuple__135);

  /* "table_extraction/utils_table_extraction.pyx":775
 * 
 *     @staticmethod
 *     def line_pairs(h_single_lines, v_single_lines, distance_threshold=20, ratio_threshold=0.1):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_single_lines: the list of horizontal lines
 */
  __pyx_tuple__136 = PyTuple_Pack(9, __pyx_n_s_h_single_lines, __pyx_n_s_v_single_lines, __pyx_n_s_distance_threshold, __pyx_n_s_ratio_threshold, __pyx_n_s_h_line_pairs, __pyx_n_s_v_line_pairs, __pyx_n_s_line_pair, __pyx_n_s_a_line, __pyx_n_s_b_line); if (unlikely(!__pyx_tuple__136)) __PYX_ERR(0, 775, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__136);
  __Pyx_GIVEREF(__pyx_tuple__136);
  __pyx_codeobj__137 = (PyObject*)__Pyx_PyCode_New(4, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__136, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_pairs, 775, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__137)) __PYX_ERR(0, 775, __pyx_L1_error)
  __pyx_tuple__138 = PyTuple_Pack(2, ((PyObject *)__pyx_int_20), ((PyObject*)__pyx_float_0_1)); if (unlikely(!__pyx_tuple__138)) __PYX_ERR(0, 775, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__138);
  __Pyx_GIVEREF(__pyx_tuple__138);

  /* "table_extraction/utils_table_extraction.pyx":819
 * 
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):             # <<<<<<<<<<<<<<
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 */
  __pyx_tuple__139 = PyTuple_Pack(3, __pyx_n_s_h_line, __pyx_n_s_v_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__139)) __PYX_ERR(0, 819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__139);
  __Pyx_GIVEREF(__pyx_tuple__139);
  __pyx_codeobj__140 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__139, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_connect_at_corner, 819, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__140)) __PYX_ERR(0, 819, __pyx_L1_error)
  __pyx_tuple__141 = PyTuple_Pack(1, ((PyObject *)__pyx_int_60)); if (unlikely(!__pyx_tuple__141)) __PYX_ERR(0, 819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__141);
  __Pyx_GIVEREF(__pyx_tuple__141);

  /* "table_extraction/utils_table_extraction.pyx":826
 * 
 *     @staticmethod
 *     def stop_point_at_top(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the top
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */
  __pyx_tuple__142 = PyTuple_Pack(13, __pyx_n_s_table, __pyx_n_s_point, __pyx_n_s_threshold, __pyx_n_s_content_rects, __pyx_n_s_rect, __pyx_n_s_h_lines, __pyx_n_s_upper_lines, __pyx_n_s_lower_lines, __pyx_n_s_line, __pyx_n_s_lines, __pyx_n_s_top_point, __pyx_n_s_content_block, __pyx_n_s_h_line); if (unlikely(!__pyx_tuple__142)) __PYX_ERR(0, 826, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__142);
  __Pyx_GIVEREF(__pyx_tuple__142);
  __pyx_codeobj__143 = (PyObject*)__Pyx_PyCode_New(2, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__142, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_stop_point_at_top, 826, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__143)) __PYX_ERR(0, 826, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":873
 * 
 *     @staticmethod
 *     def stop_point_at_bottom(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the bottom
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */
  __pyx_tuple__144 = PyTuple_Pack(13, __pyx_n_s_table, __pyx_n_s_point, __pyx_n_s_threshold, __pyx_n_s_content_rects, __pyx_n_s_rect, __pyx_n_s_h_lines, __pyx_n_s_upper_lines, __pyx_n_s_lower_lines, __pyx_n_s_line, __pyx_n_s_lines, __pyx_n_s_bottom_point, __pyx_n_s_content_block, __pyx_n_s_h_line); if (unlikely(!__pyx_tuple__144)) __PYX_ERR(0, 873, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__144);
  __Pyx_GIVEREF(__pyx_tuple__144);
  __pyx_codeobj__145 = (PyObject*)__Pyx_PyCode_New(2, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__144, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_stop_point_at_bottom, 873, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__145)) __PYX_ERR(0, 873, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":919
 * 
 *     @staticmethod
 *     def stop_point_at_left(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the left
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */
  __pyx_tuple__146 = PyTuple_Pack(13, __pyx_n_s_table, __pyx_n_s_point, __pyx_n_s_threshold, __pyx_n_s_content_rects, __pyx_n_s_rect, __pyx_n_s_v_lines, __pyx_n_s_left_lines, __pyx_n_s_right_lines, __pyx_n_s_line, __pyx_n_s_left_point, __pyx_n_s_right_point, __pyx_n_s_content_block, __pyx_n_s_v_line); if (unlikely(!__pyx_tuple__146)) __PYX_ERR(0, 919, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__146);
  __Pyx_GIVEREF(__pyx_tuple__146);
  __pyx_codeobj__147 = (PyObject*)__Pyx_PyCode_New(2, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__146, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_stop_point_at_left, 919, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__147)) __PYX_ERR(0, 919, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":963
 * 
 *     @staticmethod
 *     def stop_point_at_right(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the right
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */
  __pyx_tuple__148 = PyTuple_Pack(13, __pyx_n_s_table, __pyx_n_s_point, __pyx_n_s_threshold, __pyx_n_s_content_rects, __pyx_n_s_rect, __pyx_n_s_v_lines, __pyx_n_s_left_lines, __pyx_n_s_right_lines, __pyx_n_s_line, __pyx_n_s_right_point, __pyx_n_s_left_point, __pyx_n_s_content_block, __pyx_n_s_v_line); if (unlikely(!__pyx_tuple__148)) __PYX_ERR(0, 963, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__148);
  __Pyx_GIVEREF(__pyx_tuple__148);
  __pyx_codeobj__149 = (PyObject*)__Pyx_PyCode_New(2, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__148, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_stop_point_at_right, 963, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__149)) __PYX_ERR(0, 963, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1008
 * 
 *     @staticmethod
 *     def single_text_blocks(boxes, text_blocks, expand=0):             # <<<<<<<<<<<<<<
 *         """Find all single text blocks (text block not in a box)
 *         """
 */
  __pyx_tuple__150 = PyTuple_Pack(6, __pyx_n_s_boxes, __pyx_n_s_text_blocks, __pyx_n_s_expand, __pyx_n_s_single_text_blocks, __pyx_n_s_box, __pyx_n_s_text_block); if (unlikely(!__pyx_tuple__150)) __PYX_ERR(0, 1008, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__150);
  __Pyx_GIVEREF(__pyx_tuple__150);
  __pyx_codeobj__151 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__150, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_single_text_blocks, 1008, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__151)) __PYX_ERR(0, 1008, __pyx_L1_error)
  __pyx_tuple__152 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__152)) __PYX_ERR(0, 1008, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__152);
  __Pyx_GIVEREF(__pyx_tuple__152);

  /* "table_extraction/utils_table_extraction.pyx":1020
 * 
 *     @staticmethod
 *     def single_lines(boxes, lines):             # <<<<<<<<<<<<<<
 *         """Find all single lines (line not in a box)
 *         """
 */
  __pyx_tuple__153 = PyTuple_Pack(5, __pyx_n_s_boxes, __pyx_n_s_lines, __pyx_n_s_box_lines, __pyx_n_s_box, __pyx_n_s_line); if (unlikely(!__pyx_tuple__153)) __PYX_ERR(0, 1020, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__153);
  __Pyx_GIVEREF(__pyx_tuple__153);
  __pyx_codeobj__154 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__153, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_single_lines, 1020, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__154)) __PYX_ERR(0, 1020, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1031
 * 
 *     @staticmethod
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):             # <<<<<<<<<<<<<<
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:
 */
  __pyx_tuple__155 = PyTuple_Pack(6, __pyx_n_s_box, __pyx_n_s_lines, __pyx_n_s_threshold, __pyx_n_s_return_lines, __pyx_n_s_inside_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__155)) __PYX_ERR(0, 1031, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__155);
  __Pyx_GIVEREF(__pyx_tuple__155);
  __pyx_codeobj__156 = (PyObject*)__Pyx_PyCode_New(4, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__155, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_lines_inside_box, 1031, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__156)) __PYX_ERR(0, 1031, __pyx_L1_error)
  __pyx_tuple__157 = PyTuple_Pack(2, ((PyObject *)__pyx_int_5), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__157)) __PYX_ERR(0, 1031, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__157);
  __Pyx_GIVEREF(__pyx_tuple__157);

  /* "table_extraction/utils_table_extraction.pyx":1039
 * 
 *     @staticmethod
 *     def line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param box: the box's position
 */
  __pyx_tuple__158 = PyTuple_Pack(7, __pyx_n_s_box, __pyx_n_s_line, __pyx_n_s_threshold, __pyx_n_s_box_x, __pyx_n_s_box_y, __pyx_n_s_box_w, __pyx_n_s_box_h); if (unlikely(!__pyx_tuple__158)) __PYX_ERR(0, 1039, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__158);
  __Pyx_GIVEREF(__pyx_tuple__158);
  __pyx_codeobj__159 = (PyObject*)__Pyx_PyCode_New(3, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__158, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_inside_box, 1039, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__159)) __PYX_ERR(0, 1039, __pyx_L1_error)
  __pyx_tuple__160 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__160)) __PYX_ERR(0, 1039, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__160);
  __Pyx_GIVEREF(__pyx_tuple__160);

  /* "table_extraction/utils_table_extraction.pyx":1052
 * 
 *     @staticmethod
 *     def v_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)
 */
  __pyx_tuple__161 = PyTuple_Pack(3, __pyx_n_s_box, __pyx_n_s_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__161)) __PYX_ERR(0, 1052, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__161);
  __Pyx_GIVEREF(__pyx_tuple__161);
  __pyx_codeobj__162 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__161, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_v_line_inside_box, 1052, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__162)) __PYX_ERR(0, 1052, __pyx_L1_error)
  __pyx_tuple__163 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__163)) __PYX_ERR(0, 1052, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__163);
  __Pyx_GIVEREF(__pyx_tuple__163);

  /* "table_extraction/utils_table_extraction.pyx":1058
 * 
 *     @staticmethod
 *     def h_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)
 */
  __pyx_tuple__164 = PyTuple_Pack(3, __pyx_n_s_box, __pyx_n_s_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__164)) __PYX_ERR(0, 1058, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__164);
  __Pyx_GIVEREF(__pyx_tuple__164);
  __pyx_codeobj__165 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__164, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_h_line_inside_box, 1058, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__165)) __PYX_ERR(0, 1058, __pyx_L1_error)
  __pyx_tuple__166 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__166)) __PYX_ERR(0, 1058, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__166);
  __Pyx_GIVEREF(__pyx_tuple__166);

  /* "table_extraction/utils_table_extraction.pyx":1064
 * 
 *     @staticmethod
 *     def expand_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add padding to the rect
 */
  __pyx_tuple__167 = PyTuple_Pack(2, __pyx_n_s_rect, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__167)) __PYX_ERR(0, 1064, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__167);
  __Pyx_GIVEREF(__pyx_tuple__167);
  __pyx_codeobj__168 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__167, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_rect, 1064, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__168)) __PYX_ERR(0, 1064, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1071
 * 
 *     @staticmethod
 *     def expand_width_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add horizontal padding to the rect only.
 */
  __pyx_tuple__169 = PyTuple_Pack(2, __pyx_n_s_rect, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__169)) __PYX_ERR(0, 1071, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__169);
  __Pyx_GIVEREF(__pyx_tuple__169);
  __pyx_codeobj__170 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__169, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_width_rect, 1071, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__170)) __PYX_ERR(0, 1071, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1078
 * 
 *     @staticmethod
 *     def expand_height_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add vertical padding to the rect only
 */
  __pyx_tuple__171 = PyTuple_Pack(2, __pyx_n_s_rect, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__171)) __PYX_ERR(0, 1078, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__171);
  __Pyx_GIVEREF(__pyx_tuple__171);
  __pyx_codeobj__172 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__171, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_height_rect, 1078, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__172)) __PYX_ERR(0, 1078, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1085
 * 
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)
 */
  __pyx_tuple__173 = PyTuple_Pack(3, __pyx_n_s_rect, __pyx_n_s_line, __pyx_n_s_expand); if (unlikely(!__pyx_tuple__173)) __PYX_ERR(0, 1085, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__173);
  __Pyx_GIVEREF(__pyx_tuple__173);
  __pyx_codeobj__174 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__173, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_inside_table_box, 1085, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__174)) __PYX_ERR(0, 1085, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1094
 * 
 *     @staticmethod
 *     def rect_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect inside a_rect
 *         """
 */
  __pyx_tuple__175 = PyTuple_Pack(11, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_expand, __pyx_n_s_a_x, __pyx_n_s_a_y, __pyx_n_s_a_w, __pyx_n_s_a_h, __pyx_n_s_b_x, __pyx_n_s_b_y, __pyx_n_s_b_w, __pyx_n_s_b_h); if (unlikely(!__pyx_tuple__175)) __PYX_ERR(0, 1094, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__175);
  __Pyx_GIVEREF(__pyx_tuple__175);
  __pyx_codeobj__176 = (PyObject*)__Pyx_PyCode_New(3, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__175, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_inside_rect, 1094, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__176)) __PYX_ERR(0, 1094, __pyx_L1_error)
  __pyx_tuple__177 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__177)) __PYX_ERR(0, 1094, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__177);
  __Pyx_GIVEREF(__pyx_tuple__177);

  /* "table_extraction/utils_table_extraction.pyx":1102
 * 
 *     @staticmethod
 *     def rect_horizontal_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect horizontaly inside a_rect
 *         """
 */
  __pyx_tuple__179 = PyTuple_Pack(8, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_expand, __pyx_n_s_a_x, __pyx_n_s__178, __pyx_n_s_a_w, __pyx_n_s_b_x, __pyx_n_s_b_w); if (unlikely(!__pyx_tuple__179)) __PYX_ERR(0, 1102, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__179);
  __Pyx_GIVEREF(__pyx_tuple__179);
  __pyx_codeobj__180 = (PyObject*)__Pyx_PyCode_New(3, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__179, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_horizontal_inside_rect, 1102, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__180)) __PYX_ERR(0, 1102, __pyx_L1_error)
  __pyx_tuple__181 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__181)) __PYX_ERR(0, 1102, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__181);
  __Pyx_GIVEREF(__pyx_tuple__181);

  /* "table_extraction/utils_table_extraction.pyx":1110
 * 
 *     @staticmethod
 *     def rect_vertical_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect verticaly inside a_rect
 *         """
 */
  __pyx_tuple__182 = PyTuple_Pack(8, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_expand, __pyx_n_s__178, __pyx_n_s_a_y, __pyx_n_s_a_h, __pyx_n_s_b_y, __pyx_n_s_b_h); if (unlikely(!__pyx_tuple__182)) __PYX_ERR(0, 1110, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__182);
  __Pyx_GIVEREF(__pyx_tuple__182);
  __pyx_codeobj__183 = (PyObject*)__Pyx_PyCode_New(3, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__182, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_vertical_inside_rect, 1110, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__183)) __PYX_ERR(0, 1110, __pyx_L1_error)
  __pyx_tuple__184 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__184)) __PYX_ERR(0, 1110, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__184);
  __Pyx_GIVEREF(__pyx_tuple__184);

  /* "table_extraction/utils_table_extraction.pyx":1118
 * 
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */
  __pyx_tuple__185 = PyTuple_Pack(4, __pyx_n_s_a_rect, __pyx_n_s_rects, __pyx_n_s_reverse, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__185)) __PYX_ERR(0, 1118, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__185);
  __Pyx_GIVEREF(__pyx_tuple__185);
  __pyx_codeobj__186 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__185, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_rect_contains_rects, 1118, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__186)) __PYX_ERR(0, 1118, __pyx_L1_error)
  __pyx_tuple__187 = PyTuple_Pack(1, ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__187)) __PYX_ERR(0, 1118, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__187);
  __Pyx_GIVEREF(__pyx_tuple__187);

  /* "table_extraction/utils_table_extraction.pyx":1127
 * 
 *     @staticmethod
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         ret_rects = []
 *         for rect in rects:
 */
  __pyx_tuple__188 = PyTuple_Pack(5, __pyx_n_s_a_rect, __pyx_n_s_rects, __pyx_n_s_reverse, __pyx_n_s_ret_rects, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__188)) __PYX_ERR(0, 1127, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__188);
  __Pyx_GIVEREF(__pyx_tuple__188);
  __pyx_codeobj__189 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__188, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_get_rect_contains_rects, 1127, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__189)) __PYX_ERR(0, 1127, __pyx_L1_error)
  __pyx_tuple__190 = PyTuple_Pack(1, ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__190)) __PYX_ERR(0, 1127, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__190);
  __Pyx_GIVEREF(__pyx_tuple__190);

  /* "table_extraction/utils_table_extraction.pyx":1137
 * 
 *     @staticmethod
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):             # <<<<<<<<<<<<<<
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 */
  __pyx_tuple__191 = PyTuple_Pack(8, __pyx_n_s_a_rect, __pyx_n_s_blocks, __pyx_n_s_reverse, __pyx_n_s_rects, __pyx_n_s_ret_blocks, __pyx_n_s_i, __pyx_n_s_rect, __pyx_n_s_block); if (unlikely(!__pyx_tuple__191)) __PYX_ERR(0, 1137, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__191);
  __Pyx_GIVEREF(__pyx_tuple__191);
  __pyx_codeobj__192 = (PyObject*)__Pyx_PyCode_New(3, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__191, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_get_rect_contains_blocks, 1137, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__192)) __PYX_ERR(0, 1137, __pyx_L1_error)
  __pyx_tuple__193 = PyTuple_Pack(1, ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__193)) __PYX_ERR(0, 1137, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__193);
  __Pyx_GIVEREF(__pyx_tuple__193);

  /* "table_extraction/utils_table_extraction.pyx":1149
 * 
 *     @staticmethod
 *     def lines_over_line(line, lines, direction="left"):             # <<<<<<<<<<<<<<
 *         """
 *         Get lines over line
 */
  __pyx_tuple__194 = PyTuple_Pack(6, __pyx_n_s_line, __pyx_n_s_lines, __pyx_n_s_direction, __pyx_n_s_over_lines, __pyx_n_s_over_f, __pyx_n_s_other_line); if (unlikely(!__pyx_tuple__194)) __PYX_ERR(0, 1149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__194);
  __Pyx_GIVEREF(__pyx_tuple__194);
  __pyx_codeobj__195 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__194, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_lines_over_line, 1149, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__195)) __PYX_ERR(0, 1149, __pyx_L1_error)
  __pyx_tuple__196 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_left)); if (unlikely(!__pyx_tuple__196)) __PYX_ERR(0, 1149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__196);
  __Pyx_GIVEREF(__pyx_tuple__196);

  /* "table_extraction/utils_table_extraction.pyx":1172
 * 
 *     @staticmethod
 *     def line_inside_text_block(text_block, line, expand=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_block: the text block's position
 */
  __pyx_tuple__197 = PyTuple_Pack(15, __pyx_n_s_text_block, __pyx_n_s_line, __pyx_n_s_expand, __pyx_n_s_expand_with_horizontal_line, __pyx_n_s_expand_with_horizontal_line, __pyx_n_s_expand_with_vertical_line, __pyx_n_s_expand_with_vertical_line, __pyx_n_s_b_x, __pyx_n_s_b_y, __pyx_n_s_b_w, __pyx_n_s_b_h, __pyx_n_s_a_x, __pyx_n_s_a_y, __pyx_n_s_a_w, __pyx_n_s_a_h); if (unlikely(!__pyx_tuple__197)) __PYX_ERR(0, 1172, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__197);
  __Pyx_GIVEREF(__pyx_tuple__197);
  __pyx_codeobj__198 = (PyObject*)__Pyx_PyCode_New(3, 0, 15, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__197, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_inside_text_block, 1172, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__198)) __PYX_ERR(0, 1172, __pyx_L1_error)
  __pyx_tuple__199 = PyTuple_Pack(1, ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__199)) __PYX_ERR(0, 1172, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__199);
  __Pyx_GIVEREF(__pyx_tuple__199);

  /* "table_extraction/utils_table_extraction.pyx":1201
 * 
 *     @staticmethod
 *     def rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are overlapping
 *         """
 */
  __pyx_tuple__200 = PyTuple_Pack(6, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__200)) __PYX_ERR(0, 1201, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__200);
  __Pyx_GIVEREF(__pyx_tuple__200);
  __pyx_codeobj__201 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__200, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_overlap_rect, 1201, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__201)) __PYX_ERR(0, 1201, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1215
 * 
 *     @staticmethod
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are horizontal overlapping
 *         """
 */
  __pyx_tuple__202 = PyTuple_Pack(8, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_thresh, __pyx_n_s_inside_box, __pyx_n_s_max_h_rect, __pyx_n_s_min_h_rect, __pyx_n_s_x, __pyx_n_s_w); if (unlikely(!__pyx_tuple__202)) __PYX_ERR(0, 1215, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__202);
  __Pyx_GIVEREF(__pyx_tuple__202);
  __pyx_codeobj__203 = (PyObject*)__Pyx_PyCode_New(4, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__202, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_horizontal_overlap_rect, 1215, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__203)) __PYX_ERR(0, 1215, __pyx_L1_error)
  __pyx_tuple__204 = PyTuple_Pack(2, ((PyObject *)__pyx_int_0), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__204)) __PYX_ERR(0, 1215, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__204);
  __Pyx_GIVEREF(__pyx_tuple__204);

  /* "table_extraction/utils_table_extraction.pyx":1232
 * 
 *     @staticmethod
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are vertical overlapping
 *         """
 */
  __pyx_tuple__205 = PyTuple_Pack(8, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_thresh, __pyx_n_s_inside_box, __pyx_n_s_max_w_rect, __pyx_n_s_min_w_rect, __pyx_n_s_y, __pyx_n_s_h); if (unlikely(!__pyx_tuple__205)) __PYX_ERR(0, 1232, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__205);
  __Pyx_GIVEREF(__pyx_tuple__205);
  __pyx_codeobj__206 = (PyObject*)__Pyx_PyCode_New(4, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__205, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_vertical_overlap_rect, 1232, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__206)) __PYX_ERR(0, 1232, __pyx_L1_error)
  __pyx_tuple__207 = PyTuple_Pack(2, ((PyObject *)__pyx_int_0), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__207)) __PYX_ERR(0, 1232, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__207);
  __Pyx_GIVEREF(__pyx_tuple__207);

  /* "table_extraction/utils_table_extraction.pyx":1249
 * 
 *     @staticmethod
 *     def line_overlap_rects(line, rects, orientation, percent=50, shrink_size=0): #12585             # <<<<<<<<<<<<<<
 *         """Check line overlap rect
 *         """
 */
  __pyx_tuple__208 = PyTuple_Pack(7, __pyx_n_s_line, __pyx_n_s_rects, __pyx_n_s_orientation, __pyx_n_s_percent, __pyx_n_s_shrink_size, __pyx_n_s_line_overlap_box_f, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__208)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__208);
  __Pyx_GIVEREF(__pyx_tuple__208);
  __pyx_codeobj__209 = (PyObject*)__Pyx_PyCode_New(5, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__208, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_overlap_rects, 1249, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__209)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __pyx_tuple__210 = PyTuple_Pack(2, ((PyObject *)__pyx_int_50), ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__210)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__210);
  __Pyx_GIVEREF(__pyx_tuple__210);

  /* "table_extraction/utils_table_extraction.pyx":1260
 * 
 *     @staticmethod
 *     def is_rect_divide_content(bounding_rect, content_blocks, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally content
 */
  __pyx_tuple__211 = PyTuple_Pack(8, __pyx_n_s_bounding_rect, __pyx_n_s_content_blocks, __pyx_n_s_expand_size, __pyx_n_s_overlap_percent, __pyx_n_s_cnt, __pyx_n_s_OVERLAP_SIZE, __pyx_n_s_content_block, __pyx_n_s_content_rect); if (unlikely(!__pyx_tuple__211)) __PYX_ERR(0, 1260, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__211);
  __Pyx_GIVEREF(__pyx_tuple__211);
  __pyx_codeobj__212 = (PyObject*)__Pyx_PyCode_New(5, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__211, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_rect_divide_content, 1260, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__212)) __PYX_ERR(0, 1260, __pyx_L1_error)
  __pyx_tuple__213 = PyTuple_Pack(3, ((PyObject *)__pyx_int_10), ((PyObject *)__pyx_int_30), ((PyObject *)__pyx_int_3)); if (unlikely(!__pyx_tuple__213)) __PYX_ERR(0, 1260, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__213);
  __Pyx_GIVEREF(__pyx_tuple__213);

  /* "table_extraction/utils_table_extraction.pyx":1282
 * 
 *     @staticmethod
 *     def is_rect_divide_text_boxes(bounding_rect, text_boxes, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally text boxes
 */
  __pyx_tuple__214 = PyTuple_Pack(7, __pyx_n_s_bounding_rect, __pyx_n_s_text_boxes, __pyx_n_s_expand_size, __pyx_n_s_overlap_percent, __pyx_n_s_cnt, __pyx_n_s_OVERLAP_SIZE, __pyx_n_s_text_box); if (unlikely(!__pyx_tuple__214)) __PYX_ERR(0, 1282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__214);
  __Pyx_GIVEREF(__pyx_tuple__214);
  __pyx_codeobj__215 = (PyObject*)__Pyx_PyCode_New(5, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__214, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_rect_divide_text_boxes, 1282, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__215)) __PYX_ERR(0, 1282, __pyx_L1_error)
  __pyx_tuple__216 = PyTuple_Pack(3, ((PyObject *)__pyx_int_10), ((PyObject *)__pyx_int_30), ((PyObject *)__pyx_int_3)); if (unlikely(!__pyx_tuple__216)) __PYX_ERR(0, 1282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__216);
  __Pyx_GIVEREF(__pyx_tuple__216);

  /* "table_extraction/utils_table_extraction.pyx":1303
 * 
 *     @staticmethod
 *     def h_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */
  __pyx_tuple__217 = PyTuple_Pack(13, __pyx_n_s_line, __pyx_n_s_rect, __pyx_n_s_percent, __pyx_n_s_line_start_x, __pyx_n_s_line_start_y, __pyx_n_s_line_end_x, __pyx_n_s_line_end_y, __pyx_n_s_rect_start_x, __pyx_n_s_rect_end_x, __pyx_n_s_rect_start_y, __pyx_n_s_rect_end_y, __pyx_n_s_rect_w, __pyx_n_s_rect_h); if (unlikely(!__pyx_tuple__217)) __PYX_ERR(0, 1303, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__217);
  __Pyx_GIVEREF(__pyx_tuple__217);
  __pyx_codeobj__218 = (PyObject*)__Pyx_PyCode_New(3, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__217, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_h_line_overlap_rect, 1303, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__218)) __PYX_ERR(0, 1303, __pyx_L1_error)
  __pyx_tuple__219 = PyTuple_Pack(1, ((PyObject *)__pyx_int_50)); if (unlikely(!__pyx_tuple__219)) __PYX_ERR(0, 1303, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__219);
  __Pyx_GIVEREF(__pyx_tuple__219);

  /* "table_extraction/utils_table_extraction.pyx":1334
 * 
 *     @staticmethod
 *     def v_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */
  __pyx_tuple__220 = PyTuple_Pack(13, __pyx_n_s_line, __pyx_n_s_rect, __pyx_n_s_percent, __pyx_n_s_line_start_x, __pyx_n_s_line_start_y, __pyx_n_s_line_end_x, __pyx_n_s_line_end_y, __pyx_n_s_rect_start_x, __pyx_n_s_rect_end_x, __pyx_n_s_rect_start_y, __pyx_n_s_rect_end_y, __pyx_n_s_rect_w, __pyx_n_s_rect_h); if (unlikely(!__pyx_tuple__220)) __PYX_ERR(0, 1334, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__220);
  __Pyx_GIVEREF(__pyx_tuple__220);
  __pyx_codeobj__221 = (PyObject*)__Pyx_PyCode_New(3, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__220, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_v_line_overlap_rect, 1334, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__221)) __PYX_ERR(0, 1334, __pyx_L1_error)
  __pyx_tuple__222 = PyTuple_Pack(1, ((PyObject *)__pyx_int_50)); if (unlikely(!__pyx_tuple__222)) __PYX_ERR(0, 1334, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__222);
  __Pyx_GIVEREF(__pyx_tuple__222);

  /* "table_extraction/utils_table_extraction.pyx":1367
 * 
 *     @staticmethod
 *     def rect_overlap_two_rects(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Get rect overlap two rects
 *         """
 */
  __pyx_tuple__223 = PyTuple_Pack(4, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_x, __pyx_n_s_y); if (unlikely(!__pyx_tuple__223)) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__223);
  __Pyx_GIVEREF(__pyx_tuple__223);
  __pyx_codeobj__224 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__223, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_overlap_two_rects, 1367, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__224)) __PYX_ERR(0, 1367, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1378
 * 
 *     @staticmethod
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):             # <<<<<<<<<<<<<<
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 */
  __pyx_tuple__225 = PyTuple_Pack(5, __pyx_n_s_a_line, __pyx_n_s_b_line, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_lines); if (unlikely(!__pyx_tuple__225)) __PYX_ERR(0, 1378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__225);
  __Pyx_GIVEREF(__pyx_tuple__225);
  __pyx_codeobj__226 = (PyObject*)__Pyx_PyCode_New(4, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__225, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_overlap_line, 1378, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__226)) __PYX_ERR(0, 1378, __pyx_L1_error)
  __pyx_tuple__227 = PyTuple_Pack(1, ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__227)) __PYX_ERR(0, 1378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__227);
  __Pyx_GIVEREF(__pyx_tuple__227);

  /* "table_extraction/utils_table_extraction.pyx":1397
 * 
 *     @staticmethod
 *     def bounding_rect(rects):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains all rects
 *         """
 */
  __pyx_tuple__228 = PyTuple_Pack(7, __pyx_n_s_rects, __pyx_n_s_points, __pyx_n_s_rect, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__228)) __PYX_ERR(0, 1397, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__228);
  __Pyx_GIVEREF(__pyx_tuple__228);
  __pyx_codeobj__229 = (PyObject*)__Pyx_PyCode_New(1, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__228, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_bounding_rect, 1397, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__229)) __PYX_ERR(0, 1397, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1408
 * 
 *     @staticmethod
 *     def bounding_rect_lines(rect, lines):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains rect and all lines
 *         """
 */
  __pyx_tuple__230 = PyTuple_Pack(8, __pyx_n_s_rect, __pyx_n_s_lines, __pyx_n_s_points, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_line); if (unlikely(!__pyx_tuple__230)) __PYX_ERR(0, 1408, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__230);
  __Pyx_GIVEREF(__pyx_tuple__230);
  __pyx_codeobj__231 = (PyObject*)__Pyx_PyCode_New(2, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__230, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_bounding_rect_lines, 1408, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__231)) __PYX_ERR(0, 1408, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1424
 * 
 *     @staticmethod
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):             # <<<<<<<<<<<<<<
 *         points = []
 *         points.append(virtual_line.start_point)
 */
  __pyx_tuple__232 = PyTuple_Pack(4, __pyx_n_s_virtual_line, __pyx_n_s_real_line, __pyx_n_s_orientation, __pyx_n_s_points); if (unlikely(!__pyx_tuple__232)) __PYX_ERR(0, 1424, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__232);
  __Pyx_GIVEREF(__pyx_tuple__232);
  __pyx_codeobj__233 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__232, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_bounding_lines_virtual_line_real, 1424, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__233)) __PYX_ERR(0, 1424, __pyx_L1_error)
  __pyx_tuple__234 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_v)); if (unlikely(!__pyx_tuple__234)) __PYX_ERR(0, 1424, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__234);
  __Pyx_GIVEREF(__pyx_tuple__234);

  /* "table_extraction/utils_table_extraction.pyx":1439
 * 
 *     @staticmethod
 *     def external_rects(image_size, rects):             # <<<<<<<<<<<<<<
 *         """Group overlapping boxes and return all external rects
 *         """
 */
  __pyx_tuple__235 = PyTuple_Pack(5, __pyx_n_s_image_size, __pyx_n_s_rects, __pyx_n_s_blank_image, __pyx_n_s_contours, __pyx_n_s_c); if (unlikely(!__pyx_tuple__235)) __PYX_ERR(0, 1439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__235);
  __Pyx_GIVEREF(__pyx_tuple__235);
  __pyx_codeobj__236 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__235, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_external_rects, 1439, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__236)) __PYX_ERR(0, 1439, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1454
 * 
 *     @staticmethod
 *     def outside_rects(rects):             # <<<<<<<<<<<<<<
 *         """Get outside rects
 *         """
 */
  __pyx_tuple__237 = PyTuple_Pack(7, __pyx_n_s_rects, __pyx_n_s_max_sort_f, __pyx_n_s_max_sort_f, __pyx_n_s_outside_boxes, __pyx_n_s_i, __pyx_n_s_src_rect, __pyx_n_s_dst_rect); if (unlikely(!__pyx_tuple__237)) __PYX_ERR(0, 1454, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__237);
  __Pyx_GIVEREF(__pyx_tuple__237);
  __pyx_codeobj__238 = (PyObject*)__Pyx_PyCode_New(1, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__237, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_outside_rects, 1454, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__238)) __PYX_ERR(0, 1454, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1471
 * 
 *     @staticmethod
 *     def convert_box_to_line(box):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 */
  __pyx_tuple__239 = PyTuple_Pack(10, __pyx_n_s_box, __pyx_n_s_Line, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_width, __pyx_n_s_orientation, __pyx_n_s_start_point, __pyx_n_s_end_point); if (unlikely(!__pyx_tuple__239)) __PYX_ERR(0, 1471, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__239);
  __Pyx_GIVEREF(__pyx_tuple__239);
  __pyx_codeobj__240 = (PyObject*)__Pyx_PyCode_New(1, 0, 10, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__239, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_convert_box_to_line, 1471, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__240)) __PYX_ERR(0, 1471, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1487
 * 
 *     @staticmethod
 *     def convert_line_to_box(line, threshold=1, orientation='v'):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */
  __pyx_tuple__241 = PyTuple_Pack(7, __pyx_n_s_line, __pyx_n_s_threshold, __pyx_n_s_orientation, __pyx_n_s_x1, __pyx_n_s_y1, __pyx_n_s_x2, __pyx_n_s_y2); if (unlikely(!__pyx_tuple__241)) __PYX_ERR(0, 1487, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__241);
  __Pyx_GIVEREF(__pyx_tuple__241);
  __pyx_codeobj__242 = (PyObject*)__Pyx_PyCode_New(3, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__241, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_convert_line_to_box, 1487, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__242)) __PYX_ERR(0, 1487, __pyx_L1_error)
  __pyx_tuple__243 = PyTuple_Pack(2, ((PyObject *)__pyx_int_1), ((PyObject*)__pyx_n_s_v)); if (unlikely(!__pyx_tuple__243)) __PYX_ERR(0, 1487, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__243);
  __Pyx_GIVEREF(__pyx_tuple__243);

  /* "table_extraction/utils_table_extraction.pyx":1496
 * 
 *     @staticmethod
 *     def fill_rects(image, color=(255, 255, 255)):             # <<<<<<<<<<<<<<
 *         """Fill all rects in the input image with the color
 *         """
 */
  __pyx_tuple__244 = PyTuple_Pack(10, __pyx_n_s_image, __pyx_n_s_color, __pyx_n_s_contours, __pyx_n_s_rects, __pyx_n_s_rect, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_c); if (unlikely(!__pyx_tuple__244)) __PYX_ERR(0, 1496, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__244);
  __Pyx_GIVEREF(__pyx_tuple__244);
  __pyx_codeobj__245 = (PyObject*)__Pyx_PyCode_New(2, 0, 10, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__244, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_fill_rects, 1496, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__245)) __PYX_ERR(0, 1496, __pyx_L1_error)
  __pyx_tuple__246 = PyTuple_Pack(1, ((PyObject*)__pyx_tuple__9)); if (unlikely(!__pyx_tuple__246)) __PYX_ERR(0, 1496, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__246);
  __Pyx_GIVEREF(__pyx_tuple__246);

  /* "table_extraction/utils_table_extraction.pyx":1509
 * 
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):             # <<<<<<<<<<<<<<
 *         for rects in all_rects:
 *             if rect in rects:
 */
  __pyx_tuple__247 = PyTuple_Pack(3, __pyx_n_s_rect, __pyx_n_s_all_rects, __pyx_n_s_rects); if (unlikely(!__pyx_tuple__247)) __PYX_ERR(0, 1509, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__247);
  __Pyx_GIVEREF(__pyx_tuple__247);
  __pyx_codeobj__248 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__247, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_in_list, 1509, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__248)) __PYX_ERR(0, 1509, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1516
 * 
 *     @staticmethod
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):             # <<<<<<<<<<<<<<
 *         line_list = []
 *         for line in lines:
 */
  __pyx_tuple__249 = PyTuple_Pack(7, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_lines, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_line_list, __pyx_n_s_line); if (unlikely(!__pyx_tuple__249)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__249);
  __Pyx_GIVEREF(__pyx_tuple__249);
  __pyx_codeobj__250 = (PyObject*)__Pyx_PyCode_New(5, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__249, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_between_two_rects, 1516, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__250)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __pyx_tuple__251 = PyTuple_Pack(2, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_15)); if (unlikely(!__pyx_tuple__251)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__251);
  __Pyx_GIVEREF(__pyx_tuple__251);

  /* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */
  __pyx_tuple__252 = PyTuple_Pack(9, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_rects, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_return_rects, __pyx_n_s_f_between, __pyx_n_s_rect_list, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__252)) __PYX_ERR(0, 1526, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__252);
  __Pyx_GIVEREF(__pyx_tuple__252);
  __pyx_codeobj__253 = (PyObject*)__Pyx_PyCode_New(6, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__252, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_between_two_rects, 1526, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__253)) __PYX_ERR(0, 1526, __pyx_L1_error)
  __pyx_tuple__254 = PyTuple_Pack(3, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_0), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__254)) __PYX_ERR(0, 1526, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__254);
  __Pyx_GIVEREF(__pyx_tuple__254);

  /* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */
  __pyx_tuple__255 = PyTuple_Pack(8, __pyx_n_s_src_rect, __pyx_n_s_rects, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_return_rects, __pyx_n_s_f_under, __pyx_n_s_rect_list, __pyx_n_s_dst_rect); if (unlikely(!__pyx_tuple__255)) __PYX_ERR(0, 1546, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__255);
  __Pyx_GIVEREF(__pyx_tuple__255);
  __pyx_codeobj__256 = (PyObject*)__Pyx_PyCode_New(5, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__255, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rects_under_rect, 1546, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__256)) __PYX_ERR(0, 1546, __pyx_L1_error)
  __pyx_tuple__257 = PyTuple_Pack(3, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_0), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__257)) __PYX_ERR(0, 1546, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__257);
  __Pyx_GIVEREF(__pyx_tuple__257);

  /* "table_extraction/utils_table_extraction.pyx":1564
 * 
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):             # <<<<<<<<<<<<<<
 *         for alignment in alignments:
 *             if alignment in col_alignments:
 */
  __pyx_tuple__258 = PyTuple_Pack(3, __pyx_n_s_col_alignments, __pyx_n_s_alignments, __pyx_n_s_alignment); if (unlikely(!__pyx_tuple__258)) __PYX_ERR(0, 1564, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__258);
  __Pyx_GIVEREF(__pyx_tuple__258);
  __pyx_codeobj__259 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__258, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_alignments_contain, 1564, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__259)) __PYX_ERR(0, 1564, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1571
 * 
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:
 */
  __pyx_tuple__260 = PyTuple_Pack(3, __pyx_n_s_idx, __pyx_n_s_content_blocks, __pyx_n_s_content_block); if (unlikely(!__pyx_tuple__260)) __PYX_ERR(0, 1571, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__260);
  __Pyx_GIVEREF(__pyx_tuple__260);
  __pyx_codeobj__261 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__260, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_content_block_by_id, 1571, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__261)) __PYX_ERR(0, 1571, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1577
 * 
 *     @staticmethod
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625             # <<<<<<<<<<<<<<
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]
 */
  __pyx_tuple__262 = PyTuple_Pack(8, __pyx_n_s_content_blocks, __pyx_n_s_text_stats_dict, __pyx_n_s_ave_area, __pyx_n_s_ave_w, __pyx_n_s_ave_h, __pyx_n_s_noise_blocks, __pyx_n_s_content_block, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__262)) __PYX_ERR(0, 1577, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__262);
  __Pyx_GIVEREF(__pyx_tuple__262);
  __pyx_codeobj__263 = (PyObject*)__Pyx_PyCode_New(2, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__262, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_noise_content_blocks, 1577, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__263)) __PYX_ERR(0, 1577, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1590
 * 
 *     @staticmethod
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 */
  __pyx_tuple__264 = PyTuple_Pack(12, __pyx_n_s_a_content_block, __pyx_n_s_b_content_block, __pyx_n_s_content_blocks, __pyx_n_s_boxes, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_bounding_rect, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_content_block, __pyx_n_s_rect, __pyx_n_s_box); if (unlikely(!__pyx_tuple__264)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__264);
  __Pyx_GIVEREF(__pyx_tuple__264);
  __pyx_codeobj__265 = (PyObject*)__Pyx_PyCode_New(5, 0, 12, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__264, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_has_box_between_content_blocks, 1590, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__265)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __pyx_tuple__266 = PyTuple_Pack(1, ((PyObject*)__pyx_n_s_horizontal)); if (unlikely(!__pyx_tuple__266)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__266);
  __Pyx_GIVEREF(__pyx_tuple__266);

  /* "table_extraction/utils_table_extraction.pyx":1644
 *         return False
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_tuple__267 = PyTuple_Pack(4, __pyx_n_s_image, __pyx_n_s_group, __pyx_n_s_color, __pyx_n_s_thickness); if (unlikely(!__pyx_tuple__267)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__267);
  __Pyx_GIVEREF(__pyx_tuple__267);
  __pyx_codeobj__268 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__267, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_group, 1644, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__268)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __pyx_tuple__269 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__269)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__269);
  __Pyx_GIVEREF(__pyx_tuple__269);

  /* "table_extraction/utils_table_extraction.pyx":1652
 * 
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 */
  __pyx_tuple__270 = PyTuple_Pack(5, __pyx_n_s_image, __pyx_n_s_groups, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_group); if (unlikely(!__pyx_tuple__270)) __PYX_ERR(0, 1652, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__270);
  __Pyx_GIVEREF(__pyx_tuple__270);
  __pyx_codeobj__271 = (PyObject*)__Pyx_PyCode_New(4, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__270, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_groups, 1652, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__271)) __PYX_ERR(0, 1652, __pyx_L1_error)
  __pyx_tuple__272 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__272)) __PYX_ERR(0, 1652, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__272);
  __Pyx_GIVEREF(__pyx_tuple__272);

  /* "table_extraction/utils_table_extraction.pyx":1658
 * 
 *     @staticmethod
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_tuple__273 = PyTuple_Pack(8, __pyx_n_s_image, __pyx_n_s_content_block, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__273)) __PYX_ERR(0, 1658, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__273);
  __Pyx_GIVEREF(__pyx_tuple__273);
  __pyx_codeobj__274 = (PyObject*)__Pyx_PyCode_New(4, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__273, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_content_block, 1658, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__274)) __PYX_ERR(0, 1658, __pyx_L1_error)
  __pyx_tuple__275 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__275)) __PYX_ERR(0, 1658, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__275);
  __Pyx_GIVEREF(__pyx_tuple__275);

  /* "table_extraction/utils_table_extraction.pyx":1668
 * 
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 */
  __pyx_tuple__276 = PyTuple_Pack(5, __pyx_n_s_image, __pyx_n_s_content_blocks, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_content_block); if (unlikely(!__pyx_tuple__276)) __PYX_ERR(0, 1668, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__276);
  __Pyx_GIVEREF(__pyx_tuple__276);
  __pyx_codeobj__277 = (PyObject*)__Pyx_PyCode_New(4, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__276, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_content_blocks, 1668, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__277)) __PYX_ERR(0, 1668, __pyx_L1_error)
  __pyx_tuple__278 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__278)) __PYX_ERR(0, 1668, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__278);
  __Pyx_GIVEREF(__pyx_tuple__278);

  /* "table_extraction/utils_table_extraction.pyx":1674
 * 
 *     @staticmethod
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_tuple__279 = PyTuple_Pack(8, __pyx_n_s_image, __pyx_n_s_box, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__279)) __PYX_ERR(0, 1674, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__279);
  __Pyx_GIVEREF(__pyx_tuple__279);
  __pyx_codeobj__280 = (PyObject*)__Pyx_PyCode_New(4, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__279, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_box, 1674, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__280)) __PYX_ERR(0, 1674, __pyx_L1_error)
  __pyx_tuple__281 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__281)) __PYX_ERR(0, 1674, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__281);
  __Pyx_GIVEREF(__pyx_tuple__281);

  /* "table_extraction/utils_table_extraction.pyx":1683
 * 
 *     @staticmethod
 *     def fill_box(image, box, color=(255, 0, 255)):             # <<<<<<<<<<<<<<
 *         '''
 *         fill bounding box
 */
  __pyx_tuple__282 = PyTuple_Pack(7, __pyx_n_s_image, __pyx_n_s_box, __pyx_n_s_color, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__282)) __PYX_ERR(0, 1683, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__282);
  __Pyx_GIVEREF(__pyx_tuple__282);
  __pyx_codeobj__283 = (PyObject*)__Pyx_PyCode_New(3, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__282, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_fill_box, 1683, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__283)) __PYX_ERR(0, 1683, __pyx_L1_error)
  __pyx_tuple__284 = PyTuple_Pack(1, ((PyObject*)__pyx_tuple__12)); if (unlikely(!__pyx_tuple__284)) __PYX_ERR(0, 1683, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__284);
  __Pyx_GIVEREF(__pyx_tuple__284);

  /* "table_extraction/utils_table_extraction.pyx":1692
 * 
 *     @staticmethod
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_tuple__285 = PyTuple_Pack(5, __pyx_n_s_image, __pyx_n_s_boxes, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_box); if (unlikely(!__pyx_tuple__285)) __PYX_ERR(0, 1692, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__285);
  __Pyx_GIVEREF(__pyx_tuple__285);
  __pyx_codeobj__286 = (PyObject*)__Pyx_PyCode_New(4, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__285, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_boxes, 1692, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__286)) __PYX_ERR(0, 1692, __pyx_L1_error)
  __pyx_tuple__287 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__287)) __PYX_ERR(0, 1692, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__287);
  __Pyx_GIVEREF(__pyx_tuple__287);

  /* "table_extraction/utils_table_extraction.pyx":1701
 * 
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 */
  __pyx_tuple__288 = PyTuple_Pack(4, __pyx_n_s_image, __pyx_n_s_boxes, __pyx_n_s_color, __pyx_n_s_box); if (unlikely(!__pyx_tuple__288)) __PYX_ERR(0, 1701, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__288);
  __Pyx_GIVEREF(__pyx_tuple__288);
  __pyx_codeobj__289 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__288, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_fill_boxes, 1701, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__289)) __PYX_ERR(0, 1701, __pyx_L1_error)
  __pyx_tuple__290 = PyTuple_Pack(1, ((PyObject*)__pyx_tuple__13)); if (unlikely(!__pyx_tuple__290)) __PYX_ERR(0, 1701, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__290);
  __Pyx_GIVEREF(__pyx_tuple__290);

  /* "table_extraction/utils_table_extraction.pyx":1707
 * 
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image
 */
  __pyx_tuple__291 = PyTuple_Pack(4, __pyx_n_s_image, __pyx_n_s_line, __pyx_n_s_color, __pyx_n_s_thickness); if (unlikely(!__pyx_tuple__291)) __PYX_ERR(0, 1707, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__291);
  __Pyx_GIVEREF(__pyx_tuple__291);
  __pyx_codeobj__292 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__291, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_line, 1707, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__292)) __PYX_ERR(0, 1707, __pyx_L1_error)
  __pyx_tuple__293 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__293)) __PYX_ERR(0, 1707, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__293);
  __Pyx_GIVEREF(__pyx_tuple__293);

  /* "table_extraction/utils_table_extraction.pyx":1712
 * 
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 */
  __pyx_tuple__294 = PyTuple_Pack(5, __pyx_n_s_image, __pyx_n_s_lines, __pyx_n_s_color, __pyx_n_s_thickness, __pyx_n_s_line); if (unlikely(!__pyx_tuple__294)) __PYX_ERR(0, 1712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__294);
  __Pyx_GIVEREF(__pyx_tuple__294);
  __pyx_codeobj__295 = (PyObject*)__Pyx_PyCode_New(4, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__294, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_lines, 1712, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__295)) __PYX_ERR(0, 1712, __pyx_L1_error)
  __pyx_tuple__296 = PyTuple_Pack(2, ((PyObject*)__pyx_tuple__12), ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__296)) __PYX_ERR(0, 1712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__296);
  __Pyx_GIVEREF(__pyx_tuple__296);

  /* "table_extraction/utils_table_extraction.pyx":1718
 * 
 *     @staticmethod
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):             # <<<<<<<<<<<<<<
 * 
 *         if table.left_border is not None:
 */
  __pyx_tuple__297 = PyTuple_Pack(8, __pyx_n_s_image, __pyx_n_s_table, __pyx_n_s_border_color, __pyx_n_s_line_color, __pyx_n_s_divider_line_color, __pyx_n_s_thickness, __pyx_n_s_draw_virtual_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__297)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__297);
  __Pyx_GIVEREF(__pyx_tuple__297);
  __pyx_codeobj__298 = (PyObject*)__Pyx_PyCode_New(7, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__297, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_draw_table, 1718, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__298)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __pyx_tuple__299 = PyTuple_Pack(5, ((PyObject*)__pyx_tuple__13), ((PyObject*)__pyx_tuple__14), ((PyObject*)__pyx_tuple__15), ((PyObject *)__pyx_int_2), ((PyObject *)Py_True)); if (unlikely(!__pyx_tuple__299)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__299);
  __Pyx_GIVEREF(__pyx_tuple__299);

  /* "table_extraction/utils_table_extraction.pyx":1755
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_percent(a_rect, b_rect, threshold=2, min_rect=False):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */
  __pyx_tuple__300 = PyTuple_Pack(23, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_threshold, __pyx_n_s_min_rect, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_a_rect_area, __pyx_n_s_a_rect_x1, __pyx_n_s_a_rect_y1, __pyx_n_s_a_rect_x2, __pyx_n_s_a_rect_y2, __pyx_n_s_b_rect_area, __pyx_n_s_b_rect_x1, __pyx_n_s_b_rect_y1, __pyx_n_s_b_rect_x2, __pyx_n_s_b_rect_y2, __pyx_n_s_dx, __pyx_n_s_dy, __pyx_n_s_overlap_area, __pyx_n_s_tmp_area, __pyx_n_s_overlap_ratio); if (unlikely(!__pyx_tuple__300)) __PYX_ERR(0, 1755, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__300);
  __Pyx_GIVEREF(__pyx_tuple__300);
  __pyx_codeobj__301 = (PyObject*)__Pyx_PyCode_New(4, 0, 23, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__300, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_overlap_rect_with_percent, 1755, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__301)) __PYX_ERR(0, 1755, __pyx_L1_error)
  __pyx_tuple__302 = PyTuple_Pack(2, ((PyObject *)__pyx_int_2), ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__302)) __PYX_ERR(0, 1755, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__302);
  __Pyx_GIVEREF(__pyx_tuple__302);

  /* "table_extraction/utils_table_extraction.pyx":1787
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_width_height(a_rect, b_rect, width, height):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */
  __pyx_tuple__303 = PyTuple_Pack(18, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_width, __pyx_n_s_height, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_a_rect_x1, __pyx_n_s_a_rect_y1, __pyx_n_s_a_rect_x2, __pyx_n_s_a_rect_y2, __pyx_n_s_b_rect_x1, __pyx_n_s_b_rect_y1, __pyx_n_s_b_rect_x2, __pyx_n_s_b_rect_y2, __pyx_n_s_dx, __pyx_n_s_dy); if (unlikely(!__pyx_tuple__303)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__303);
  __Pyx_GIVEREF(__pyx_tuple__303);
  __pyx_codeobj__304 = (PyObject*)__Pyx_PyCode_New(4, 0, 18, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__303, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_overlap_rect_with_width_hei, 1787, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__304)) __PYX_ERR(0, 1787, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1806
 * 
 *     @staticmethod
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):             # <<<<<<<<<<<<<<
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 */
  __pyx_tuple__305 = PyTuple_Pack(11, __pyx_n_s_a_rect, __pyx_n_s_b_rect, __pyx_n_s_threshold, __pyx_n_s_a_rect_x, __pyx_n_s_a_rect_y, __pyx_n_s_a_rect_w, __pyx_n_s_a_rect_h, __pyx_n_s_b_rect_x, __pyx_n_s_b_rect_y, __pyx_n_s_b_rect_w, __pyx_n_s_b_rect_h); if (unlikely(!__pyx_tuple__305)) __PYX_ERR(0, 1806, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__305);
  __Pyx_GIVEREF(__pyx_tuple__305);
  __pyx_codeobj__306 = (PyObject*)__Pyx_PyCode_New(3, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__305, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_rect_can_be_merged, 1806, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__306)) __PYX_ERR(0, 1806, __pyx_L1_error)
  __pyx_tuple__307 = PyTuple_Pack(1, ((PyObject *)__pyx_int_50)); if (unlikely(!__pyx_tuple__307)) __PYX_ERR(0, 1806, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__307);
  __Pyx_GIVEREF(__pyx_tuple__307);

  /* "table_extraction/utils_table_extraction.pyx":1819
 * 
 *     @staticmethod
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: the horizontal lines in the image
 */
  __pyx_tuple__308 = PyTuple_Pack(7, __pyx_n_s_h_lines, __pyx_n_s_v_lines, __pyx_n_s_threshold_v, __pyx_n_s_threshold_h, __pyx_n_s_v_line, __pyx_n_s_h_line, __pyx_n_s_intersection_point); if (unlikely(!__pyx_tuple__308)) __PYX_ERR(0, 1819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__308);
  __Pyx_GIVEREF(__pyx_tuple__308);
  __pyx_codeobj__309 = (PyObject*)__Pyx_PyCode_New(4, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__308, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_extend_line_at_corner, 1819, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__309)) __PYX_ERR(0, 1819, __pyx_L1_error)
  __pyx_tuple__310 = PyTuple_Pack(2, ((PyObject *)__pyx_int_10), ((PyObject *)__pyx_int_10)); if (unlikely(!__pyx_tuple__310)) __PYX_ERR(0, 1819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__310);
  __Pyx_GIVEREF(__pyx_tuple__310);

  /* "table_extraction/utils_table_extraction.pyx":1873
 * 
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 */
  __pyx_tuple__311 = PyTuple_Pack(3, __pyx_n_s_box, __pyx_n_s_line, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__311)) __PYX_ERR(0, 1873, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__311);
  __Pyx_GIVEREF(__pyx_tuple__311);
  __pyx_codeobj__312 = (PyObject*)__Pyx_PyCode_New(3, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__311, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_belong_with_box, 1873, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__312)) __PYX_ERR(0, 1873, __pyx_L1_error)
  __pyx_tuple__313 = PyTuple_Pack(1, ((PyObject*)__pyx_float_0_8)); if (unlikely(!__pyx_tuple__313)) __PYX_ERR(0, 1873, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__313);
  __Pyx_GIVEREF(__pyx_tuple__313);

  /* "table_extraction/utils_table_extraction.pyx":1880
 * 
 *     @staticmethod
 *     def reset_connect_at_line_corner(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */
  __pyx_tuple__314 = PyTuple_Pack(2, __pyx_n_s_lines, __pyx_n_s_line); if (unlikely(!__pyx_tuple__314)) __PYX_ERR(0, 1880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__314);
  __Pyx_GIVEREF(__pyx_tuple__314);
  __pyx_codeobj__315 = (PyObject*)__Pyx_PyCode_New(1, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__314, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_reset_connect_at_line_corner, 1880, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__315)) __PYX_ERR(0, 1880, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1891
 * 
 *     @staticmethod
 *     def expand_image(image, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param image:
 */
  __pyx_tuple__316 = PyTuple_Pack(3, __pyx_n_s_image, __pyx_n_s_padding_size, __pyx_n_s_expanded_image); if (unlikely(!__pyx_tuple__316)) __PYX_ERR(0, 1891, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__316);
  __Pyx_GIVEREF(__pyx_tuple__316);
  __pyx_codeobj__317 = (PyObject*)__Pyx_PyCode_New(2, 0, 3, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__316, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_expand_image, 1891, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__317)) __PYX_ERR(0, 1891, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1902
 * 
 *     @staticmethod
 *     def remove_padding_rect(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */
  __pyx_tuple__318 = PyTuple_Pack(9, __pyx_n_s_rect, __pyx_n_s_image_shape, __pyx_n_s_padding_size, __pyx_n_s_h_image, __pyx_n_s_w_image, __pyx_n_s_x1, __pyx_n_s_y1, __pyx_n_s_x2, __pyx_n_s_y2); if (unlikely(!__pyx_tuple__318)) __PYX_ERR(0, 1902, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__318);
  __Pyx_GIVEREF(__pyx_tuple__318);
  __pyx_codeobj__319 = (PyObject*)__Pyx_PyCode_New(3, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__318, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_padding_rect, 1902, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__319)) __PYX_ERR(0, 1902, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1918
 * 
 *     @staticmethod
 *     def line_at_border_image(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */
  __pyx_tuple__320 = PyTuple_Pack(9, __pyx_n_s_rect, __pyx_n_s_image_shape, __pyx_n_s_padding_size, __pyx_n_s_h_image, __pyx_n_s_w_image, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h); if (unlikely(!__pyx_tuple__320)) __PYX_ERR(0, 1918, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__320);
  __Pyx_GIVEREF(__pyx_tuple__320);
  __pyx_codeobj__321 = (PyObject*)__Pyx_PyCode_New(3, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__320, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_line_at_border_image, 1918, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__321)) __PYX_ERR(0, 1918, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1935
 * 
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):             # <<<<<<<<<<<<<<
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 */
  __pyx_tuple__322 = PyTuple_Pack(4, __pyx_n_s_a_point, __pyx_n_s_b_point, __pyx_n_s_orientation, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__322)) __PYX_ERR(0, 1935, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__322);
  __Pyx_GIVEREF(__pyx_tuple__322);
  __pyx_codeobj__323 = (PyObject*)__Pyx_PyCode_New(4, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__322, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_check_two_points_in_same_line, 1935, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__323)) __PYX_ERR(0, 1935, __pyx_L1_error)
  __pyx_tuple__324 = PyTuple_Pack(1, ((PyObject *)__pyx_int_20)); if (unlikely(!__pyx_tuple__324)) __PYX_ERR(0, 1935, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__324);
  __Pyx_GIVEREF(__pyx_tuple__324);

  /* "table_extraction/utils_table_extraction.pyx":1943
 * 
 *     @staticmethod
 *     def real_text_block(text_box, threshold=500):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_box:
 */
  __pyx_tuple__325 = PyTuple_Pack(2, __pyx_n_s_text_box, __pyx_n_s_threshold); if (unlikely(!__pyx_tuple__325)) __PYX_ERR(0, 1943, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__325);
  __Pyx_GIVEREF(__pyx_tuple__325);
  __pyx_codeobj__326 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__325, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_real_text_block, 1943, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__326)) __PYX_ERR(0, 1943, __pyx_L1_error)
  __pyx_tuple__327 = PyTuple_Pack(1, ((PyObject *)__pyx_int_500)); if (unlikely(!__pyx_tuple__327)) __PYX_ERR(0, 1943, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__327);
  __Pyx_GIVEREF(__pyx_tuple__327);

  /* "table_extraction/utils_table_extraction.pyx":1953
 * 
 *     @staticmethod
 *     def remove_dot_lines_noise(dot_rects, text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param dot_rects:
 */
  __pyx_tuple__328 = PyTuple_Pack(7, __pyx_n_s_dot_rects, __pyx_n_s_text_blocks, __pyx_n_s_invalid_dots, __pyx_n_s_dot_rect, __pyx_n_s_count_down, __pyx_n_s_text_block, __pyx_n_s_invalid_dot); if (unlikely(!__pyx_tuple__328)) __PYX_ERR(0, 1953, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__328);
  __Pyx_GIVEREF(__pyx_tuple__328);
  __pyx_codeobj__329 = (PyObject*)__Pyx_PyCode_New(2, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__328, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_dot_lines_noise, 1953, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__329)) __PYX_ERR(0, 1953, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1978
 * 
 *     @staticmethod
 *     def white_percentage(image):             # <<<<<<<<<<<<<<
 *         """
 *         :return: the white pixel ratio in the image.
 */
  __pyx_tuple__330 = PyTuple_Pack(2, __pyx_n_s_image, __pyx_n_s_white_pixels); if (unlikely(!__pyx_tuple__330)) __PYX_ERR(0, 1978, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__330);
  __Pyx_GIVEREF(__pyx_tuple__330);
  __pyx_codeobj__331 = (PyObject*)__Pyx_PyCode_New(1, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__330, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_white_percentage, 1978, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__331)) __PYX_ERR(0, 1978, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1986
 * 
 *     @staticmethod
 *     def width_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_tuple__332 = PyTuple_Pack(1, __pyx_n_s_line); if (unlikely(!__pyx_tuple__332)) __PYX_ERR(0, 1986, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__332);
  __Pyx_GIVEREF(__pyx_tuple__332);
  __pyx_codeobj__333 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__332, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_width_line, 1986, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__333)) __PYX_ERR(0, 1986, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":1994
 * 
 *     @staticmethod
 *     def height_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_tuple__334 = PyTuple_Pack(1, __pyx_n_s_line); if (unlikely(!__pyx_tuple__334)) __PYX_ERR(0, 1994, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__334);
  __Pyx_GIVEREF(__pyx_tuple__334);
  __pyx_codeobj__335 = (PyObject*)__Pyx_PyCode_New(1, 0, 1, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__334, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_height_line, 1994, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__335)) __PYX_ERR(0, 1994, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2002
 * 
 *     @staticmethod
 *     def content_block_in_groups(groups, content_block):             # <<<<<<<<<<<<<<
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 */
  __pyx_tuple__336 = PyTuple_Pack(4, __pyx_n_s_groups, __pyx_n_s_content_block, __pyx_n_s_group, __pyx_n_s_cb); if (unlikely(!__pyx_tuple__336)) __PYX_ERR(0, 2002, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__336);
  __Pyx_GIVEREF(__pyx_tuple__336);
  __pyx_codeobj__337 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__336, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_content_block_in_groups, 2002, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__337)) __PYX_ERR(0, 2002, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2012
 * 
 *     @staticmethod
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */
  __pyx_tuple__338 = PyTuple_Pack(17, __pyx_n_s_lines, __pyx_n_s_block_texts, __pyx_n_s_threshold_distance, __pyx_n_s_threshold_deviation, __pyx_n_s_align_center, __pyx_n_s_align_center, __pyx_n_s_underlines, __pyx_n_s_idx, __pyx_n_s_block_text, __pyx_n_s_line, __pyx_n_s_lines_temp, __pyx_n_s_line_checked, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_underline); if (unlikely(!__pyx_tuple__338)) __PYX_ERR(0, 2012, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__338);
  __Pyx_GIVEREF(__pyx_tuple__338);
  __pyx_codeobj__339 = (PyObject*)__Pyx_PyCode_New(4, 0, 17, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__338, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_underline_text, 2012, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__339)) __PYX_ERR(0, 2012, __pyx_L1_error)
  __pyx_tuple__340 = PyTuple_Pack(2, ((PyObject *)__pyx_int_15), ((PyObject *)__pyx_int_20)); if (unlikely(!__pyx_tuple__340)) __PYX_ERR(0, 2012, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__340);
  __Pyx_GIVEREF(__pyx_tuple__340);

  /* "table_extraction/utils_table_extraction.pyx":2076
 * 
 *     @staticmethod
 *     def remove_invalid_signed(h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: horizontal lines
 */
  __pyx_tuple__341 = PyTuple_Pack(7, __pyx_n_s_h_lines, __pyx_n_s_same_horizontal_sign, __pyx_n_s_same_horizontal_sign, __pyx_n_s_invalid_lines, __pyx_n_s_h_line, __pyx_n_s_h_lines_temp, __pyx_n_s_h_line_temp); if (unlikely(!__pyx_tuple__341)) __PYX_ERR(0, 2076, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__341);
  __Pyx_GIVEREF(__pyx_tuple__341);
  __pyx_codeobj__342 = (PyObject*)__Pyx_PyCode_New(1, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__341, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_invalid_signed, 2076, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__342)) __PYX_ERR(0, 2076, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2104
 * 
 *     @staticmethod
 *     def merge_overlap_boxes(boxes, width=2, height=2):             # <<<<<<<<<<<<<<
 *         """
 *         :param boxes:
 */
  __pyx_tuple__343 = PyTuple_Pack(9, __pyx_n_s_boxes, __pyx_n_s_width, __pyx_n_s_height, __pyx_n_s_extend_boxes, __pyx_n_s_i, __pyx_n_s_new_box, __pyx_n_s_j, __pyx_n_s_b_rect, __pyx_n_s_temp_box); if (unlikely(!__pyx_tuple__343)) __PYX_ERR(0, 2104, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__343);
  __Pyx_GIVEREF(__pyx_tuple__343);
  __pyx_codeobj__344 = (PyObject*)__Pyx_PyCode_New(3, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__343, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_overlap_boxes, 2104, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__344)) __PYX_ERR(0, 2104, __pyx_L1_error)
  __pyx_tuple__345 = PyTuple_Pack(2, ((PyObject *)__pyx_int_2), ((PyObject *)__pyx_int_2)); if (unlikely(!__pyx_tuple__345)) __PYX_ERR(0, 2104, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__345);
  __Pyx_GIVEREF(__pyx_tuple__345);

  /* "table_extraction/utils_table_extraction.pyx":2131
 * 
 *     @staticmethod
 *     def merge_two_types_text_blocks(old_text_blocks, new_text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param old_text_blocks: text blocks is detected by Infodio algorithm
 */
  __pyx_tuple__346 = PyTuple_Pack(5, __pyx_n_s_old_text_blocks, __pyx_n_s_new_text_blocks, __pyx_n_s_text_block_rects, __pyx_n_s_old_text_block, __pyx_n_s_new_text_block); if (unlikely(!__pyx_tuple__346)) __PYX_ERR(0, 2131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__346);
  __Pyx_GIVEREF(__pyx_tuple__346);
  __pyx_codeobj__347 = (PyObject*)__Pyx_PyCode_New(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__346, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_two_types_text_blocks, 2131, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__347)) __PYX_ERR(0, 2131, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2156
 * 
 *     @staticmethod
 *     def remove_noise_lines_rect(line_rects, text_block_rects):             # <<<<<<<<<<<<<<
 *         """
 *         :param line_rects: all of the line's position
 */
  __pyx_tuple__348 = PyTuple_Pack(9, __pyx_n_s_line_rects, __pyx_n_s_text_block_rects, __pyx_n_s_invalid_lines, __pyx_n_s_line_rect, __pyx_n_s_line_rect_padding, __pyx_n_s_temp_line_rects, __pyx_n_s_temp_line_rect, __pyx_n_s_text_block_rect, __pyx_n_s_invalid_line); if (unlikely(!__pyx_tuple__348)) __PYX_ERR(0, 2156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__348);
  __Pyx_GIVEREF(__pyx_tuple__348);
  __pyx_codeobj__349 = (PyObject*)__Pyx_PyCode_New(2, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__348, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_remove_noise_lines_rect, 2156, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__349)) __PYX_ERR(0, 2156, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2191
 * 
 *     @staticmethod
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         x1,y1,w,h = rect
 *         x2 = x1 + w
 */
  __pyx_tuple__350 = PyTuple_Pack(9, __pyx_n_s_rect, __pyx_n_s_width_ratio, __pyx_n_s_height_ratio, __pyx_n_s_x1, __pyx_n_s_y1, __pyx_n_s_w, __pyx_n_s_h, __pyx_n_s_x2, __pyx_n_s_y2); if (unlikely(!__pyx_tuple__350)) __PYX_ERR(0, 2191, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__350);
  __Pyx_GIVEREF(__pyx_tuple__350);
  __pyx_codeobj__351 = (PyObject*)__Pyx_PyCode_New(3, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__350, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_convert_rect_to_rect, 2191, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__351)) __PYX_ERR(0, 2191, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2205
 * 
 *     @staticmethod
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 * 
 */
  __pyx_tuple__352 = PyTuple_Pack(4, __pyx_n_s_rects, __pyx_n_s_width_ratio, __pyx_n_s_height_ratio, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__352)) __PYX_ERR(0, 2205, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__352);
  __Pyx_GIVEREF(__pyx_tuple__352);
  __pyx_codeobj__353 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__352, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_convert_rects_to_rects, 2205, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__353)) __PYX_ERR(0, 2205, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2209
 * 
 *     @staticmethod
 *     def extract_line_rect(image, remove_line_at_border=True):             # <<<<<<<<<<<<<<
 *         """
 *         :param image: The image contains horizontal lines or vertical lines.
 */
  __pyx_tuple__354 = PyTuple_Pack(9, __pyx_n_s_image, __pyx_n_s_remove_line_at_border, __pyx_n_s_extract_line_image, __pyx_n_s_image_shape, __pyx_n_s_PADDING_SIZE, __pyx_n_s_contours, __pyx_n_s_rects, __pyx_n_s_c, __pyx_n_s_rect); if (unlikely(!__pyx_tuple__354)) __PYX_ERR(0, 2209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__354);
  __Pyx_GIVEREF(__pyx_tuple__354);
  __pyx_codeobj__355 = (PyObject*)__Pyx_PyCode_New(2, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__354, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_extract_line_rect, 2209, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__355)) __PYX_ERR(0, 2209, __pyx_L1_error)
  __pyx_tuple__356 = PyTuple_Pack(1, ((PyObject *)Py_True)); if (unlikely(!__pyx_tuple__356)) __PYX_ERR(0, 2209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__356);
  __Pyx_GIVEREF(__pyx_tuple__356);

  /* "table_extraction/utils_table_extraction.pyx":2234
 * 
 *     @staticmethod
 *     def is_point_in_line(point, line):             # <<<<<<<<<<<<<<
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 */
  __pyx_tuple__357 = PyTuple_Pack(2, __pyx_n_s_point, __pyx_n_s_line); if (unlikely(!__pyx_tuple__357)) __PYX_ERR(0, 2234, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__357);
  __Pyx_GIVEREF(__pyx_tuple__357);
  __pyx_codeobj__358 = (PyObject*)__Pyx_PyCode_New(2, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__357, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_point_in_line, 2234, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__358)) __PYX_ERR(0, 2234, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2239
 * 
 *     @staticmethod
 *     def is_start_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_tuple__359 = PyTuple_Pack(6, __pyx_n_s_line, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_idx, __pyx_n_s_orig_start_point, __pyx_n_s_start_point); if (unlikely(!__pyx_tuple__359)) __PYX_ERR(0, 2239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__359);
  __Pyx_GIVEREF(__pyx_tuple__359);
  __pyx_codeobj__360 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__359, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_start_point_on_intersection, 2239, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__360)) __PYX_ERR(0, 2239, __pyx_L1_error)
  __pyx_tuple__361 = PyTuple_Pack(2, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__361)) __PYX_ERR(0, 2239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__361);
  __Pyx_GIVEREF(__pyx_tuple__361);

  /* "table_extraction/utils_table_extraction.pyx":2255
 * 
 *     @staticmethod
 *     def is_end_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_tuple__362 = PyTuple_Pack(6, __pyx_n_s_line, __pyx_n_s_orientation, __pyx_n_s_threshold, __pyx_n_s_idx, __pyx_n_s_orig_end_point, __pyx_n_s_end_point); if (unlikely(!__pyx_tuple__362)) __PYX_ERR(0, 2255, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__362);
  __Pyx_GIVEREF(__pyx_tuple__362);
  __pyx_codeobj__363 = (PyObject*)__Pyx_PyCode_New(3, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__362, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_end_point_on_intersection, 2255, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__363)) __PYX_ERR(0, 2255, __pyx_L1_error)
  __pyx_tuple__364 = PyTuple_Pack(2, ((PyObject*)__pyx_n_s_v), ((PyObject *)__pyx_int_0)); if (unlikely(!__pyx_tuple__364)) __PYX_ERR(0, 2255, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__364);
  __Pyx_GIVEREF(__pyx_tuple__364);

  /* "table_extraction/utils_table_extraction.pyx":2271
 * 
 *     @staticmethod
 *     def is_point_far_line(point, line, times=1):             # <<<<<<<<<<<<<<
 *         """
 *         Is the point {times} times as far away from the line
 */
  __pyx_tuple__365 = PyTuple_Pack(4, __pyx_n_s_point, __pyx_n_s_line, __pyx_n_s_times, __pyx_n_s_min_distance); if (unlikely(!__pyx_tuple__365)) __PYX_ERR(0, 2271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__365);
  __Pyx_GIVEREF(__pyx_tuple__365);
  __pyx_codeobj__366 = (PyObject*)__Pyx_PyCode_New(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__365, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_point_far_line, 2271, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__366)) __PYX_ERR(0, 2271, __pyx_L1_error)
  __pyx_tuple__367 = PyTuple_Pack(1, ((PyObject *)__pyx_int_1)); if (unlikely(!__pyx_tuple__367)) __PYX_ERR(0, 2271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__367);
  __Pyx_GIVEREF(__pyx_tuple__367);

  /* "table_extraction/utils_table_extraction.pyx":2285
 * 
 *     @staticmethod
 *     def search_text_by_box(crnn_chars, box): #13968             # <<<<<<<<<<<<<<
 *         """
 *         Search text from crnn_chars by box
 */
  __pyx_tuple__368 = PyTuple_Pack(4, __pyx_n_s_crnn_chars, __pyx_n_s_box, __pyx_n_s_text, __pyx_n_s_crnn_char); if (unlikely(!__pyx_tuple__368)) __PYX_ERR(0, 2285, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__368);
  __Pyx_GIVEREF(__pyx_tuple__368);
  __pyx_codeobj__369 = (PyObject*)__Pyx_PyCode_New(2, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__368, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_search_text_by_box, 2285, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__369)) __PYX_ERR(0, 2285, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2297
 * 
 *     @staticmethod
 *     def merge_single_chars(text_list):             # <<<<<<<<<<<<<<
 *         merge_chars_list = []
 *         searched_ids     = []
 */
  __pyx_tuple__370 = PyTuple_Pack(9, __pyx_n_s_text_list, __pyx_n_s_merge_chars_list, __pyx_n_s_searched_ids, __pyx_n_s_i, __pyx_n_s_src_text, __pyx_n_s_j, __pyx_n_s_dst_text, __pyx_n_s_adj, __pyx_n_s_merge_chars); if (unlikely(!__pyx_tuple__370)) __PYX_ERR(0, 2297, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__370);
  __Pyx_GIVEREF(__pyx_tuple__370);
  __pyx_codeobj__371 = (PyObject*)__Pyx_PyCode_New(1, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__370, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_merge_single_chars, 2297, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__371)) __PYX_ERR(0, 2297, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2321
 * 
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968             # <<<<<<<<<<<<<<
 *         if len(blocks)<=1: #14611
 *             return False
 */
  __pyx_tuple__372 = PyTuple_Pack(13, __pyx_n_s_blocks, __pyx_n_s_crnn_chars, __pyx_n_s_header_regex, __pyx_n_s_text_list, __pyx_n_s_candidate_header_count, __pyx_n_s_span_list, __pyx_n_s_searched_ids, __pyx_n_s_THRESH, __pyx_n_s_regex, __pyx_n_s_i, __pyx_n_s_text, __pyx_n_s_res, __pyx_n_s_block); if (unlikely(!__pyx_tuple__372)) __PYX_ERR(0, 2321, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__372);
  __Pyx_GIVEREF(__pyx_tuple__372);
  __pyx_codeobj__373 = (PyObject*)__Pyx_PyCode_New(3, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__372, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_text_blocks_header_by_header, 2321, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__373)) __PYX_ERR(0, 2321, __pyx_L1_error)

  /* "table_extraction/utils_table_extraction.pyx":2342
 * 
 *     @staticmethod
 *     def align_horizontal(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */
  __pyx_tuple__374 = PyTuple_Pack(11, __pyx_n_s_a_box, __pyx_n_s_b_box, __pyx_n_s_threshold, __pyx_n_s_a_x, __pyx_n_s_a_y, __pyx_n_s_a_w, __pyx_n_s_a_h, __pyx_n_s_b_x, __pyx_n_s_b_y, __pyx_n_s_b_w, __pyx_n_s_b_h); if (unlikely(!__pyx_tuple__374)) __PYX_ERR(0, 2342, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__374);
  __Pyx_GIVEREF(__pyx_tuple__374);
  __pyx_codeobj__375 = (PyObject*)__Pyx_PyCode_New(3, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__374, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_align_horizontal, 2342, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__375)) __PYX_ERR(0, 2342, __pyx_L1_error)
  __pyx_tuple__376 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__376)) __PYX_ERR(0, 2342, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__376);
  __Pyx_GIVEREF(__pyx_tuple__376);

  /* "table_extraction/utils_table_extraction.pyx":2354
 * 
 *     @staticmethod
 *     def align_vertical(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */
  __pyx_tuple__377 = PyTuple_Pack(11, __pyx_n_s_a_box, __pyx_n_s_b_box, __pyx_n_s_threshold, __pyx_n_s_a_x, __pyx_n_s_a_y, __pyx_n_s_a_w, __pyx_n_s_a_h, __pyx_n_s_b_x, __pyx_n_s_b_y, __pyx_n_s_b_w, __pyx_n_s_b_h); if (unlikely(!__pyx_tuple__377)) __PYX_ERR(0, 2354, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__377);
  __Pyx_GIVEREF(__pyx_tuple__377);
  __pyx_codeobj__378 = (PyObject*)__Pyx_PyCode_New(3, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__377, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_align_vertical, 2354, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__378)) __PYX_ERR(0, 2354, __pyx_L1_error)
  __pyx_tuple__379 = PyTuple_Pack(1, ((PyObject *)__pyx_int_5)); if (unlikely(!__pyx_tuple__379)) __PYX_ERR(0, 2354, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__379);
  __Pyx_GIVEREF(__pyx_tuple__379);

  /* "table_extraction/utils_table_extraction.pyx":2366
 * 
 *     @staticmethod
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get rows from content boxes
 */
  __pyx_tuple__380 = PyTuple_Pack(11, __pyx_n_s_content_boxes, __pyx_n_s_ignore_single, __pyx_n_s_ALIGNMENT_THRESH, __pyx_n_s_rows, __pyx_n_s_added_boxes, __pyx_n_s_i, __pyx_n_s_src_box, __pyx_n_s_tmp_row, __pyx_n_s_dst_box, __pyx_n_s_tail_box, __pyx_n_s_alignment); if (unlikely(!__pyx_tuple__380)) __PYX_ERR(0, 2366, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__380);
  __Pyx_GIVEREF(__pyx_tuple__380);
  __pyx_codeobj__381 = (PyObject*)__Pyx_PyCode_New(2, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__380, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_get_rows_from_content_boxes, 2366, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__381)) __PYX_ERR(0, 2366, __pyx_L1_error)
  __pyx_tuple__382 = PyTuple_Pack(1, ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__382)) __PYX_ERR(0, 2366, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__382);
  __Pyx_GIVEREF(__pyx_tuple__382);

  /* "table_extraction/utils_table_extraction.pyx":2402
 * 
 *     @staticmethod
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get columns from content boxes
 */
  __pyx_tuple__383 = PyTuple_Pack(10, __pyx_n_s_content_boxes, __pyx_n_s_ignore_single, __pyx_n_s_ALIGNMENT_THRESH, __pyx_n_s_cols, __pyx_n_s_added_boxes, __pyx_n_s_i, __pyx_n_s_src_box, __pyx_n_s_tmp_col, __pyx_n_s_dst_box, __pyx_n_s_alignment); if (unlikely(!__pyx_tuple__383)) __PYX_ERR(0, 2402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__383);
  __Pyx_GIVEREF(__pyx_tuple__383);
  __pyx_codeobj__384 = (PyObject*)__Pyx_PyCode_New(2, 0, 10, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__383, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_get_columns_from_content_boxes, 2402, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__384)) __PYX_ERR(0, 2402, __pyx_L1_error)
  __pyx_tuple__385 = PyTuple_Pack(1, ((PyObject *)Py_False)); if (unlikely(!__pyx_tuple__385)) __PYX_ERR(0, 2402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__385);
  __Pyx_GIVEREF(__pyx_tuple__385);

  /* "table_extraction/utils_table_extraction.pyx":2436
 * 
 *     @staticmethod
 *     def is_fill_area(box, image): #14802             # <<<<<<<<<<<<<<
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)
 */
  __pyx_tuple__386 = PyTuple_Pack(6, __pyx_n_s_box, __pyx_n_s_image, __pyx_n_s_FILL_AREA_PERCENT, __pyx_n_s_part_area, __pyx_n_s_max_white, __pyx_n_s_area_white); if (unlikely(!__pyx_tuple__386)) __PYX_ERR(0, 2436, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__386);
  __Pyx_GIVEREF(__pyx_tuple__386);
  __pyx_codeobj__387 = (PyObject*)__Pyx_PyCode_New(2, 0, 6, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__386, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_table_extraction_utils_table_ext, __pyx_n_s_is_fill_area, 2436, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__387)) __PYX_ERR(0, 2436, __pyx_L1_error)
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_RefNannyFinishContext();
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
  __pyx_umethod_PyList_Type_remove.type = (PyObject*)&PyList_Type;
  if (__Pyx_InitStrings(__pyx_string_tab) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  __pyx_float_0_1 = PyFloat_FromDouble(0.1); if (unlikely(!__pyx_float_0_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_float_0_5 = PyFloat_FromDouble(0.5); if (unlikely(!__pyx_float_0_5)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_float_0_8 = PyFloat_FromDouble(0.8); if (unlikely(!__pyx_float_0_8)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_2 = PyInt_FromLong(2); if (unlikely(!__pyx_int_2)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_3 = PyInt_FromLong(3); if (unlikely(!__pyx_int_3)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_5 = PyInt_FromLong(5); if (unlikely(!__pyx_int_5)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_10 = PyInt_FromLong(10); if (unlikely(!__pyx_int_10)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_15 = PyInt_FromLong(15); if (unlikely(!__pyx_int_15)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_20 = PyInt_FromLong(20); if (unlikely(!__pyx_int_20)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_30 = PyInt_FromLong(30); if (unlikely(!__pyx_int_30)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_40 = PyInt_FromLong(40); if (unlikely(!__pyx_int_40)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_50 = PyInt_FromLong(50); if (unlikely(!__pyx_int_50)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_60 = PyInt_FromLong(60); if (unlikely(!__pyx_int_60)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_100 = PyInt_FromLong(100); if (unlikely(!__pyx_int_100)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_200 = PyInt_FromLong(200); if (unlikely(!__pyx_int_200)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_255 = PyInt_FromLong(255); if (unlikely(!__pyx_int_255)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_300 = PyInt_FromLong(300); if (unlikely(!__pyx_int_300)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_500 = PyInt_FromLong(500); if (unlikely(!__pyx_int_500)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_1000 = PyInt_FromLong(1000); if (unlikely(!__pyx_int_1000)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_1936 = PyInt_FromLong(1936); if (unlikely(!__pyx_int_1936)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_2730 = PyInt_FromLong(2730); if (unlikely(!__pyx_int_2730)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_neg_2 = PyInt_FromLong(-2); if (unlikely(!__pyx_int_neg_2)) __PYX_ERR(0, 1, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_modinit_global_init_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_variable_export_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_function_export_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_type_init_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_type_import_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_variable_import_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_function_import_code(void); /*proto*/

static int __Pyx_modinit_global_init_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_global_init_code", 0);
  /*--- Global init code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_variable_export_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_variable_export_code", 0);
  /*--- Variable export code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_function_export_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_function_export_code", 0);
  /*--- Function export code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_type_init_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_type_init_code", 0);
  /*--- Type init code ---*/
  if (PyType_Ready(&__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects) < 0) __PYX_ERR(0, 1526, __pyx_L1_error)
  __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects.tp_print = 0;
  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects.tp_dictoffset && __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects.tp_getattro == PyObject_GenericGetAttr)) {
    __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
  }
  __pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects = &__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct__rect_between_two_rects;
  if (PyType_Ready(&__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect) < 0) __PYX_ERR(0, 1546, __pyx_L1_error)
  __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect.tp_print = 0;
  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect.tp_dictoffset && __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect.tp_getattro == PyObject_GenericGetAttr)) {
    __pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect.tp_getattro = __Pyx_PyObject_GenericGetAttrNoDict;
  }
  __pyx_ptype_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect = &__pyx_type_16table_extraction_22utils_table_extraction___pyx_scope_struct_1_rects_under_rect;
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_RefNannyFinishContext();
  return -1;
}

static int __Pyx_modinit_type_import_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_type_import_code", 0);
  /*--- Type import code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_variable_import_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_variable_import_code", 0);
  /*--- Variable import code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_function_import_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_function_import_code", 0);
  /*--- Function import code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}


#if PY_MAJOR_VERSION < 3
#ifdef CYTHON_NO_PYINIT_EXPORT
#define __Pyx_PyMODINIT_FUNC void
#else
#define __Pyx_PyMODINIT_FUNC PyMODINIT_FUNC
#endif
#else
#ifdef CYTHON_NO_PYINIT_EXPORT
#define __Pyx_PyMODINIT_FUNC PyObject *
#else
#define __Pyx_PyMODINIT_FUNC PyMODINIT_FUNC
#endif
#endif


#if PY_MAJOR_VERSION < 3
__Pyx_PyMODINIT_FUNC initutils_table_extraction(void) CYTHON_SMALL_CODE; /*proto*/
__Pyx_PyMODINIT_FUNC initutils_table_extraction(void)
#else
__Pyx_PyMODINIT_FUNC PyInit_utils_table_extraction(void) CYTHON_SMALL_CODE; /*proto*/
__Pyx_PyMODINIT_FUNC PyInit_utils_table_extraction(void)
#if CYTHON_PEP489_MULTI_PHASE_INIT
{
  return PyModuleDef_Init(&__pyx_moduledef);
}
static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
    #if PY_VERSION_HEX >= 0x030700A1
    static PY_INT64_T main_interpreter_id = -1;
    PY_INT64_T current_id = PyInterpreterState_GetID(PyThreadState_Get()->interp);
    if (main_interpreter_id == -1) {
        main_interpreter_id = current_id;
        return (unlikely(current_id == -1)) ? -1 : 0;
    } else if (unlikely(main_interpreter_id != current_id))
    #else
    static PyInterpreterState *main_interpreter = NULL;
    PyInterpreterState *current_interpreter = PyThreadState_Get()->interp;
    if (!main_interpreter) {
        main_interpreter = current_interpreter;
    } else if (unlikely(main_interpreter != current_interpreter))
    #endif
    {
        PyErr_SetString(
            PyExc_ImportError,
            "Interpreter change detected - this module can only be loaded into one interpreter per process.");
        return -1;
    }
    return 0;
}
static CYTHON_SMALL_CODE int __Pyx_copy_spec_to_module(PyObject *spec, PyObject *moddict, const char* from_name, const char* to_name) {
    PyObject *value = PyObject_GetAttrString(spec, from_name);
    int result = 0;
    if (likely(value)) {
        result = PyDict_SetItemString(moddict, to_name, value);
        Py_DECREF(value);
    } else if (PyErr_ExceptionMatches(PyExc_AttributeError)) {
        PyErr_Clear();
    } else {
        result = -1;
    }
    return result;
}
static CYTHON_SMALL_CODE PyObject* __pyx_pymod_create(PyObject *spec, CYTHON_UNUSED PyModuleDef *def) {
    PyObject *module = NULL, *moddict, *modname;
    if (__Pyx_check_single_interpreter())
        return NULL;
    if (__pyx_m)
        return __Pyx_NewRef(__pyx_m);
    modname = PyObject_GetAttrString(spec, "name");
    if (unlikely(!modname)) goto bad;
    module = PyModule_NewObject(modname);
    Py_DECREF(modname);
    if (unlikely(!module)) goto bad;
    moddict = PyModule_GetDict(module);
    if (unlikely(!moddict)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "loader", "__loader__") < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "origin", "__file__") < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "parent", "__package__") < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "submodule_search_locations", "__path__") < 0)) goto bad;
    return module;
bad:
    Py_XDECREF(module);
    return NULL;
}


static CYTHON_SMALL_CODE int __pyx_pymod_exec_utils_table_extraction(PyObject *__pyx_pyinit_module)
#endif
#endif
{
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannyDeclarations
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  if (__pyx_m) {
    if (__pyx_m == __pyx_pyinit_module) return 0;
    PyErr_SetString(PyExc_RuntimeError, "Module 'utils_table_extraction' has already been imported. Re-initialisation is not supported.");
    return -1;
  }
  #elif PY_MAJOR_VERSION >= 3
  if (__pyx_m) return __Pyx_NewRef(__pyx_m);
  #endif
  #if CYTHON_REFNANNY
__Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
if (!__Pyx_RefNanny) {
  PyErr_Clear();
  __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
  if (!__Pyx_RefNanny)
      Py_FatalError("failed to import 'refnanny' module");
}
#endif
  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_utils_table_extraction(void)", 0);
  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #ifdef __Pxy_PyFrame_Initialize_Offsets
  __Pxy_PyFrame_Initialize_Offsets();
  #endif
  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
  #ifdef __Pyx_CyFunction_USED
  if (__pyx_CyFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_FusedFunction_USED
  if (__pyx_FusedFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Coroutine_USED
  if (__pyx_Coroutine_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Generator_USED
  if (__pyx_Generator_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_AsyncGen_USED
  if (__pyx_AsyncGen_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_StopAsyncIteration_USED
  if (__pyx_StopAsyncIteration_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  /*--- Library function declarations ---*/
  /*--- Threads initialization code ---*/
  #if defined(__PYX_FORCE_INIT_THREADS) && __PYX_FORCE_INIT_THREADS
  #ifdef WITH_THREAD /* Python build with threading support? */
  PyEval_InitThreads();
  #endif
  #endif
  /*--- Module creation code ---*/
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  __pyx_m = __pyx_pyinit_module;
  Py_INCREF(__pyx_m);
  #else
  #if PY_MAJOR_VERSION < 3
  __pyx_m = Py_InitModule4("utils_table_extraction", __pyx_methods, 0, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
  #else
  __pyx_m = PyModule_Create(&__pyx_moduledef);
  #endif
  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
  Py_INCREF(__pyx_d);
  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
  #if CYTHON_COMPILING_IN_PYPY
  Py_INCREF(__pyx_b);
  #endif
  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  /*--- Initialize various global constants etc. ---*/
  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  if (__pyx_module_is_main_table_extraction__utils_table_extraction) {
    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  }
  #if PY_MAJOR_VERSION >= 3
  {
    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
    if (!PyDict_GetItemString(modules, "table_extraction.utils_table_extraction")) {
      if (unlikely(PyDict_SetItemString(modules, "table_extraction.utils_table_extraction", __pyx_m) < 0)) __PYX_ERR(0, 1, __pyx_L1_error)
    }
  }
  #endif
  /*--- Builtin init code ---*/
  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Constants init code ---*/
  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Global type/function init code ---*/
  (void)__Pyx_modinit_global_init_code();
  (void)__Pyx_modinit_variable_export_code();
  (void)__Pyx_modinit_function_export_code();
  if (unlikely(__Pyx_modinit_type_init_code() != 0)) goto __pyx_L1_error;
  (void)__Pyx_modinit_type_import_code();
  (void)__Pyx_modinit_variable_import_code();
  (void)__Pyx_modinit_function_import_code();
  /*--- Execution code ---*/
  #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif

  /* "table_extraction/utils_table_extraction.pyx":1
 * import cv2             # <<<<<<<<<<<<<<
 * import math
 * import itertools
 */
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_cv2, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_cv2, __pyx_t_1) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2
 * import cv2
 * import math             # <<<<<<<<<<<<<<
 * import itertools
 * import re
 */
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_math, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_math, __pyx_t_1) < 0) __PYX_ERR(0, 2, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":3
 * import cv2
 * import math
 * import itertools             # <<<<<<<<<<<<<<
 * import re
 * import numpy as np
 */
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_itertools, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_itertools, __pyx_t_1) < 0) __PYX_ERR(0, 3, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":4
 * import math
 * import itertools
 * import re             # <<<<<<<<<<<<<<
 * import numpy as np
 * 
 */
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_re, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_re, __pyx_t_1) < 0) __PYX_ERR(0, 4, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":5
 * import itertools
 * import re
 * import numpy as np             # <<<<<<<<<<<<<<
 * 
 * from table_extraction.debug import Debug
 */
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_numpy, 0, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_np, __pyx_t_1) < 0) __PYX_ERR(0, 5, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "table_extraction/utils_table_extraction.pyx":7
 * import numpy as np
 * 
 * from table_extraction.debug import Debug             # <<<<<<<<<<<<<<
 * 
 * class Utils(object):
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Debug);
  __Pyx_GIVEREF(__pyx_n_s_Debug);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Debug);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_table_extraction_debug, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 7, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Debug); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 7, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Debug, __pyx_t_1) < 0) __PYX_ERR(0, 7, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":9
 * from table_extraction.debug import Debug
 * 
 * class Utils(object):             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_2 = __Pyx_CalculateMetaclass(NULL, __pyx_tuple__24); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 9, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_Py3MetaclassPrepare(__pyx_t_2, __pyx_tuple__24, __pyx_n_s_Utils, __pyx_n_s_Utils, (PyObject *) NULL, __pyx_n_s_table_extraction_utils_table_ext_2, (PyObject *) NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 9, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);

  /* "table_extraction/utils_table_extraction.pyx":12
 * 
 *     @staticmethod
 *     def is_noise(rect):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_1is_noise, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_noise, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__26)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 12, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":11
 * class Utils(object):
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_noise(rect):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 11, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_noise, __pyx_t_4) < 0) __PYX_ERR(0, 12, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":23
 * 
 *     @staticmethod
 *     def resize_image(image, width=1936, height=2730):             # <<<<<<<<<<<<<<
 *         if image.shape[0] > image.shape[1]:
 *             size = (width, height)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_3resize_image, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_resize_image, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__28)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 23, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__29);

  /* "table_extraction/utils_table_extraction.pyx":22
 *         return is_noise
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def resize_image(image, width=1936, height=2730):
 *         if image.shape[0] > image.shape[1]:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 22, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_resize_image, __pyx_t_3) < 0) __PYX_ERR(0, 23, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":31
 * 
 *     @staticmethod
 *     def refill_rects(image):             # <<<<<<<<<<<<<<
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 *         rects = [cv2.boundingRect(c) for c in contours]
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_5refill_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_refill_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__31)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 31, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":30
 *         return cv2.resize(image, size)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def refill_rects(image):
 *         contours = cv2.findContours(image.copy(), cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)[1]
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 30, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_refill_rects, __pyx_t_4) < 0) __PYX_ERR(0, 31, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":37
 * 
 *     @staticmethod
 *     def shrink_line(h_lines, v_lines, threshold=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: those horizontal lines in the table
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_7shrink_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_shrink_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__33)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 37, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__34);

  /* "table_extraction/utils_table_extraction.pyx":36
 *         rects = [rect for rect in rects if rect[2] < 20 or rect[3] < 20]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def shrink_line(h_lines, v_lines, threshold=10):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 36, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_shrink_line, __pyx_t_3) < 0) __PYX_ERR(0, 37, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":90
 * 
 *     @staticmethod
 *     def reduce_line(h_lines, v_lines, threshold=15):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: all of the horizontal lines
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_9reduce_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_reduce_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__36)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 90, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__37);

  /* "table_extraction/utils_table_extraction.pyx":89
 *         return h_lines, v_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def reduce_line(h_lines, v_lines, threshold=15):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 89, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_reduce_line, __pyx_t_4) < 0) __PYX_ERR(0, 90, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":125
 * 
 *     @staticmethod
 *     def is_intersect(h_line, v_line):             # <<<<<<<<<<<<<<
 *         h_start_point = h_line.start_point
 *         h_end_point = h_line.end_point
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_11is_intersect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_intersect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__39)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 125, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":124
 *         return h_lines, v_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_intersect(h_line, v_line):
 *         h_start_point = h_line.start_point
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 124, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_intersect, __pyx_t_3) < 0) __PYX_ERR(0, 125, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":134
 * 
 *     @staticmethod
 *     def line_intersection(a_line, b_line):             # <<<<<<<<<<<<<<
 *         line1 = (a_line.start_point, a_line.end_point)
 *         line2 = (b_line.start_point, b_line.end_point)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_13line_intersection, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_intersection, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__41)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":133
 *                and v_start_point[1] <= h_start_point[1] and h_start_point[1] <= v_end_point[1]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_intersection(a_line, b_line):
 *         line1 = (a_line.start_point, a_line.end_point)
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 133, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_intersection, __pyx_t_4) < 0) __PYX_ERR(0, 134, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":155
 * 
 *     @staticmethod
 *     def lines_intersect_line(lines, line):             # <<<<<<<<<<<<<<
 *         if line.orientation=="h":
 *             return [other_line for other_line in lines if Utils.is_intersect(line, other_line)]
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_15lines_intersect_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_lines_intersect_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__43)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 155, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":154
 *         return x, y
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def lines_intersect_line(lines, line):
 *         if line.orientation=="h":
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 154, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_lines_intersect_line, __pyx_t_3) < 0) __PYX_ERR(0, 155, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":164
 * 
 *     @staticmethod
 *     def line_split_line(line, split_line):             # <<<<<<<<<<<<<<
 *         """ Split line by split_line
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_17line_split_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_split_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__45)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 164, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":163
 *             return []
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_split_line(line, split_line):
 *         """ Split line by split_line
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 163, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_split_line, __pyx_t_4) < 0) __PYX_ERR(0, 164, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":193
 * 
 *     @staticmethod
 *     def duplicate_line_rects(a_line_rect, b_line_rect, orientation="horizontal", threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param a_line_rect: the bounding rectangle of a line
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_19duplicate_line_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_duplicate_line_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__47)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 193, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__48);

  /* "table_extraction/utils_table_extraction.pyx":192
 *         return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def duplicate_line_rects(a_line_rect, b_line_rect, orientation="horizontal", threshold=5):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 192, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_duplicate_line_rects, __pyx_t_3) < 0) __PYX_ERR(0, 193, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":209
 * 
 *     @staticmethod
 *     def get_area_from_binary_image(rect, image):             # <<<<<<<<<<<<<<
 *         x, y, w, h = rect
 *         return image[y:y+h,x:x+w]
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_21get_area_from_binary_image, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_get_area_from_binary_image, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__50)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":208
 *             return (a_y <= b_y or a_y - b_y <= threshold) and (b_y + b_h <= a_y + a_h or b_y + b_h - a_y - a_h <= threshold) and abs(b_x + b_w / 2 - a_x - a_w / 2) <= (a_w + b_w) / 2
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def get_area_from_binary_image(rect, image):
 *         x, y, w, h = rect
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_get_area_from_binary_image, __pyx_t_4) < 0) __PYX_ERR(0, 209, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":214
 * 
 *     @staticmethod
 *     def remove_reverse_line_rects(line_rects, binary_image, orientation="v"):             # <<<<<<<<<<<<<<
 *         """
 *         remove noise line rects if reverse area
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_23remove_reverse_line_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_reverse_line_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__52)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__53);

  /* "table_extraction/utils_table_extraction.pyx":213
 *         return image[y:y+h,x:x+w]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_reverse_line_rects(line_rects, binary_image, orientation="v"):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 213, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_reverse_line_rects, __pyx_t_3) < 0) __PYX_ERR(0, 214, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":240
 * 
 *     @staticmethod
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """
 *         :param rects: the list bounding rectangle of lines
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_25remove_duplicate_line_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_duplicate_line_rect_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__55)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 240, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__56);

  /* "table_extraction/utils_table_extraction.pyx":239
 *         return removed_line_rects
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_duplicate_line_rects(rects, orientation="horizontal"):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_duplicate_line_rects, __pyx_t_4) < 0) __PYX_ERR(0, 240, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":265
 * 
 *     @staticmethod
 *     def same_line(a_line, b_line):             # <<<<<<<<<<<<<<
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_27same_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_same_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__58)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 265, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":264
 *         return rects
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def same_line(a_line, b_line):
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 264, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_same_line, __pyx_t_3) < 0) __PYX_ERR(0, 265, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":269
 * 
 *     @staticmethod
 *     def same_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 * 
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_29same_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_same_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__60)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 269, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":268
 *         return a_line.start_point == b_line.start_point and a_line.end_point == b_line.end_point
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def same_rect(a_rect, b_rect):
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 268, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_same_rect, __pyx_t_4) < 0) __PYX_ERR(0, 269, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":273
 * 
 *     @staticmethod
 *     def same_h_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_31same_h_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_same_h_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__62)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__63);

  /* "table_extraction/utils_table_extraction.pyx":272
 *         return a_rect[0] == b_rect[0] and a_rect[1] == b_rect[1] and a_rect[2] == b_rect[2] and a_rect[3] == b_rect[3]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def same_h_rect(a_rect, b_rect, thresh=0):
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 272, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_same_h_rect, __pyx_t_3) < 0) __PYX_ERR(0, 273, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":277
 * 
 *     @staticmethod
 *     def same_v_rect(a_rect, b_rect, thresh=0):             # <<<<<<<<<<<<<<
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 * 
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_33same_v_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_same_v_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__65)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 277, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__66);

  /* "table_extraction/utils_table_extraction.pyx":276
 *         return a_rect[0]-thresh<=b_rect[0]<=a_rect[0]+thresh and a_rect[2]-thresh<=b_rect[2]<=a_rect[2]+thresh
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def same_v_rect(a_rect, b_rect, thresh=0):
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 276, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_same_v_rect, __pyx_t_4) < 0) __PYX_ERR(0, 277, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":281
 * 
 *     @staticmethod
 *     def same_position(a_line, b_line, threshold=5):             # <<<<<<<<<<<<<<
 *         if a_line.orientation == "h":
 *             return Utils.distance_from_point_to_point(a_line.start_point, b_line.start_point) <= threshold \
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_35same_position, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_same_position, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__68)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__69);

  /* "table_extraction/utils_table_extraction.pyx":280
 *         return a_rect[1]-thresh<=b_rect[1]<=a_rect[1]+thresh and a_rect[3]-thresh<=b_rect[3]<=a_rect[3]+thresh
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def same_position(a_line, b_line, threshold=5):
 *         if a_line.orientation == "h":
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 280, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_same_position, __pyx_t_3) < 0) __PYX_ERR(0, 281, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":290
 * 
 *     @staticmethod
 *     def merge_duplicate_lines(a_line, b_line):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 *         if a_line.orientation == "h":
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_37merge_duplicate_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_merge_duplicate_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__71)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 290, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":289
 *                     and abs(Utils.height_line(a_line) - Utils.height_line(b_line)) <= threshold
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def merge_duplicate_lines(a_line, b_line):
 *         from .table_processing import Line
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 289, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_duplicate_lines, __pyx_t_4) < 0) __PYX_ERR(0, 290, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":302
 * 
 *     @staticmethod
 *     def distance_from_point_to_point(a_point, b_point):             # <<<<<<<<<<<<<<
 *         x1, y1 = a_point
 *         x2, y2 = b_point
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_39distance_from_point_to_point, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_distance_from_point_to_poi, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__73)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 302, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":301
 *             return Line(start_point, end_point, 0, "v")
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def distance_from_point_to_point(a_point, b_point):
 *         x1, y1 = a_point
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 301, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_distance_from_point_to_point, __pyx_t_3) < 0) __PYX_ERR(0, 302, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":308
 * 
 *     @staticmethod
 *     def distance_from_line_to_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         if Utils.is_intersect(h_line, v_line):
 *             return 0
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_41distance_from_line_to_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_distance_from_line_to_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__75)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 308, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":307
 *         return math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def distance_from_line_to_line(h_line, v_line):
 *         if Utils.is_intersect(h_line, v_line):
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 307, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_distance_from_line_to_line, __pyx_t_4) < 0) __PYX_ERR(0, 308, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":328
 * 
 *     @staticmethod
 *     def distance_from_point_to_line(point, line):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_43distance_from_point_to_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_distance_from_point_to_lin, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__77)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 328, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":327
 *                 return max(d1, d2)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def distance_from_point_to_line(point, line):
 *         x1, y1 = line.start_point
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 327, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_distance_from_point_to_line, __pyx_t_3) < 0) __PYX_ERR(0, 328, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":335
 * 
 *     @staticmethod
 *     def distance_from_line_to_box(box, line, direction):             # <<<<<<<<<<<<<<
 *         distance = 1000
 *         box_x, box_y, box_w, box_h = box
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_45distance_from_line_to_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_distance_from_line_to_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__79)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 335, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":334
 *         return abs((x2 - x1) * (y1 - y0) - (x1 - x0) * (y2 - y1)) / np.sqrt(np.square(x2 - x1) + np.square(y2 - y1))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def distance_from_line_to_box(box, line, direction):
 *         distance = 1000
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 334, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_distance_from_line_to_box, __pyx_t_4) < 0) __PYX_ERR(0, 335, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":355
 * 
 *     @staticmethod
 *     def distance_from_box_to_box(src_box, dst_box):             # <<<<<<<<<<<<<<
 *          c1 = Utils.calc_centroid(src_box)
 *          c2 = Utils.calc_centroid(dst_box)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_47distance_from_box_to_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_distance_from_box_to_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__81)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 355, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":354
 *         return abs(distance)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def distance_from_box_to_box(src_box, dst_box):
 *          c1 = Utils.calc_centroid(src_box)
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 354, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_distance_from_box_to_box, __pyx_t_3) < 0) __PYX_ERR(0, 355, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":361
 * 
 *     @staticmethod
 *     def is_box_far_box(src_box, dst_box, times=1):             # <<<<<<<<<<<<<<
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 *         if src_box[2]*times<distance:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_49is_box_far_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_box_far_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__83)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 361, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__84);

  /* "table_extraction/utils_table_extraction.pyx":360
 *          return Utils.distance_from_point_to_point(c1, c2)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_box_far_box(src_box, dst_box, times=1):
 *         distance = Utils.distance_from_box_to_box(src_box, dst_box)
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 360, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_box_far_box, __pyx_t_4) < 0) __PYX_ERR(0, 361, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":368
 * 
 *     @staticmethod
 *     def calc_centroid(box):             # <<<<<<<<<<<<<<
 *         x, y, w, h = box
 *         return x+w/2, y+h/2
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_51calc_centroid, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_calc_centroid, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__86)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 368, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":367
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def calc_centroid(box):
 *         x, y, w, h = box
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_calc_centroid, __pyx_t_3) < 0) __PYX_ERR(0, 368, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":373
 * 
 *     @staticmethod
 *     def split_lines(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines: the list of the lines
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_53split_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_split_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__88)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":372
 *         return x+w/2, y+h/2
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def split_lines(lines):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 372, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_split_lines, __pyx_t_4) < 0) __PYX_ERR(0, 373, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":383
 * 
 *     @staticmethod
 *     def merge_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_55merge_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_merge_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__90)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__91);

  /* "table_extraction/utils_table_extraction.pyx":382
 *         return h_lines, v_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def merge_lines(a_line, b_line, orientation="horizontal"):
 *         from table_extraction.line import Line
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 382, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_lines, __pyx_t_3) < 0) __PYX_ERR(0, 383, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":406
 *         return line
 * 
 *     def merge_border_lines(lines, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if len(lines) == 1:
 *             return lines[0]
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_57merge_border_lines, 0, __pyx_n_s_Utils_merge_border_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__93)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 406, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__94);
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_border_lines, __pyx_t_3) < 0) __PYX_ERR(0, 406, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":420
 * 
 *     @staticmethod
 *     def extend_lines(a_line, b_line, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         if orientation == "horizontal":
 *             b_line.start_point = (a_line.start_point[0], b_line.start_point[1])
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_59extend_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_extend_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__96)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 420, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__97);

  /* "table_extraction/utils_table_extraction.pyx":419
 *             return Utils.merge_lines(start_line, end_line, orientation)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def extend_lines(a_line, b_line, orientation="horizontal"):
 *         if orientation == "horizontal":
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 419, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_extend_lines, __pyx_t_4) < 0) __PYX_ERR(0, 420, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":428
 * 
 *     @staticmethod
 *     def sort_lines(h_lines, v_lines, type="position"):             # <<<<<<<<<<<<<<
 *         if type == "position":
 *             h_lines = sorted(h_lines, key=lambda line: line.start_point[1])
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_61sort_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_sort_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__99)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 428, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__100);

  /* "table_extraction/utils_table_extraction.pyx":427
 *         b_line.connect_at_start_point = a_line.connect_at_start_point
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def sort_lines(h_lines, v_lines, type="position"):
 *         if type == "position":
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 427, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_sort_lines, __pyx_t_3) < 0) __PYX_ERR(0, 428, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":438
 * 
 *     @staticmethod
 *     def horizontal_line_cut_vertical_line(h_line, v_line):             # <<<<<<<<<<<<<<
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 * 
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_63horizontal_line_cut_vertical_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_horizontal_line_cut_vertic, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__102)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":437
 *         return h_lines, v_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def horizontal_line_cut_vertical_line(h_line, v_line):
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 437, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_horizontal_line_cut_vertical_lin, __pyx_t_4) < 0) __PYX_ERR(0, 438, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":442
 * 
 *     @staticmethod
 *     def vertical_line_cut_horiontal_line(v_line, h_line):             # <<<<<<<<<<<<<<
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_65vertical_line_cut_horiontal_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_vertical_line_cut_horionta, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__104)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 442, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":441
 *         return h_line.start_point[1] >= v_line.start_point[1] and h_line.start_point[1] <= v_line.end_point[1]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def vertical_line_cut_horiontal_line(v_line, h_line):
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 441, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_vertical_line_cut_horiontal_line, __pyx_t_3) < 0) __PYX_ERR(0, 442, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":446
 * 
 *     @staticmethod
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_67create_virtual_vertical_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_create_virtual_vertical_li, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__106)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 446, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__107);

  /* "table_extraction/utils_table_extraction.pyx":445
 *         return v_line.start_point[0] >= h_line.start_point[0] and v_line.start_point[0] <= h_line.end_point[0]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def create_virtual_vertical_line(h_line, neighbor_line, direction="start"):
 *         from .table_processing import Line
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 445, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_create_virtual_vertical_line, __pyx_t_4) < 0) __PYX_ERR(0, 446, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":502
 * 
 *     @staticmethod
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):             # <<<<<<<<<<<<<<
 *         from .table_processing import Line
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_69create_virtual_horizontal_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_create_virtual_horizontal, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__109)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 502, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__110);

  /* "table_extraction/utils_table_extraction.pyx":501
 *                 return virtual_v_line
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def create_virtual_horizontal_line(v_line, neighbor_line, direction="start"):
 *         from .table_processing import Line
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 501, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_create_virtual_horizontal_line, __pyx_t_3) < 0) __PYX_ERR(0, 502, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":559
 * 
 *     @staticmethod
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         for line in v_lines:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_71vertical_left_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_vertical_left_neighbor_lin, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__112)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 559, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__113);

  /* "table_extraction/utils_table_extraction.pyx":558
 *                 return virtual_h_line
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def vertical_left_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         left_lines = []
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 558, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_vertical_left_neighbor_line, __pyx_t_4) < 0) __PYX_ERR(0, 559, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":574
 * 
 *     @staticmethod
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         right_lines = []
 *         for line in v_lines:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_73vertical_right_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_vertical_right_neighbor_li, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__115)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 574, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__116);

  /* "table_extraction/utils_table_extraction.pyx":573
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def vertical_right_neighbor_line(v_line, v_lines, invalid_lines=None):
 *         right_lines = []
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 573, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_vertical_right_neighbor_line, __pyx_t_3) < 0) __PYX_ERR(0, 574, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":589
 * 
 *     @staticmethod
 *     def vertical_neighbor_line(v_line, v_lines):             # <<<<<<<<<<<<<<
 *         left_lines = []
 *         right_lines = []
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_75vertical_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_vertical_neighbor_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__118)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":588
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def vertical_neighbor_line(v_line, v_lines):
 *         left_lines = []
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 588, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_vertical_neighbor_line, __pyx_t_4) < 0) __PYX_ERR(0, 589, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":616
 * 
 *     @staticmethod
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         top_lines = []
 *         for line in h_lines:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_77horizontal_top_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_horizontal_top_neighbor_li, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__120)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 616, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__121);

  /* "table_extraction/utils_table_extraction.pyx":615
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def horizontal_top_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         top_lines = []
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 615, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_horizontal_top_neighbor_line, __pyx_t_3) < 0) __PYX_ERR(0, 616, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":631
 * 
 *     @staticmethod
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):             # <<<<<<<<<<<<<<
 *         bottom_lines = []
 *         for line in h_lines:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_79horizontal_bottom_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_horizontal_bottom_neighbor, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__123)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 631, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__124);

  /* "table_extraction/utils_table_extraction.pyx":630
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def horizontal_bottom_neighbor_line(h_line, h_lines, invalid_lines=None):
 *         bottom_lines = []
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 630, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_horizontal_bottom_neighbor_line, __pyx_t_4) < 0) __PYX_ERR(0, 631, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":646
 * 
 *     @staticmethod
 *     def horizontal_neighbor_line(h_line, h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_line:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_81horizontal_neighbor_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_horizontal_neighbor_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__126)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 646, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":645
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def horizontal_neighbor_line(h_line, h_lines):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 645, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_horizontal_neighbor_line, __pyx_t_3) < 0) __PYX_ERR(0, 646, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":679
 * 
 *     @staticmethod
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             rect = Utils.expand_rect(rect, threshold)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_83is_line_cut_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_line_cut_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__128)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__129);

  /* "table_extraction/utils_table_extraction.pyx":678
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_line_cut_rects(line, rects, orientation='v', threshold=-2):
 *         for rect in rects:
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 678, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_line_cut_rects, __pyx_t_4) < 0) __PYX_ERR(0, 679, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":690
 * 
 *     @staticmethod
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 * 
 *         left_stop_line = None
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_85vertical_stop_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_vertical_stop_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__131)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 690, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__132);

  /* "table_extraction/utils_table_extraction.pyx":689
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def vertical_stop_line(h_line, v_lines, content_rects, threshold=5):
 * 
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 689, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_vertical_stop_line, __pyx_t_3) < 0) __PYX_ERR(0, 690, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":733
 * 
 *     @staticmethod
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):             # <<<<<<<<<<<<<<
 *         top_stop_line = None
 *         bottom_stop_line = None
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_87horizontal_stop_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_horizontal_stop_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__134)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 733, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__135);

  /* "table_extraction/utils_table_extraction.pyx":732
 *         return left_stop_line, right_stop_line, invalid_horizontal_line
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def horizontal_stop_line(v_line, h_lines, content_rects, threshold=5):
 *         top_stop_line = None
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 732, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_horizontal_stop_line, __pyx_t_4) < 0) __PYX_ERR(0, 733, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":775
 * 
 *     @staticmethod
 *     def line_pairs(h_single_lines, v_single_lines, distance_threshold=20, ratio_threshold=0.1):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_single_lines: the list of horizontal lines
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_89line_pairs, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_pairs, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__137)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 775, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__138);

  /* "table_extraction/utils_table_extraction.pyx":774
 *         return top_stop_line, bottom_stop_line, invalid_vertical_line
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_pairs(h_single_lines, v_single_lines, distance_threshold=20, ratio_threshold=0.1):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 774, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_pairs, __pyx_t_3) < 0) __PYX_ERR(0, 775, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":819
 * 
 *     @staticmethod
 *     def connect_at_corner(h_line, v_line, threshold=60):             # <<<<<<<<<<<<<<
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 *                 or Utils.distance_from_point_to_point(h_line.start_point, v_line.end_point) <= threshold \
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_91connect_at_corner, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_connect_at_corner, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__140)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__141);

  /* "table_extraction/utils_table_extraction.pyx":818
 *         return h_line_pairs, v_line_pairs
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def connect_at_corner(h_line, v_line, threshold=60):
 *         return Utils.distance_from_point_to_point(h_line.start_point, v_line.start_point) <= threshold \
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 818, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_connect_at_corner, __pyx_t_4) < 0) __PYX_ERR(0, 819, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":826
 * 
 *     @staticmethod
 *     def stop_point_at_top(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the top
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_93stop_point_at_top, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_stop_point_at_top, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__143)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 826, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":825
 *                 or Utils.distance_from_point_to_point(h_line.end_point, v_line.end_point) <= threshold
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def stop_point_at_top(table, point):
 *         """Find the stop point for divider line at the top
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 825, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_stop_point_at_top, __pyx_t_3) < 0) __PYX_ERR(0, 826, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":873
 * 
 *     @staticmethod
 *     def stop_point_at_bottom(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the bottom
 *         If the divider line cut a column, the stop point will be the point with the neast table horizontal line,
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_95stop_point_at_bottom, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_stop_point_at_bottom, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__145)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 873, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":872
 *         return (point[0], table.top_border.start_point[1])
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def stop_point_at_bottom(table, point):
 *         """Find the stop point for divider line at the bottom
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 872, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_stop_point_at_bottom, __pyx_t_4) < 0) __PYX_ERR(0, 873, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":919
 * 
 *     @staticmethod
 *     def stop_point_at_left(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the left
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_97stop_point_at_left, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_stop_point_at_left, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__147)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 919, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":918
 *         return (point[0], table.bottom_border.start_point[1])
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def stop_point_at_left(table, point):
 *         """Find the stop point for divider line at the left
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 918, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_stop_point_at_left, __pyx_t_3) < 0) __PYX_ERR(0, 919, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":963
 * 
 *     @staticmethod
 *     def stop_point_at_right(table, point):             # <<<<<<<<<<<<<<
 *         """Find the stop point for divider line at the right
 *         If the divider line cut a row, the stop point will be the point with the neast table vertical line,
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_99stop_point_at_right, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_stop_point_at_right, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__149)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 963, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":962
 *         return (table.left_border.start_point[0], point[1])
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def stop_point_at_right(table, point):
 *         """Find the stop point for divider line at the right
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 962, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_stop_point_at_right, __pyx_t_4) < 0) __PYX_ERR(0, 963, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1008
 * 
 *     @staticmethod
 *     def single_text_blocks(boxes, text_blocks, expand=0):             # <<<<<<<<<<<<<<
 *         """Find all single text blocks (text block not in a box)
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_101single_text_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_single_text_blocks, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__151)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1008, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__152);

  /* "table_extraction/utils_table_extraction.pyx":1007
 *         return (table.right_border.start_point[0], point[1])
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def single_text_blocks(boxes, text_blocks, expand=0):
 *         """Find all single text blocks (text block not in a box)
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1007, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_single_text_blocks, __pyx_t_3) < 0) __PYX_ERR(0, 1008, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1020
 * 
 *     @staticmethod
 *     def single_lines(boxes, lines):             # <<<<<<<<<<<<<<
 *         """Find all single lines (line not in a box)
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_103single_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_single_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__154)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1020, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1019
 *         return list(set(text_blocks)-set(single_text_blocks))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def single_lines(boxes, lines):
 *         """Find all single lines (line not in a box)
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1019, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_single_lines, __pyx_t_4) < 0) __PYX_ERR(0, 1020, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1031
 * 
 *     @staticmethod
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):             # <<<<<<<<<<<<<<
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 *         if return_lines:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_105lines_inside_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_lines_inside_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__156)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1031, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__157);

  /* "table_extraction/utils_table_extraction.pyx":1030
 *         return list(set(lines) - set(box_lines))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def lines_inside_box(box, lines, threshold=5, return_lines=False):
 *         inside_lines = [line for line in lines if Utils.line_inside_box(box, line, threshold)]
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1030, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_lines_inside_box, __pyx_t_3) < 0) __PYX_ERR(0, 1031, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1039
 * 
 *     @staticmethod
 *     def line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         """
 *         :param box: the box's position
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_107line_inside_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_inside_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__159)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1039, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__160);

  /* "table_extraction/utils_table_extraction.pyx":1038
 *             return True if inside_lines else False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_inside_box(box, line, threshold=5):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1038, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_inside_box, __pyx_t_4) < 0) __PYX_ERR(0, 1039, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1052
 * 
 *     @staticmethod
 *     def v_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, threshold)
 *         box = Utils.expand_width_rect(box, -threshold)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_109v_line_inside_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_v_line_inside_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__162)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1052, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__163);

  /* "table_extraction/utils_table_extraction.pyx":1051
 *                 and line.start_point[1] >= box_y - threshold and line.end_point[1] <= box_y + box_h + threshold
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def v_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, threshold)
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1051, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_v_line_inside_box, __pyx_t_3) < 0) __PYX_ERR(0, 1052, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1058
 * 
 *     @staticmethod
 *     def h_line_inside_box(box, line, threshold=5):             # <<<<<<<<<<<<<<
 *         box = Utils.expand_height_rect(box, -threshold)
 *         box = Utils.expand_width_rect(box, threshold)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_111h_line_inside_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_h_line_inside_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__165)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1058, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__166);

  /* "table_extraction/utils_table_extraction.pyx":1057
 *         return Utils.line_inside_box(box, line, 0)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def h_line_inside_box(box, line, threshold=5):
 *         box = Utils.expand_height_rect(box, -threshold)
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1057, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_h_line_inside_box, __pyx_t_4) < 0) __PYX_ERR(0, 1058, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1064
 * 
 *     @staticmethod
 *     def expand_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add padding to the rect
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_113expand_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_expand_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__168)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1064, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1063
 *         return Utils.line_inside_box(box, line, 0)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def expand_rect(rect, expand):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1063, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_expand_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1064, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1071
 * 
 *     @staticmethod
 *     def expand_width_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add horizontal padding to the rect only.
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_115expand_width_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_expand_width_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__170)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1071, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1070
 *         return rect[0] - expand, rect[1] - expand, rect[2] + 2 * expand, rect[3] + 2 * expand
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def expand_width_rect(rect, expand):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1070, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_expand_width_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1071, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1078
 * 
 *     @staticmethod
 *     def expand_height_rect(rect, expand):             # <<<<<<<<<<<<<<
 *         """
 *         :return: add vertical padding to the rect only
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_117expand_height_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_expand_height_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__172)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1078, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1077
 *         return rect[0] - expand, rect[1], rect[2] + 2 * expand, rect[3]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def expand_height_rect(rect, expand):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1077, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_expand_height_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1078, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1085
 * 
 *     @staticmethod
 *     def line_inside_table_box(rect, line, expand):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             rect = Utils.expand_width_rect(rect, expand)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_119line_inside_table_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_inside_table_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__174)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1085, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1084
 *         return rect[0], rect[1] - expand, rect[2], rect[3] + 2 * expand
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_inside_table_box(rect, line, expand):
 *         if line.orientation == 'h':
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1084, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_inside_table_box, __pyx_t_4) < 0) __PYX_ERR(0, 1085, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1094
 * 
 *     @staticmethod
 *     def rect_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect inside a_rect
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_121rect_inside_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_inside_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__176)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1094, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__177);

  /* "table_extraction/utils_table_extraction.pyx":1093
 *             return Utils.line_inside_box(rect, line, 0)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_inside_rect(a_rect, b_rect, expand=0):
 *         """Check if b_rect inside a_rect
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1093, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_inside_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1094, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1102
 * 
 *     @staticmethod
 *     def rect_horizontal_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect horizontaly inside a_rect
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_123rect_horizontal_inside_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_horizontal_inside_rec, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__180)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1102, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__181);

  /* "table_extraction/utils_table_extraction.pyx":1101
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_horizontal_inside_rect(a_rect, b_rect, expand=0):
 *         """Check if b_rect horizontaly inside a_rect
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1101, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_horizontal_inside_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1102, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1110
 * 
 *     @staticmethod
 *     def rect_vertical_inside_rect(a_rect, b_rect, expand=0):             # <<<<<<<<<<<<<<
 *         """Check if b_rect verticaly inside a_rect
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_125rect_vertical_inside_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_vertical_inside_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__183)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1110, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__184);

  /* "table_extraction/utils_table_extraction.pyx":1109
 *         return b_x - a_x >= 0 and (a_x + a_w) - (b_x + b_w) >= 0
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_vertical_inside_rect(a_rect, b_rect, expand=0):
 *         """Check if b_rect verticaly inside a_rect
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1109, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_vertical_inside_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1110, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1118
 * 
 *     @staticmethod
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         for rect in rects:
 *             if not reverse and Utils.rect_inside_rect(a_rect, rect):
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_127is_rect_contains_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_rect_contains_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__186)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1118, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__187);

  /* "table_extraction/utils_table_extraction.pyx":1117
 *         return b_y - a_y >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_rect_contains_rects(a_rect, rects, reverse=False):
 *         for rect in rects:
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1117, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_rect_contains_rects, __pyx_t_4) < 0) __PYX_ERR(0, 1118, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1127
 * 
 *     @staticmethod
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):             # <<<<<<<<<<<<<<
 *         ret_rects = []
 *         for rect in rects:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_129get_rect_contains_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_get_rect_contains_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__189)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1127, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__190);

  /* "table_extraction/utils_table_extraction.pyx":1126
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def get_rect_contains_rects(a_rect, rects, reverse=False):
 *         ret_rects = []
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1126, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_get_rect_contains_rects, __pyx_t_3) < 0) __PYX_ERR(0, 1127, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1137
 * 
 *     @staticmethod
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):             # <<<<<<<<<<<<<<
 *         rects = [block.bounding_rect for block in blocks]
 *         ret_blocks = []
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_131get_rect_contains_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_get_rect_contains_blocks, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__192)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1137, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__193);

  /* "table_extraction/utils_table_extraction.pyx":1136
 *         return ret_rects
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def get_rect_contains_blocks(a_rect, blocks, reverse=False):
 *         rects = [block.bounding_rect for block in blocks]
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1136, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_get_rect_contains_blocks, __pyx_t_4) < 0) __PYX_ERR(0, 1137, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1149
 * 
 *     @staticmethod
 *     def lines_over_line(line, lines, direction="left"):             # <<<<<<<<<<<<<<
 *         """
 *         Get lines over line
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_133lines_over_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_lines_over_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__195)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1149, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__196);

  /* "table_extraction/utils_table_extraction.pyx":1148
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def lines_over_line(line, lines, direction="left"):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1148, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_lines_over_line, __pyx_t_3) < 0) __PYX_ERR(0, 1149, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1172
 * 
 *     @staticmethod
 *     def line_inside_text_block(text_block, line, expand=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_block: the text block's position
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_135line_inside_text_block, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_inside_text_block, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__198)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1172, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__199);

  /* "table_extraction/utils_table_extraction.pyx":1171
 *         return over_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_inside_text_block(text_block, line, expand=0):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1171, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_inside_text_block, __pyx_t_4) < 0) __PYX_ERR(0, 1172, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1201
 * 
 *     @staticmethod
 *     def rect_overlap_rect(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are overlapping
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_137rect_overlap_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_overlap_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__201)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1201, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1200
 *         return b_x - a_x >= 0 and b_y - a_y >= 0 and (a_x + a_w) - (b_x + b_w) >= 0 and (a_y + a_h) - (b_y + b_h) >= 0
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_overlap_rect(a_rect, b_rect):
 *         """Check if two rectangles are overlapping
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1200, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_overlap_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1201, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1215
 * 
 *     @staticmethod
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are horizontal overlapping
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_139rect_horizontal_overlap_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_horizontal_overlap_re_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__203)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1215, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__204);

  /* "table_extraction/utils_table_extraction.pyx":1214
 *         return True
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_horizontal_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):
 *         """Check if two rectangles are horizontal overlapping
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_horizontal_overlap_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1215, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1232
 * 
 *     @staticmethod
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):             # <<<<<<<<<<<<<<
 *         """Check if two rectangles are vertical overlapping
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_141rect_vertical_overlap_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_vertical_overlap_rect_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__206)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1232, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__207);

  /* "table_extraction/utils_table_extraction.pyx":1231
 *             return True
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_vertical_overlap_rect(a_rect, b_rect, thresh=0, inside_box=False):
 *         """Check if two rectangles are vertical overlapping
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1231, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_vertical_overlap_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1232, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1249
 * 
 *     @staticmethod
 *     def line_overlap_rects(line, rects, orientation, percent=50, shrink_size=0): #12585             # <<<<<<<<<<<<<<
 *         """Check line overlap rect
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_143line_overlap_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_overlap_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__209)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__210);

  /* "table_extraction/utils_table_extraction.pyx":1248
 *             return True
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_overlap_rects(line, rects, orientation, percent=50, shrink_size=0): #12585
 *         """Check line overlap rect
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1248, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_overlap_rects, __pyx_t_4) < 0) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1260
 * 
 *     @staticmethod
 *     def is_rect_divide_content(bounding_rect, content_blocks, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally content
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_145is_rect_divide_content, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_rect_divide_content, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__212)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1260, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__213);

  /* "table_extraction/utils_table_extraction.pyx":1259
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_rect_divide_content(bounding_rect, content_blocks, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1259, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_rect_divide_content, __pyx_t_3) < 0) __PYX_ERR(0, 1260, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1282
 * 
 *     @staticmethod
 *     def is_rect_divide_text_boxes(bounding_rect, text_boxes, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)             # <<<<<<<<<<<<<<
 *         """
 *         Check rect divide horizontally text boxes
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_147is_rect_divide_text_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_rect_divide_text_boxes, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__215)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__216);

  /* "table_extraction/utils_table_extraction.pyx":1281
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_rect_divide_text_boxes(bounding_rect, text_boxes, expand_size=10, overlap_percent=30, cnt=3): #13993->#14560(cnt)
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_rect_divide_text_boxes, __pyx_t_4) < 0) __PYX_ERR(0, 1282, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1303
 * 
 *     @staticmethod
 *     def h_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_149h_line_overlap_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_h_line_overlap_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__218)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1303, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__219);

  /* "table_extraction/utils_table_extraction.pyx":1302
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def h_line_overlap_rect(line, rect, percent=50): #12585
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1302, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_h_line_overlap_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1303, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1334
 * 
 *     @staticmethod
 *     def v_line_overlap_rect(line, rect, percent=50): #12585             # <<<<<<<<<<<<<<
 *         """
 *         v_line overlap rect
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_151v_line_overlap_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_v_line_overlap_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__221)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1334, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__222);

  /* "table_extraction/utils_table_extraction.pyx":1333
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def v_line_overlap_rect(line, rect, percent=50): #12585
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1333, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_v_line_overlap_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1334, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1367
 * 
 *     @staticmethod
 *     def rect_overlap_two_rects(a_rect, b_rect):             # <<<<<<<<<<<<<<
 *         """Get rect overlap two rects
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_153rect_overlap_two_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_overlap_two_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__224)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1366
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_overlap_two_rects(a_rect, b_rect):
 *         """Get rect overlap two rects
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1366, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_overlap_two_rects, __pyx_t_3) < 0) __PYX_ERR(0, 1367, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1378
 * 
 *     @staticmethod
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):             # <<<<<<<<<<<<<<
 *         """Check if two lines near enought both vertical and horizontal
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_155line_overlap_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_overlap_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__226)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__227);

  /* "table_extraction/utils_table_extraction.pyx":1377
 *             return None
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_overlap_line(a_line, b_line, orientation, threshold=10):
 *         """Check if two lines near enought both vertical and horizontal
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_overlap_line, __pyx_t_4) < 0) __PYX_ERR(0, 1378, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1397
 * 
 *     @staticmethod
 *     def bounding_rect(rects):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains all rects
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_157bounding_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_bounding_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__229)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1397, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1396
 *             return lines[0].end_point[1] + threshold > lines[1].start_point[1]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def bounding_rect(rects):
 *         """Get the biggest rect contains all rects
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1396, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_bounding_rect, __pyx_t_3) < 0) __PYX_ERR(0, 1397, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1408
 * 
 *     @staticmethod
 *     def bounding_rect_lines(rect, lines):             # <<<<<<<<<<<<<<
 *         """Get the biggest rect contains rect and all lines
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_159bounding_rect_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_bounding_rect_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__231)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1408, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1407
 *         return cv2.boundingRect(np.array(points, np.float32))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def bounding_rect_lines(rect, lines):
 *         """Get the biggest rect contains rect and all lines
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1407, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_bounding_rect_lines, __pyx_t_4) < 0) __PYX_ERR(0, 1408, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1424
 * 
 *     @staticmethod
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):             # <<<<<<<<<<<<<<
 *         points = []
 *         points.append(virtual_line.start_point)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_161bounding_lines_virtual_line_real_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_bounding_lines_virtual_lin, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__233)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1424, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__234);

  /* "table_extraction/utils_table_extraction.pyx":1423
 *         return cv2.boundingRect(np.array(points, np.float32))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def bounding_lines_virtual_line_real_line(virtual_line, real_line, orientation='v'):
 *         points = []
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1423, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_bounding_lines_virtual_line_real, __pyx_t_3) < 0) __PYX_ERR(0, 1424, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1439
 * 
 *     @staticmethod
 *     def external_rects(image_size, rects):             # <<<<<<<<<<<<<<
 *         """Group overlapping boxes and return all external rects
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_163external_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_external_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__236)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1439, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1438
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def external_rects(image_size, rects):
 *         """Group overlapping boxes and return all external rects
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_external_rects, __pyx_t_4) < 0) __PYX_ERR(0, 1439, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1454
 * 
 *     @staticmethod
 *     def outside_rects(rects):             # <<<<<<<<<<<<<<
 *         """Get outside rects
 *         """
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_165outside_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_outside_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__238)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1454, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1453
 *         return [cv2.boundingRect(c) for c in contours]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def outside_rects(rects):
 *         """Get outside rects
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1453, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_outside_rects, __pyx_t_3) < 0) __PYX_ERR(0, 1454, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1471
 * 
 *     @staticmethod
 *     def convert_box_to_line(box):             # <<<<<<<<<<<<<<
 *         from table_extraction.line import Line
 *         x, y, w, h = box
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_167convert_box_to_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_convert_box_to_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__240)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1471, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1470
 *         return outside_boxes
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def convert_box_to_line(box):
 *         from table_extraction.line import Line
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1470, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_convert_box_to_line, __pyx_t_4) < 0) __PYX_ERR(0, 1471, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1487
 * 
 *     @staticmethod
 *     def convert_line_to_box(line, threshold=1, orientation='v'):             # <<<<<<<<<<<<<<
 *         x1, y1 = line.start_point
 *         x2, y2 = line.end_point
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_169convert_line_to_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_convert_line_to_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__242)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1487, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__243);

  /* "table_extraction/utils_table_extraction.pyx":1486
 *         return Line(start_point, end_point, width, orientation)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def convert_line_to_box(line, threshold=1, orientation='v'):
 *         x1, y1 = line.start_point
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1486, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_convert_line_to_box, __pyx_t_3) < 0) __PYX_ERR(0, 1487, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1496
 * 
 *     @staticmethod
 *     def fill_rects(image, color=(255, 255, 255)):             # <<<<<<<<<<<<<<
 *         """Fill all rects in the input image with the color
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_171fill_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_fill_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__245)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1496, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__246);

  /* "table_extraction/utils_table_extraction.pyx":1495
 *             return (x1 - threshold, y1, 2 * threshold, y2 - y1)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def fill_rects(image, color=(255, 255, 255)):
 *         """Fill all rects in the input image with the color
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1495, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_fill_rects, __pyx_t_4) < 0) __PYX_ERR(0, 1496, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1509
 * 
 *     @staticmethod
 *     def rect_in_list(rect, all_rects):             # <<<<<<<<<<<<<<
 *         for rects in all_rects:
 *             if rect in rects:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_173rect_in_list, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_in_list, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__248)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1509, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1508
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_in_list(rect, all_rects):
 *         for rects in all_rects:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1508, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_in_list, __pyx_t_3) < 0) __PYX_ERR(0, 1509, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1516
 * 
 *     @staticmethod
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):             # <<<<<<<<<<<<<<
 *         line_list = []
 *         for line in lines:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_175line_between_two_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_between_two_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__250)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__251);

  /* "table_extraction/utils_table_extraction.pyx":1515
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_between_two_rects(a_rect, b_rect, lines, orientation="v", threshold=15):
 *         line_list = []
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1515, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_between_two_rects, __pyx_t_4) < 0) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1526
 * 
 *     @staticmethod
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             a_rect, b_rect = (a_rect, b_rect) if a_rect[0]<=b_rect[0] else (b_rect, a_rect)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_177rect_between_two_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_between_two_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__253)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1526, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__254);

  /* "table_extraction/utils_table_extraction.pyx":1525
 *         return line_list
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_between_two_rects(a_rect, b_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1525, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_between_two_rects, __pyx_t_3) < 0) __PYX_ERR(0, 1526, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1546
 * 
 *     @staticmethod
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):             # <<<<<<<<<<<<<<
 *         if orientation=="h":
 *             f_under = lambda src_rect, dst_rect: src_rect[0]+src_rect[2]-threshold<=dst_rect[0]
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_179rects_under_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rects_under_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__256)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1546, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__257);

  /* "table_extraction/utils_table_extraction.pyx":1545
 *             return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rects_under_rect(src_rect, rects, orientation="v", threshold=0, return_rects=False):
 *         if orientation=="h":
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1545, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rects_under_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1546, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1564
 * 
 *     @staticmethod
 *     def alignments_contain(col_alignments, alignments):             # <<<<<<<<<<<<<<
 *         for alignment in alignments:
 *             if alignment in col_alignments:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_181alignments_contain, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_alignments_contain, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__259)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1564, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1563
 *             return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def alignments_contain(col_alignments, alignments):
 *         for alignment in alignments:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1563, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_alignments_contain, __pyx_t_3) < 0) __PYX_ERR(0, 1564, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1571
 * 
 *     @staticmethod
 *     def remove_content_block_by_id(idx, content_blocks):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             if content_block.idx == idx:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_183remove_content_block_by_id, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_content_block_by_id, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__261)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1571, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1570
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_content_block_by_id(idx, content_blocks):
 *         for content_block in content_blocks:
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1570, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_content_block_by_id, __pyx_t_4) < 0) __PYX_ERR(0, 1571, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1577
 * 
 *     @staticmethod
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625             # <<<<<<<<<<<<<<
 *         ave_area = text_stats_dict["ave_area"]
 *         ave_w    = text_stats_dict["ave_w"]
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_185remove_noise_content_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_noise_content_block, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__263)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1577, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1576
 *                 content_blocks.remove(content_block)
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_noise_content_blocks(content_blocks, text_stats_dict): #13625
 *         ave_area = text_stats_dict["ave_area"]
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1576, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_noise_content_blocks, __pyx_t_3) < 0) __PYX_ERR(0, 1577, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1590
 * 
 *     @staticmethod
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):             # <<<<<<<<<<<<<<
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_187has_box_between_content_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_has_box_between_content_bl_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__265)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__266);

  /* "table_extraction/utils_table_extraction.pyx":1589
 *         return list(set(content_blocks)-set(noise_blocks))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def has_box_between_content_blocks(a_content_block, b_content_block, content_blocks, boxes, orientation="horizontal"):
 *         """Check if between two content blocks exist at least a content block or a table bouding box
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1589, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_has_box_between_content_blocks, __pyx_t_4) < 0) __PYX_ERR(0, 1590, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1644
 *         return False
 * 
 *     def draw_group(image, group, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_189draw_group, 0, __pyx_n_s_Utils_draw_group, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__268)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__269);
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_group, __pyx_t_4) < 0) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1652
 * 
 *     @staticmethod
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for group in groups:
 *             Utils.draw_group(image, group, color, thickness)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_191draw_groups, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_groups, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__271)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1652, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__272);

  /* "table_extraction/utils_table_extraction.pyx":1651
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_groups(image, groups, color=(255, 0, 255), thickness=1):
 *         for group in groups:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1651, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_groups, __pyx_t_3) < 0) __PYX_ERR(0, 1652, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1658
 * 
 *     @staticmethod
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         """
 *         Draw content block bounding box and id
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_193draw_content_block, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_content_block, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__274)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1658, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__275);

  /* "table_extraction/utils_table_extraction.pyx":1657
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_content_block(image, content_block, color=(255, 0, 255), thickness=1):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1657, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_content_block, __pyx_t_4) < 0) __PYX_ERR(0, 1658, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1668
 * 
 *     @staticmethod
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for content_block in content_blocks:
 *             Utils.draw_content_block(image, content_block, color, thickness)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_195draw_content_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_content_blocks, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__277)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1668, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__278);

  /* "table_extraction/utils_table_extraction.pyx":1667
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_content_blocks(image, content_blocks, color=(255, 0, 255), thickness=1):
 *         for content_block in content_blocks:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1667, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_content_blocks, __pyx_t_3) < 0) __PYX_ERR(0, 1668, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1674
 * 
 *     @staticmethod
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_197draw_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__280)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1674, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__281);

  /* "table_extraction/utils_table_extraction.pyx":1673
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_box(image, box, color=(255, 0, 255), thickness=1):
 *         '''
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1673, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_box, __pyx_t_4) < 0) __PYX_ERR(0, 1674, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1683
 * 
 *     @staticmethod
 *     def fill_box(image, box, color=(255, 0, 255)):             # <<<<<<<<<<<<<<
 *         '''
 *         fill bounding box
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_199fill_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_fill_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__283)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1683, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__284);

  /* "table_extraction/utils_table_extraction.pyx":1682
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def fill_box(image, box, color=(255, 0, 255)):
 *         '''
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1682, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_fill_box, __pyx_t_3) < 0) __PYX_ERR(0, 1683, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1692
 * 
 *     @staticmethod
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         '''
 *         Draw bounding box for debugging
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_201draw_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_boxes, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__286)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1692, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__287);

  /* "table_extraction/utils_table_extraction.pyx":1691
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_boxes(image, boxes, color=(255, 0, 255), thickness=1):
 *         '''
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1691, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_boxes, __pyx_t_4) < 0) __PYX_ERR(0, 1692, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1701
 * 
 *     @staticmethod
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):             # <<<<<<<<<<<<<<
 *         for box in boxes:
 *             Utils.fill_box(image, box, color)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_203fill_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_fill_boxes, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__289)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1701, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__290);

  /* "table_extraction/utils_table_extraction.pyx":1700
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def fill_boxes(image, boxes, color=(0, 0, 255)):
 *         for box in boxes:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1700, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_fill_boxes, __pyx_t_3) < 0) __PYX_ERR(0, 1701, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1707
 * 
 *     @staticmethod
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 *         return image
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_205draw_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__292)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1707, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__293);

  /* "table_extraction/utils_table_extraction.pyx":1706
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_line(image, line, color=(255, 0, 255), thickness=1):
 *         cv2.line(image, line.start_point, line.end_point, color, thickness)
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1706, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_line, __pyx_t_4) < 0) __PYX_ERR(0, 1707, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1712
 * 
 *     @staticmethod
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):             # <<<<<<<<<<<<<<
 *         for line in lines:
 *             Utils.draw_line(image, line, color, thickness)
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_207draw_lines, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_lines, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__295)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__296);

  /* "table_extraction/utils_table_extraction.pyx":1711
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_lines(image, lines, color=(255, 0, 255), thickness=1):
 *         for line in lines:
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1711, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_lines, __pyx_t_3) < 0) __PYX_ERR(0, 1712, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1718
 * 
 *     @staticmethod
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):             # <<<<<<<<<<<<<<
 * 
 *         if table.left_border is not None:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_209draw_table, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_draw_table, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__298)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__299);

  /* "table_extraction/utils_table_extraction.pyx":1717
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def draw_table(image, table, border_color=(0, 0, 255), line_color=(0, 255, 0), divider_line_color=(255, 0, 0), thickness=2, draw_virtual_lines = True):
 * 
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1717, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_draw_table, __pyx_t_4) < 0) __PYX_ERR(0, 1718, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1755
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_percent(a_rect, b_rect, threshold=2, min_rect=False):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_211rect_overlap_rect_with_percent, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_overlap_rect_with_per, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__301)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1755, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__302);

  /* "table_extraction/utils_table_extraction.pyx":1754
 *         return image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_overlap_rect_with_percent(a_rect, b_rect, threshold=2, min_rect=False):
 *         """ calculate overlap percentage between 2 rect
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1754, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_overlap_rect_with_percent, __pyx_t_3) < 0) __PYX_ERR(0, 1755, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1787
 * 
 *     @staticmethod
 *     def rect_overlap_rect_with_width_height(a_rect, b_rect, width, height):             # <<<<<<<<<<<<<<
 *         """ calculate overlap percentage between 2 rect
 *         params: a_rect coordination, b_rect coordination
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_213rect_overlap_rect_with_width_height, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_overlap_rect_with_wid, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__304)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1786
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_overlap_rect_with_width_height(a_rect, b_rect, width, height):
 *         """ calculate overlap percentage between 2 rect
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1786, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_overlap_rect_with_width_hei, __pyx_t_4) < 0) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1806
 * 
 *     @staticmethod
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):             # <<<<<<<<<<<<<<
 *         """:return: whether or not 2 boxes has same position, width or height"""
 *         a_rect_x, a_rect_y, a_rect_w, a_rect_h = a_rect
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_215rect_can_be_merged, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_rect_can_be_merged, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__306)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1806, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__307);

  /* "table_extraction/utils_table_extraction.pyx":1805
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def rect_can_be_merged(a_rect, b_rect, threshold=50):
 *         """:return: whether or not 2 boxes has same position, width or height"""
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1805, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_rect_can_be_merged, __pyx_t_3) < 0) __PYX_ERR(0, 1806, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1819
 * 
 *     @staticmethod
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: the horizontal lines in the image
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_217extend_line_at_corner, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_extend_line_at_corner, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__309)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1819, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__310);

  /* "table_extraction/utils_table_extraction.pyx":1818
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def extend_line_at_corner(h_lines, v_lines, threshold_v=10, threshold_h=10):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1818, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_extend_line_at_corner, __pyx_t_4) < 0) __PYX_ERR(0, 1819, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1873
 * 
 *     @staticmethod
 *     def line_belong_with_box(box, line, threshold=0.8):             # <<<<<<<<<<<<<<
 *         if line.orientation == 'h':
 *             return (line.end_point[0] - line.start_point[0]) / box[2] >= threshold
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_219line_belong_with_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_belong_with_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__312)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1873, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__313);

  /* "table_extraction/utils_table_extraction.pyx":1872
 *         return h_lines, v_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_belong_with_box(box, line, threshold=0.8):
 *         if line.orientation == 'h':
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1872, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_belong_with_box, __pyx_t_3) < 0) __PYX_ERR(0, 1873, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1880
 * 
 *     @staticmethod
 *     def reset_connect_at_line_corner(lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_221reset_connect_at_line_corner, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_reset_connect_at_line_corn, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__315)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1880, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1879
 *             return (line.end_point[1] - line.start_point[1]) / box[3] >= threshold
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def reset_connect_at_line_corner(lines):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1879, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_reset_connect_at_line_corner, __pyx_t_4) < 0) __PYX_ERR(0, 1880, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1891
 * 
 *     @staticmethod
 *     def expand_image(image, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param image:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_223expand_image, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_expand_image, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__317)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1891, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1890
 *         return lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def expand_image(image, padding_size):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1890, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_expand_image, __pyx_t_3) < 0) __PYX_ERR(0, 1891, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1902
 * 
 *     @staticmethod
 *     def remove_padding_rect(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_225remove_padding_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_padding_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__319)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1902, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1901
 *         return expanded_image
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_padding_rect(rect, image_shape, padding_size):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1901, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_padding_rect, __pyx_t_4) < 0) __PYX_ERR(0, 1902, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1918
 * 
 *     @staticmethod
 *     def line_at_border_image(rect, image_shape, padding_size):             # <<<<<<<<<<<<<<
 *         """
 *         :param rect: the rect's position
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_227line_at_border_image, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_line_at_border_image, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__321)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1918, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1917
 *         return x1, y1, x2 - x1, y2 - y1
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def line_at_border_image(rect, image_shape, padding_size):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1917, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_line_at_border_image, __pyx_t_3) < 0) __PYX_ERR(0, 1918, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1935
 * 
 *     @staticmethod
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):             # <<<<<<<<<<<<<<
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 *             return True
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_229check_two_points_in_same_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_check_two_points_in_same_l, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__323)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1935, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__324);

  /* "table_extraction/utils_table_extraction.pyx":1934
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def check_two_points_in_same_line(a_point, b_point, orientation, threshold=20):
 *         if orientation == "vertical" and abs(a_point[0] - b_point[0]) <= threshold:
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1934, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_check_two_points_in_same_line, __pyx_t_4) < 0) __PYX_ERR(0, 1935, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1943
 * 
 *     @staticmethod
 *     def real_text_block(text_box, threshold=500):             # <<<<<<<<<<<<<<
 *         """
 *         :param text_box:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_231real_text_block, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_real_text_block, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__326)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1943, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__327);

  /* "table_extraction/utils_table_extraction.pyx":1942
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def real_text_block(text_box, threshold=500):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1942, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_real_text_block, __pyx_t_3) < 0) __PYX_ERR(0, 1943, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1953
 * 
 *     @staticmethod
 *     def remove_dot_lines_noise(dot_rects, text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param dot_rects:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_233remove_dot_lines_noise, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_dot_lines_noise, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__329)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1953, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1952
 *         return text_box[2] <= threshold or text_box[3] <= threshold
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_dot_lines_noise(dot_rects, text_blocks):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1952, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_dot_lines_noise, __pyx_t_4) < 0) __PYX_ERR(0, 1953, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1978
 * 
 *     @staticmethod
 *     def white_percentage(image):             # <<<<<<<<<<<<<<
 *         """
 *         :return: the white pixel ratio in the image.
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_235white_percentage, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_white_percentage, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__331)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1978, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1977
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def white_percentage(image):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1977, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_white_percentage, __pyx_t_3) < 0) __PYX_ERR(0, 1978, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1986
 * 
 *     @staticmethod
 *     def width_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_237width_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_width_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__333)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1986, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":1985
 *         return white_pixels / (image.shape[0] * image.shape[1]) * 100
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def width_line(line):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1985, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_width_line, __pyx_t_4) < 0) __PYX_ERR(0, 1986, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1994
 * 
 *     @staticmethod
 *     def height_line(line):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_239height_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_height_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__335)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1994, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":1993
 *         return line.end_point[0] - line.start_point[0]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def height_line(line):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1993, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_height_line, __pyx_t_3) < 0) __PYX_ERR(0, 1994, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2002
 * 
 *     @staticmethod
 *     def content_block_in_groups(groups, content_block):             # <<<<<<<<<<<<<<
 *         """Check if a Content_Block has aready existed in a list of group
 *         """
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_241content_block_in_groups, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_content_block_in_groups, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__337)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2002, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2001
 *         return line.end_point[1] - line.start_point[1]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def content_block_in_groups(groups, content_block):
 *         """Check if a Content_Block has aready existed in a list of group
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2001, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_content_block_in_groups, __pyx_t_4) < 0) __PYX_ERR(0, 2002, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2012
 * 
 *     @staticmethod
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):             # <<<<<<<<<<<<<<
 *         """
 *         :param lines:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_243remove_underline_text, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_underline_text, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__339)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2012, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__340);

  /* "table_extraction/utils_table_extraction.pyx":2011
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_underline_text(lines, block_texts, threshold_distance=15, threshold_deviation=20):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2011, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_underline_text, __pyx_t_3) < 0) __PYX_ERR(0, 2012, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2076
 * 
 *     @staticmethod
 *     def remove_invalid_signed(h_lines):             # <<<<<<<<<<<<<<
 *         """
 *         :param h_lines: horizontal lines
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_245remove_invalid_signed, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_invalid_signed, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__342)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2076, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2075
 *         return lines, block_texts
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_invalid_signed(h_lines):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2075, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_invalid_signed, __pyx_t_4) < 0) __PYX_ERR(0, 2076, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2104
 * 
 *     @staticmethod
 *     def merge_overlap_boxes(boxes, width=2, height=2):             # <<<<<<<<<<<<<<
 *         """
 *         :param boxes:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_247merge_overlap_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_merge_overlap_boxes, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__344)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2104, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__345);

  /* "table_extraction/utils_table_extraction.pyx":2103
 *         return h_lines
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def merge_overlap_boxes(boxes, width=2, height=2):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2103, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_overlap_boxes, __pyx_t_3) < 0) __PYX_ERR(0, 2104, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2131
 * 
 *     @staticmethod
 *     def merge_two_types_text_blocks(old_text_blocks, new_text_blocks):             # <<<<<<<<<<<<<<
 *         """
 *         :param old_text_blocks: text blocks is detected by Infodio algorithm
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_249merge_two_types_text_blocks, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_merge_two_types_text_block, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__347)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2131, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2130
 *         return extend_boxes
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def merge_two_types_text_blocks(old_text_blocks, new_text_blocks):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2130, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_two_types_text_blocks, __pyx_t_4) < 0) __PYX_ERR(0, 2131, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2156
 * 
 *     @staticmethod
 *     def remove_noise_lines_rect(line_rects, text_block_rects):             # <<<<<<<<<<<<<<
 *         """
 *         :param line_rects: all of the line's position
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_251remove_noise_lines_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_remove_noise_lines_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__349)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2156, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":2155
 *         return list(set(text_block_rects))
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def remove_noise_lines_rect(line_rects, text_block_rects):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2155, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_remove_noise_lines_rect, __pyx_t_3) < 0) __PYX_ERR(0, 2156, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2191
 * 
 *     @staticmethod
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         x1,y1,w,h = rect
 *         x2 = x1 + w
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_253convert_rect_to_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_convert_rect_to_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__351)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2191, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2190
 *         return line_rects
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def convert_rect_to_rect(rect, width_ratio, height_ratio):
 *         x1,y1,w,h = rect
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2190, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_convert_rect_to_rect, __pyx_t_4) < 0) __PYX_ERR(0, 2191, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2205
 * 
 *     @staticmethod
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):             # <<<<<<<<<<<<<<
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 * 
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_255convert_rects_to_rects, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_convert_rects_to_rects, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__353)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2205, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":2204
 * 
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def convert_rects_to_rects(rects, width_ratio, height_ratio):
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2204, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_convert_rects_to_rects, __pyx_t_3) < 0) __PYX_ERR(0, 2205, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2209
 * 
 *     @staticmethod
 *     def extract_line_rect(image, remove_line_at_border=True):             # <<<<<<<<<<<<<<
 *         """
 *         :param image: The image contains horizontal lines or vertical lines.
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_257extract_line_rect, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_extract_line_rect, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__355)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2209, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__356);

  /* "table_extraction/utils_table_extraction.pyx":2208
 *         return [Utils.convert_rect_to_rect(rect, width_ratio, height_ratio) for rect in rects]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def extract_line_rect(image, remove_line_at_border=True):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_extract_line_rect, __pyx_t_4) < 0) __PYX_ERR(0, 2209, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2234
 * 
 *     @staticmethod
 *     def is_point_in_line(point, line):             # <<<<<<<<<<<<<<
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_259is_point_in_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_point_in_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__358)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2234, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":2233
 *         return [rect for rect in rects if rect[2] < 40 or rect[3] < 40]
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_point_in_line(point, line):
 *         return (point[1] == line.start_point[1] and line.start_point[0] <= point[0] <= line.end_point[0]) or \
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2233, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_point_in_line, __pyx_t_3) < 0) __PYX_ERR(0, 2234, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2239
 * 
 *     @staticmethod
 *     def is_start_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_261is_start_point_on_intersection, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_start_point_on_intersec, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__360)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__361);

  /* "table_extraction/utils_table_extraction.pyx":2238
 *                 (point[0] == line.start_point[0] and line.start_point[1] <= point[1] <= line.end_point[1])
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_start_point_on_intersection(line, orientation="v", threshold=0):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_start_point_on_intersection, __pyx_t_4) < 0) __PYX_ERR(0, 2239, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2255
 * 
 *     @staticmethod
 *     def is_end_point_on_intersection(line, orientation="v", threshold=0):             # <<<<<<<<<<<<<<
 *         """
 *         :param line:
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_263is_end_point_on_intersection, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_end_point_on_intersecti, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__363)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2255, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__364);

  /* "table_extraction/utils_table_extraction.pyx":2254
 *             return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_end_point_on_intersection(line, orientation="v", threshold=0):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2254, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_end_point_on_intersection, __pyx_t_3) < 0) __PYX_ERR(0, 2255, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2271
 * 
 *     @staticmethod
 *     def is_point_far_line(point, line, times=1):             # <<<<<<<<<<<<<<
 *         """
 *         Is the point {times} times as far away from the line
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_265is_point_far_line, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_point_far_line, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__366)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2271, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__367);

  /* "table_extraction/utils_table_extraction.pyx":2270
 *             return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_point_far_line(point, line, times=1):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2270, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_point_far_line, __pyx_t_4) < 0) __PYX_ERR(0, 2271, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2285
 * 
 *     @staticmethod
 *     def search_text_by_box(crnn_chars, box): #13968             # <<<<<<<<<<<<<<
 *         """
 *         Search text from crnn_chars by box
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_267search_text_by_box, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_search_text_by_box, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__369)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2285, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":2284
 *         return line.length()*times>min_distance
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def search_text_by_box(crnn_chars, box): #13968
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2284, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_search_text_by_box, __pyx_t_3) < 0) __PYX_ERR(0, 2285, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2297
 * 
 *     @staticmethod
 *     def merge_single_chars(text_list):             # <<<<<<<<<<<<<<
 *         merge_chars_list = []
 *         searched_ids     = []
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_269merge_single_chars, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_merge_single_chars, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__371)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2297, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2296
 *         return text[0] if text and text[0] else ""
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def merge_single_chars(text_list):
 *         merge_chars_list = []
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2296, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_merge_single_chars, __pyx_t_4) < 0) __PYX_ERR(0, 2297, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2321
 * 
 *     @staticmethod
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968             # <<<<<<<<<<<<<<
 *         if len(blocks)<=1: #14611
 *             return False
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_271is_text_blocks_header_by_header_dict, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_text_blocks_header_by_h, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__373)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2321, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);

  /* "table_extraction/utils_table_extraction.pyx":2320
 *         return text_list
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_text_blocks_header_by_header_dict(blocks, crnn_chars, header_regex): #13968
 *         if len(blocks)<=1: #14611
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2320, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_text_blocks_header_by_header, __pyx_t_3) < 0) __PYX_ERR(0, 2321, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2342
 * 
 *     @staticmethod
 *     def align_horizontal(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_273align_horizontal, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_align_horizontal, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__375)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2342, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__376);

  /* "table_extraction/utils_table_extraction.pyx":2341
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def align_horizontal(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2341, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_align_horizontal, __pyx_t_4) < 0) __PYX_ERR(0, 2342, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2354
 * 
 *     @staticmethod
 *     def align_vertical(a_box, b_box, threshold=5):             # <<<<<<<<<<<<<<
 *         a_x, a_y, a_w, a_h = a_box
 *         b_x, b_y, b_w, b_h = b_box
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_275align_vertical, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_align_vertical, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__378)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2354, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__379);

  /* "table_extraction/utils_table_extraction.pyx":2353
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def align_vertical(a_box, b_box, threshold=5):
 *         a_x, a_y, a_w, a_h = a_box
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2353, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_align_vertical, __pyx_t_3) < 0) __PYX_ERR(0, 2354, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2366
 * 
 *     @staticmethod
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get rows from content boxes
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_277get_rows_from_content_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_get_rows_from_content_boxe_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__381)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2366, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_3, __pyx_tuple__382);

  /* "table_extraction/utils_table_extraction.pyx":2365
 *         return False
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def get_rows_from_content_boxes(content_boxes, ignore_single=False):
 *         """
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2365, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_get_rows_from_content_boxes, __pyx_t_4) < 0) __PYX_ERR(0, 2366, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2402
 * 
 *     @staticmethod
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):             # <<<<<<<<<<<<<<
 *         """
 *         Get columns from content boxes
 */
  __pyx_t_4 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_279get_columns_from_content_boxes, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_get_columns_from_content_b_2, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__384)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2402, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_CyFunction_SetDefaultsTuple(__pyx_t_4, __pyx_tuple__385);

  /* "table_extraction/utils_table_extraction.pyx":2401
 *         return rows
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def get_columns_from_content_boxes(content_boxes, ignore_single=False):
 *         """
 */
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2401, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_get_columns_from_content_boxes, __pyx_t_3) < 0) __PYX_ERR(0, 2402, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "table_extraction/utils_table_extraction.pyx":2436
 * 
 *     @staticmethod
 *     def is_fill_area(box, image): #14802             # <<<<<<<<<<<<<<
 *         FILL_AREA_PERCENT = 70
 *         part_area = Utils.get_area_from_binary_image(box, image)
 */
  __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_16table_extraction_22utils_table_extraction_5Utils_281is_fill_area, __Pyx_CYFUNCTION_STATICMETHOD, __pyx_n_s_Utils_is_fill_area, NULL, __pyx_n_s_table_extraction_utils_table_ext_2, __pyx_d, ((PyObject *)__pyx_codeobj__387)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2436, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);

  /* "table_extraction/utils_table_extraction.pyx":2435
 *         return cols
 * 
 *     @staticmethod             # <<<<<<<<<<<<<<
 *     def is_fill_area(box, image): #14802
 *         FILL_AREA_PERCENT = 70
 */
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_staticmethod, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2435, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__Pyx_SetNameInClass(__pyx_t_1, __pyx_n_s_is_fill_area, __pyx_t_4) < 0) __PYX_ERR(0, 2436, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "table_extraction/utils_table_extraction.pyx":9
 * from table_extraction.debug import Debug
 * 
 * class Utils(object):             # <<<<<<<<<<<<<<
 * 
 *     @staticmethod
 */
  __pyx_t_4 = __Pyx_Py3ClassCreate(__pyx_t_2, __pyx_n_s_Utils, __pyx_tuple__24, __pyx_t_1, NULL, 0, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 9, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_Utils, __pyx_t_4) < 0) __PYX_ERR(0, 9, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "table_extraction/utils_table_extraction.pyx":1
 * import cv2             # <<<<<<<<<<<<<<
 * import math
 * import itertools
 */
  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /*--- Wrapped vars code ---*/

  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  if (__pyx_m) {
    if (__pyx_d) {
      __Pyx_AddTraceback("init table_extraction.utils_table_extraction", __pyx_clineno, __pyx_lineno, __pyx_filename);
    }
    Py_CLEAR(__pyx_m);
  } else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_ImportError, "init table_extraction.utils_table_extraction");
  }
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  return (__pyx_m != NULL) ? 0 : -1;
  #elif PY_MAJOR_VERSION >= 3
  return __pyx_m;
  #else
  return;
  #endif
}

/* --- Runtime support code --- */
/* Refnanny */
#if CYTHON_REFNANNY
static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname) {
    PyObject *m = NULL, *p = NULL;
    void *r = NULL;
    m = PyImport_ImportModule(modname);
    if (!m) goto end;
    p = PyObject_GetAttrString(m, "RefNannyAPI");
    if (!p) goto end;
    r = PyLong_AsVoidPtr(p);
end:
    Py_XDECREF(p);
    Py_XDECREF(m);
    return (__Pyx_RefNannyAPIStruct *)r;
}
#endif

/* PyObjectGetAttrStr */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_getattro))
        return tp->tp_getattro(obj, attr_name);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_getattr))
        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
#endif
    return PyObject_GetAttr(obj, attr_name);
}
#endif

/* GetBuiltinName */
static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
    PyObject* result = __Pyx_PyObject_GetAttrStr(__pyx_b, name);
    if (unlikely(!result)) {
        PyErr_Format(PyExc_NameError,
#if PY_MAJOR_VERSION >= 3
            "name '%U' is not defined", name);
#else
            "name '%.200s' is not defined", PyString_AS_STRING(name));
#endif
    }
    return result;
}

/* SliceObject */
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetSlice(PyObject* obj,
        Py_ssize_t cstart, Py_ssize_t cstop,
        PyObject** _py_start, PyObject** _py_stop, PyObject** _py_slice,
        int has_cstart, int has_cstop, CYTHON_UNUSED int wraparound) {
#if CYTHON_USE_TYPE_SLOTS
    PyMappingMethods* mp;
#if PY_MAJOR_VERSION < 3
    PySequenceMethods* ms = Py_TYPE(obj)->tp_as_sequence;
    if (likely(ms && ms->sq_slice)) {
        if (!has_cstart) {
            if (_py_start && (*_py_start != Py_None)) {
                cstart = __Pyx_PyIndex_AsSsize_t(*_py_start);
                if ((cstart == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
            } else
                cstart = 0;
        }
        if (!has_cstop) {
            if (_py_stop && (*_py_stop != Py_None)) {
                cstop = __Pyx_PyIndex_AsSsize_t(*_py_stop);
                if ((cstop == (Py_ssize_t)-1) && PyErr_Occurred()) goto bad;
            } else
                cstop = PY_SSIZE_T_MAX;
        }
        if (wraparound && unlikely((cstart < 0) | (cstop < 0)) && likely(ms->sq_length)) {
            Py_ssize_t l = ms->sq_length(obj);
            if (likely(l >= 0)) {
                if (cstop < 0) {
                    cstop += l;
                    if (cstop < 0) cstop = 0;
                }
                if (cstart < 0) {
                    cstart += l;
                    if (cstart < 0) cstart = 0;
                }
            } else {
                if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                    goto bad;
                PyErr_Clear();
            }
        }
        return ms->sq_slice(obj, cstart, cstop);
    }
#endif
    mp = Py_TYPE(obj)->tp_as_mapping;
    if (likely(mp && mp->mp_subscript))
#endif
    {
        PyObject* result;
        PyObject *py_slice, *py_start, *py_stop;
        if (_py_slice) {
            py_slice = *_py_slice;
        } else {
            PyObject* owned_start = NULL;
            PyObject* owned_stop = NULL;
            if (_py_start) {
                py_start = *_py_start;
            } else {
                if (has_cstart) {
                    owned_start = py_start = PyInt_FromSsize_t(cstart);
                    if (unlikely(!py_start)) goto bad;
                } else
                    py_start = Py_None;
            }
            if (_py_stop) {
                py_stop = *_py_stop;
            } else {
                if (has_cstop) {
                    owned_stop = py_stop = PyInt_FromSsize_t(cstop);
                    if (unlikely(!py_stop)) {
                        Py_XDECREF(owned_start);
                        goto bad;
                    }
                } else
                    py_stop = Py_None;
            }
            py_slice = PySlice_New(py_start, py_stop, Py_None);
            Py_XDECREF(owned_start);
            Py_XDECREF(owned_stop);
            if (unlikely(!py_slice)) goto bad;
        }
#if CYTHON_USE_TYPE_SLOTS
        result = mp->mp_subscript(obj, py_slice);
#else
        result = PyObject_GetItem(obj, py_slice);
#endif
        if (!_py_slice) {
            Py_DECREF(py_slice);
        }
        return result;
    }
    PyErr_Format(PyExc_TypeError,
        "'%.200s' object is unsliceable", Py_TYPE(obj)->tp_name);
bad:
    return NULL;
}

/* RaiseTooManyValuesToUnpack */
static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
    PyErr_Format(PyExc_ValueError,
                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
}

/* RaiseNeedMoreValuesToUnpack */
static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
    PyErr_Format(PyExc_ValueError,
                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
                 index, (index == 1) ? "" : "s");
}

/* IterFinish */
static CYTHON_INLINE int __Pyx_IterFinish(void) {
#if CYTHON_FAST_THREAD_STATE
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    PyObject* exc_type = tstate->curexc_type;
    if (unlikely(exc_type)) {
        if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) {
            PyObject *exc_value, *exc_tb;
            exc_value = tstate->curexc_value;
            exc_tb = tstate->curexc_traceback;
            tstate->curexc_type = 0;
            tstate->curexc_value = 0;
            tstate->curexc_traceback = 0;
            Py_DECREF(exc_type);
            Py_XDECREF(exc_value);
            Py_XDECREF(exc_tb);
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#else
    if (unlikely(PyErr_Occurred())) {
        if (likely(PyErr_ExceptionMatches(PyExc_StopIteration))) {
            PyErr_Clear();
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#endif
}

/* UnpackItemEndCheck */
static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
    if (unlikely(retval)) {
        Py_DECREF(retval);
        __Pyx_RaiseTooManyValuesError(expected);
        return -1;
    } else {
        return __Pyx_IterFinish();
    }
    return 0;
}

/* RaiseDoubleKeywords */
static void __Pyx_RaiseDoubleKeywordsError(
    const char* func_name,
    PyObject* kw_name)
{
    PyErr_Format(PyExc_TypeError,
        #if PY_MAJOR_VERSION >= 3
        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
        #else
        "%s() got multiple values for keyword argument '%s'", func_name,
        PyString_AsString(kw_name));
        #endif
}

/* ParseKeywords */
static int __Pyx_ParseOptionalKeywords(
    PyObject *kwds,
    PyObject **argnames[],
    PyObject *kwds2,
    PyObject *values[],
    Py_ssize_t num_pos_args,
    const char* function_name)
{
    PyObject *key = 0, *value = 0;
    Py_ssize_t pos = 0;
    PyObject*** name;
    PyObject*** first_kw_arg = argnames + num_pos_args;
    while (PyDict_Next(kwds, &pos, &key, &value)) {
        name = first_kw_arg;
        while (*name && (**name != key)) name++;
        if (*name) {
            values[name-argnames] = value;
            continue;
        }
        name = first_kw_arg;
        #if PY_MAJOR_VERSION < 3
        if (likely(PyString_CheckExact(key)) || likely(PyString_Check(key))) {
            while (*name) {
                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
                        && _PyString_Eq(**name, key)) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    if ((**argname == key) || (
                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
                             && _PyString_Eq(**argname, key))) {
                        goto arg_passed_twice;
                    }
                    argname++;
                }
            }
        } else
        #endif
        if (likely(PyUnicode_Check(key))) {
            while (*name) {
                int cmp = (**name == key) ? 0 :
                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                    (PyUnicode_GET_SIZE(**name) != PyUnicode_GET_SIZE(key)) ? 1 :
                #endif
                    PyUnicode_Compare(**name, key);
                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                if (cmp == 0) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    int cmp = (**argname == key) ? 0 :
                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                        (PyUnicode_GET_SIZE(**argname) != PyUnicode_GET_SIZE(key)) ? 1 :
                    #endif
                        PyUnicode_Compare(**argname, key);
                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                    if (cmp == 0) goto arg_passed_twice;
                    argname++;
                }
            }
        } else
            goto invalid_keyword_type;
        if (kwds2) {
            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
        } else {
            goto invalid_keyword;
        }
    }
    return 0;
arg_passed_twice:
    __Pyx_RaiseDoubleKeywordsError(function_name, key);
    goto bad;
invalid_keyword_type:
    PyErr_Format(PyExc_TypeError,
        "%.200s() keywords must be strings", function_name);
    goto bad;
invalid_keyword:
    PyErr_Format(PyExc_TypeError,
    #if PY_MAJOR_VERSION < 3
        "%.200s() got an unexpected keyword argument '%.200s'",
        function_name, PyString_AsString(key));
    #else
        "%s() got an unexpected keyword argument '%U'",
        function_name, key);
    #endif
bad:
    return -1;
}

/* RaiseArgTupleInvalid */
static void __Pyx_RaiseArgtupleInvalid(
    const char* func_name,
    int exact,
    Py_ssize_t num_min,
    Py_ssize_t num_max,
    Py_ssize_t num_found)
{
    Py_ssize_t num_expected;
    const char *more_or_less;
    if (num_found < num_min) {
        num_expected = num_min;
        more_or_less = "at least";
    } else {
        num_expected = num_max;
        more_or_less = "at most";
    }
    if (exact) {
        more_or_less = "exactly";
    }
    PyErr_Format(PyExc_TypeError,
                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
                 func_name, more_or_less, num_expected,
                 (num_expected == 1) ? "" : "s", num_found);
}

/* GetItemInt */
static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
    PyObject *r;
    if (!j) return NULL;
    r = PyObject_GetItem(o, j);
    Py_DECREF(j);
    return r;
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyList_GET_SIZE(o);
    }
    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyTuple_GET_SIZE(o);
    }
    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
                                                     CYTHON_NCP_UNUSED int wraparound,
                                                     CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
    if (is_list || PyList_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
            PyObject *r = PyList_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    }
    else if (PyTuple_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
            PyObject *r = PyTuple_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    } else {
        PySequenceMethods *m = Py_TYPE(o)->tp_as_sequence;
        if (likely(m && m->sq_item)) {
            if (wraparound && unlikely(i < 0) && likely(m->sq_length)) {
                Py_ssize_t l = m->sq_length(o);
                if (likely(l >= 0)) {
                    i += l;
                } else {
                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                        return NULL;
                    PyErr_Clear();
                }
            }
            return m->sq_item(o, i);
        }
    }
#else
    if (is_list || PySequence_Check(o)) {
        return PySequence_GetItem(o, i);
    }
#endif
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
}

/* GetModuleGlobalName */
#if CYTHON_USE_DICT_VERSIONS
static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
#else
static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
#endif
{
    PyObject *result;
#if !CYTHON_AVOID_BORROWED_REFS
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    } else if (unlikely(PyErr_Occurred())) {
        return NULL;
    }
#else
    result = PyDict_GetItem(__pyx_d, name);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    }
#endif
#else
    result = PyObject_GetItem(__pyx_d, name);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    }
    PyErr_Clear();
#endif
    return __Pyx_GetBuiltinName(name);
}

/* PyFunctionFastCall */
#if CYTHON_FAST_PYCALL
static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                               PyObject *globals) {
    PyFrameObject *f;
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    PyObject **fastlocals;
    Py_ssize_t i;
    PyObject *result;
    assert(globals != NULL);
    /* XXX Perhaps we should create a specialized
       PyFrame_New() that doesn't take locals, but does
       take builtins without sanity checking them.
       */
    assert(tstate != NULL);
    f = PyFrame_New(tstate, co, globals, NULL);
    if (f == NULL) {
        return NULL;
    }
    fastlocals = __Pyx_PyFrame_GetLocalsplus(f);
    for (i = 0; i < na; i++) {
        Py_INCREF(*args);
        fastlocals[i] = *args++;
    }
    result = PyEval_EvalFrameEx(f,0);
    ++tstate->recursion_depth;
    Py_DECREF(f);
    --tstate->recursion_depth;
    return result;
}
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs) {
    PyCodeObject *co = (PyCodeObject *)PyFunction_GET_CODE(func);
    PyObject *globals = PyFunction_GET_GLOBALS(func);
    PyObject *argdefs = PyFunction_GET_DEFAULTS(func);
    PyObject *closure;
#if PY_MAJOR_VERSION >= 3
    PyObject *kwdefs;
#endif
    PyObject *kwtuple, **k;
    PyObject **d;
    Py_ssize_t nd;
    Py_ssize_t nk;
    PyObject *result;
    assert(kwargs == NULL || PyDict_Check(kwargs));
    nk = kwargs ? PyDict_Size(kwargs) : 0;
    if (Py_EnterRecursiveCall((char*)" while calling a Python object")) {
        return NULL;
    }
    if (
#if PY_MAJOR_VERSION >= 3
            co->co_kwonlyargcount == 0 &&
#endif
            likely(kwargs == NULL || nk == 0) &&
            co->co_flags == (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)) {
        if (argdefs == NULL && co->co_argcount == nargs) {
            result = __Pyx_PyFunction_FastCallNoKw(co, args, nargs, globals);
            goto done;
        }
        else if (nargs == 0 && argdefs != NULL
                 && co->co_argcount == Py_SIZE(argdefs)) {
            /* function called with no arguments, but all parameters have
               a default value: use default values as arguments .*/
            args = &PyTuple_GET_ITEM(argdefs, 0);
            result =__Pyx_PyFunction_FastCallNoKw(co, args, Py_SIZE(argdefs), globals);
            goto done;
        }
    }
    if (kwargs != NULL) {
        Py_ssize_t pos, i;
        kwtuple = PyTuple_New(2 * nk);
        if (kwtuple == NULL) {
            result = NULL;
            goto done;
        }
        k = &PyTuple_GET_ITEM(kwtuple, 0);
        pos = i = 0;
        while (PyDict_Next(kwargs, &pos, &k[i], &k[i+1])) {
            Py_INCREF(k[i]);
            Py_INCREF(k[i+1]);
            i += 2;
        }
        nk = i / 2;
    }
    else {
        kwtuple = NULL;
        k = NULL;
    }
    closure = PyFunction_GET_CLOSURE(func);
#if PY_MAJOR_VERSION >= 3
    kwdefs = PyFunction_GET_KW_DEFAULTS(func);
#endif
    if (argdefs != NULL) {
        d = &PyTuple_GET_ITEM(argdefs, 0);
        nd = Py_SIZE(argdefs);
    }
    else {
        d = NULL;
        nd = 0;
    }
#if PY_MAJOR_VERSION >= 3
    result = PyEval_EvalCodeEx((PyObject*)co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, kwdefs, closure);
#else
    result = PyEval_EvalCodeEx(co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, closure);
#endif
    Py_XDECREF(kwtuple);
done:
    Py_LeaveRecursiveCall();
    return result;
}
#endif
#endif

/* PyCFunctionFastCall */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject * __Pyx_PyCFunction_FastCall(PyObject *func_obj, PyObject **args, Py_ssize_t nargs) {
    PyCFunctionObject *func = (PyCFunctionObject*)func_obj;
    PyCFunction meth = PyCFunction_GET_FUNCTION(func);
    PyObject *self = PyCFunction_GET_SELF(func);
    int flags = PyCFunction_GET_FLAGS(func);
    assert(PyCFunction_Check(func));
    assert(METH_FASTCALL == (flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS | METH_STACKLESS)));
    assert(nargs >= 0);
    assert(nargs == 0 || args != NULL);
    /* _PyCFunction_FastCallDict() must not be called with an exception set,
       because it may clear it (directly or indirectly) and so the
       caller loses its exception */
    assert(!PyErr_Occurred());
    if ((PY_VERSION_HEX < 0x030700A0) || unlikely(flags & METH_KEYWORDS)) {
        return (*((__Pyx_PyCFunctionFastWithKeywords)(void*)meth)) (self, args, nargs, NULL);
    } else {
        return (*((__Pyx_PyCFunctionFast)(void*)meth)) (self, args, nargs);
    }
}
#endif

/* PyObjectCall */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    PyObject *result;
    ternaryfunc call = func->ob_type->tp_call;
    if (unlikely(!call))
        return PyObject_Call(func, arg, kw);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = (*call)(func, arg, kw);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallMethO */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
    PyObject *self, *result;
    PyCFunction cfunc;
    cfunc = PyCFunction_GET_FUNCTION(func);
    self = PyCFunction_GET_SELF(func);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = cfunc(self, arg);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallNoArg */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, NULL, 0);
    }
#endif
#ifdef __Pyx_CyFunction_USED
    if (likely(PyCFunction_Check(func) || __Pyx_CyFunction_Check(func)))
#else
    if (likely(PyCFunction_Check(func)))
#endif
    {
        if (likely(PyCFunction_GET_FLAGS(func) & METH_NOARGS)) {
            return __Pyx_PyObject_CallMethO(func, NULL);
        }
    }
    return __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL);
}
#endif

/* PyObjectCallOneArg */
#if CYTHON_COMPILING_IN_CPYTHON
static PyObject* __Pyx__PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_New(1);
    if (unlikely(!args)) return NULL;
    Py_INCREF(arg);
    PyTuple_SET_ITEM(args, 0, arg);
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, &arg, 1);
    }
#endif
    if (likely(PyCFunction_Check(func))) {
        if (likely(PyCFunction_GET_FLAGS(func) & METH_O)) {
            return __Pyx_PyObject_CallMethO(func, arg);
#if CYTHON_FAST_PYCCALL
        } else if (PyCFunction_GET_FLAGS(func) & METH_FASTCALL) {
            return __Pyx_PyCFunction_FastCall(func, &arg, 1);
#endif
        }
    }
    return __Pyx__PyObject_CallOneArg(func, arg);
}
#else
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_Pack(1, arg);
    if (unlikely(!args)) return NULL;
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
#endif

/* PyObjectCall2Args */
static CYTHON_UNUSED PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
    PyObject *args, *result = NULL;
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(function)) {
        PyObject *args[2] = {arg1, arg2};
        return __Pyx_PyFunction_FastCall(function, args, 2);
    }
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(function)) {
        PyObject *args[2] = {arg1, arg2};
        return __Pyx_PyCFunction_FastCall(function, args, 2);
    }
    #endif
    args = PyTuple_New(2);
    if (unlikely(!args)) goto done;
    Py_INCREF(arg1);
    PyTuple_SET_ITEM(args, 0, arg1);
    Py_INCREF(arg2);
    PyTuple_SET_ITEM(args, 1, arg2);
    Py_INCREF(function);
    result = __Pyx_PyObject_Call(function, args, NULL);
    Py_DECREF(args);
    Py_DECREF(function);
done:
    return result;
}

/* PyObjectSetAttrStr */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_setattro))
        return tp->tp_setattro(obj, attr_name, value);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_setattr))
        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
#endif
    return PyObject_SetAttr(obj, attr_name, value);
}
#endif

/* FetchCommonType */
static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
    PyObject* fake_module;
    PyTypeObject* cached_type = NULL;
    fake_module = PyImport_AddModule((char*) "_cython_" CYTHON_ABI);
    if (!fake_module) return NULL;
    Py_INCREF(fake_module);
    cached_type = (PyTypeObject*) PyObject_GetAttrString(fake_module, type->tp_name);
    if (cached_type) {
        if (!PyType_Check((PyObject*)cached_type)) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s is not a type object",
                type->tp_name);
            goto bad;
        }
        if (cached_type->tp_basicsize != type->tp_basicsize) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s has the wrong size, try recompiling",
                type->tp_name);
            goto bad;
        }
    } else {
        if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
        PyErr_Clear();
        if (PyType_Ready(type) < 0) goto bad;
        if (PyObject_SetAttrString(fake_module, type->tp_name, (PyObject*) type) < 0)
            goto bad;
        Py_INCREF(type);
        cached_type = type;
    }
done:
    Py_DECREF(fake_module);
    return cached_type;
bad:
    Py_XDECREF(cached_type);
    cached_type = NULL;
    goto done;
}

/* CythonFunction */
#include <structmember.h>
static PyObject *
__Pyx_CyFunction_get_doc(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *closure)
{
    if (unlikely(op->func_doc == NULL)) {
        if (op->func.m_ml->ml_doc) {
#if PY_MAJOR_VERSION >= 3
            op->func_doc = PyUnicode_FromString(op->func.m_ml->ml_doc);
#else
            op->func_doc = PyString_FromString(op->func.m_ml->ml_doc);
#endif
            if (unlikely(op->func_doc == NULL))
                return NULL;
        } else {
            Py_INCREF(Py_None);
            return Py_None;
        }
    }
    Py_INCREF(op->func_doc);
    return op->func_doc;
}
static int
__Pyx_CyFunction_set_doc(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp = op->func_doc;
    if (value == NULL) {
        value = Py_None;
    }
    Py_INCREF(value);
    op->func_doc = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_name(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    if (unlikely(op->func_name == NULL)) {
#if PY_MAJOR_VERSION >= 3
        op->func_name = PyUnicode_InternFromString(op->func.m_ml->ml_name);
#else
        op->func_name = PyString_InternFromString(op->func.m_ml->ml_name);
#endif
        if (unlikely(op->func_name == NULL))
            return NULL;
    }
    Py_INCREF(op->func_name);
    return op->func_name;
}
static int
__Pyx_CyFunction_set_name(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value)))
#else
    if (unlikely(value == NULL || !PyString_Check(value)))
#endif
    {
        PyErr_SetString(PyExc_TypeError,
                        "__name__ must be set to a string object");
        return -1;
    }
    tmp = op->func_name;
    Py_INCREF(value);
    op->func_name = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_qualname(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(op->func_qualname);
    return op->func_qualname;
}
static int
__Pyx_CyFunction_set_qualname(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value)))
#else
    if (unlikely(value == NULL || !PyString_Check(value)))
#endif
    {
        PyErr_SetString(PyExc_TypeError,
                        "__qualname__ must be set to a string object");
        return -1;
    }
    tmp = op->func_qualname;
    Py_INCREF(value);
    op->func_qualname = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_self(__pyx_CyFunctionObject *m, CYTHON_UNUSED void *closure)
{
    PyObject *self;
    self = m->func_closure;
    if (self == NULL)
        self = Py_None;
    Py_INCREF(self);
    return self;
}
static PyObject *
__Pyx_CyFunction_get_dict(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    if (unlikely(op->func_dict == NULL)) {
        op->func_dict = PyDict_New();
        if (unlikely(op->func_dict == NULL))
            return NULL;
    }
    Py_INCREF(op->func_dict);
    return op->func_dict;
}
static int
__Pyx_CyFunction_set_dict(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
    if (unlikely(value == NULL)) {
        PyErr_SetString(PyExc_TypeError,
               "function's dictionary may not be deleted");
        return -1;
    }
    if (unlikely(!PyDict_Check(value))) {
        PyErr_SetString(PyExc_TypeError,
               "setting function's dictionary to a non-dict");
        return -1;
    }
    tmp = op->func_dict;
    Py_INCREF(value);
    op->func_dict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_globals(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(op->func_globals);
    return op->func_globals;
}
static PyObject *
__Pyx_CyFunction_get_closure(CYTHON_UNUSED __pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(Py_None);
    return Py_None;
}
static PyObject *
__Pyx_CyFunction_get_code(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    PyObject* result = (op->func_code) ? op->func_code : Py_None;
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_init_defaults(__pyx_CyFunctionObject *op) {
    int result = 0;
    PyObject *res = op->defaults_getter((PyObject *) op);
    if (unlikely(!res))
        return -1;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    op->defaults_tuple = PyTuple_GET_ITEM(res, 0);
    Py_INCREF(op->defaults_tuple);
    op->defaults_kwdict = PyTuple_GET_ITEM(res, 1);
    Py_INCREF(op->defaults_kwdict);
    #else
    op->defaults_tuple = PySequence_ITEM(res, 0);
    if (unlikely(!op->defaults_tuple)) result = -1;
    else {
        op->defaults_kwdict = PySequence_ITEM(res, 1);
        if (unlikely(!op->defaults_kwdict)) result = -1;
    }
    #endif
    Py_DECREF(res);
    return result;
}
static int
__Pyx_CyFunction_set_defaults(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyTuple_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__defaults__ must be set to a tuple object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_tuple;
    op->defaults_tuple = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_defaults(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->defaults_tuple;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_tuple;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_kwdefaults(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__kwdefaults__ must be set to a dict object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_kwdict;
    op->defaults_kwdict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_kwdefaults(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->defaults_kwdict;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_kwdict;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_annotations(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value || value == Py_None) {
        value = NULL;
    } else if (!PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__annotations__ must be set to a dict object");
        return -1;
    }
    Py_XINCREF(value);
    tmp = op->func_annotations;
    op->func_annotations = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_annotations(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->func_annotations;
    if (unlikely(!result)) {
        result = PyDict_New();
        if (unlikely(!result)) return NULL;
        op->func_annotations = result;
    }
    Py_INCREF(result);
    return result;
}
static PyGetSetDef __pyx_CyFunction_getsets[] = {
    {(char *) "func_doc", (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "__doc__",  (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "func_name", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__name__", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__qualname__", (getter)__Pyx_CyFunction_get_qualname, (setter)__Pyx_CyFunction_set_qualname, 0, 0},
    {(char *) "__self__", (getter)__Pyx_CyFunction_get_self, 0, 0, 0},
    {(char *) "func_dict", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "__dict__", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "func_globals", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "__globals__", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "func_closure", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "__closure__", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "func_code", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "__code__", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "func_defaults", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__defaults__", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__kwdefaults__", (getter)__Pyx_CyFunction_get_kwdefaults, (setter)__Pyx_CyFunction_set_kwdefaults, 0, 0},
    {(char *) "__annotations__", (getter)__Pyx_CyFunction_get_annotations, (setter)__Pyx_CyFunction_set_annotations, 0, 0},
    {0, 0, 0, 0, 0}
};
static PyMemberDef __pyx_CyFunction_members[] = {
    {(char *) "__module__", T_OBJECT, offsetof(PyCFunctionObject, m_module), PY_WRITE_RESTRICTED, 0},
    {0, 0, 0,  0, 0}
};
static PyObject *
__Pyx_CyFunction_reduce(__pyx_CyFunctionObject *m, CYTHON_UNUSED PyObject *args)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromString(m->func.m_ml->ml_name);
#else
    return PyString_FromString(m->func.m_ml->ml_name);
#endif
}
static PyMethodDef __pyx_CyFunction_methods[] = {
    {"__reduce__", (PyCFunction)__Pyx_CyFunction_reduce, METH_VARARGS, 0},
    {0, 0, 0, 0}
};
#if PY_VERSION_HEX < 0x030500A0
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func_weakreflist)
#else
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func.m_weakreflist)
#endif
static PyObject *__Pyx_CyFunction_New(PyTypeObject *type, PyMethodDef *ml, int flags, PyObject* qualname,
                                      PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
    __pyx_CyFunctionObject *op = PyObject_GC_New(__pyx_CyFunctionObject, type);
    if (op == NULL)
        return NULL;
    op->flags = flags;
    __Pyx_CyFunction_weakreflist(op) = NULL;
    op->func.m_ml = ml;
    op->func.m_self = (PyObject *) op;
    Py_XINCREF(closure);
    op->func_closure = closure;
    Py_XINCREF(module);
    op->func.m_module = module;
    op->func_dict = NULL;
    op->func_name = NULL;
    Py_INCREF(qualname);
    op->func_qualname = qualname;
    op->func_doc = NULL;
    op->func_classobj = NULL;
    op->func_globals = globals;
    Py_INCREF(op->func_globals);
    Py_XINCREF(code);
    op->func_code = code;
    op->defaults_pyobjects = 0;
    op->defaults = NULL;
    op->defaults_tuple = NULL;
    op->defaults_kwdict = NULL;
    op->defaults_getter = NULL;
    op->func_annotations = NULL;
    PyObject_GC_Track(op);
    return (PyObject *) op;
}
static int
__Pyx_CyFunction_clear(__pyx_CyFunctionObject *m)
{
    Py_CLEAR(m->func_closure);
    Py_CLEAR(m->func.m_module);
    Py_CLEAR(m->func_dict);
    Py_CLEAR(m->func_name);
    Py_CLEAR(m->func_qualname);
    Py_CLEAR(m->func_doc);
    Py_CLEAR(m->func_globals);
    Py_CLEAR(m->func_code);
    Py_CLEAR(m->func_classobj);
    Py_CLEAR(m->defaults_tuple);
    Py_CLEAR(m->defaults_kwdict);
    Py_CLEAR(m->func_annotations);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_XDECREF(pydefaults[i]);
        PyObject_Free(m->defaults);
        m->defaults = NULL;
    }
    return 0;
}
static void __Pyx__CyFunction_dealloc(__pyx_CyFunctionObject *m)
{
    if (__Pyx_CyFunction_weakreflist(m) != NULL)
        PyObject_ClearWeakRefs((PyObject *) m);
    __Pyx_CyFunction_clear(m);
    PyObject_GC_Del(m);
}
static void __Pyx_CyFunction_dealloc(__pyx_CyFunctionObject *m)
{
    PyObject_GC_UnTrack(m);
    __Pyx__CyFunction_dealloc(m);
}
static int __Pyx_CyFunction_traverse(__pyx_CyFunctionObject *m, visitproc visit, void *arg)
{
    Py_VISIT(m->func_closure);
    Py_VISIT(m->func.m_module);
    Py_VISIT(m->func_dict);
    Py_VISIT(m->func_name);
    Py_VISIT(m->func_qualname);
    Py_VISIT(m->func_doc);
    Py_VISIT(m->func_globals);
    Py_VISIT(m->func_code);
    Py_VISIT(m->func_classobj);
    Py_VISIT(m->defaults_tuple);
    Py_VISIT(m->defaults_kwdict);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_VISIT(pydefaults[i]);
    }
    return 0;
}
static PyObject *__Pyx_CyFunction_descr_get(PyObject *func, PyObject *obj, PyObject *type)
{
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    if (m->flags & __Pyx_CYFUNCTION_STATICMETHOD) {
        Py_INCREF(func);
        return func;
    }
    if (m->flags & __Pyx_CYFUNCTION_CLASSMETHOD) {
        if (type == NULL)
            type = (PyObject *)(Py_TYPE(obj));
        return __Pyx_PyMethod_New(func, type, (PyObject *)(Py_TYPE(type)));
    }
    if (obj == Py_None)
        obj = NULL;
    return __Pyx_PyMethod_New(func, obj, type);
}
static PyObject*
__Pyx_CyFunction_repr(__pyx_CyFunctionObject *op)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromFormat("<cyfunction %U at %p>",
                                op->func_qualname, (void *)op);
#else
    return PyString_FromFormat("<cyfunction %s at %p>",
                               PyString_AsString(op->func_qualname), (void *)op);
#endif
}
static PyObject * __Pyx_CyFunction_CallMethod(PyObject *func, PyObject *self, PyObject *arg, PyObject *kw) {
    PyCFunctionObject* f = (PyCFunctionObject*)func;
    PyCFunction meth = f->m_ml->ml_meth;
    Py_ssize_t size;
    switch (f->m_ml->ml_flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
    case METH_VARARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0))
            return (*meth)(self, arg);
        break;
    case METH_VARARGS | METH_KEYWORDS:
        return (*(PyCFunctionWithKeywords)(void*)meth)(self, arg, kw);
    case METH_NOARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 0))
                return (*meth)(self, NULL);
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    case METH_O:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 1)) {
                PyObject *result, *arg0;
                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                arg0 = PyTuple_GET_ITEM(arg, 0);
                #else
                arg0 = PySequence_ITEM(arg, 0); if (unlikely(!arg0)) return NULL;
                #endif
                result = (*meth)(self, arg0);
                #if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
                Py_DECREF(arg0);
                #endif
                return result;
            }
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    default:
        PyErr_SetString(PyExc_SystemError, "Bad call flags in "
                        "__Pyx_CyFunction_Call. METH_OLDARGS is no "
                        "longer supported!");
        return NULL;
    }
    PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
                 f->m_ml->ml_name);
    return NULL;
}
static CYTHON_INLINE PyObject *__Pyx_CyFunction_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    return __Pyx_CyFunction_CallMethod(func, ((PyCFunctionObject*)func)->m_self, arg, kw);
}
static PyObject *__Pyx_CyFunction_CallAsMethod(PyObject *func, PyObject *args, PyObject *kw) {
    PyObject *result;
    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *) func;
    if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
        Py_ssize_t argc;
        PyObject *new_args;
        PyObject *self;
        argc = PyTuple_GET_SIZE(args);
        new_args = PyTuple_GetSlice(args, 1, argc);
        if (unlikely(!new_args))
            return NULL;
        self = PyTuple_GetItem(args, 0);
        if (unlikely(!self)) {
            Py_DECREF(new_args);
            return NULL;
        }
        result = __Pyx_CyFunction_CallMethod(func, self, new_args, kw);
        Py_DECREF(new_args);
    } else {
        result = __Pyx_CyFunction_Call(func, args, kw);
    }
    return result;
}
static PyTypeObject __pyx_CyFunctionType_type = {
    PyVarObject_HEAD_INIT(0, 0)
    "cython_function_or_method",
    sizeof(__pyx_CyFunctionObject),
    0,
    (destructor) __Pyx_CyFunction_dealloc,
    0,
    0,
    0,
#if PY_MAJOR_VERSION < 3
    0,
#else
    0,
#endif
    (reprfunc) __Pyx_CyFunction_repr,
    0,
    0,
    0,
    0,
    __Pyx_CyFunction_CallAsMethod,
    0,
    0,
    0,
    0,
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
    0,
    (traverseproc) __Pyx_CyFunction_traverse,
    (inquiry) __Pyx_CyFunction_clear,
    0,
#if PY_VERSION_HEX < 0x030500A0
    offsetof(__pyx_CyFunctionObject, func_weakreflist),
#else
    offsetof(PyCFunctionObject, m_weakreflist),
#endif
    0,
    0,
    __pyx_CyFunction_methods,
    __pyx_CyFunction_members,
    __pyx_CyFunction_getsets,
    0,
    0,
    __Pyx_CyFunction_descr_get,
    0,
    offsetof(__pyx_CyFunctionObject, func_dict),
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
#if PY_VERSION_HEX >= 0x030400a1
    0,
#endif
};
static int __pyx_CyFunction_init(void) {
    __pyx_CyFunctionType = __Pyx_FetchCommonType(&__pyx_CyFunctionType_type);
    if (unlikely(__pyx_CyFunctionType == NULL)) {
        return -1;
    }
    return 0;
}
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *func, size_t size, int pyobjects) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults = PyObject_Malloc(size);
    if (unlikely(!m->defaults))
        return PyErr_NoMemory();
    memset(m->defaults, 0, size);
    m->defaults_pyobjects = pyobjects;
    return m->defaults;
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *func, PyObject *tuple) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_tuple = tuple;
    Py_INCREF(tuple);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_kwdict = dict;
    Py_INCREF(dict);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->func_annotations = dict;
    Py_INCREF(dict);
}

/* PyIntCompare */
static CYTHON_INLINE PyObject* __Pyx_PyInt_EqObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED long inplace) {
    if (op1 == op2) {
        Py_RETURN_TRUE;
    }
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long a = PyInt_AS_LONG(op1);
        if (a == b) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        int unequal;
        unsigned long uintval;
        Py_ssize_t size = Py_SIZE(op1);
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        if (intval == 0) {
            if (size == 0) Py_RETURN_TRUE; else Py_RETURN_FALSE;
        } else if (intval < 0) {
            if (size >= 0)
                Py_RETURN_FALSE;
            intval = -intval;
            size = -size;
        } else {
            if (size <= 0)
                Py_RETURN_FALSE;
        }
        uintval = (unsigned long) intval;
#if PyLong_SHIFT * 4 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 4)) {
            unequal = (size != 5) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[4] != ((uintval >> (4 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 3 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 3)) {
            unequal = (size != 4) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 2 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 2)) {
            unequal = (size != 3) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 1 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 1)) {
            unequal = (size != 2) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
            unequal = (size != 1) || (((unsigned long) digits[0]) != (uintval & (unsigned long) PyLong_MASK));
        if (unequal == 0) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
        if ((double)a == (double)b) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    return (
        PyObject_RichCompare(op1, op2, Py_EQ));
}

/* BytesEquals */
static CYTHON_INLINE int __Pyx_PyBytes_Equals(PyObject* s1, PyObject* s2, int equals) {
#if CYTHON_COMPILING_IN_PYPY
    return PyObject_RichCompareBool(s1, s2, equals);
#else
    if (s1 == s2) {
        return (equals == Py_EQ);
    } else if (PyBytes_CheckExact(s1) & PyBytes_CheckExact(s2)) {
        const char *ps1, *ps2;
        Py_ssize_t length = PyBytes_GET_SIZE(s1);
        if (length != PyBytes_GET_SIZE(s2))
            return (equals == Py_NE);
        ps1 = PyBytes_AS_STRING(s1);
        ps2 = PyBytes_AS_STRING(s2);
        if (ps1[0] != ps2[0]) {
            return (equals == Py_NE);
        } else if (length == 1) {
            return (equals == Py_EQ);
        } else {
            int result;
#if CYTHON_USE_UNICODE_INTERNALS
            Py_hash_t hash1, hash2;
            hash1 = ((PyBytesObject*)s1)->ob_shash;
            hash2 = ((PyBytesObject*)s2)->ob_shash;
            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
                return (equals == Py_NE);
            }
#endif
            result = memcmp(ps1, ps2, (size_t)length);
            return (equals == Py_EQ) ? (result == 0) : (result != 0);
        }
    } else if ((s1 == Py_None) & PyBytes_CheckExact(s2)) {
        return (equals == Py_NE);
    } else if ((s2 == Py_None) & PyBytes_CheckExact(s1)) {
        return (equals == Py_NE);
    } else {
        int result;
        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
        if (!py_result)
            return -1;
        result = __Pyx_PyObject_IsTrue(py_result);
        Py_DECREF(py_result);
        return result;
    }
#endif
}

/* UnicodeEquals */
static CYTHON_INLINE int __Pyx_PyUnicode_Equals(PyObject* s1, PyObject* s2, int equals) {
#if CYTHON_COMPILING_IN_PYPY
    return PyObject_RichCompareBool(s1, s2, equals);
#else
#if PY_MAJOR_VERSION < 3
    PyObject* owned_ref = NULL;
#endif
    int s1_is_unicode, s2_is_unicode;
    if (s1 == s2) {
        goto return_eq;
    }
    s1_is_unicode = PyUnicode_CheckExact(s1);
    s2_is_unicode = PyUnicode_CheckExact(s2);
#if PY_MAJOR_VERSION < 3
    if ((s1_is_unicode & (!s2_is_unicode)) && PyString_CheckExact(s2)) {
        owned_ref = PyUnicode_FromObject(s2);
        if (unlikely(!owned_ref))
            return -1;
        s2 = owned_ref;
        s2_is_unicode = 1;
    } else if ((s2_is_unicode & (!s1_is_unicode)) && PyString_CheckExact(s1)) {
        owned_ref = PyUnicode_FromObject(s1);
        if (unlikely(!owned_ref))
            return -1;
        s1 = owned_ref;
        s1_is_unicode = 1;
    } else if (((!s2_is_unicode) & (!s1_is_unicode))) {
        return __Pyx_PyBytes_Equals(s1, s2, equals);
    }
#endif
    if (s1_is_unicode & s2_is_unicode) {
        Py_ssize_t length;
        int kind;
        void *data1, *data2;
        if (unlikely(__Pyx_PyUnicode_READY(s1) < 0) || unlikely(__Pyx_PyUnicode_READY(s2) < 0))
            return -1;
        length = __Pyx_PyUnicode_GET_LENGTH(s1);
        if (length != __Pyx_PyUnicode_GET_LENGTH(s2)) {
            goto return_ne;
        }
#if CYTHON_USE_UNICODE_INTERNALS
        {
            Py_hash_t hash1, hash2;
        #if CYTHON_PEP393_ENABLED
            hash1 = ((PyASCIIObject*)s1)->hash;
            hash2 = ((PyASCIIObject*)s2)->hash;
        #else
            hash1 = ((PyUnicodeObject*)s1)->hash;
            hash2 = ((PyUnicodeObject*)s2)->hash;
        #endif
            if (hash1 != hash2 && hash1 != -1 && hash2 != -1) {
                goto return_ne;
            }
        }
#endif
        kind = __Pyx_PyUnicode_KIND(s1);
        if (kind != __Pyx_PyUnicode_KIND(s2)) {
            goto return_ne;
        }
        data1 = __Pyx_PyUnicode_DATA(s1);
        data2 = __Pyx_PyUnicode_DATA(s2);
        if (__Pyx_PyUnicode_READ(kind, data1, 0) != __Pyx_PyUnicode_READ(kind, data2, 0)) {
            goto return_ne;
        } else if (length == 1) {
            goto return_eq;
        } else {
            int result = memcmp(data1, data2, (size_t)(length * kind));
            #if PY_MAJOR_VERSION < 3
            Py_XDECREF(owned_ref);
            #endif
            return (equals == Py_EQ) ? (result == 0) : (result != 0);
        }
    } else if ((s1 == Py_None) & s2_is_unicode) {
        goto return_ne;
    } else if ((s2 == Py_None) & s1_is_unicode) {
        goto return_ne;
    } else {
        int result;
        PyObject* py_result = PyObject_RichCompare(s1, s2, equals);
        #if PY_MAJOR_VERSION < 3
        Py_XDECREF(owned_ref);
        #endif
        if (!py_result)
            return -1;
        result = __Pyx_PyObject_IsTrue(py_result);
        Py_DECREF(py_result);
        return result;
    }
return_eq:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(owned_ref);
    #endif
    return (equals == Py_EQ);
return_ne:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(owned_ref);
    #endif
    return (equals == Py_NE);
#endif
}

/* py_abs */
#if CYTHON_USE_PYLONG_INTERNALS
static PyObject *__Pyx_PyLong_AbsNeg(PyObject *n) {
    if (likely(Py_SIZE(n) == -1)) {
        return PyLong_FromLong(((PyLongObject*)n)->ob_digit[0]);
    }
#if CYTHON_COMPILING_IN_CPYTHON
    {
        PyObject *copy = _PyLong_Copy((PyLongObject*)n);
        if (likely(copy)) {
            Py_SIZE(copy) = -(Py_SIZE(copy));
        }
        return copy;
    }
#else
    return PyNumber_Negative(n);
#endif
}
#endif

/* ObjectGetItem */
#if CYTHON_USE_TYPE_SLOTS
static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {
    PyObject *runerr;
    Py_ssize_t key_value;
    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;
    if (unlikely(!(m && m->sq_item))) {
        PyErr_Format(PyExc_TypeError, "'%.200s' object is not subscriptable", Py_TYPE(obj)->tp_name);
        return NULL;
    }
    key_value = __Pyx_PyIndex_AsSsize_t(index);
    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {
        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);
    }
    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {
        PyErr_Clear();
        PyErr_Format(PyExc_IndexError, "cannot fit '%.200s' into an index-sized integer", Py_TYPE(index)->tp_name);
    }
    return NULL;
}
static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {
    PyMappingMethods *m = Py_TYPE(obj)->tp_as_mapping;
    if (likely(m && m->mp_subscript)) {
        return m->mp_subscript(obj, key);
    }
    return __Pyx_PyObject_GetIndex(obj, key);
}
#endif

/* PyIntBinop */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            x = (long)((unsigned long)a + b);
            if (likely((x^a) >= 0 || (x^b) >= 0))
                return PyInt_FromLong(x);
            return PyLong_Type.tp_as_number->nb_add(op1, op2);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                default: return PyLong_Type.tp_as_number->nb_add(op1, op2);
            }
        }
                x = a + b;
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                llx = lla + llb;
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            double result;
            PyFPE_START_PROTECT("add", return NULL)
            result = ((double)a) + (double)b;
            PyFPE_END_PROTECT(result)
            return PyFloat_FromDouble(result);
    }
    return (inplace ? PyNumber_InPlaceAdd : PyNumber_Add)(op1, op2);
}
#endif

/* Import */
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
    PyObject *empty_list = 0;
    PyObject *module = 0;
    PyObject *global_dict = 0;
    PyObject *empty_dict = 0;
    PyObject *list;
    #if PY_MAJOR_VERSION < 3
    PyObject *py_import;
    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
    if (!py_import)
        goto bad;
    #endif
    if (from_list)
        list = from_list;
    else {
        empty_list = PyList_New(0);
        if (!empty_list)
            goto bad;
        list = empty_list;
    }
    global_dict = PyModule_GetDict(__pyx_m);
    if (!global_dict)
        goto bad;
    empty_dict = PyDict_New();
    if (!empty_dict)
        goto bad;
    {
        #if PY_MAJOR_VERSION >= 3
        if (level == -1) {
            if (strchr(__Pyx_MODULE_NAME, '.')) {
                module = PyImport_ImportModuleLevelObject(
                    name, global_dict, empty_dict, list, 1);
                if (!module) {
                    if (!PyErr_ExceptionMatches(PyExc_ImportError))
                        goto bad;
                    PyErr_Clear();
                }
            }
            level = 0;
        }
        #endif
        if (!module) {
            #if PY_MAJOR_VERSION < 3
            PyObject *py_level = PyInt_FromLong(level);
            if (!py_level)
                goto bad;
            module = PyObject_CallFunctionObjArgs(py_import,
                name, global_dict, empty_dict, list, py_level, (PyObject *)NULL);
            Py_DECREF(py_level);
            #else
            module = PyImport_ImportModuleLevelObject(
                name, global_dict, empty_dict, list, level);
            #endif
        }
    }
bad:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(py_import);
    #endif
    Py_XDECREF(empty_list);
    Py_XDECREF(empty_dict);
    return module;
}

/* ImportFrom */
static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
        PyErr_Format(PyExc_ImportError,
        #if PY_MAJOR_VERSION < 3
            "cannot import name %.230s", PyString_AS_STRING(name));
        #else
            "cannot import name %S", name);
        #endif
    }
    return value;
}

/* PyIntBinop */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            x = (long)((unsigned long)a - b);
            if (likely((x^a) >= 0 || (x^~b) >= 0))
                return PyInt_FromLong(x);
            return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                default: return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
            }
        }
                x = a - b;
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                llx = lla - llb;
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            double result;
            PyFPE_START_PROTECT("subtract", return NULL)
            result = ((double)a) - (double)b;
            PyFPE_END_PROTECT(result)
            return PyFloat_FromDouble(result);
    }
    return (inplace ? PyNumber_InPlaceSubtract : PyNumber_Subtract)(op1, op2);
}
#endif

/* None */
static CYTHON_INLINE void __Pyx_RaiseClosureNameError(const char *varname) {
    PyErr_Format(PyExc_NameError, "free variable '%s' referenced before assignment in enclosing scope", varname);
}

/* RaiseNoneIterError */
static CYTHON_INLINE void __Pyx_RaiseNoneNotIterableError(void) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
}

/* DictGetItem */
#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
    PyObject *value;
    value = PyDict_GetItemWithError(d, key);
    if (unlikely(!value)) {
        if (!PyErr_Occurred()) {
            if (unlikely(PyTuple_Check(key))) {
                PyObject* args = PyTuple_Pack(1, key);
                if (likely(args)) {
                    PyErr_SetObject(PyExc_KeyError, args);
                    Py_DECREF(args);
                }
            } else {
                PyErr_SetObject(PyExc_KeyError, key);
            }
        }
        return NULL;
    }
    Py_INCREF(value);
    return value;
}
#endif

/* PyIntBinop */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_FloorDivideObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            if (unlikely(b == -1 && ((unsigned long)a) == 0-(unsigned long)a))
                return PyInt_Type.tp_as_number->nb_floor_divide(op1, op2);
            else {
                long q, r;
                q = a / b;
                r = a - q*b;
                q -= ((r != 0) & ((r ^ b) < 0));
                x = q;
            }
            return PyInt_FromLong(x);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                default: return PyLong_Type.tp_as_number->nb_floor_divide(op1, op2);
            }
        }
                {
                    long q, r;
                    q = a / b;
                    r = a - q*b;
                    q -= ((r != 0) & ((r ^ b) < 0));
                    x = q;
                }
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                {
                    PY_LONG_LONG q, r;
                    q = lla / llb;
                    r = lla - q*llb;
                    q -= ((r != 0) & ((r ^ llb) < 0));
                    llx = q;
                }
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    return (inplace ? PyNumber_InPlaceFloorDivide : PyNumber_FloorDivide)(op1, op2);
}
#endif

/* UnpackUnboundCMethod */
static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
    PyObject *method;
    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
    if (unlikely(!method))
        return -1;
    target->method = method;
#if CYTHON_COMPILING_IN_CPYTHON
    #if PY_MAJOR_VERSION >= 3
    if (likely(__Pyx_TypeCheck(method, &PyMethodDescr_Type)))
    #endif
    {
        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
        target->func = descr->d_method->ml_meth;
        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_STACKLESS);
    }
#endif
    return 0;
}

/* CallUnboundCMethod1 */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg) {
    if (likely(cfunc->func)) {
        int flag = cfunc->flag;
        if (flag == METH_O) {
            return (*(cfunc->func))(self, arg);
        } else if (PY_VERSION_HEX >= 0x030600B1 && flag == METH_FASTCALL) {
            if (PY_VERSION_HEX >= 0x030700A0) {
                return (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)cfunc->func)(self, &arg, 1);
            } else {
                return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
            }
        } else if (PY_VERSION_HEX >= 0x030700A0 && flag == (METH_FASTCALL | METH_KEYWORDS)) {
            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
        }
    }
    return __Pyx__CallUnboundCMethod1(cfunc, self, arg);
}
#endif
static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg){
    PyObject *args, *result = NULL;
    if (unlikely(!cfunc->func && !cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
#if CYTHON_COMPILING_IN_CPYTHON
    if (cfunc->func && (cfunc->flag & METH_VARARGS)) {
        args = PyTuple_New(1);
        if (unlikely(!args)) goto bad;
        Py_INCREF(arg);
        PyTuple_SET_ITEM(args, 0, arg);
        if (cfunc->flag & METH_KEYWORDS)
            result = (*(PyCFunctionWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, NULL);
        else
            result = (*cfunc->func)(self, args);
    } else {
        args = PyTuple_New(2);
        if (unlikely(!args)) goto bad;
        Py_INCREF(self);
        PyTuple_SET_ITEM(args, 0, self);
        Py_INCREF(arg);
        PyTuple_SET_ITEM(args, 1, arg);
        result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
    }
#else
    args = PyTuple_Pack(2, self, arg);
    if (unlikely(!args)) goto bad;
    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
#endif
bad:
    Py_XDECREF(args);
    return result;
}

/* PyObjectGetMethod */
static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
    PyObject *attr;
#if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
    PyTypeObject *tp = Py_TYPE(obj);
    PyObject *descr;
    descrgetfunc f = NULL;
    PyObject **dictptr, *dict;
    int meth_found = 0;
    assert (*method == NULL);
    if (unlikely(tp->tp_getattro != PyObject_GenericGetAttr)) {
        attr = __Pyx_PyObject_GetAttrStr(obj, name);
        goto try_unpack;
    }
    if (unlikely(tp->tp_dict == NULL) && unlikely(PyType_Ready(tp) < 0)) {
        return 0;
    }
    descr = _PyType_Lookup(tp, name);
    if (likely(descr != NULL)) {
        Py_INCREF(descr);
#if PY_MAJOR_VERSION >= 3
        #ifdef __Pyx_CyFunction_USED
        if (likely(PyFunction_Check(descr) || (Py_TYPE(descr) == &PyMethodDescr_Type) || __Pyx_CyFunction_Check(descr)))
        #else
        if (likely(PyFunction_Check(descr) || (Py_TYPE(descr) == &PyMethodDescr_Type)))
        #endif
#else
        #ifdef __Pyx_CyFunction_USED
        if (likely(PyFunction_Check(descr) || __Pyx_CyFunction_Check(descr)))
        #else
        if (likely(PyFunction_Check(descr)))
        #endif
#endif
        {
            meth_found = 1;
        } else {
            f = Py_TYPE(descr)->tp_descr_get;
            if (f != NULL && PyDescr_IsData(descr)) {
                attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
                Py_DECREF(descr);
                goto try_unpack;
            }
        }
    }
    dictptr = _PyObject_GetDictPtr(obj);
    if (dictptr != NULL && (dict = *dictptr) != NULL) {
        Py_INCREF(dict);
        attr = __Pyx_PyDict_GetItemStr(dict, name);
        if (attr != NULL) {
            Py_INCREF(attr);
            Py_DECREF(dict);
            Py_XDECREF(descr);
            goto try_unpack;
        }
        Py_DECREF(dict);
    }
    if (meth_found) {
        *method = descr;
        return 1;
    }
    if (f != NULL) {
        attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
        Py_DECREF(descr);
        goto try_unpack;
    }
    if (descr != NULL) {
        *method = descr;
        return 0;
    }
    PyErr_Format(PyExc_AttributeError,
#if PY_MAJOR_VERSION >= 3
                 "'%.50s' object has no attribute '%U'",
                 tp->tp_name, name);
#else
                 "'%.50s' object has no attribute '%.400s'",
                 tp->tp_name, PyString_AS_STRING(name));
#endif
    return 0;
#else
    attr = __Pyx_PyObject_GetAttrStr(obj, name);
    goto try_unpack;
#endif
try_unpack:
#if CYTHON_UNPACK_METHODS
    if (likely(attr) && PyMethod_Check(attr) && likely(PyMethod_GET_SELF(attr) == obj)) {
        PyObject *function = PyMethod_GET_FUNCTION(attr);
        Py_INCREF(function);
        Py_DECREF(attr);
        *method = function;
        return 1;
    }
#endif
    *method = attr;
    return 0;
}

/* PyObjectCallMethod1 */
static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
    Py_DECREF(method);
    return result;
}
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
    PyObject *method = NULL, *result;
    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
    if (likely(is_method)) {
        result = __Pyx_PyObject_Call2Args(method, obj, arg);
        Py_DECREF(method);
        return result;
    }
    if (unlikely(!method)) return NULL;
    return __Pyx__PyObject_CallMethod1(method, arg);
}

/* append */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
    if (likely(PyList_CheckExact(L))) {
        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
    } else {
        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
        if (unlikely(!retval))
            return -1;
        Py_DECREF(retval);
    }
    return 0;
}

/* StringJoin */
#if !CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyBytes_Join(PyObject* sep, PyObject* values) {
    return PyObject_CallMethodObjArgs(sep, __pyx_n_s_join, values, NULL);
}
#endif

/* None */
static CYTHON_INLINE Py_ssize_t __Pyx_div_Py_ssize_t(Py_ssize_t a, Py_ssize_t b) {
    Py_ssize_t q = a / b;
    Py_ssize_t r = a - q*b;
    q -= ((r != 0) & ((r ^ b) < 0));
    return q;
}

/* PyObject_GenericGetAttrNoDict */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static PyObject *__Pyx_RaiseGenericGetAttributeError(PyTypeObject *tp, PyObject *attr_name) {
    PyErr_Format(PyExc_AttributeError,
#if PY_MAJOR_VERSION >= 3
                 "'%.50s' object has no attribute '%U'",
                 tp->tp_name, attr_name);
#else
                 "'%.50s' object has no attribute '%.400s'",
                 tp->tp_name, PyString_AS_STRING(attr_name));
#endif
    return NULL;
}
static CYTHON_INLINE PyObject* __Pyx_PyObject_GenericGetAttrNoDict(PyObject* obj, PyObject* attr_name) {
    PyObject *descr;
    PyTypeObject *tp = Py_TYPE(obj);
    if (unlikely(!PyString_Check(attr_name))) {
        return PyObject_GenericGetAttr(obj, attr_name);
    }
    assert(!tp->tp_dictoffset);
    descr = _PyType_Lookup(tp, attr_name);
    if (unlikely(!descr)) {
        return __Pyx_RaiseGenericGetAttributeError(tp, attr_name);
    }
    Py_INCREF(descr);
    #if PY_MAJOR_VERSION < 3
    if (likely(PyType_HasFeature(Py_TYPE(descr), Py_TPFLAGS_HAVE_CLASS)))
    #endif
    {
        descrgetfunc f = Py_TYPE(descr)->tp_descr_get;
        if (unlikely(f)) {
            PyObject *res = f(descr, obj, (PyObject *)tp);
            Py_DECREF(descr);
            return res;
        }
    }
    return descr;
}
#endif

/* CalculateMetaclass */
static PyObject *__Pyx_CalculateMetaclass(PyTypeObject *metaclass, PyObject *bases) {
    Py_ssize_t i, nbases = PyTuple_GET_SIZE(bases);
    for (i=0; i < nbases; i++) {
        PyTypeObject *tmptype;
        PyObject *tmp = PyTuple_GET_ITEM(bases, i);
        tmptype = Py_TYPE(tmp);
#if PY_MAJOR_VERSION < 3
        if (tmptype == &PyClass_Type)
            continue;
#endif
        if (!metaclass) {
            metaclass = tmptype;
            continue;
        }
        if (PyType_IsSubtype(metaclass, tmptype))
            continue;
        if (PyType_IsSubtype(tmptype, metaclass)) {
            metaclass = tmptype;
            continue;
        }
        PyErr_SetString(PyExc_TypeError,
                        "metaclass conflict: "
                        "the metaclass of a derived class "
                        "must be a (non-strict) subclass "
                        "of the metaclasses of all its bases");
        return NULL;
    }
    if (!metaclass) {
#if PY_MAJOR_VERSION < 3
        metaclass = &PyClass_Type;
#else
        metaclass = &PyType_Type;
#endif
    }
    Py_INCREF((PyObject*) metaclass);
    return (PyObject*) metaclass;
}

/* Py3ClassCreate */
static PyObject *__Pyx_Py3MetaclassPrepare(PyObject *metaclass, PyObject *bases, PyObject *name,
                                           PyObject *qualname, PyObject *mkw, PyObject *modname, PyObject *doc) {
    PyObject *ns;
    if (metaclass) {
        PyObject *prep = __Pyx_PyObject_GetAttrStr(metaclass, __pyx_n_s_prepare);
        if (prep) {
            PyObject *pargs = PyTuple_Pack(2, name, bases);
            if (unlikely(!pargs)) {
                Py_DECREF(prep);
                return NULL;
            }
            ns = PyObject_Call(prep, pargs, mkw);
            Py_DECREF(prep);
            Py_DECREF(pargs);
        } else {
            if (unlikely(!PyErr_ExceptionMatches(PyExc_AttributeError)))
                return NULL;
            PyErr_Clear();
            ns = PyDict_New();
        }
    } else {
        ns = PyDict_New();
    }
    if (unlikely(!ns))
        return NULL;
    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_module, modname) < 0)) goto bad;
    if (unlikely(PyObject_SetItem(ns, __pyx_n_s_qualname, qualname) < 0)) goto bad;
    if (unlikely(doc && PyObject_SetItem(ns, __pyx_n_s_doc, doc) < 0)) goto bad;
    return ns;
bad:
    Py_DECREF(ns);
    return NULL;
}
static PyObject *__Pyx_Py3ClassCreate(PyObject *metaclass, PyObject *name, PyObject *bases,
                                      PyObject *dict, PyObject *mkw,
                                      int calculate_metaclass, int allow_py2_metaclass) {
    PyObject *result, *margs;
    PyObject *owned_metaclass = NULL;
    if (allow_py2_metaclass) {
        owned_metaclass = PyObject_GetItem(dict, __pyx_n_s_metaclass);
        if (owned_metaclass) {
            metaclass = owned_metaclass;
        } else if (likely(PyErr_ExceptionMatches(PyExc_KeyError))) {
            PyErr_Clear();
        } else {
            return NULL;
        }
    }
    if (calculate_metaclass && (!metaclass || PyType_Check(metaclass))) {
        metaclass = __Pyx_CalculateMetaclass((PyTypeObject*) metaclass, bases);
        Py_XDECREF(owned_metaclass);
        if (unlikely(!metaclass))
            return NULL;
        owned_metaclass = metaclass;
    }
    margs = PyTuple_Pack(3, name, bases, dict);
    if (unlikely(!margs)) {
        result = NULL;
    } else {
        result = PyObject_Call(metaclass, margs, mkw);
        Py_DECREF(margs);
    }
    Py_XDECREF(owned_metaclass);
    return result;
}

/* PyErrFetchRestore */
#if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    tmp_type = tstate->curexc_type;
    tmp_value = tstate->curexc_value;
    tmp_tb = tstate->curexc_traceback;
    tstate->curexc_type = type;
    tstate->curexc_value = value;
    tstate->curexc_traceback = tb;
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
}
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    *type = tstate->curexc_type;
    *value = tstate->curexc_value;
    *tb = tstate->curexc_traceback;
    tstate->curexc_type = 0;
    tstate->curexc_value = 0;
    tstate->curexc_traceback = 0;
}
#endif

/* CLineInTraceback */
#ifndef CYTHON_CLINE_IN_TRACEBACK
static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
    PyObject *use_cline;
    PyObject *ptype, *pvalue, *ptraceback;
#if CYTHON_COMPILING_IN_CPYTHON
    PyObject **cython_runtime_dict;
#endif
    if (unlikely(!__pyx_cython_runtime)) {
        return c_line;
    }
    __Pyx_ErrFetchInState(tstate, &ptype, &pvalue, &ptraceback);
#if CYTHON_COMPILING_IN_CPYTHON
    cython_runtime_dict = _PyObject_GetDictPtr(__pyx_cython_runtime);
    if (likely(cython_runtime_dict)) {
        __PYX_PY_DICT_LOOKUP_IF_MODIFIED(
            use_cline, *cython_runtime_dict,
            __Pyx_PyDict_GetItemStr(*cython_runtime_dict, __pyx_n_s_cline_in_traceback))
    } else
#endif
    {
      PyObject *use_cline_obj = __Pyx_PyObject_GetAttrStr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback);
      if (use_cline_obj) {
        use_cline = PyObject_Not(use_cline_obj) ? Py_False : Py_True;
        Py_DECREF(use_cline_obj);
      } else {
        PyErr_Clear();
        use_cline = NULL;
      }
    }
    if (!use_cline) {
        c_line = 0;
        PyObject_SetAttr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback, Py_False);
    }
    else if (use_cline == Py_False || (use_cline != Py_True && PyObject_Not(use_cline) != 0)) {
        c_line = 0;
    }
    __Pyx_ErrRestoreInState(tstate, ptype, pvalue, ptraceback);
    return c_line;
}
#endif

/* CodeObjectCache */
static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line) {
    int start = 0, mid = 0, end = count - 1;
    if (end >= 0 && code_line > entries[end].code_line) {
        return count;
    }
    while (start < end) {
        mid = start + (end - start) / 2;
        if (code_line < entries[mid].code_line) {
            end = mid;
        } else if (code_line > entries[mid].code_line) {
             start = mid + 1;
        } else {
            return mid;
        }
    }
    if (code_line <= entries[mid].code_line) {
        return mid;
    } else {
        return mid + 1;
    }
}
static PyCodeObject *__pyx_find_code_object(int code_line) {
    PyCodeObject* code_object;
    int pos;
    if (unlikely(!code_line) || unlikely(!__pyx_code_cache.entries)) {
        return NULL;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if (unlikely(pos >= __pyx_code_cache.count) || unlikely(__pyx_code_cache.entries[pos].code_line != code_line)) {
        return NULL;
    }
    code_object = __pyx_code_cache.entries[pos].code_object;
    Py_INCREF(code_object);
    return code_object;
}
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object) {
    int pos, i;
    __Pyx_CodeObjectCacheEntry* entries = __pyx_code_cache.entries;
    if (unlikely(!code_line)) {
        return;
    }
    if (unlikely(!entries)) {
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Malloc(64*sizeof(__Pyx_CodeObjectCacheEntry));
        if (likely(entries)) {
            __pyx_code_cache.entries = entries;
            __pyx_code_cache.max_count = 64;
            __pyx_code_cache.count = 1;
            entries[0].code_line = code_line;
            entries[0].code_object = code_object;
            Py_INCREF(code_object);
        }
        return;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if ((pos < __pyx_code_cache.count) && unlikely(__pyx_code_cache.entries[pos].code_line == code_line)) {
        PyCodeObject* tmp = entries[pos].code_object;
        entries[pos].code_object = code_object;
        Py_DECREF(tmp);
        return;
    }
    if (__pyx_code_cache.count == __pyx_code_cache.max_count) {
        int new_max = __pyx_code_cache.max_count + 64;
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Realloc(
            __pyx_code_cache.entries, (size_t)new_max*sizeof(__Pyx_CodeObjectCacheEntry));
        if (unlikely(!entries)) {
            return;
        }
        __pyx_code_cache.entries = entries;
        __pyx_code_cache.max_count = new_max;
    }
    for (i=__pyx_code_cache.count; i>pos; i--) {
        entries[i] = entries[i-1];
    }
    entries[pos].code_line = code_line;
    entries[pos].code_object = code_object;
    __pyx_code_cache.count++;
    Py_INCREF(code_object);
}

/* AddTraceback */
#include "compile.h"
#include "frameobject.h"
#include "traceback.h"
static PyCodeObject* __Pyx_CreateCodeObjectForTraceback(
            const char *funcname, int c_line,
            int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyObject *py_srcfile = 0;
    PyObject *py_funcname = 0;
    #if PY_MAJOR_VERSION < 3
    py_srcfile = PyString_FromString(filename);
    #else
    py_srcfile = PyUnicode_FromString(filename);
    #endif
    if (!py_srcfile) goto bad;
    if (c_line) {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #else
        py_funcname = PyUnicode_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #endif
    }
    else {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromString(funcname);
        #else
        py_funcname = PyUnicode_FromString(funcname);
        #endif
    }
    if (!py_funcname) goto bad;
    py_code = __Pyx_PyCode_New(
        0,
        0,
        0,
        0,
        0,
        __pyx_empty_bytes, /*PyObject *code,*/
        __pyx_empty_tuple, /*PyObject *consts,*/
        __pyx_empty_tuple, /*PyObject *names,*/
        __pyx_empty_tuple, /*PyObject *varnames,*/
        __pyx_empty_tuple, /*PyObject *freevars,*/
        __pyx_empty_tuple, /*PyObject *cellvars,*/
        py_srcfile,   /*PyObject *filename,*/
        py_funcname,  /*PyObject *name,*/
        py_line,
        __pyx_empty_bytes  /*PyObject *lnotab*/
    );
    Py_DECREF(py_srcfile);
    Py_DECREF(py_funcname);
    return py_code;
bad:
    Py_XDECREF(py_srcfile);
    Py_XDECREF(py_funcname);
    return NULL;
}
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyFrameObject *py_frame = 0;
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    if (c_line) {
        c_line = __Pyx_CLineForTraceback(tstate, c_line);
    }
    py_code = __pyx_find_code_object(c_line ? -c_line : py_line);
    if (!py_code) {
        py_code = __Pyx_CreateCodeObjectForTraceback(
            funcname, c_line, py_line, filename);
        if (!py_code) goto bad;
        __pyx_insert_code_object(c_line ? -c_line : py_line, py_code);
    }
    py_frame = PyFrame_New(
        tstate,            /*PyThreadState *tstate,*/
        py_code,           /*PyCodeObject *code,*/
        __pyx_d,    /*PyObject *globals,*/
        0                  /*PyObject *locals*/
    );
    if (!py_frame) goto bad;
    __Pyx_PyFrame_SetLineNumber(py_frame, py_line);
    PyTraceBack_Here(py_frame);
bad:
    Py_XDECREF(py_code);
    Py_XDECREF(py_frame);
}

/* CIntToPy */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
    const long neg_one = (long) ((long) 0 - (long) 1), const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(long) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(long) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(long) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(long),
                                     little, !is_unsigned);
    }
}

/* CIntFromPyVerify */
#define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
#define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
#define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
    {\
        func_type value = func_value;\
        if (sizeof(target_type) < sizeof(func_type)) {\
            if (unlikely(value != (func_type) (target_type) value)) {\
                func_type zero = 0;\
                if (exc && unlikely(value == (func_type)-1 && PyErr_Occurred()))\
                    return (target_type) -1;\
                if (is_unsigned && unlikely(value < zero))\
                    goto raise_neg_overflow;\
                else\
                    goto raise_overflow;\
            }\
        }\
        return (target_type) value;\
    }

/* CIntFromPy */
static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
    const long neg_one = (long) ((long) 0 - (long) 1), const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(long) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(long, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (long) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case  1: __PYX_VERIFY_RETURN_INT(long, digit, digits[0])
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 2 * PyLong_SHIFT) {
                            return (long) (((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 3 * PyLong_SHIFT) {
                            return (long) (((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 4 * PyLong_SHIFT) {
                            return (long) (((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (long) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(long) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case -1: __PYX_VERIFY_RETURN_INT(long, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(long,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(long) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) ((((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) ((((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) ((((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(long) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            long val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (long) -1;
        }
    } else {
        long val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (long) -1;
        val = __Pyx_PyInt_As_long(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to long");
    return (long) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to long");
    return (long) -1;
}

/* CIntFromPy */
static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
    const int neg_one = (int) ((int) 0 - (int) 1), const_zero = (int) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(int) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(int, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (int) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case  1: __PYX_VERIFY_RETURN_INT(int, digit, digits[0])
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 2 * PyLong_SHIFT) {
                            return (int) (((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 3 * PyLong_SHIFT) {
                            return (int) (((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 4 * PyLong_SHIFT) {
                            return (int) (((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (int) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(int) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case -1: __PYX_VERIFY_RETURN_INT(int, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(int,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(int) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) ((((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) ((((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) ((((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(int) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            int val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (int) -1;
        }
    } else {
        int val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (int) -1;
        val = __Pyx_PyInt_As_int(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to int");
    return (int) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to int");
    return (int) -1;
}

/* FastTypeChecks */
#if CYTHON_COMPILING_IN_CPYTHON
static int __Pyx_InBases(PyTypeObject *a, PyTypeObject *b) {
    while (a) {
        a = a->tp_base;
        if (a == b)
            return 1;
    }
    return b == &PyBaseObject_Type;
}
static CYTHON_INLINE int __Pyx_IsSubtype(PyTypeObject *a, PyTypeObject *b) {
    PyObject *mro;
    if (a == b) return 1;
    mro = a->tp_mro;
    if (likely(mro)) {
        Py_ssize_t i, n;
        n = PyTuple_GET_SIZE(mro);
        for (i = 0; i < n; i++) {
            if (PyTuple_GET_ITEM(mro, i) == (PyObject *)b)
                return 1;
        }
        return 0;
    }
    return __Pyx_InBases(a, b);
}
#if PY_MAJOR_VERSION == 2
static int __Pyx_inner_PyErr_GivenExceptionMatches2(PyObject *err, PyObject* exc_type1, PyObject* exc_type2) {
    PyObject *exception, *value, *tb;
    int res;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&exception, &value, &tb);
    res = exc_type1 ? PyObject_IsSubclass(err, exc_type1) : 0;
    if (unlikely(res == -1)) {
        PyErr_WriteUnraisable(err);
        res = 0;
    }
    if (!res) {
        res = PyObject_IsSubclass(err, exc_type2);
        if (unlikely(res == -1)) {
            PyErr_WriteUnraisable(err);
            res = 0;
        }
    }
    __Pyx_ErrRestore(exception, value, tb);
    return res;
}
#else
static CYTHON_INLINE int __Pyx_inner_PyErr_GivenExceptionMatches2(PyObject *err, PyObject* exc_type1, PyObject *exc_type2) {
    int res = exc_type1 ? __Pyx_IsSubtype((PyTypeObject*)err, (PyTypeObject*)exc_type1) : 0;
    if (!res) {
        res = __Pyx_IsSubtype((PyTypeObject*)err, (PyTypeObject*)exc_type2);
    }
    return res;
}
#endif
static int __Pyx_PyErr_GivenExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
    Py_ssize_t i, n;
    assert(PyExceptionClass_Check(exc_type));
    n = PyTuple_GET_SIZE(tuple);
#if PY_MAJOR_VERSION >= 3
    for (i=0; i<n; i++) {
        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
    }
#endif
    for (i=0; i<n; i++) {
        PyObject *t = PyTuple_GET_ITEM(tuple, i);
        #if PY_MAJOR_VERSION < 3
        if (likely(exc_type == t)) return 1;
        #endif
        if (likely(PyExceptionClass_Check(t))) {
            if (__Pyx_inner_PyErr_GivenExceptionMatches2(exc_type, NULL, t)) return 1;
        } else {
        }
    }
    return 0;
}
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches(PyObject *err, PyObject* exc_type) {
    if (likely(err == exc_type)) return 1;
    if (likely(PyExceptionClass_Check(err))) {
        if (likely(PyExceptionClass_Check(exc_type))) {
            return __Pyx_inner_PyErr_GivenExceptionMatches2(err, NULL, exc_type);
        } else if (likely(PyTuple_Check(exc_type))) {
            return __Pyx_PyErr_GivenExceptionMatchesTuple(err, exc_type);
        } else {
        }
    }
    return PyErr_GivenExceptionMatches(err, exc_type);
}
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches2(PyObject *err, PyObject *exc_type1, PyObject *exc_type2) {
    assert(PyExceptionClass_Check(exc_type1));
    assert(PyExceptionClass_Check(exc_type2));
    if (likely(err == exc_type1 || err == exc_type2)) return 1;
    if (likely(PyExceptionClass_Check(err))) {
        return __Pyx_inner_PyErr_GivenExceptionMatches2(err, exc_type1, exc_type2);
    }
    return (PyErr_GivenExceptionMatches(err, exc_type1) || PyErr_GivenExceptionMatches(err, exc_type2));
}
#endif

/* CheckBinaryVersion */
static int __Pyx_check_binary_version(void) {
    char ctversion[4], rtversion[4];
    PyOS_snprintf(ctversion, 4, "%d.%d", PY_MAJOR_VERSION, PY_MINOR_VERSION);
    PyOS_snprintf(rtversion, 4, "%s", Py_GetVersion());
    if (ctversion[0] != rtversion[0] || ctversion[2] != rtversion[2]) {
        char message[200];
        PyOS_snprintf(message, sizeof(message),
                      "compiletime version %s of module '%.100s' "
                      "does not match runtime version %s",
                      ctversion, __Pyx_MODULE_NAME, rtversion);
        return PyErr_WarnEx(NULL, message, 1);
    }
    return 0;
}

/* InitStrings */
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t) {
    while (t->p) {
        #if PY_MAJOR_VERSION < 3
        if (t->is_unicode) {
            *t->p = PyUnicode_DecodeUTF8(t->s, t->n - 1, NULL);
        } else if (t->intern) {
            *t->p = PyString_InternFromString(t->s);
        } else {
            *t->p = PyString_FromStringAndSize(t->s, t->n - 1);
        }
        #else
        if (t->is_unicode | t->is_str) {
            if (t->intern) {
                *t->p = PyUnicode_InternFromString(t->s);
            } else if (t->encoding) {
                *t->p = PyUnicode_Decode(t->s, t->n - 1, t->encoding, NULL);
            } else {
                *t->p = PyUnicode_FromStringAndSize(t->s, t->n - 1);
            }
        } else {
            *t->p = PyBytes_FromStringAndSize(t->s, t->n - 1);
        }
        #endif
        if (!*t->p)
            return -1;
        if (PyObject_Hash(*t->p) == -1)
            return -1;
        ++t;
    }
    return 0;
}

static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char* c_str) {
    return __Pyx_PyUnicode_FromStringAndSize(c_str, (Py_ssize_t)strlen(c_str));
}
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject* o) {
    Py_ssize_t ignore;
    return __Pyx_PyObject_AsStringAndSize(o, &ignore);
}
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
#if !CYTHON_PEP393_ENABLED
static const char* __Pyx_PyUnicode_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
    char* defenc_c;
    PyObject* defenc = _PyUnicode_AsDefaultEncodedString(o, NULL);
    if (!defenc) return NULL;
    defenc_c = PyBytes_AS_STRING(defenc);
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
    {
        char* end = defenc_c + PyBytes_GET_SIZE(defenc);
        char* c;
        for (c = defenc_c; c < end; c++) {
            if ((unsigned char) (*c) >= 128) {
                PyUnicode_AsASCIIString(o);
                return NULL;
            }
        }
    }
#endif
    *length = PyBytes_GET_SIZE(defenc);
    return defenc_c;
}
#else
static CYTHON_INLINE const char* __Pyx_PyUnicode_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
    if (unlikely(__Pyx_PyUnicode_READY(o) == -1)) return NULL;
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
    if (likely(PyUnicode_IS_ASCII(o))) {
        *length = PyUnicode_GET_LENGTH(o);
        return PyUnicode_AsUTF8(o);
    } else {
        PyUnicode_AsASCIIString(o);
        return NULL;
    }
#else
    return PyUnicode_AsUTF8AndSize(o, length);
#endif
}
#endif
#endif
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
    if (
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
            __Pyx_sys_getdefaultencoding_not_ascii &&
#endif
            PyUnicode_Check(o)) {
        return __Pyx_PyUnicode_AsStringAndSize(o, length);
    } else
#endif
#if (!CYTHON_COMPILING_IN_PYPY) || (defined(PyByteArray_AS_STRING) && defined(PyByteArray_GET_SIZE))
    if (PyByteArray_Check(o)) {
        *length = PyByteArray_GET_SIZE(o);
        return PyByteArray_AS_STRING(o);
    } else
#endif
    {
        char* result;
        int r = PyBytes_AsStringAndSize(o, &result, length);
        if (unlikely(r < 0)) {
            return NULL;
        } else {
            return result;
        }
    }
}
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject* x) {
   int is_true = x == Py_True;
   if (is_true | (x == Py_False) | (x == Py_None)) return is_true;
   else return PyObject_IsTrue(x);
}
static CYTHON_INLINE int __Pyx_PyObject_IsTrueAndDecref(PyObject* x) {
    int retval;
    if (unlikely(!x)) return -1;
    retval = __Pyx_PyObject_IsTrue(x);
    Py_DECREF(x);
    return retval;
}
static PyObject* __Pyx_PyNumber_IntOrLongWrongResultType(PyObject* result, const char* type_name) {
#if PY_MAJOR_VERSION >= 3
    if (PyLong_Check(result)) {
        if (PyErr_WarnFormat(PyExc_DeprecationWarning, 1,
                "__int__ returned non-int (type %.200s).  "
                "The ability to return an instance of a strict subclass of int "
                "is deprecated, and may be removed in a future version of Python.",
                Py_TYPE(result)->tp_name)) {
            Py_DECREF(result);
            return NULL;
        }
        return result;
    }
#endif
    PyErr_Format(PyExc_TypeError,
                 "__%.4s__ returned non-%.4s (type %.200s)",
                 type_name, type_name, Py_TYPE(result)->tp_name);
    Py_DECREF(result);
    return NULL;
}
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x) {
#if CYTHON_USE_TYPE_SLOTS
  PyNumberMethods *m;
#endif
  const char *name = NULL;
  PyObject *res = NULL;
#if PY_MAJOR_VERSION < 3
  if (likely(PyInt_Check(x) || PyLong_Check(x)))
#else
  if (likely(PyLong_Check(x)))
#endif
    return __Pyx_NewRef(x);
#if CYTHON_USE_TYPE_SLOTS
  m = Py_TYPE(x)->tp_as_number;
  #if PY_MAJOR_VERSION < 3
  if (m && m->nb_int) {
    name = "int";
    res = m->nb_int(x);
  }
  else if (m && m->nb_long) {
    name = "long";
    res = m->nb_long(x);
  }
  #else
  if (likely(m && m->nb_int)) {
    name = "int";
    res = m->nb_int(x);
  }
  #endif
#else
  if (!PyBytes_CheckExact(x) && !PyUnicode_CheckExact(x)) {
    res = PyNumber_Int(x);
  }
#endif
  if (likely(res)) {
#if PY_MAJOR_VERSION < 3
    if (unlikely(!PyInt_Check(res) && !PyLong_Check(res))) {
#else
    if (unlikely(!PyLong_CheckExact(res))) {
#endif
        return __Pyx_PyNumber_IntOrLongWrongResultType(res, name);
    }
  }
  else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_TypeError,
                    "an integer is required");
  }
  return res;
}
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject* b) {
  Py_ssize_t ival;
  PyObject *x;
#if PY_MAJOR_VERSION < 3
  if (likely(PyInt_CheckExact(b))) {
    if (sizeof(Py_ssize_t) >= sizeof(long))
        return PyInt_AS_LONG(b);
    else
        return PyInt_AsSsize_t(b);
  }
#endif
  if (likely(PyLong_CheckExact(b))) {
    #if CYTHON_USE_PYLONG_INTERNALS
    const digit* digits = ((PyLongObject*)b)->ob_digit;
    const Py_ssize_t size = Py_SIZE(b);
    if (likely(__Pyx_sst_abs(size) <= 1)) {
        ival = likely(size) ? digits[0] : 0;
        if (size == -1) ival = -ival;
        return ival;
    } else {
      switch (size) {
         case 2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
      }
    }
    #endif
    return PyLong_AsSsize_t(b);
  }
  x = PyNumber_Index(b);
  if (!x) return -1;
  ival = PyInt_AsSsize_t(x);
  Py_DECREF(x);
  return ival;
}
static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b) {
  return b ? __Pyx_NewRef(Py_True) : __Pyx_NewRef(Py_False);
}
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t ival) {
    return PyInt_FromSize_t(ival);
}


#endif /* Py_PYTHON_H */
